var $jscomp={scope:{},executeAsyncGenerator:function($generator$$){function $passValueToGenerator$$($value$$){return $generator$$.next($value$$)}function $passErrorToGenerator$$($error$$){return $generator$$["throw"]($error$$)}return new Promise(function($resolve$$,$reject$$){function $handleGeneratorRecord$$($genRec$$){$genRec$$.done?$resolve$$($genRec$$.value):Promise.resolve($genRec$$.value).then($passValueToGenerator$$,$passErrorToGenerator$$).then($handleGeneratorRecord$$,$reject$$)}$handleGeneratorRecord$$($generator$$.next())})}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function($target$$,$property$$,$descriptor$$){if($descriptor$$.get||$descriptor$$.set)throw new TypeError("ES3 does not support getters and setters.");$target$$!=Array.prototype&&$target$$!=Object.prototype&&($target$$[$property$$]=$descriptor$$.value)};
$jscomp.getGlobal=function $$jscomp$getGlobal$($maybeGlobal$$){return"undefined"!=typeof window&&window===$maybeGlobal$$?$maybeGlobal$$:"undefined"!=typeof global&&null!=global?global:$maybeGlobal$$};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function $$jscomp$initSymbol$(){$jscomp.initSymbol=function $$jscomp$initSymbol$(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function $$jscomp$Symbol$($opt_description$$){return $jscomp.SYMBOL_PREFIX+($opt_description$$||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function $$jscomp$initSymbolIterator$(){$jscomp.initSymbol();var $symbolIterator$$=$jscomp.global.Symbol.iterator;$symbolIterator$$||($symbolIterator$$=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[$symbolIterator$$]&&$jscomp.defineProperty(Array.prototype,$symbolIterator$$,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function $$jscomp$initSymbolIterator$(){}};
$jscomp.arrayIterator=function $$jscomp$arrayIterator$($array$$){var $index$$=0;return $jscomp.iteratorPrototype(function(){return $index$$<$array$$.length?{done:!1,value:$array$$[$index$$++]}:{done:!0}})};$jscomp.iteratorPrototype=function $$jscomp$iteratorPrototype$($iterator$$){$jscomp.initSymbolIterator();$iterator$$={next:$iterator$$};$iterator$$[$jscomp.global.Symbol.iterator]=function $$iterator$$$$jscomp$global$Symbol$iterator$(){return this};return $iterator$$};
$jscomp.makeIterator=function $$jscomp$makeIterator$($iterable$$){$jscomp.initSymbolIterator();var $iteratorFunction$$=$iterable$$[Symbol.iterator];return $iteratorFunction$$?$iteratorFunction$$.call($iterable$$):$jscomp.arrayIterator($iterable$$)};
DrawioFile=function $DrawioFile$($ui$$,$data$$){mxEventSource.call(this);this.ui=$ui$$;this.shadowData=this.data=$data$$||"";this.shadowPages=null;this.stats={opened:0,merged:0,fileMerged:0,fileReloaded:0,conflicts:0,timeouts:0,saved:0,closed:0,destroyed:0,joined:0,checksumErrors:0,bytesSent:0,bytesReceived:0,msgSent:0,msgReceived:0,cacheHits:0,cacheMiss:0,cacheFail:0}};DrawioFile.SYNC=urlParams.sync||"auto";DrawioFile.LAST_WRITE_WINS=!0;mxUtils.extend(DrawioFile,mxEventSource);
DrawioFile.prototype.allChangesSavedKey="allChangesSaved";DrawioFile.prototype.autosaveDelay=1500;DrawioFile.prototype.maxAutosaveDelay=3E4;DrawioFile.prototype.autosaveThread=null;DrawioFile.prototype.lastAutosave=null;DrawioFile.prototype.lastSaved=null;DrawioFile.prototype.lastWarned=null;DrawioFile.prototype.warnInterval=6E5;DrawioFile.prototype.opened=null;DrawioFile.prototype.modified=!1;DrawioFile.prototype.data=null;DrawioFile.prototype.shadowData=null;DrawioFile.prototype.shadowPages=null;
DrawioFile.prototype.changeListenerEnabled=!0;DrawioFile.prototype.lastAutosaveRevision=null;DrawioFile.prototype.maxAutosaveRevisionDelay=3E5;DrawioFile.prototype.inConflictState=!1;DrawioFile.prototype.invalidChecksum=!1;DrawioFile.prototype.errorReportsEnabled=!1;DrawioFile.prototype.reportEnabled=!0;DrawioFile.prototype.getSize=function $DrawioFile$$getSize$(){return null!=this.data?this.data.length:0};
DrawioFile.prototype.synchronizeFile=function $DrawioFile$$synchronizeFile$($success$$,$error$$){this.savingFile?null!=$error$$&&$error$$({message:mxResources.get("busy")}):null!=this.sync?this.sync.fileChanged($success$$,$error$$):this.updateFile($success$$,$error$$)};
DrawioFile.prototype.updateFile=function $DrawioFile$$updateFile$($success$$,$error$$,$abort$$,$shadow$$){null!=$abort$$&&$abort$$()||(this.ui.getCurrentFile()!=this||this.invalidChecksum?null!=$error$$&&$error$$():this.getLatestVersion(mxUtils.bind(this,function($latestFile$$){try{null!=$abort$$&&$abort$$()||(this.ui.getCurrentFile()!=this||this.invalidChecksum?null!=$error$$&&$error$$():null!=$latestFile$$?this.mergeFile($latestFile$$,$success$$,$error$$,$shadow$$):this.reloadFile($success$$,$error$$))}catch($e$$){null!=
$error$$&&$error$$($e$$)}}),$error$$))};
DrawioFile.prototype.mergeFile=function $DrawioFile$$mergeFile$($file$$,$success$$,$error$$,$diffShadow_patchedDetails$$){var $reportError$$=!0;try{this.stats.fileMerged++;var $currentDetails_shadow$$=null!=this.shadowPages?this.shadowPages:this.ui.getPagesForNode(mxUtils.parseXml(this.shadowData).documentElement),$pages$$=this.ui.getPagesForNode(mxUtils.parseXml($file$$.data).documentElement);if(null!=$pages$$&&0<$pages$$.length){this.shadowPages=$pages$$;this.backupPatch=this.isModified()?this.ui.diffPages($currentDetails_shadow$$,
this.ui.pages):null;var $patches$$=[this.ui.diffPages(null!=$diffShadow_patchedDetails$$?$diffShadow_patchedDetails$$:$currentDetails_shadow$$,this.shadowPages)];if(!this.ignorePatches($patches$$)){var $patched$$=this.ui.patchPages($currentDetails_shadow$$,$patches$$[0]);$diffShadow_patchedDetails$$={};var $checksum$$=this.ui.getHashValueForPages($patched$$,$diffShadow_patchedDetails$$),$currentDetails_shadow$$={},$current$$=this.ui.getHashValueForPages(this.shadowPages,$currentDetails_shadow$$);
"1"==urlParams.test&&EditorUi.debug("File.mergeFile",[this],"backup",this.backupPatch,"patches",$patches$$,"checksum",$current$$==$checksum$$,$checksum$$);if(null!=$checksum$$&&$checksum$$!=$current$$){var $fileData$$=this.compressReportData(this.getAnonymizedXmlForPages($pages$$)),$data$$=this.compressReportData(this.getAnonymizedXmlForPages($patched$$)),$from$$=this.ui.hashValue($file$$.getCurrentEtag()),$to$$=this.ui.hashValue(this.getCurrentEtag());this.checksumError($error$$,$patches$$,"Shadow Details: "+
JSON.stringify($diffShadow_patchedDetails$$)+"\nChecksum: "+$checksum$$+"\nCurrent: "+$current$$+"\nCurrent Details: "+JSON.stringify($currentDetails_shadow$$)+"\nFrom: "+$from$$+"\nTo: "+$to$$+"\n\nFile Data:\n"+$fileData$$+"\nPatched Shadow:\n"+$data$$,null,"mergeFile");return}this.patch($patches$$,DrawioFile.LAST_WRITE_WINS?this.backupPatch:null)}}else throw $reportError$$=!1,Error(mxResources.get("notADiagramFile"));this.inConflictState=this.invalidChecksum=!1;this.setDescriptor($file$$.getDescriptor());
this.descriptorChanged();this.backupPatch=null;null!=$success$$&&$success$$()}catch($e$$){this.invalidChecksum=this.inConflictState=!0;this.descriptorChanged();null!=$error$$&&$error$$($e$$);try{if($reportError$$)if(this.errorReportsEnabled)this.sendErrorReport("Error in mergeFile",null,$e$$);else{var $user$$=this.getCurrentUser(),$uid$$=null!=$user$$?$user$$.id:"unknown";EditorUi.logError("Error in mergeFile",null,this.getMode()+"."+this.getId(),$uid$$,$e$$)}}catch($e2$$){}}};
DrawioFile.prototype.getAnonymizedXmlForPages=function $DrawioFile$$getAnonymizedXmlForPages$($pages$$){var $enc$$=new mxCodec(mxUtils.createXmlDocument()),$file$$=$enc$$.document.createElement("mxfile");if(null!=$pages$$)for(var $i$$=0;$i$$<$pages$$.length;$i$$++){var $temp$$=$enc$$.encode(new mxGraphModel($pages$$[$i$$].root));"1"!=urlParams.dev&&($temp$$=this.ui.anonymizeNode($temp$$,!0));$temp$$.setAttribute("id",$pages$$[$i$$].getId());$pages$$[$i$$].viewState&&this.ui.editor.graph.saveViewState($pages$$[$i$$].viewState,
$temp$$,!0);$file$$.appendChild($temp$$)}return mxUtils.getPrettyXml($file$$)};DrawioFile.prototype.compressReportData=function $DrawioFile$$compressReportData$($data$$,$limit$$,$max$$){$limit$$=null!=$limit$$?$limit$$:1E4;null!=$max$$&&null!=$data$$&&$data$$.length>$max$$?$data$$=$data$$.substring(0,$max$$)+"[...]":null!=$data$$&&$data$$.length>$limit$$&&($data$$=Graph.compress($data$$)+"\n");return $data$$};
DrawioFile.prototype.checksumError=function $DrawioFile$$checksumError$($error$jscomp$7_i$$,$patches$$,$details$$,$etag$$,$functionName$$){this.stats.checksumErrors++;this.invalidChecksum=this.inConflictState=!0;this.descriptorChanged();null!=this.sync&&this.sync.updateOnlineState();null!=$error$jscomp$7_i$$&&$error$jscomp$7_i$$();try{if(this.errorReportsEnabled){if(null!=$patches$$)for($error$jscomp$7_i$$=0;$error$jscomp$7_i$$<$patches$$.length;$error$jscomp$7_i$$++)this.ui.anonymizePatch($patches$$[$error$jscomp$7_i$$]);
var $fn$$=mxUtils.bind(this,function($file$$){var $json$$=this.compressReportData(JSON.stringify($patches$$,null,2));$file$$=null!=$file$$?this.compressReportData(this.getAnonymizedXmlForPages(this.ui.getPagesForNode(mxUtils.parseXml($file$$.data).documentElement)),25E3):"n/a";this.sendErrorReport("Checksum Error in "+$functionName$$+" "+this.getHash(),(null!=$details$$?$details$$:"")+"\n\nPatches:\n"+$json$$+(null!=$file$$?"\n\nRemote:\n"+$file$$:""),null,7E4)});null==$etag$$?$fn$$(null):this.getLatestVersion(mxUtils.bind(this,
function($file$$){null!=$file$$&&$file$$.getCurrentEtag()==$etag$$?$fn$$($file$$):$fn$$(null)}),function(){})}else{var $user$$=this.getCurrentUser(),$uid$$=null!=$user$$?$user$$.id:"unknown";EditorUi.logError("Checksum Error in "+$functionName$$+" "+this.getId(),null,this.getMode()+"."+this.getId(),$uid$$+"."+(null!=this.sync?this.sync.clientId:"nosync"));try{EditorUi.logEvent({category:"CHECKSUM-ERROR-SYNC-FILE-"+this.getHash(),action:$functionName$$,label:$uid$$+"."+(null!=this.sync?this.sync.clientId:
"nosync")})}catch($e$$){}}}catch($e$5$$){}};
DrawioFile.prototype.sendErrorReport=function $DrawioFile$$sendErrorReport$($title$$,$details$$,$error$$,$max$$){try{var $shadow$$=this.compressReportData(this.getAnonymizedXmlForPages(this.shadowPages),25E3),$data$$=this.compressReportData(this.getAnonymizedXmlForPages(this.ui.pages),25E3),$ext_user$$=this.getCurrentUser(),$uid$$=null!=$ext_user$$?this.ui.hashValue($ext_user$$.id):"unknown",$cid$$=null!=this.sync?this.sync.clientId:"no sync",$filename$$=this.getTitle(),$dot$$=$filename$$.lastIndexOf("."),
$ext_user$$="xml";0<$dot$$&&($ext_user$$=$filename$$.substring($dot$$));var $stack$$=null!=$error$$?$error$$.stack:Error().stack;EditorUi.sendReport($title$$+" "+(new Date).toISOString()+":\n\nBrowser="+navigator.userAgent+"\nFile="+this.ui.hashValue(this.getId())+" ("+this.getMode()+")"+(this.isModified()?" modified":"")+"\nSize/Type="+this.getSize()+" ("+$ext_user$$+")\nUser="+$uid$$+" ("+$cid$$+")\nPrefix="+this.ui.editor.graph.model.prefix+"\nSync="+DrawioFile.SYNC+(null!=this.sync?(this.sync.enabled?
" enabled":"")+(this.sync.isConnected()?" connected":""):"")+"\nPlugins="+(null!=mxSettings.settings?mxSettings.getPlugins():"null")+"\n\nStats:\n"+JSON.stringify(this.stats,null,2)+(null!=$details$$?"\n\n"+$details$$:"")+(null!=$error$$?"\n\nError: "+$error$$.message:"")+"\n\nStack:\n"+$stack$$+"\n\nShadow:\n"+$shadow$$+"\n\nData:\n"+$data$$,$max$$)}catch($e$$){}};
DrawioFile.prototype.reloadFile=function $DrawioFile$$reloadFile$($success$$,$error$$){try{this.ui.spinner.stop();var $fn$$=mxUtils.bind(this,function(){this.stats.fileReloaded++;this.reportEnabled=!1;var $viewState$$=this.ui.editor.graph.getViewState(),$selection$$=this.ui.editor.graph.getSelectionCells(),$page$$=this.ui.currentPage;this.ui.loadFile(this.getHash(),!0,null,mxUtils.bind(this,function(){if(null==this.ui.fileLoadedError){this.ui.restoreViewState($page$$,$viewState$$,$selection$$);null!=
this.backupPatch&&this.patch([this.backupPatch]);var $file$$=this.ui.getCurrentFile();null!=$file$$&&($file$$.stats=this.stats);null!=$success$$&&$success$$()}}),!0)});this.isModified()&&null==this.backupPatch?this.ui.confirm(mxResources.get("allChangesLost"),mxUtils.bind(this,function(){this.handleFileSuccess("manual"==DrawioFile.SYNC)}),$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$fn$$()}catch($e$$){null!=$error$$&&$error$$($e$$)}};
DrawioFile.prototype.copyFile=function $DrawioFile$$copyFile$($success$$,$error$$){this.ui.editor.editAsNew(this.ui.getFileData(!0),this.ui.getCopyFilename(this))};DrawioFile.prototype.ignorePatches=function $DrawioFile$$ignorePatches$($patches$$){for(var $ignore$$=!0,$i$$=0;$i$$<$patches$$.length&&$ignore$$;$i$$++)$ignore$$=$ignore$$&&0==Object.keys($patches$$[$i$$]).length;return $ignore$$};
DrawioFile.prototype.patch=function $DrawioFile$$patch$($patches$$,$resolver$$){var $undoMgr$$=this.ui.editor.undoManager,$history$$=$undoMgr$$.history.slice(),$nextAdd$$=$undoMgr$$.indexOfNextAdd,$graph$$=this.ui.editor.graph;$graph$$.container.style.visibility="hidden";var $prev$$=this.changeListenerEnabled;this.changeListenerEnabled=!1;var $fold$$=$graph$$.foldingEnabled,$math$$=$graph$$.mathEnabled,$redraw$$=$graph$$.cellRenderer.redraw;$graph$$.cellRenderer.redraw=function $$graph$$$cellRenderer$redraw$($state$$){$state$$.view.graph.isEditing($state$$.cell)&&
($state$$.view.graph.scrollCellToVisible($state$$.cell),$state$$.view.graph.cellEditor.resize());$redraw$$.apply(this,arguments)};$graph$$.model.beginUpdate();try{for(var $i$$=0;$i$$<$patches$$.length;$i$$++)this.ui.pages=this.ui.patchPages(this.ui.pages,$patches$$[$i$$],!0,$resolver$$,this.isModified());0==this.ui.pages.length&&this.ui.pages.push(this.ui.createPage());0>mxUtils.indexOf(this.ui.pages,this.ui.currentPage)&&this.ui.selectPage(this.ui.pages[0],!0)}finally{$graph$$.container.style.visibility=
"";$graph$$.model.endUpdate();$graph$$.cellRenderer.redraw=$redraw$$;this.changeListenerEnabled=$prev$$;$undoMgr$$.history=$history$$;$undoMgr$$.indexOfNextAdd=$nextAdd$$;$undoMgr$$.fireEvent(new mxEventObject(mxEvent.CLEAR));if(null==this.ui.currentPage||this.ui.currentPage.needsUpdate)$math$$!=$graph$$.mathEnabled?(this.ui.editor.updateGraphComponents(),$graph$$.refresh()):($fold$$!=$graph$$.foldingEnabled?$graph$$.view.revalidate():$graph$$.view.validate(),$graph$$.sizeDidChange());this.ui.updateTabContainer()}};
DrawioFile.prototype.save=function $DrawioFile$$save$($revision$$,$success$$,$error$$,$unloading$$,$overwrite$$,$manual$$){try{if(this.isEditable())if(!$overwrite$$&&this.invalidChecksum)if(null!=$error$$)$error$$({message:mxResources.get("checksum")});else throw Error(mxResources.get("checksum"));else this.updateFileData(),this.clearAutosave(),null!=$success$$&&$success$$();else if(null!=$error$$)$error$$({message:mxResources.get("readOnly")});else throw Error(mxResources.get("readOnly"));}catch($e$$){if(null!=
$error$$)$error$$($e$$);else throw $e$$;}};DrawioFile.prototype.updateFileData=function $DrawioFile$$updateFileData$(){this.setData(this.ui.getFileData(null,null,null,null,null,null,null,null,this))};DrawioFile.prototype.saveAs=function $DrawioFile$$saveAs$($filename$$,$success$$,$error$$){};DrawioFile.prototype.saveFile=function $DrawioFile$$saveFile$($title$$,$revision$$,$success$$,$error$$){};DrawioFile.prototype.getPublicUrl=function $DrawioFile$$getPublicUrl$($fn$$){$fn$$(null)};
DrawioFile.prototype.isRestricted=function $DrawioFile$$isRestricted$(){return!1};DrawioFile.prototype.isModified=function $DrawioFile$$isModified$(){return this.modified};DrawioFile.prototype.setModified=function $DrawioFile$$setModified$($value$$){this.modified=$value$$};DrawioFile.prototype.isAutosaveOptional=function $DrawioFile$$isAutosaveOptional$(){return!1};DrawioFile.prototype.isAutosave=function $DrawioFile$$isAutosave$(){return!this.inConflictState&&this.ui.editor.autosave};
DrawioFile.prototype.isRenamable=function $DrawioFile$$isRenamable$(){return!1};DrawioFile.prototype.rename=function $DrawioFile$$rename$($title$$,$success$$,$error$$){};DrawioFile.prototype.isMovable=function $DrawioFile$$isMovable$(){return!1};DrawioFile.prototype.move=function $DrawioFile$$move$($folderId$$,$success$$,$error$$){};DrawioFile.prototype.getHash=function $DrawioFile$$getHash$(){return""};DrawioFile.prototype.getId=function $DrawioFile$$getId$(){return""};
DrawioFile.prototype.isEditable=function $DrawioFile$$isEditable$(){return!this.ui.editor.isChromelessView()||this.ui.editor.editable};DrawioFile.prototype.getUi=function $DrawioFile$$getUi$(){return this.ui};DrawioFile.prototype.getTitle=function $DrawioFile$$getTitle$(){return""};DrawioFile.prototype.setData=function $DrawioFile$$setData$($data$$){this.data=$data$$};DrawioFile.prototype.getData=function $DrawioFile$$getData$(){return this.data};
DrawioFile.prototype.open=function $DrawioFile$$open$(){this.stats.opened++;var $data$$=this.getData();null!=$data$$&&(this.ui.setFileData($data$$),this.isModified()||(this.shadowData=mxUtils.getXml(this.ui.getXmlFileData()),this.shadowPages=null));this.installListeners();this.isSyncSupported()&&this.startSync()};DrawioFile.prototype.isSyncSupported=function $DrawioFile$$isSyncSupported$(){return!1};DrawioFile.prototype.isRevisionHistorySupported=function $DrawioFile$$isRevisionHistorySupported$(){return!1};
DrawioFile.prototype.getRevisions=function $DrawioFile$$getRevisions$($success$$,$error$$){$success$$(null)};DrawioFile.prototype.loadDescriptor=function $DrawioFile$$loadDescriptor$($success$$,$error$$){$success$$(null)};DrawioFile.prototype.loadPatchDescriptor=function $DrawioFile$$loadPatchDescriptor$($success$$,$error$$){this.loadDescriptor(mxUtils.bind(this,function($desc$$){$success$$($desc$$)}),$error$$)};
DrawioFile.prototype.patchDescriptor=function $DrawioFile$$patchDescriptor$($desc$$,$patch$$){this.setDescriptorEtag($desc$$,this.getDescriptorEtag($patch$$))};DrawioFile.prototype.startSync=function $DrawioFile$$startSync$(){"auto"!=DrawioFile.SYNC||"1"==urlParams.stealth||"1"!=urlParams.rt&&this.ui.editor.chromeless&&!this.ui.editor.editable||(null==this.sync&&(this.sync=new DrawioFileSync(this)),this.sync.start())};DrawioFile.prototype.isConflict=function $DrawioFile$$isConflict$(){return!1};
DrawioFile.prototype.getChannelId=function $DrawioFile$$getChannelId$(){return Graph.compress(this.getHash()).replace(/[\/ +]/g,"_")};DrawioFile.prototype.getChannelKey=function $DrawioFile$$getChannelKey$($desc$$){return null};DrawioFile.prototype.getCurrentUser=function $DrawioFile$$getCurrentUser$(){return null};DrawioFile.prototype.getLatestVersion=function $DrawioFile$$getLatestVersion$($success$$,$error$$){$success$$(null)};DrawioFile.prototype.getLastModifiedDate=function $DrawioFile$$getLastModifiedDate$(){return new Date};
DrawioFile.prototype.setCurrentEtag=function $DrawioFile$$setCurrentEtag$($etag$$){this.setDescriptorEtag(this.getDescriptor(),$etag$$)};DrawioFile.prototype.getCurrentEtag=function $DrawioFile$$getCurrentEtag$(){return this.getDescriptorEtag(this.getDescriptor())};DrawioFile.prototype.getDescriptor=function $DrawioFile$$getDescriptor$(){return null};DrawioFile.prototype.setDescriptor=function $DrawioFile$$setDescriptor$(){};
DrawioFile.prototype.setDescriptorEtag=function $DrawioFile$$setDescriptorEtag$($desc$$,$etag$$){};DrawioFile.prototype.getDescriptorEtag=function $DrawioFile$$getDescriptorEtag$($desc$$){return null};DrawioFile.prototype.getDescriptorSecret=function $DrawioFile$$getDescriptorSecret$($desc$$){return null};
DrawioFile.prototype.installListeners=function $DrawioFile$$installListeners$(){null==this.changeListener&&(this.changeListener=mxUtils.bind(this,function($sender$$,$eventObject$$){var $edit$$=null!=$eventObject$$?$eventObject$$.getProperty("edit"):null;!this.changeListenerEnabled||!this.isEditable()||null!=$edit$$&&$edit$$.ignoreEdit||this.fileChanged()}),this.ui.editor.graph.model.addListener(mxEvent.CHANGE,this.changeListener),this.ui.editor.graph.addListener("gridSizeChanged",this.changeListener),
this.ui.editor.graph.addListener("shadowVisibleChanged",this.changeListener),this.ui.addListener("pageFormatChanged",this.changeListener),this.ui.addListener("pageScaleChanged",this.changeListener),this.ui.addListener("backgroundColorChanged",this.changeListener),this.ui.addListener("backgroundImageChanged",this.changeListener),this.ui.addListener("foldingEnabledChanged",this.changeListener),this.ui.addListener("mathEnabledChanged",this.changeListener),this.ui.addListener("gridEnabledChanged",this.changeListener),
this.ui.addListener("guidesEnabledChanged",this.changeListener),this.ui.addListener("pageViewChanged",this.changeListener),this.ui.addListener("connectionPointsChanged",this.changeListener),this.ui.addListener("connectionArrowsChanged",this.changeListener))};
DrawioFile.prototype.addAllSavedStatus=function $DrawioFile$$addAllSavedStatus$($links_status$$){this.ui.statusContainer&&this.ui.getCurrentFile()===this&&($links_status$$=$links_status$$||mxUtils.htmlEntities(mxResources.get(this.allChangesSavedKey)),this.ui.editor.setStatus('<div title="'+$links_status$$+'">'+$links_status$$+"</div>"),$links_status$$=this.ui.statusContainer.getElementsByTagName("div"),$links_status$$[0]&&this.isRevisionHistorySupported()&&($links_status$$[0].style.cursor="pointer",
$links_status$$[0].style.textDecoration="underline",mxEvent.addListener($links_status$$[0],"click",mxUtils.bind(this,function(){this.ui.actions.get("revisionHistory").funct()}))))};DrawioFile.prototype.addUnsavedStatus=function $DrawioFile$$addUnsavedStatus$($err$$){};
DrawioFile.prototype.addConflictStatus=function $DrawioFile$$addConflictStatus$($fn$$,$message$$){this.invalidChecksum&&null==$message$$&&($message$$=mxResources.get("checksum"));this.setConflictStatus(mxUtils.htmlEntities(mxResources.get("fileChangedSync"))+(null!=$message$$&&""!=$message$$?" ("+mxUtils.htmlEntities($message$$)+")":""));this.ui.spinner.stop();this.clearAutosave();var $links$$=null!=this.ui.statusContainer?this.ui.statusContainer.getElementsByTagName("div"):null;null!=$links$$&&0<
$links$$.length?mxEvent.addListener($links$$[0],"click",mxUtils.bind(this,function($evt$$){"IMG"!=mxEvent.getSource($evt$$).nodeName&&$fn$$()})):this.ui.alert(mxUtils.htmlEntities(mxResources.get("fileChangedSync")),$fn$$)};
DrawioFile.prototype.setConflictStatus=function $DrawioFile$$setConflictStatus$($message$$){this.ui.editor.setStatus('<div title="'+$message$$+'" class="geStatusAlert geBlink" style="cursor:pointer;overflow:hidden;">'+$message$$+' <a href="https://desk.draw.io/support/solutions/articles/16000087947" target="_blank"><img border="0" style="margin-left:2px;cursor:help;opacity:0.5;width:16px;height:16px;" valign="bottom" src="'+Editor.helpImage+'" style=""/></a></div>')};
DrawioFile.prototype.showRefreshDialog=function $DrawioFile$$showRefreshDialog$($success$$,$error$$,$message$$){null==$message$$&&($message$$=mxResources.get("checksum"));this.ui.editor.isChromelessView()&&!this.ui.editor.editable?this.ui.alert(mxResources.get("fileChangedSync"),mxUtils.bind(this,function(){this.reloadFile($success$$,$error$$)})):(this.addConflictStatus(mxUtils.bind(this,function(){this.showRefreshDialog($success$$,$error$$)}),$message$$),this.ui.showError(mxResources.get("error")+
" ("+$message$$+")",mxResources.get("fileChangedSyncDialog"),mxResources.get("makeCopy"),mxUtils.bind(this,function(){this.copyFile($success$$,$error$$)}),null,mxResources.get("synchronize"),mxUtils.bind(this,function(){this.reloadFile($success$$,$error$$)}),mxResources.get("cancel"),mxUtils.bind(this,function(){this.ui.hideDialog()}),360,150))};
DrawioFile.prototype.showCopyDialog=function $DrawioFile$$showCopyDialog$($success$$,$error$$,$overwrite$$){this.invalidChecksum=this.inConflictState=!1;this.addUnsavedStatus();this.ui.showError(mxResources.get("externalChanges"),mxResources.get("fileChangedOverwriteDialog"),mxResources.get("makeCopy"),mxUtils.bind(this,function(){this.copyFile($success$$,$error$$)}),null,mxResources.get("overwrite"),$overwrite$$,mxResources.get("cancel"),mxUtils.bind(this,function(){this.ui.hideDialog()}),360,150)};
DrawioFile.prototype.showConflictDialog=function $DrawioFile$$showConflictDialog$($overwrite$$,$synchronize$$){this.ui.showError(mxResources.get("externalChanges"),mxResources.get("fileChangedSyncDialog"),mxResources.get("overwrite"),$overwrite$$,null,mxResources.get("synchronize"),$synchronize$$,mxResources.get("cancel"),mxUtils.bind(this,function(){this.ui.hideDialog();this.handleFileError(null,!1)}),340,150)};
DrawioFile.prototype.redirectToNewApp=function $DrawioFile$$redirectToNewApp$($error$$){this.ui.spinner.stop();if(!this.redirectDialogShowing){this.redirectDialogShowing=!0;var $url$$=window.location.protocol+"//"+window.location.host+"/"+this.ui.getSearch("create title mode url drive splash state".split(" "))+"#"+this.getHash(),$redirect$$=mxUtils.bind(this,function(){var $fn$$=mxUtils.bind(this,function(){this.redirectDialogShowing=!1;window.location.href==$url$$?window.location.reload():window.location.href=
$url$$});null==$error$$&&this.isModified()?this.ui.confirm(mxResources.get("allChangesLost"),mxUtils.bind(this,function(){this.redirectDialogShowing=!1}),$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$fn$$()});null!=$error$$?this.isModified()?this.ui.confirm(mxResources.get("redirectToNewApp"),mxUtils.bind(this,function(){this.redirectDialogShowing=!1;$error$$()}),$redirect$$,mxResources.get("cancel"),mxResources.get("discardChanges")):this.ui.confirm(mxResources.get("redirectToNewApp"),
$redirect$$,mxUtils.bind(this,function(){this.redirectDialogShowing=!1;$error$$()})):this.ui.alert(mxResources.get("redirectToNewApp"),$redirect$$)}};
DrawioFile.prototype.handleFileSuccess=function $DrawioFile$$handleFileSuccess$($saved$$){this.ui.spinner.stop();this.ui.getCurrentFile()==this&&(this.isModified()?this.fileChanged():$saved$$?(this.addAllSavedStatus(),null!=this.sync&&(this.sync.resetUpdateStatusThread(),this.sync.remoteFileChanged&&(this.sync.remoteFileChanged=!1,this.sync.fileChangedNotify()))):this.ui.editor.setStatus(""))};
DrawioFile.prototype.handleFileError=function $DrawioFile$$handleFileError$($err$$,$manual$$){this.ui.spinner.stop();if(this.ui.getCurrentFile()==this)if(this.inConflictState)this.handleConflictError($err$$,$manual$$);else if(this.isModified()&&this.addUnsavedStatus($err$$),$manual$$)this.ui.handleError($err$$,null!=$err$$?mxResources.get("errorSavingFile"):null);else if(!this.isModified()){var $msg$$=null!=$err$$?null!=$err$$.error?$err$$.error.message:$err$$.message:null;null!=$msg$$&&60<$msg$$.length&&
($msg$$=$msg$$.substring(0,60)+"...");this.ui.editor.setStatus('<div class="geStatusAlert" style="cursor:pointer;overflow:hidden;">'+mxUtils.htmlEntities(mxResources.get("error"))+(null!=$msg$$?" ("+mxUtils.htmlEntities($msg$$)+")":"")+"</div>")}else if(this.isModified()&&!$manual$$&&this.isAutosave())if(null==this.lastWarned)this.lastWarned=Date.now();else if(Date.now()-this.lastWarned>this.warnInterval){$msg$$="";if(null!=this.lastSaved){var $str$$=this.ui.timeSince(new Date(this.lastSaved));null!=
$str$$&&($msg$$=mxResources.get("lastSaved",[$str$$]))}this.ui.showError(mxResources.get("unsavedChanges"),$msg$$,mxResources.get("ignore"),mxUtils.bind(this,function(){this.lastWarned=Date.now();this.ui.hideDialog();EditorUi.logEvent({category:"IGNORE-WARN-SAVE-FILE-"+this.getHash()+"-size-"+this.getSize(),action:"ignore"})}),null,mxResources.get("save"),mxUtils.bind(this,function(){this.lastWarned=Date.now();this.ui.actions.get(null!=this.ui.mode&&this.isEditable()?"save":"saveAs").funct();EditorUi.logEvent({category:"SAVE-WARN-SAVE-FILE-"+
this.getHash()+"-size-"+this.getSize(),action:"save"})}),null,null,360,120)}};
DrawioFile.prototype.handleConflictError=function $DrawioFile$$handleConflictError$($err$$,$manual$$){var $success$$=mxUtils.bind(this,function(){this.handleFileSuccess(!0)}),$error$$=mxUtils.bind(this,function($err2$$){this.handleFileError($err2$$,!0)}),$overwrite$$=mxUtils.bind(this,function(){this.ui.spinner.spin(document.body,mxResources.get("saving"))&&(this.ui.editor.setStatus(""),this.save(!0,$success$$,$error$$,null,!0,this.constructor==GitHubFile&&null!=$err$$?$err$$.commitMessage:null))}),
$synchronize$$=mxUtils.bind(this,function(){this.ui.spinner.spin(document.body,mxResources.get("updatingDocument"))&&this.synchronizeFile(mxUtils.bind(this,function(){this.ui.spinner.stop();this.ui.spinner.spin(document.body,mxResources.get("saving"))&&this.save(!0,$success$$,$error$$,null,null,this.constructor==GitHubFile&&null!=$err$$?$err$$.commitMessage:null)}),$error$$)});"none"==DrawioFile.SYNC?this.showCopyDialog($success$$,$error$$,$overwrite$$):this.invalidChecksum?this.showRefreshDialog($success$$,
$error$$,this.getErrorMessage($err$$)):$manual$$?this.showConflictDialog($overwrite$$,$synchronize$$):this.addConflictStatus(mxUtils.bind(this,function(){this.ui.editor.setStatus(mxUtils.htmlEntities(mxResources.get("updatingDocument")));this.synchronizeFile($success$$,$error$$)}),this.getErrorMessage($err$$))};DrawioFile.prototype.getErrorMessage=function $DrawioFile$$getErrorMessage$($err$$){return null!=$err$$?null!=$err$$.error?$err$$.error.message:$err$$.message:null};
DrawioFile.prototype.fileChanged=function $DrawioFile$$fileChanged$(){this.setModified(!0);this.isAutosave()?(this.addAllSavedStatus(mxUtils.htmlEntities(mxResources.get("saving"))+"..."),this.autosave(this.autosaveDelay,this.maxAutosaveDelay,mxUtils.bind(this,function($resp$$){null==this.autosaveThread&&this.handleFileSuccess(!0)}),mxUtils.bind(this,function($err$$){this.handleFileError($err$$)}))):this.isAutosaveOptional()&&this.ui.editor.autosave||this.inConflictState||this.addUnsavedStatus()};
DrawioFile.prototype.fileSaved=function $DrawioFile$$fileSaved$($savedData$$,$lastDesc$$,$success$$,$error$$){this.lastSaved=new Date;try{this.stats.saved++,this.invalidChecksum=this.inConflictState=!1,null==this.sync?(this.shadowData=$savedData$$,this.shadowPages=null,null!=$success$$&&$success$$()):this.sync.fileSaved(this.ui.getPagesForNode(mxUtils.parseXml($savedData$$).documentElement),$lastDesc$$,$success$$,$error$$,$savedData$$)}catch($e$$){this.invalidChecksum=this.inConflictState=!0;this.descriptorChanged();
null!=$error$$&&$error$$($e$$);try{if(this.errorReportsEnabled)this.sendErrorReport("Error in fileSaved",null,$e$$);else{var $user$$=this.getCurrentUser(),$uid$$=null!=$user$$?$user$$.id:"unknown";EditorUi.logError("Error in fileSaved",null,this.getMode()+"."+this.getId(),$uid$$,$e$$)}}catch($e2$$){}}};
DrawioFile.prototype.autosave=function $DrawioFile$$autosave$($delay_tmp$$,$maxDelay$$,$success$$,$error$$){null==this.lastAutosave&&(this.lastAutosave=(new Date).getTime());$delay_tmp$$=(new Date).getTime()-this.lastAutosave<$maxDelay$$?$delay_tmp$$:0;this.clearAutosave();var $thread$$=window.setTimeout(mxUtils.bind(this,function(){this.lastAutosave=null;this.autosaveThread==$thread$$&&(this.autosaveThread=null);if(this.isModified()&&this.isAutosaveNow()){var $rev$$=this.isAutosaveRevision();$rev$$&&
(this.lastAutosaveRevision=(new Date).getTime());this.save($rev$$,mxUtils.bind(this,function($resp$$){this.autosaveCompleted();null!=$success$$&&$success$$($resp$$)}),mxUtils.bind(this,function($resp$$){null!=$error$$&&$error$$($resp$$)}))}else this.isModified()||this.ui.editor.setStatus(""),null!=$success$$&&$success$$(null)}),$delay_tmp$$);this.autosaveThread=$thread$$};DrawioFile.prototype.isAutosaveNow=function $DrawioFile$$isAutosaveNow$(){return!0};DrawioFile.prototype.autosaveCompleted=function $DrawioFile$$autosaveCompleted$(){};
DrawioFile.prototype.clearAutosave=function $DrawioFile$$clearAutosave$(){null!=this.autosaveThread&&(window.clearTimeout(this.autosaveThread),this.autosaveThread=null)};DrawioFile.prototype.isAutosaveRevision=function $DrawioFile$$isAutosaveRevision$(){var $now$$=(new Date).getTime();return null==this.lastAutosaveRevision||$now$$-this.lastAutosaveRevision>this.maxAutosaveRevisionDelay};DrawioFile.prototype.descriptorChanged=function $DrawioFile$$descriptorChanged$(){this.fireEvent(new mxEventObject("descriptorChanged"))};
DrawioFile.prototype.contentChanged=function $DrawioFile$$contentChanged$(){this.fireEvent(new mxEventObject("contentChanged"))};DrawioFile.prototype.close=function $DrawioFile$$close$($unloading$$){this.updateFileData();this.stats.closed++;this.isAutosave()&&this.isModified()&&this.save(this.isAutosaveRevision(),null,null,$unloading$$);this.destroy()};
DrawioFile.prototype.hasSameExtension=function $DrawioFile$$hasSameExtension$($title$$,$newTitle$$){if(null!=$title$$&&null!=$newTitle$$){var $dot$$=$title$$.lastIndexOf("."),$ext$$=0<$dot$$?$title$$.substring($dot$$):"",$dot$$=$newTitle$$.lastIndexOf(".");return $ext$$===(0<$dot$$?$newTitle$$.substring($dot$$):"")}return $title$$==$newTitle$$};
DrawioFile.prototype.removeListeners=function $DrawioFile$$removeListeners$(){null!=this.changeListener&&(this.ui.editor.graph.model.removeListener(this.changeListener),this.ui.editor.graph.removeListener(this.changeListener),this.ui.removeListener(this.changeListener),this.changeListener=null)};DrawioFile.prototype.destroy=function $DrawioFile$$destroy$(){this.stats.destroyed++;this.clearAutosave();this.removeListeners();null!=this.sync&&(this.sync.destroy(),this.sync=null)};
DrawioFile.prototype.commentsSupported=function $DrawioFile$$commentsSupported$(){return!1};DrawioFile.prototype.commentsRefreshNeeded=function $DrawioFile$$commentsRefreshNeeded$(){return!0};DrawioFile.prototype.commentsSaveNeeded=function $DrawioFile$$commentsSaveNeeded$(){return!1};DrawioFile.prototype.getComments=function $DrawioFile$$getComments$($success$$,$error$$){$success$$([])};DrawioFile.prototype.addComment=function $DrawioFile$$addComment$($comment$$,$success$$,$error$$){$success$$(Date.now())};
DrawioFile.prototype.canReplyToReplies=function $DrawioFile$$canReplyToReplies$(){return!0};DrawioFile.prototype.canComment=function $DrawioFile$$canComment$(){return!0};DrawioFile.prototype.newComment=function $DrawioFile$$newComment$($content$$,$user$$){return new DrawioComment(this,null,$content$$,Date.now(),Date.now(),!1,$user$$)};CSETFile=function $CSETFile$($ui$$,$data$$,$title$$,$temp$$){DrawioFile.call(this,$ui$$,$data$$);this.title=$title$$;this.mode=App.MODE_CSET};mxUtils.extend(CSETFile,DrawioFile);CSETFile.prototype.isAutosave=function $CSETFile$$isAutosave$(){return!1};CSETFile.prototype.getMode=function $CSETFile$$getMode$(){return this.mode};CSETFile.prototype.getTitle=function $CSETFile$$getTitle$(){return this.title};CSETFile.prototype.isRenamable=function $CSETFile$$isRenamable$(){return!0};
CSETFile.prototype.save=function $CSETFile$$save$($revision$$,$success$$,$error$$){this.saveAs(this.title,$success$$,$error$$)};CSETFile.prototype.saveAs=function $CSETFile$$saveAs$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};
CSETFile.prototype.saveFile=function $CSETFile$$saveFile$($data$jscomp$39_title$$,$revision$$,$success$$,$error$$){var $$jscomp$this$$=this;this.rename($data$jscomp$39_title$$);$data$jscomp$39_title$$=this.getData();var $empty$$=this.isEmpty();$data$jscomp$39_title$$&&!$empty$$?CsetUtils.PersistDataToCSET(this.ui.editor,$data$jscomp$39_title$$,$revision$$).then(function(){$$jscomp$this$$.setModified(!1);$$jscomp$this$$.contentChanged();$success$$&&$success$$()},function($reason$$){$error$$&&$error$$($reason$$)}):
$success$$&&$success$$()};CSETFile.prototype.rename=function $CSETFile$$rename$($title$$,$success$$,$error$$){this.title!==$title$$&&(this.title=$title$$,this.updateFileData(),this.descriptorChanged(),$success$$&&$success$$())};CSETFile.prototype.open=function $CSETFile$$open$(){var $data$$=this.getData();$data$$&&(this.ui.setFileData($data$$),this.isModified()||(this.shadowData=mxUtils.getXml(this.ui.getXmlFileData()),this.shadowPages=null));this.installListeners()};
CSETFile.prototype.emptyXmlRegx=/<mxGraphModel(?:\s+grid=["']\d+["'])?(?:\s+gridSize=["']\d+["'])?><root><mxCell id=["']0["']\s*(?:\/>|>(?:<mxCell id=["']1["'] parent=["']0["']\s+\/>)?<\/mxCell>)<\/root><\/mxGraphModel>/g;CSETFile.prototype.isDiagramEmpty=function $CSETFile$$isDiagramEmpty$(){return this.ui.isDiagramEmpty()};CSETFile.prototype.isXmlEmpty=function $CSETFile$$isXmlEmpty$(){var $data$$=this.getData();return!$data$$||this.emptyXmlRegx.test($data$$)};
CSETFile.prototype.isEmpty=function $CSETFile$$isEmpty$(){return this.isDiagramEmpty()||this.isXmlEmpty()};CSETFile.prototype.setFileData=function $CSETFile$$setFileData$($data$$,$success$$,$error$$){try{$data$$&&$data$$!==this.getData()&&(this.setData($data$$),this.ui.setFileData($data$$),this.shadowData=mxUtils.getXml(this.ui.getXmlFileData()),this.shadowPages=null,this.setModified(!0)),$success$$&&$success$$()}catch($err$$){$error$$&&$error$$($err$$)}};LocalFile=function $LocalFile$($ui$$,$data$$,$title$$,$temp$$){DrawioFile.call(this,$ui$$,$data$$);this.title=$title$$;this.mode=$temp$$?null:App.MODE_DEVICE};mxUtils.extend(LocalFile,DrawioFile);LocalFile.prototype.isAutosave=function $LocalFile$$isAutosave$(){return!1};LocalFile.prototype.getMode=function $LocalFile$$getMode$(){return this.mode};LocalFile.prototype.getTitle=function $LocalFile$$getTitle$(){return this.title};LocalFile.prototype.isRenamable=function $LocalFile$$isRenamable$(){return!0};
LocalFile.prototype.save=function $LocalFile$$save$($revision$$,$success$$,$error$$){this.saveAs(this.title,$success$$,$error$$)};LocalFile.prototype.saveAs=function $LocalFile$$saveAs$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};
LocalFile.prototype.saveFile=function $LocalFile$$saveFile$($title$$,$data$jscomp$44_revision$$,$success$$,$error$$){this.title=$title$$;this.updateFileData();$data$jscomp$44_revision$$=this.getData();var $binary$$=this.ui.useCanvasForExport&&/(\.png)$/i.test(this.getTitle()),$doSave$$=mxUtils.bind(this,function($data$$){if(this.ui.isOfflineApp()||this.ui.isLocalFileSave())this.ui.doSaveLocalFile($data$$,$title$$,$binary$$?"image/png":"text/xml",$binary$$);else if($data$$.length<MAX_REQUEST_SIZE){var $dot$jscomp$2_format$$=
$title$$.lastIndexOf("."),$dot$jscomp$2_format$$=0<$dot$jscomp$2_format$$?$title$$.substring($dot$jscomp$2_format$$+1):"xml";(new mxXmlRequest(SAVE_URL,"format="+$dot$jscomp$2_format$$+"&xml="+encodeURIComponent($data$$)+"&filename="+encodeURIComponent($title$$)+($binary$$?"&binary=1":""))).simulate(document,"_blank")}else this.ui.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup($data$$)}));this.setModified(!1);this.contentChanged();
null!=$success$$&&$success$$()});$binary$$?this.ui.getEmbeddedPng(mxUtils.bind(this,function($imageData$$){$doSave$$($imageData$$)}),$error$$,this.ui.getCurrentFile()!=this?this.getData():null):$doSave$$($data$jscomp$44_revision$$)};LocalFile.prototype.rename=function $LocalFile$$rename$($title$$,$success$$,$error$$){this.title=$title$$;this.descriptorChanged();null!=$success$$&&$success$$()};LocalFile.prototype.open=function $LocalFile$$open$(){this.ui.setFileData(this.getData());this.installListeners()};LocalLibrary=function $LocalLibrary$($ui$$,$data$$,$title$$){LocalFile.call(this,$ui$$,$data$$,$title$$)};mxUtils.extend(LocalLibrary,LocalFile);LocalLibrary.prototype.getHash=function $LocalLibrary$$getHash$(){return"F"+this.getTitle()};LocalLibrary.prototype.isAutosave=function $LocalLibrary$$isAutosave$(){return!1};LocalLibrary.prototype.saveAs=function $LocalLibrary$$saveAs$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};LocalLibrary.prototype.updateFileData=function $LocalLibrary$$updateFileData$(){};
LocalLibrary.prototype.open=function $LocalLibrary$$open$(){};StorageFile=function $StorageFile$($ui$$,$data$$,$title$$){DrawioFile.call(this,$ui$$,$data$$);this.title=$title$$};mxUtils.extend(StorageFile,DrawioFile);StorageFile.prototype.autosaveDelay=2E3;StorageFile.prototype.maxAutosaveDelay=2E4;StorageFile.prototype.getMode=function $StorageFile$$getMode$(){return App.MODE_BROWSER};StorageFile.prototype.isAutosaveOptional=function $StorageFile$$isAutosaveOptional$(){return!0};StorageFile.prototype.getHash=function $StorageFile$$getHash$(){return"L"+encodeURIComponent(this.getTitle())};
StorageFile.prototype.getTitle=function $StorageFile$$getTitle$(){return this.title};StorageFile.prototype.isRenamable=function $StorageFile$$isRenamable$(){return!0};StorageFile.prototype.save=function $StorageFile$$save$($revision$$,$success$$,$error$$){this.saveAs(this.getTitle(),$success$$,$error$$)};StorageFile.prototype.saveAs=function $StorageFile$$saveAs$($title$$,$success$$,$error$$){DrawioFile.prototype.save.apply(this,arguments);this.saveFile($title$$,!1,$success$$,$error$$)};
StorageFile.prototype.saveFile=function $StorageFile$$saveFile$($title$$,$revision$$,$success$$,$error$$){if(this.isEditable()){var $fn$$=mxUtils.bind(this,function(){this.isRenamable()&&(this.title=$title$$);try{this.ui.setLocalData(this.title,this.getData(),mxUtils.bind(this,function(){this.setModified(!1);this.contentChanged();null!=$success$$&&$success$$()}))}catch($e$$){null!=$error$$&&$error$$($e$$)}});this.isRenamable()&&"."==$title$$.charAt(0)&&null!=$error$$?$error$$({message:mxResources.get("invalidName")}):
this.ui.getLocalData($title$$,mxUtils.bind(this,function($data$$){this.isRenamable()&&this.getTitle()!=$title$$&&null!=$data$$?this.ui.confirm(mxResources.get("replaceIt",[$title$$]),$fn$$,$error$$):$fn$$()}))}else null!=$success$$&&$success$$()};
StorageFile.prototype.rename=function $StorageFile$$rename$($title$$,$success$$,$error$$){var $oldTitle$$=this.getTitle();$oldTitle$$!=$title$$?this.ui.getLocalData($title$$,mxUtils.bind(this,function($data$$){var $fn$$=mxUtils.bind(this,function(){this.title=$title$$;this.hasSameExtension($oldTitle$$,$title$$)||this.setData(this.ui.getFileData());this.saveFile($title$$,!1,mxUtils.bind(this,function(){this.ui.removeLocalData($oldTitle$$,$success$$)}),$error$$)});null!=$data$$?this.ui.confirm(mxResources.get("replaceIt",
[$title$$]),$fn$$,$error$$):$fn$$()})):$success$$()};StorageFile.prototype.open=function $StorageFile$$open$(){DrawioFile.prototype.open.apply(this,arguments);this.saveFile(this.getTitle())};StorageFile.prototype.getLatestVersion=function $StorageFile$$getLatestVersion$($success$$,$error$$){this.ui.getLocalData(this.title,mxUtils.bind(this,function($data$$){$success$$(new StorageFile(this.ui,$data$$,this.title))}))};
StorageFile.prototype.destroy=function $StorageFile$$destroy$(){DrawioFile.prototype.destroy.apply(this,arguments);null!=this.storageListener&&(mxEvent.removeListener(window,"storage",this.storageListener),this.storageListener=null)};StorageLibrary=function $StorageLibrary$($ui$$,$data$$,$title$$){StorageFile.call(this,$ui$$,$data$$,$title$$)};mxUtils.extend(StorageLibrary,StorageFile);StorageLibrary.prototype.isAutosave=function $StorageLibrary$$isAutosave$(){return!0};StorageLibrary.prototype.saveAs=function $StorageLibrary$$saveAs$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};StorageLibrary.prototype.getHash=function $StorageLibrary$$getHash$(){return"L"+encodeURIComponent(this.title)};
StorageLibrary.prototype.getTitle=function $StorageLibrary$$getTitle$(){return".scratchpad"==this.title?mxResources.get("scratchpad"):this.title};StorageLibrary.prototype.isRenamable=function $StorageLibrary$$isRenamable$($title$$,$success$$,$error$$){return".scratchpad"!=this.title};StorageLibrary.prototype.open=function $StorageLibrary$$open$(){};RemoteFile=function $RemoteFile$($ui$$,$data$$,$title$$){DrawioFile.call(this,$ui$$,$data$$);this.title=$title$$;this.mode=null};mxUtils.extend(RemoteFile,DrawioFile);RemoteFile.prototype.isAutosave=function $RemoteFile$$isAutosave$(){return!1};RemoteFile.prototype.getMode=function $RemoteFile$$getMode$(){return this.mode};RemoteFile.prototype.getTitle=function $RemoteFile$$getTitle$(){return this.title};RemoteFile.prototype.isRenamable=function $RemoteFile$$isRenamable$(){return!1};
RemoteFile.prototype.open=function $RemoteFile$$open$(){this.ui.setFileData(this.getData());this.installListeners()};RemoteLibrary=function $RemoteLibrary$($ui$$,$data$$,$libObj$$){RemoteFile.call(this,$ui$$,$data$$,$libObj$$.title);this.libObj=$libObj$$};mxUtils.extend(RemoteLibrary,LocalFile);RemoteLibrary.prototype.getHash=function $RemoteLibrary$$getHash$(){return"R"+encodeURIComponent(JSON.stringify([this.libObj.id,this.libObj.title,this.libObj.downloadUrl]))};RemoteLibrary.prototype.isEditable=function $RemoteLibrary$$isEditable$(){return!1};RemoteLibrary.prototype.isRenamable=function $RemoteLibrary$$isRenamable$(){return!1};
RemoteLibrary.prototype.isAutosave=function $RemoteLibrary$$isAutosave$(){return!1};RemoteLibrary.prototype.save=function $RemoteLibrary$$save$($revision$$,$success$$,$error$$){};RemoteLibrary.prototype.saveAs=function $RemoteLibrary$$saveAs$($title$$,$success$$,$error$$){};RemoteLibrary.prototype.updateFileData=function $RemoteLibrary$$updateFileData$(){};RemoteLibrary.prototype.open=function $RemoteLibrary$$open$(){};UrlLibrary=function $UrlLibrary$($fname_ui$$,$data$$,$title$$){StorageFile.call(this,$fname_ui$$,$data$$,$title$$);$fname_ui$$=$title$$;$data$$=$fname_ui$$.lastIndexOf("/");0<=$data$$&&($fname_ui$$=$fname_ui$$.substring($data$$+1));this.fname=$fname_ui$$};mxUtils.extend(UrlLibrary,StorageFile);UrlLibrary.prototype.getHash=function $UrlLibrary$$getHash$(){return"U"+encodeURIComponent(this.title)};UrlLibrary.prototype.getTitle=function $UrlLibrary$$getTitle$(){return this.fname};
UrlLibrary.prototype.isAutosave=function $UrlLibrary$$isAutosave$(){return!1};UrlLibrary.prototype.isEditable=function $UrlLibrary$$isEditable$($title$$,$success$$,$error$$){return!1};UrlLibrary.prototype.saveAs=function $UrlLibrary$$saveAs$($title$$,$success$$,$error$$){};UrlLibrary.prototype.open=function $UrlLibrary$$open$(){};/*
 mxClient.IS_IOS || */
var StorageDialog=function $StorageDialog$($editorUi$$,$fn$$,$rowLimit$$){function $addLogo$$($i$jscomp$8_img$$,$title$$,$mode$$,$clientName$$,$labels$$,$clientFn$$){function $initButton$$(){mxEvent.addListener($button$$,"click",null!=$clientFn$$?$clientFn$$:function(){$mode$$!=App.MODE_GOOGLE||$editorUi$$.isDriveDomain()?$mode$$==App.MODE_GOOGLE&&$editorUi$$.spinner.spin(document.body,mxResources.get("authorizing"))?$editorUi$$.drive.checkToken(mxUtils.bind(this,function(){$editorUi$$.spinner.stop();
$editorUi$$.setMode($mode$$,$cb$$.checked);$fn$$()})):$mode$$==App.MODE_ONEDRIVE&&$editorUi$$.spinner.spin(document.body,mxResources.get("authorizing"))?$editorUi$$.oneDrive.checkToken(mxUtils.bind(this,function(){$editorUi$$.spinner.stop();$editorUi$$.setMode($mode$$,$cb$$.checked);$fn$$()})):($editorUi$$.setMode($mode$$,$cb$$.checked),$fn$$()):window.location.hostname=DriveClient.prototype.newAppHostname})}var $button$$=document.createElement("a");$button$$.style.overflow="hidden";$button$$.style.display=
mxClient.IS_QUIRKS?"inline":"inline-block";$button$$.className="geBaseButton";$button$$.style.boxSizing="border-box";$button$$.style.fontSize="11px";$button$$.style.position="relative";$button$$.style.margin="4px";$button$$.style.padding="8px 10px 12px 10px";$button$$.style.width="88px";$button$$.style.height="100px";$button$$.style.whiteSpace="nowrap";$button$$.setAttribute("title",$title$$);mxClient.IS_QUIRKS&&($button$$.style.cssFloat="left",$button$$.style.zoom="1");var $label$$=document.createElement("div");
$label$$.style.textOverflow="ellipsis";$label$$.style.overflow="hidden";if(null!=$i$jscomp$8_img$$){var $logo$$=document.createElement("img");$logo$$.setAttribute("src",$i$jscomp$8_img$$);$logo$$.setAttribute("border","0");$logo$$.setAttribute("align","absmiddle");$logo$$.style.width="60px";$logo$$.style.height="60px";$logo$$.style.paddingBottom="6px";$button$$.appendChild($logo$$)}else $label$$.style.paddingTop="5px",$label$$.style.whiteSpace="normal",mxClient.IS_IOS?($button$$.style.padding="0px 10px 20px 10px",
$button$$.style.top="6px"):mxClient.IS_FF&&($label$$.style.paddingTop="0px",$label$$.style.marginTop="-2px");$button$$.appendChild($label$$);mxUtils.write($label$$,$title$$);if(null!=$labels$$)for($i$jscomp$8_img$$=0;$i$jscomp$8_img$$<$labels$$.length;$i$jscomp$8_img$$++)mxUtils.br($label$$),mxUtils.write($label$$,$labels$$[$i$jscomp$8_img$$]);if(null!=$clientName$$&&null==$editorUi$$[$clientName$$]){$logo$$.style.visibility="hidden";mxUtils.setOpacity($label$$,10);var $spinner$$=new Spinner({lines:12,
length:12,width:5,radius:10,rotate:0,color:"dark"==uiTheme?"#c0c0c0":"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,top:"40%",zIndex:2E9});$spinner$$.spin($button$$);var $timeout$$=window.setTimeout(function(){null==$editorUi$$[$clientName$$]&&($spinner$$.stop(),$button$$.style.display="none")},3E4);$editorUi$$.addListener("clientLoaded",mxUtils.bind(this,function($sender$$,$evt$$){null!=$editorUi$$[$clientName$$]&&$evt$$.getProperty("client")==$editorUi$$[$clientName$$]&&(window.clearTimeout($timeout$$),
mxUtils.setOpacity($label$$,100),$logo$$.style.visibility="",$spinner$$.stop(),$initButton$$(),"drive"==$clientName$$&&null!=$p3$$.parentNode&&$p3$$.parentNode.removeChild($p3$$))}))}else $initButton$$();$buttons$$.appendChild($button$$);++$count$$>=$rowLimit$$&&(mxUtils.br($buttons$$),$count$$=0)}$rowLimit$$=null!=$rowLimit$$?$rowLimit$$:2;var $div$$=document.createElement("div");$div$$.style.textAlign="center";$div$$.style.whiteSpace="nowrap";$div$$.style.paddingTop="0px";$div$$.style.paddingBottom=
"20px";var $elt$$=$editorUi$$.addLanguageMenu($div$$,!0);null!=$elt$$&&($elt$$.style.bottom=parseInt("28px")-3+"px");if(!$editorUi$$.isOffline()&&1<$editorUi$$.getServiceCount()){$elt$$=document.createElement("a");$elt$$.setAttribute("href","https://about.draw.io/support/");$elt$$.setAttribute("title",mxResources.get("help"));$elt$$.setAttribute("target","_blank");$elt$$.style.position="absolute";$elt$$.style.textDecoration="none";$elt$$.style.cursor="pointer";$elt$$.style.fontSize="12px";$elt$$.style.bottom=
"28px";$elt$$.style.left="26px";$elt$$.style.color="gray";var $icon_span$$=document.createElement("img");mxUtils.setOpacity($icon_span$$,50);$icon_span$$.style.height="16px";$icon_span$$.style.width="16px";$icon_span$$.setAttribute("border","0");$icon_span$$.setAttribute("valign","bottom");$icon_span$$.setAttribute("src",Editor.helpImage);$icon_span$$.style.marginRight="2px";$elt$$.appendChild($icon_span$$);mxUtils.write($elt$$,mxResources.get("help"));$div$$.appendChild($elt$$)}var $demo$$=document.createElement("div");
$demo$$.style.position="absolute";$demo$$.style.cursor="pointer";$demo$$.style.fontSize="12px";$demo$$.style.bottom="28px";$demo$$.style.color="gray";mxUtils.write($demo$$,mxResources.get("decideLater"));$editorUi$$.isOfflineApp()?$demo$$.style.right="20px":(mxUtils.setPrefixedStyle($demo$$.style,"transform","translate(-50%,0)"),$demo$$.style.left="50%");this.init=function $this$init$(){if(mxClient.IS_QUIRKS||8==document.documentMode)$demo$$.style.marginLeft=-Math.round($demo$$.clientWidth/2)+"px"};
$div$$.appendChild($demo$$);mxEvent.addListener($demo$$,"click",function(){$editorUi$$.hideDialog();var $prev$$=Editor.useLocalStorage;$editorUi$$.createFile($editorUi$$.defaultFilename,null,null,null,null,null,null,!0);Editor.useLocalStorage=$prev$$});var $buttons$$=document.createElement("div");mxClient.IS_QUIRKS&&($buttons$$.style.whiteSpace="nowrap",$buttons$$.style.cssFloat="left");$buttons$$.style.border="1px solid #d3d3d3";$buttons$$.style.borderWidth="1px 0px 1px 0px";$buttons$$.style.padding=
"12px 0px 12px 0px";var $cb$$=document.createElement("input");$cb$$.setAttribute("type","checkbox");$cb$$.setAttribute("checked","checked");$cb$$.defaultChecked=!0;var $count$$=0,$p3$$=document.createElement("p"),$elt$$=document.createElement("p");$elt$$.style.fontSize="16pt";$elt$$.style.padding="0px";$elt$$.style.paddingTop="4px";$elt$$.style.paddingBottom="16px";$elt$$.style.margin="0px";$elt$$.style.color="gray";mxUtils.write($elt$$,mxResources.get("saveDiagramsTo")+":");$div$$.appendChild($elt$$);
"function"===typeof window.DriveClient&&$addLogo$$(IMAGE_PATH+"/google-drive-logo.svg",mxResources.get("googleDrive"),App.MODE_GOOGLE,"drive");"function"===typeof window.OneDriveClient&&$addLogo$$(IMAGE_PATH+"/onedrive-logo.svg",mxResources.get("oneDrive"),App.MODE_ONEDRIVE,"oneDrive");$addLogo$$(IMAGE_PATH+"/osa_drive-harddisk.png",mxResources.get("device"),App.MODE_DEVICE);!isLocalStorage||"1"!=urlParams.browser&&"1"!=urlParams.offline||$addLogo$$(IMAGE_PATH+"/osa_database.png",mxResources.get("browser"),
App.MODE_BROWSER);$div$$.appendChild($buttons$$);$elt$$=document.createElement("p");$elt$$.style.marginTop="12px";$elt$$.style.marginBottom="6px";$elt$$.appendChild($cb$$);$icon_span$$=document.createElement("span");$icon_span$$.style.color="gray";$icon_span$$.style.fontSize="12px";mxUtils.write($icon_span$$," "+mxResources.get("rememberThisSetting"));$elt$$.appendChild($icon_span$$);mxUtils.br($elt$$);var $link_recent$$=$editorUi$$.getRecent();if(null!=$link_recent$$&&0<$link_recent$$.length){var $recentSelect$$=
document.createElement("select");$recentSelect$$.style.marginTop="8px";$recentSelect$$.style.width="140px";var $i$$=document.createElement("option");$i$$.setAttribute("value","");$i$$.setAttribute("selected","selected");$i$$.style.textAlign="center";mxUtils.write($i$$,mxResources.get("openRecent")+"...");$recentSelect$$.appendChild($i$$);for($i$$=0;$i$$<$link_recent$$.length;$i$$++)(function($entry$$){var $modeKey$$=$entry$$.mode;$modeKey$$==App.MODE_GOOGLE?$modeKey$$="googleDrive":$modeKey$$==App.MODE_ONEDRIVE&&
($modeKey$$="oneDrive");var $entryOption$$=document.createElement("option");$entryOption$$.setAttribute("value",$entry$$.id);mxUtils.write($entryOption$$,$entry$$.title+" ("+mxResources.get($modeKey$$)+")");$recentSelect$$.appendChild($entryOption$$)})($link_recent$$[$i$$]);$elt$$.appendChild($recentSelect$$);mxEvent.addListener($recentSelect$$,"change",function($evt$$){""!=$recentSelect$$.value&&$editorUi$$.loadFile($recentSelect$$.value)})}else $elt$$.style.marginTop="20px",$buttons$$.style.padding=
"30px 0px 26px 0px";!Graph.fileSupport||mxClient.IS_IE||mxClient.IS_IE11||($link_recent$$=document.createElement("div"),$link_recent$$.style.cursor="pointer",$link_recent$$.style.padding="18px 0px 6px 0px",$link_recent$$.style.fontSize="12px",$link_recent$$.style.color="gray",mxUtils.write($link_recent$$,mxResources.get("import")+": "+mxResources.get("gliffy")+", "+mxResources.get("formatVssx")+", "+mxResources.get("formatVsdx")+", "+mxResources.get("lucidchart")+"..."),mxEvent.addListener($link_recent$$,
"click",function(){if(null==$editorUi$$.storageFileInputElt){var $input$$=document.createElement("input");$input$$.setAttribute("type","file");mxEvent.addListener($input$$,"change",function(){null!=$input$$.files&&($editorUi$$.hideDialog(),$editorUi$$.openFiles($input$$.files,!0));$input$$.value=""});$input$$.style.display="none";document.body.appendChild($input$$);$editorUi$$.storageFileInputElt=$input$$}$editorUi$$.storageFileInputElt.click()}),$elt$$.appendChild($link_recent$$),$buttons$$.style.paddingBottom=
"4px");$buttons$$.appendChild($elt$$);mxEvent.addListener($icon_span$$,"click",function($evt$$){$cb$$.checked=!$cb$$.checked;mxEvent.consume($evt$$)});mxClient.IS_SVG&&isLocalStorage&&"0"!=urlParams.gapi&&(null==document.documentMode||10<=document.documentMode)&&window.setTimeout(function(){null==$editorUi$$.drive&&($p3$$.style.padding="8px",$p3$$.style.fontSize="9pt",$p3$$.style.marginTop="-14px",$p3$$.innerHTML='<a style="background-color:#dcdcdc;padding:5px;color:black;text-decoration:none;" href="https://plus.google.com/u/0/+DrawIo1/posts/1HTrfsb5wDN" target="_blank"><img border="0" src="'+
mxGraph.prototype.warningImage.src+'" align="top"> '+mxResources.get("googleDriveMissingClickHere")+"</a>",$div$$.appendChild($p3$$))},5E3);this.container=$div$$},SplashDialog=function $SplashDialog$($editorUi$$){var $div$$=document.createElement("div");$div$$.style.textAlign="center";var $driveUser_elt$jscomp$3_hd$jscomp$1_help$$=$editorUi$$.addLanguageMenu($div$$,!0);null!=$driveUser_elt$jscomp$3_hd$jscomp$1_help$$&&($driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.bottom="19px");$driveUser_elt$jscomp$3_hd$jscomp$1_help$$=
null;$driveUser_elt$jscomp$3_hd$jscomp$1_help$$=$editorUi$$.getServiceCount();if(!$editorUi$$.isOffline()&&1<$driveUser_elt$jscomp$3_hd$jscomp$1_help$$){$driveUser_elt$jscomp$3_hd$jscomp$1_help$$=document.createElement("a");$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.setAttribute("href","https://about.draw.io/support/");$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.setAttribute("title",mxResources.get("help"));$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.setAttribute("target","_blank");$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.position=
"absolute";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.fontSize="12px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.textDecoration="none";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.cursor="pointer";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.bottom="22px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.left="26px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.color="gray";var $addLogout_icon$jscomp$1_link$jscomp$1_logo$$=document.createElement("img");mxUtils.setOpacity($addLogout_icon$jscomp$1_link$jscomp$1_logo$$,
50);$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.height="16px";$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.width="16px";$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("border","0");$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("valign","bottom");$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("src",Editor.helpImage);$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.marginRight="2px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.appendChild($addLogout_icon$jscomp$1_link$jscomp$1_logo$$);
mxUtils.write($driveUser_elt$jscomp$3_hd$jscomp$1_help$$,mxResources.get("help"));$div$$.appendChild($driveUser_elt$jscomp$3_hd$jscomp$1_help$$)}$driveUser_elt$jscomp$3_hd$jscomp$1_help$$=document.createElement("p");$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.fontSize="16pt";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.padding="0px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.paddingTop="2px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.margin="0px";$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.style.color=
"gray";$addLogout_icon$jscomp$1_link$jscomp$1_logo$$=document.createElement("img");$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("border","0");$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("align","absmiddle");$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.width="40px";$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.height="40px";$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.marginRight="12px";$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.paddingBottom=
"4px";var $service$$="";$editorUi$$.mode==App.MODE_GOOGLE?($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=IMAGE_PATH+"/google-drive-logo.svg",$service$$=mxResources.get("googleDrive")):$editorUi$$.mode==App.MODE_DROPBOX?($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=IMAGE_PATH+"/dropbox-logo.svg",$service$$=mxResources.get("dropbox")):$editorUi$$.mode==App.MODE_ONEDRIVE?($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=IMAGE_PATH+"/onedrive-logo.svg",$service$$=mxResources.get("oneDrive")):
$editorUi$$.mode==App.MODE_GITHUB?($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=IMAGE_PATH+"/github-logo.svg",$service$$=mxResources.get("github")):$editorUi$$.mode==App.MODE_TRELLO?($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=IMAGE_PATH+"/trello-logo.svg",$service$$=mxResources.get("trello")):$editorUi$$.mode==App.MODE_BROWSER?($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=IMAGE_PATH+"/osa_database.png",$service$$=mxResources.get("browser")):($addLogout_icon$jscomp$1_link$jscomp$1_logo$$.src=
IMAGE_PATH+"/osa_drive-harddisk.png",$service$$=mxResources.get("device"));var $buttons$$=document.createElement("div");$buttons$$.style.margin="4px 0px 0px 0px";var $btn$$=document.createElement("button");$btn$$.className="geBigButton";$btn$$.style.overflow="hidden";$btn$$.style.width="340px";mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?($buttons$$.style.padding="42px 0px 56px 0px",$btn$$.style.marginBottom="12px"):($driveUser_elt$jscomp$3_hd$jscomp$1_help$$.appendChild($addLogout_icon$jscomp$1_link$jscomp$1_logo$$),
mxUtils.write($driveUser_elt$jscomp$3_hd$jscomp$1_help$$,$service$$),$div$$.appendChild($driveUser_elt$jscomp$3_hd$jscomp$1_help$$),$buttons$$.style.border="1px solid #d3d3d3",$buttons$$.style.borderWidth="1px 0px 1px 0px",$buttons$$.style.padding="18px 0px 24px 0px",$btn$$.style.marginBottom="8px");mxClient.IS_QUIRKS&&($buttons$$.style.whiteSpace="nowrap",$buttons$$.style.cssFloat="left");mxClient.IS_QUIRKS&&($btn$$.style.width="340px");mxUtils.write($btn$$,mxResources.get("createNewDiagram"));mxEvent.addListener($btn$$,
"click",function(){$editorUi$$.hideDialog();$editorUi$$.actions.get("new").funct()});$buttons$$.appendChild($btn$$);mxUtils.br($buttons$$);$btn$$=document.createElement("button");$btn$$.className="geBigButton";$btn$$.style.marginBottom="22px";$btn$$.style.overflow="hidden";$btn$$.style.width="340px";mxClient.IS_QUIRKS&&($btn$$.style.width="340px");mxUtils.write($btn$$,mxResources.get("openExistingDiagram"));mxEvent.addListener($btn$$,"click",function(){$editorUi$$.actions.get("open").funct()});$buttons$$.appendChild($btn$$);
$editorUi$$.mode==App.MODE_GOOGLE?mxResources.get("googleDrive"):$editorUi$$.mode==App.MODE_DROPBOX?mxResources.get("dropbox"):$editorUi$$.mode==App.MODE_ONEDRIVE?mxResources.get("oneDrive"):$editorUi$$.mode==App.MODE_GITHUB?mxResources.get("github"):$editorUi$$.mode==App.MODE_TRELLO?mxResources.get("trello"):$editorUi$$.mode==App.MODE_DEVICE?mxResources.get("device"):$editorUi$$.mode==App.MODE_BROWSER&&mxResources.get("browser");mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||($addLogout_icon$jscomp$1_link$jscomp$1_logo$$=
function $$addLogout_icon$jscomp$1_link$jscomp$1_logo$$$($logout$$){$btn$$.style.marginBottom="24px";var $link$$=document.createElement("a");$link$$.setAttribute("href","javascript:void(0)");$link$$.style.display="inline-block";$link$$.style.marginTop="6px";mxUtils.write($link$$,mxResources.get("signOut"));$btn$$.style.marginBottom="16px";$buttons$$.style.paddingBottom="18px";mxEvent.addListener($link$$,"click",function(){$editorUi$$.confirm(mxResources.get("areYouSure"),function(){$logout$$()})});
$buttons$$.appendChild($link$$)},$driveUser_elt$jscomp$3_hd$jscomp$1_help$$=null!=$editorUi$$.drive?$editorUi$$.drive.getUser():null,$editorUi$$.mode==App.MODE_GOOGLE&&null!=$driveUser_elt$jscomp$3_hd$jscomp$1_help$$?($btn$$.style.marginBottom="24px",$addLogout_icon$jscomp$1_link$jscomp$1_logo$$=document.createElement("a"),$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("href","javascript:void(0)"),$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.display="inline-block",$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.marginTop=
"6px",mxUtils.write($addLogout_icon$jscomp$1_link$jscomp$1_logo$$,mxResources.get("changeUser")+" ("+$driveUser_elt$jscomp$3_hd$jscomp$1_help$$.displayName+")"),$btn$$.style.marginBottom="16px",$buttons$$.style.paddingBottom="18px",mxEvent.addListener($addLogout_icon$jscomp$1_link$jscomp$1_logo$$,"click",function(){$editorUi$$.hideDialog();$editorUi$$.drive.clearUserId();$editorUi$$.drive.setUser(null);gapi.auth.signOut();$editorUi$$.setMode(App.MODE_GOOGLE);$editorUi$$.hideDialog();$editorUi$$.showSplash();
$editorUi$$.drive.authorize(!1,mxUtils.bind(this,mxUtils.bind(this,function(){$editorUi$$.hideDialog();$editorUi$$.showSplash()})),mxUtils.bind(this,function($resp$$){$editorUi$$.handleError($resp$$,null,function(){$editorUi$$.hideDialog();$editorUi$$.showSplash()})}))}),$buttons$$.appendChild($addLogout_icon$jscomp$1_link$jscomp$1_logo$$)):$editorUi$$.mode==App.MODE_ONEDRIVE&&null!=$editorUi$$.oneDrive?$addLogout_icon$jscomp$1_link$jscomp$1_logo$$(function(){$editorUi$$.oneDrive.logout()}):$editorUi$$.mode==
App.MODE_GITHUB&&null!=$editorUi$$.gitHub?$addLogout_icon$jscomp$1_link$jscomp$1_logo$$(function(){$editorUi$$.gitHub.logout();$editorUi$$.openLink("https://www.github.com/logout")}):$editorUi$$.mode==App.MODE_TRELLO&&null!=$editorUi$$.trello?$editorUi$$.trello.isAuthorized()&&$addLogout_icon$jscomp$1_link$jscomp$1_logo$$(function(){$editorUi$$.trello.logout()}):$editorUi$$.mode==App.MODE_DROPBOX&&null!=$editorUi$$.dropbox&&$addLogout_icon$jscomp$1_link$jscomp$1_logo$$(function(){$editorUi$$.dropbox.logout();
$editorUi$$.openLink("https://www.dropbox.com/logout")}),mxUtils.br($buttons$$),$addLogout_icon$jscomp$1_link$jscomp$1_logo$$=document.createElement("a"),$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.setAttribute("href","javascript:void(0)"),$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.display="inline-block",$addLogout_icon$jscomp$1_link$jscomp$1_logo$$.style.marginTop="8px",mxUtils.write($addLogout_icon$jscomp$1_link$jscomp$1_logo$$,mxResources.get("changeStorage")),mxEvent.addListener($addLogout_icon$jscomp$1_link$jscomp$1_logo$$,
"click",function(){$editorUi$$.hideDialog(!1);$editorUi$$.setMode(null);$editorUi$$.clearMode();$editorUi$$.showSplash(!0)}),$buttons$$.appendChild($addLogout_icon$jscomp$1_link$jscomp$1_logo$$));$div$$.appendChild($buttons$$);this.container=$div$$},EmbedDialog=function $EmbedDialog$($editorUi$$,$result$$,$timeout$$,$div$$,$previewFn$$,$buttons$jscomp$2_size$jscomp$12_title$$){$div$$=document.createElement("div");var $validUrl$$=/^https?:\/\//.test($result$$)||/^mailto:\/\//.test($result$$);null!=
$buttons$jscomp$2_size$jscomp$12_title$$?mxUtils.write($div$$,$buttons$jscomp$2_size$jscomp$12_title$$):mxUtils.write($div$$,mxResources.get(5E5>$result$$.length?$validUrl$$?"link":"mainEmbedNotice":"preview")+":");mxUtils.br($div$$);$buttons$jscomp$2_size$jscomp$12_title$$=document.createElement("div");$buttons$jscomp$2_size$jscomp$12_title$$.style.position="absolute";$buttons$jscomp$2_size$jscomp$12_title$$.style.top="30px";$buttons$jscomp$2_size$jscomp$12_title$$.style.right="30px";$buttons$jscomp$2_size$jscomp$12_title$$.style.color=
"gray";mxUtils.write($buttons$jscomp$2_size$jscomp$12_title$$,$editorUi$$.formatFileSize($result$$.length));$div$$.appendChild($buttons$jscomp$2_size$jscomp$12_title$$);var $text$$=document.createElement("textarea");$text$$.setAttribute("autocomplete","off");$text$$.setAttribute("autocorrect","off");$text$$.setAttribute("autocapitalize","off");$text$$.setAttribute("spellcheck","false");$text$$.style.marginTop="10px";$text$$.style.resize="none";$text$$.style.height="150px";$text$$.style.width="440px";
$text$$.style.border="1px solid gray";$text$$.value=mxResources.get("updatingDocument");$div$$.appendChild($text$$);mxUtils.br($div$$);this.init=function $this$init$(){window.setTimeout(function(){5E5>$result$$.length?($text$$.value=$result$$,$text$$.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$text$$.select():document.execCommand("selectAll",!1,null)):($text$$.setAttribute("readonly","true"),$text$$.value=$result$$.substring(0,340)+"... ("+mxResources.get("drawingTooLarge")+
")")},0)};$buttons$jscomp$2_size$jscomp$12_title$$=document.createElement("div");$buttons$jscomp$2_size$jscomp$12_title$$.style.position="absolute";$buttons$jscomp$2_size$jscomp$12_title$$.style.bottom="36px";$buttons$jscomp$2_size$jscomp$12_title$$.style.right="32px";var $previewBtn$$=null;!EmbedDialog.showPreviewOption||mxClient.IS_CHROMEAPP&&!$validUrl$$||navigator.standalone||!($validUrl$$||mxClient.IS_SVG&&(null==document.documentMode||9<document.documentMode))||($previewBtn$$=mxUtils.button(mxResources.get(5E5>
$result$$.length?"preview":"openInNewWindow"),function(){var $value$$=5E5>$result$$.length?$text$$.value:$result$$;if(null!=$previewFn$$)$previewFn$$($value$$);else if($validUrl$$)try{var $win$$=$editorUi$$.openLink($value$$);null!=$win$$&&(null==$timeout$$||0<$timeout$$)&&window.setTimeout(mxUtils.bind(this,function(){null!=$win$$&&null!=$win$$.location.href&&$win$$.location.href.substring(0,8)!=$value$$.substring(0,8)&&($win$$.close(),$editorUi$$.handleError({message:mxResources.get("drawingTooLarge")}))}),
$timeout$$||500)}catch($e$$){$editorUi$$.handleError({message:$e$$.message||mxResources.get("drawingTooLarge")})}else{var $doc_wnd$$=window.open(),$doc_wnd$$=null!=$doc_wnd$$?$doc_wnd$$.document:null;null!=$doc_wnd$$?($doc_wnd$$.writeln("<html><head><title>"+encodeURIComponent(mxResources.get("preview"))+'</title><meta charset="utf-8"></head><body>'+$result$$+"</body></html>"),$doc_wnd$$.close()):$editorUi$$.handleError({message:mxResources.get("errorUpdatingPreview")})}}),$previewBtn$$.className=
"geBtn",$buttons$jscomp$2_size$jscomp$12_title$$.appendChild($previewBtn$$));if(!$validUrl$$||7500<$result$$.length){var $closeBtn_downloadBtn_img$$=mxUtils.button(mxResources.get("download"),function(){$editorUi$$.hideDialog();$editorUi$$.saveData("embed.txt","txt",$result$$,"text/plain")});$closeBtn_downloadBtn_img$$.className="geBtn";$buttons$jscomp$2_size$jscomp$12_title$$.appendChild($closeBtn_downloadBtn_img$$)}if($validUrl$$&&(!$editorUi$$.isOffline()||mxClient.IS_CHROMEAPP)){if(51200>$result$$.length){var $copyBtn_fbBtn_tweetBtn$$=
mxUtils.button("",function(){try{var $url$$="https://www.facebook.com/sharer.php?p[url]="+encodeURIComponent($text$$.value);$editorUi$$.openLink($url$$)}catch($e$$){$editorUi$$.handleError({message:$e$$.message||mxResources.get("drawingTooLarge")})}}),$closeBtn_downloadBtn_img$$=document.createElement("img");$closeBtn_downloadBtn_img$$.setAttribute("src",Editor.facebookImage);$closeBtn_downloadBtn_img$$.setAttribute("width","18");$closeBtn_downloadBtn_img$$.setAttribute("height","18");$closeBtn_downloadBtn_img$$.setAttribute("border",
"0");$copyBtn_fbBtn_tweetBtn$$.appendChild($closeBtn_downloadBtn_img$$);$copyBtn_fbBtn_tweetBtn$$.setAttribute("title",mxResources.get("facebook")+" ("+$editorUi$$.formatFileSize(51200)+" max)");$copyBtn_fbBtn_tweetBtn$$.style.verticalAlign="bottom";$copyBtn_fbBtn_tweetBtn$$.style.paddingTop="4px";$copyBtn_fbBtn_tweetBtn$$.style.minWidth="46px";$copyBtn_fbBtn_tweetBtn$$.className="geBtn";$buttons$jscomp$2_size$jscomp$12_title$$.appendChild($copyBtn_fbBtn_tweetBtn$$)}7168>$result$$.length&&($copyBtn_fbBtn_tweetBtn$$=
mxUtils.button("",function(){try{var $url$$="https://twitter.com/intent/tweet?text="+encodeURIComponent("Check out the diagram I made using @drawio")+"&url="+encodeURIComponent($text$$.value);$editorUi$$.openLink($url$$)}catch($e$$){$editorUi$$.handleError({message:$e$$.message||mxResources.get("drawingTooLarge")})}}),$closeBtn_downloadBtn_img$$=document.createElement("img"),$closeBtn_downloadBtn_img$$.setAttribute("src",Editor.tweetImage),$closeBtn_downloadBtn_img$$.setAttribute("width","18"),$closeBtn_downloadBtn_img$$.setAttribute("height",
"18"),$closeBtn_downloadBtn_img$$.setAttribute("border","0"),$closeBtn_downloadBtn_img$$.style.marginBottom="5px",$copyBtn_fbBtn_tweetBtn$$.appendChild($closeBtn_downloadBtn_img$$),$copyBtn_fbBtn_tweetBtn$$.setAttribute("title",mxResources.get("twitter")+" ("+$editorUi$$.formatFileSize(7168)+" max)"),$copyBtn_fbBtn_tweetBtn$$.style.verticalAlign="bottom",$copyBtn_fbBtn_tweetBtn$$.style.paddingTop="4px",$copyBtn_fbBtn_tweetBtn$$.style.minWidth="46px",$copyBtn_fbBtn_tweetBtn$$.className="geBtn",$buttons$jscomp$2_size$jscomp$12_title$$.appendChild($copyBtn_fbBtn_tweetBtn$$))}$closeBtn_downloadBtn_img$$=
mxUtils.button(mxResources.get("close"),function(){$editorUi$$.hideDialog()});$buttons$jscomp$2_size$jscomp$12_title$$.appendChild($closeBtn_downloadBtn_img$$);$copyBtn_fbBtn_tweetBtn$$=mxUtils.button(mxResources.get("copy"),function(){$text$$.focus();mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$text$$.select():document.execCommand("selectAll",!1,null);document.execCommand("copy");$editorUi$$.alert(mxResources.get("copiedToClipboard"))});5E5>$result$$.length?mxClient.IS_SF||
null!=document.documentMode?$closeBtn_downloadBtn_img$$.className="geBtn gePrimaryBtn":($buttons$jscomp$2_size$jscomp$12_title$$.appendChild($copyBtn_fbBtn_tweetBtn$$),$copyBtn_fbBtn_tweetBtn$$.className="geBtn gePrimaryBtn",$closeBtn_downloadBtn_img$$.className="geBtn"):($buttons$jscomp$2_size$jscomp$12_title$$.appendChild($previewBtn$$),$closeBtn_downloadBtn_img$$.className="geBtn",$previewBtn$$.className="geBtn gePrimaryBtn");$div$$.appendChild($buttons$jscomp$2_size$jscomp$12_title$$);this.container=
$div$$};EmbedDialog.showPreviewOption=!0;
var GoogleSitesDialog=function $GoogleSitesDialog$($editorUi$$,$publicUrl$$){function $update$$(){var $h$jscomp$6_title$$=null!=$file$$&&null!=$file$$.getTitle()?$file$$.getTitle():this.defaultFilename;if($embedCheckBox$$.checked&&""!=$urlInput$$.value){var $gurl$$="https://www.draw.io/gadget.xml?type=4&diagram="+encodeURIComponent(mxUtils.htmlEntities($urlInput$$.value));null!=$h$jscomp$6_title$$&&($gurl$$+="&title="+encodeURIComponent($h$jscomp$6_title$$));0<$s$$.length&&($gurl$$+="&s="+$s$$);""!=
$borderInput$$.value&&"0"!=$borderInput$$.value&&($gurl$$+="&border="+$borderInput$$.value);""!=$heightInput$$.value&&($gurl$$+="&height="+$heightInput$$.value);$gurl$$+="&pan="+($panCheckBox$$.checked?"1":"0");$gurl$$+="&zoom="+($zoomCheckBox$$.checked?"1":"0");$gurl$$+="&fit="+($fitCheckBox$$.checked?"1":"0");$gurl$$+="&resize="+($resizeCheckBox$$.checked?"1":"0");$gurl$$+="&x0="+Number($topInput$$.value);$gurl$$+="&y0="+$y0$$;$graph$$.mathEnabled&&($gurl$$+="&math=1");$editBlankCheckBox$$.checked?
$gurl$$+="&edit=_blank":$editCheckBox$$.checked&&($gurl$$+="&edit="+encodeURIComponent(mxUtils.htmlEntities(window.location.href)));$gadgetInput$$.value=$gurl$$}else $file$$.constructor==DriveFile||$file$$.constructor==DropboxFile?($gurl$$="https://www.draw.io/gadget.xml?embed=0&diagram=",""!=$urlInput$$.value?$gurl$$+=encodeURIComponent(mxUtils.htmlEntities($urlInput$$.value))+"&type=3":($gurl$$+=$file$$.getHash().substring(1),$gurl$$=$file$$.constructor==DropboxFile?$gurl$$+"&type=2":$gurl$$+"&type=1"),
null!=$h$jscomp$6_title$$&&($gurl$$+="&title="+encodeURIComponent($h$jscomp$6_title$$)),""!=$heightInput$$.value&&($h$jscomp$6_title$$=parseInt($heightInput$$.value)+parseInt($topInput$$.value),$gurl$$+="&height="+$h$jscomp$6_title$$),$gadgetInput$$.value=$gurl$$):$gadgetInput$$.value=""}var $div$$=document.createElement("div"),$graph$$=$editorUi$$.editor.graph,$bounds_buttons$$=$graph$$.getGraphBounds(),$closeBtn$jscomp$1_scale$$=$graph$$.view.scale,$x0$$=Math.floor($bounds_buttons$$.x/$closeBtn$jscomp$1_scale$$-
$graph$$.view.translate.x),$y0$$=Math.floor($bounds_buttons$$.y/$closeBtn$jscomp$1_scale$$-$graph$$.view.translate.y);mxUtils.write($div$$,mxResources.get("googleGadget")+":");mxUtils.br($div$$);var $gadgetInput$$=document.createElement("input");$gadgetInput$$.setAttribute("type","text");$gadgetInput$$.style.marginBottom="8px";$gadgetInput$$.style.marginTop="2px";$gadgetInput$$.style.width="410px";$div$$.appendChild($gadgetInput$$);mxUtils.br($div$$);this.init=function $this$init$(){$gadgetInput$$.focus();
mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$gadgetInput$$.select():document.execCommand("selectAll",!1,null)};mxUtils.write($div$$,mxResources.get("top")+":");var $topInput$$=document.createElement("input");$topInput$$.setAttribute("type","text");$topInput$$.setAttribute("size","4");$topInput$$.style.marginRight="16px";$topInput$$.style.marginLeft="4px";$topInput$$.value=$x0$$;$div$$.appendChild($topInput$$);mxUtils.write($div$$,mxResources.get("height")+":");var $heightInput$$=
document.createElement("input");$heightInput$$.setAttribute("type","text");$heightInput$$.setAttribute("size","4");$heightInput$$.style.marginLeft="4px";$heightInput$$.value=Math.ceil($bounds_buttons$$.height/$closeBtn$jscomp$1_scale$$);$div$$.appendChild($heightInput$$);mxUtils.br($div$$);$bounds_buttons$$=document.createElement("hr");$bounds_buttons$$.setAttribute("size","1");$bounds_buttons$$.style.marginBottom="16px";$bounds_buttons$$.style.marginTop="16px";$div$$.appendChild($bounds_buttons$$);
mxUtils.write($div$$,mxResources.get("publicDiagramUrl")+":");mxUtils.br($div$$);var $urlInput$$=document.createElement("input");$urlInput$$.setAttribute("type","text");$urlInput$$.setAttribute("size","28");$urlInput$$.style.marginBottom="8px";$urlInput$$.style.marginTop="2px";$urlInput$$.style.width="410px";$urlInput$$.value=$publicUrl$$||"";$div$$.appendChild($urlInput$$);mxUtils.br($div$$);mxUtils.write($div$$,mxResources.get("borderWidth")+":");var $borderInput$$=document.createElement("input");
$borderInput$$.setAttribute("type","text");$borderInput$$.setAttribute("size","3");$borderInput$$.style.marginBottom="8px";$borderInput$$.style.marginLeft="4px";$borderInput$$.value="0";$div$$.appendChild($borderInput$$);mxUtils.br($div$$);var $panCheckBox$$=document.createElement("input");$panCheckBox$$.setAttribute("type","checkbox");$panCheckBox$$.setAttribute("checked","checked");$panCheckBox$$.defaultChecked=!0;$panCheckBox$$.style.marginLeft="16px";$div$$.appendChild($panCheckBox$$);mxUtils.write($div$$,
mxResources.get("pan")+" ");var $zoomCheckBox$$=document.createElement("input");$zoomCheckBox$$.setAttribute("type","checkbox");$zoomCheckBox$$.setAttribute("checked","checked");$zoomCheckBox$$.defaultChecked=!0;$zoomCheckBox$$.style.marginLeft="8px";$div$$.appendChild($zoomCheckBox$$);mxUtils.write($div$$,mxResources.get("zoom")+" ");var $editCheckBox$$=document.createElement("input");$editCheckBox$$.setAttribute("type","checkbox");$editCheckBox$$.style.marginLeft="8px";$editCheckBox$$.setAttribute("title",
window.location.href);$div$$.appendChild($editCheckBox$$);mxUtils.write($div$$,mxResources.get("edit")+" ");var $editBlankCheckBox$$=document.createElement("input");$editBlankCheckBox$$.setAttribute("type","checkbox");$editBlankCheckBox$$.style.marginLeft="8px";$div$$.appendChild($editBlankCheckBox$$);mxUtils.write($div$$,mxResources.get("asNew")+" ");mxUtils.br($div$$);var $resizeCheckBox$$=document.createElement("input");$resizeCheckBox$$.setAttribute("type","checkbox");$resizeCheckBox$$.setAttribute("checked",
"checked");$resizeCheckBox$$.defaultChecked=!0;$resizeCheckBox$$.style.marginLeft="16px";$div$$.appendChild($resizeCheckBox$$);mxUtils.write($div$$,mxResources.get("resize")+" ");var $fitCheckBox$$=document.createElement("input");$fitCheckBox$$.setAttribute("type","checkbox");$fitCheckBox$$.style.marginLeft="8px";$div$$.appendChild($fitCheckBox$$);mxUtils.write($div$$,mxResources.get("fit")+" ");var $embedCheckBox$$=document.createElement("input");$embedCheckBox$$.setAttribute("type","checkbox");
$embedCheckBox$$.style.marginLeft="8px";$div$$.appendChild($embedCheckBox$$);mxUtils.write($div$$,mxResources.get("embed")+" ");var $s$$=$editorUi$$.getBasenames().join(";"),$file$$=$editorUi$$.getCurrentFile();mxEvent.addListener($panCheckBox$$,"change",$update$$);mxEvent.addListener($zoomCheckBox$$,"change",$update$$);mxEvent.addListener($resizeCheckBox$$,"change",$update$$);mxEvent.addListener($fitCheckBox$$,"change",$update$$);mxEvent.addListener($editCheckBox$$,"change",$update$$);mxEvent.addListener($editBlankCheckBox$$,
"change",$update$$);mxEvent.addListener($embedCheckBox$$,"change",$update$$);mxEvent.addListener($heightInput$$,"change",$update$$);mxEvent.addListener($topInput$$,"change",$update$$);mxEvent.addListener($borderInput$$,"change",$update$$);mxEvent.addListener($urlInput$$,"change",$update$$);$update$$();mxEvent.addListener($gadgetInput$$,"click",function(){$gadgetInput$$.focus();mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$gadgetInput$$.select():document.execCommand("selectAll",
!1,null)});$bounds_buttons$$=document.createElement("div");$bounds_buttons$$.style.paddingTop="12px";$bounds_buttons$$.style.textAlign="right";$closeBtn$jscomp$1_scale$$=mxUtils.button(mxResources.get("close"),function(){$editorUi$$.hideDialog()});$closeBtn$jscomp$1_scale$$.className="geBtn gePrimaryBtn";$bounds_buttons$$.appendChild($closeBtn$jscomp$1_scale$$);$div$$.appendChild($bounds_buttons$$);this.container=$div$$},CreateGraphDialog=function $CreateGraphDialog$($editorUi$$,$title$$,$type$$){var $div$$=
document.createElement("div");$div$$.style.textAlign="right";this.init=function $this$init$(){var $container$$=document.createElement("div");$container$$.style.position="relative";$container$$.style.border="1px solid gray";$container$$.style.width="100%";$container$$.style.height="360px";$container$$.style.overflow="hidden";$container$$.style.marginBottom="16px";mxEvent.disableContextMenu($container$$);$div$$.appendChild($container$$);var $graph$$=new Graph($container$$);$graph$$.setCellsCloneable(!0);
$graph$$.setPanning(!0);$graph$$.setAllowDanglingEdges(!1);$graph$$.connectionHandler.select=!1;$graph$$.view.setTranslate(20,20);$graph$$.border=20;$graph$$.panningHandler.useLeftButtonForPanning=!0;var $edgeStyle$$="curved=1;";$graph$$.cellRenderer.installCellOverlayListeners=function $$graph$$$cellRenderer$installCellOverlayListeners$($state$$,$overlay$$,$shape$$){mxCellRenderer.prototype.installCellOverlayListeners.apply(this,arguments);mxEvent.addListener($shape$$.node,mxClient.IS_POINTER?"pointerdown":
"mousedown",function($evt$$){$overlay$$.fireEvent(new mxEventObject("pointerdown","event",$evt$$,"state",$state$$))});!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&mxEvent.addListener($shape$$.node,"touchstart",function($evt$$){$overlay$$.fireEvent(new mxEventObject("pointerdown","event",$evt$$,"state",$state$$))})};$graph$$.getAllConnectionConstraints=function $$graph$$$getAllConnectionConstraints$(){return null};$graph$$.connectionHandler.marker.highlight.keepOnTop=!1;$graph$$.connectionHandler.createEdgeState=
function $$graph$$$connectionHandler$createEdgeState$($edge_me$$){$edge_me$$=$graph$$.createEdge(null,null,null,null,null,$edgeStyle$$);return new mxCellState(this.graph.view,$edge_me$$,this.graph.getCellStyle($edge_me$$))};var $parent$$=$graph$$.getDefaultParent(),$addOverlay$$=mxUtils.bind(this,function($cell$$){var $overlay$$=new mxCellOverlay(this.connectImage,"Add outgoing");$overlay$$.cursor="hand";$overlay$$.addListener(mxEvent.CLICK,function($sender$$,$evt2$$){$graph$$.connectionHandler.reset();
$graph$$.clearSelection();var $geo$$=$graph$$.getCellGeometry($cell$$),$v2$$;$executeLayout$$(function(){$v2$$=$graph$$.insertVertex($parent$$,null,"Entry",$geo$$.x,$geo$$.y,80,30,"rounded=1;");$addOverlay$$($v2$$);$graph$$.view.refresh($v2$$);$graph$$.insertEdge($parent$$,null,"",$cell$$,$v2$$,$edgeStyle$$)},function(){$graph$$.scrollCellToVisible($v2$$)})});$overlay$$.addListener("pointerdown",function($sender$$,$eo$$){var $evt2$$=$eo$$.getProperty("event"),$state$$=$eo$$.getProperty("state");$graph$$.popupMenuHandler.hideMenu();
$graph$$.stopEditing(!1);var $pt$$=mxUtils.convertPoint($graph$$.container,mxEvent.getClientX($evt2$$),mxEvent.getClientY($evt2$$));$graph$$.connectionHandler.start($state$$,$pt$$.x,$pt$$.y);$graph$$.isMouseDown=!0;$graph$$.isMouseTrigger=mxEvent.isMouseEvent($evt2$$);mxEvent.consume($evt2$$)});$graph$$.addCellOverlay($cell$$,$overlay$$)});$graph$$.getModel().beginUpdate();var $v1$$;try{$v1$$=$graph$$.insertVertex($parent$$,null,"Start",0,0,80,30,"ellipse"),$addOverlay$$($v1$$)}finally{$graph$$.getModel().endUpdate()}var $layout$$;
"horizontalTree"==$type$$?($layout$$=new mxCompactTreeLayout($graph$$),$layout$$.edgeRouting=!1,$layout$$.levelDistance=30,$edgeStyle$$="edgeStyle=elbowEdgeStyle;elbow=horizontal;"):"verticalTree"==$type$$?($layout$$=new mxCompactTreeLayout($graph$$,!1),$layout$$.edgeRouting=!1,$layout$$.levelDistance=30,$edgeStyle$$="edgeStyle=elbowEdgeStyle;elbow=vertical;"):"radialTree"==$type$$?($layout$$=new mxRadialTreeLayout($graph$$,!1),$layout$$.edgeRouting=!1,$layout$$.levelDistance=80):"verticalFlow"==
$type$$?$layout$$=new mxHierarchicalLayout($graph$$,mxConstants.DIRECTION_NORTH):"horizontalFlow"==$type$$?$layout$$=new mxHierarchicalLayout($graph$$,mxConstants.DIRECTION_WEST):"organic"==$type$$?($layout$$=new mxFastOrganicLayout($graph$$,!1),$layout$$.forceConstant=80):"circle"==$type$$&&($layout$$=new mxCircleLayout($graph$$));if(null!=$layout$$){var $executeLayout$$=function $$executeLayout$$$($change$$,$post$$){$graph$$.getModel().beginUpdate();try{null!=$change$$&&$change$$(),$layout$$.execute($graph$$.getDefaultParent(),
$v1$$)}catch($e$$){throw $e$$;}finally{var $morph$$=new mxMorphing($graph$$);$morph$$.addListener(mxEvent.DONE,mxUtils.bind(this,function(){$graph$$.getModel().endUpdate();null!=$post$$&&$post$$()}));$morph$$.startAnimation()}},$edgeHandleConnect$$=mxEdgeHandler.prototype.connect;mxEdgeHandler.prototype.connect=function $mxEdgeHandler$$connect$($edge$$,$terminal$$,$isSource$$,$isClone$$,$me$$){$edgeHandleConnect$$.apply(this,arguments);$executeLayout$$()};$graph$$.resizeCell=function $$graph$$$resizeCell$(){mxGraph.prototype.resizeCell.apply(this,
arguments);$executeLayout$$()};$graph$$.connectionHandler.addListener(mxEvent.CONNECT,function(){$executeLayout$$()})}var $cancelBtn$$=mxUtils.button(mxResources.get("close"),function(){$editorUi$$.confirm(mxResources.get("areYouSure"),function(){null!=$container$$.parentNode&&($graph$$.destroy(),$container$$.parentNode.removeChild($container$$));$editorUi$$.hideDialog()})});$cancelBtn$$.className="geBtn";$editorUi$$.editor.cancelFirst&&$div$$.appendChild($cancelBtn$$);var $okBtn$$=mxUtils.button(mxResources.get("insert"),
function(){$graph$$.clearCellOverlays();var $cells_pt$$=$editorUi$$.editor.graph.getFreeInsertPoint(),$cells_pt$$=$editorUi$$.editor.graph.importCells($graph$$.getModel().getChildren($graph$$.getDefaultParent()),$cells_pt$$.x,$cells_pt$$.y),$view$$=$editorUi$$.editor.graph.view,$temp$$=$view$$.getBounds($cells_pt$$);$temp$$.x-=$view$$.translate.x;$temp$$.y-=$view$$.translate.y;$editorUi$$.editor.graph.scrollRectToVisible($temp$$);$editorUi$$.editor.graph.setSelectionCells($cells_pt$$);null!=$container$$.parentNode&&
($graph$$.destroy(),$container$$.parentNode.removeChild($container$$));$editorUi$$.hideDialog()});$div$$.appendChild($okBtn$$);$okBtn$$.className="geBtn gePrimaryBtn";$editorUi$$.editor.cancelFirst||$div$$.appendChild($cancelBtn$$)};this.container=$div$$};
CreateGraphDialog.prototype.connectImage=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjQ3OTk0QjMyRDcyMTFFNThGQThGNDVBMjNBMjFDMzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjQ3OTk0QjQyRDcyMTFFNThGQThGNDVBMjNBMjFDMzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRjA0N0I2MjJENzExMUU1OEZBOEY0NUEyM0EyMUMzOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGNDc5OTRCMjJENzIxMUU1OEZBOEY0NUEyM0EyMUMzOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjIf+MgAAATlSURBVHjanFZraFxFFD735u4ru3ls0yZG26ShgmJoKK1J2vhIYzBgRdtIURHyw1hQUH9IxIgI2h8iCEUF/1RRlNQYCsYfCTHVhiTtNolpZCEStqSC22xIsrs1bDfu7t37Gs/cO3Ozxs1DBw73zpk555vzmHNGgJ0NYatFgmNLYUHYUoHASMz5ijmgVLmxgfKCUiBxC4ACJAeSG8nb1dVVOTc3dyoSibwWDofPBIPBJzo7O8vpGtvjpDICGztxkciECpF2LS0tvZtOpwNkk5FKpcYXFxffwL1+JuPgllPj8nk1F6RoaGjoKCqZ5ApljZDZO4SMRA0SuG2QUJIQRV8HxMOM9vf3H0ZZH9Nhg20MMl2QkFwjIyNHWlpahtADnuUMwLcRHX5aNSBjCJYEsSSLUeLEbhGe3ytCmQtA1/XY+Pj46dbW1iDuyCJp9BC5ycBj4hoeHq5ra2sbw0Xn1ZgBZ+dVkA1Lc+6p0Ck2p0QS4Ox9EhwpEylYcmBg4LH29vYQLilIOt0u5FhDfevNZDI/u93uw6PLOrwTUtjxrbPYbhD42WgMrF8JmR894ICmCgnQjVe8Xu8pXEkzMJKbuo5oNPomBbm1ZsD7s2kwFA1JZ6QBUXWT1nmGNc/qoMgavDcrQzxjQGFh4aOYIJ0sFAXcEtui4uLiVjr5KpSBVFYDDZVrWUaKRRWSAYeK0fmKykgDXbVoNaPChRuyqdDv97czL5nXxQbq6empQmsaklkDBiNpSwFVrmr2P6UyicD5piI4f8wHh0oEm8/p4h8pyGiEWvVQd3e3nxtjAzU1NR2jP7NRBWQ8GbdEzzJAmc0V3RR4cI8Dvmwuhc8fKUFA0d6/ltHg5p+Kuaejo6OeY0jcNJ/PV00ZS0nFUoZRvvFS1bZFsKHCCQ2Pl8H0chY+C96B6ZUsrCQ1qKtwQVFRURW/QhIXMAzDPAZ6BgOr8tTa8dDxCmiYGApaJbJMxSzV+brE8pdgWkcpY5dbMF1AR9XH8/xu2ilef48bvn92n82ZwHh+8ssqTEXS9p7dHisiiURikd8PbpExNTU1UVNTA3V3Y7lC16n0gpB/NwpNcZjfa7dScC4Qh0kOQCwnlEgi3F/hMVl9fX0zvKrzSk2lfXjRhj0eT/2rvWG4+Pta3oJY7XfC3hInXAv/ldeFLx8shQ+eqQL0UAAz7ylkpej5eNZRVBWL6BU6ef14OYiY1oqyTtmsavr/5koaRucT1pzx+ZpL1+GV5nLutksUgIcmtwTRiuuVZXnU5XId7A2swJkfFsymRWC91hHg1Viw6x23+7vn9sPJ+j20BE1hCXqSWaNSQ8ScbknRZWxub1PGCw/fBV+c3AeijlUbY5bBjEqr9GuYZP4jP41WudGSC6erTRCqdGZm5i1WvXWeDHnbBCZGc2Nj4wBl/hZOwrmBBfgmlID1HmGJutHaF+tKoevp/XCgstDkjo2NtWKLuc6AVN4mNjY+s1XQxoenOoFuDPHGtnRbJj9ej5GvL0dI7+giuRyMk1giazc+DP6vgUDgOJVlOv7R+PJ12QIeL6SyeDz+Kfp8ZrNWjgDTsVjsQ7qXyTjztXJhm9ePxFLfMTg4eG9tbe1RTP9KFFYQfHliYmIS69kCC7jKYmKwxxD5P88tkVkqbPPcIps9t4T/+HjcuJ/s5BFJgf4WYABCtxGuxIZ90gAAAABJRU5ErkJggg==":IMAGE_PATH+
"/handle-connect.png",26,26);
var BackgroundImageDialog=function $BackgroundImageDialog$($editorUi$$,$applyFn$$){var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";var $btns_h3_img$$=document.createElement("h2");mxUtils.write($btns_h3_img$$,mxResources.get("backgroundImage"));$btns_h3_img$$.style.marginTop="0px";$div$$.appendChild($btns_h3_img$$);mxUtils.write($div$$,mxResources.get("image")+" "+mxResources.get("url")+":");mxUtils.br($div$$);var $btns_h3_img$$=$editorUi$$.editor.graph.backgroundImage,$urlInput$$=
document.createElement("input");$urlInput$$.setAttribute("type","text");$urlInput$$.style.marginTop="4px";$urlInput$$.style.marginBottom="4px";$urlInput$$.style.width="350px";$urlInput$$.value=null!=$btns_h3_img$$?$btns_h3_img$$.src:"";var $resetting$$=!1,$urlChanged$$=function $$urlChanged$$$(){$resetting$$||""==$urlInput$$.value||$editorUi$$.isOffline()?($widthInput$$.value="",$heightInput$$.value=""):$editorUi$$.loadImage(mxUtils.trim($urlInput$$.value),function($img$$){$widthInput$$.value=$img$$.width;
$heightInput$$.value=$img$$.height},function(){$editorUi$$.showError(mxResources.get("error"),mxResources.get("fileNotFound"),mxResources.get("ok"));$urlInput$$.value="";$widthInput$$.value="";$heightInput$$.value=""})};this.init=function $this$init$(){$urlInput$$.focus();if(Graph.fileSupport){$urlInput$$.setAttribute("placeholder",mxResources.get("dragImagesHere"));var $dlg$$=$div$$.parentNode,$dropElt$$=null;mxEvent.addListener($dlg$$,"dragleave",function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),
$dropElt$$=null);$evt$$.stopPropagation();$evt$$.preventDefault()});mxEvent.addListener($dlg$$,"dragover",mxUtils.bind(this,function($evt$$){null==$dropElt$$&&(!mxClient.IS_IE||10<document.documentMode)&&($dropElt$$=$editorUi$$.highlightElement($dlg$$));$evt$$.stopPropagation();$evt$$.preventDefault()}));mxEvent.addListener($dlg$$,"drop",mxUtils.bind(this,function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);if(0<$evt$$.dataTransfer.files.length)$editorUi$$.importFiles($evt$$.dataTransfer.files,
0,0,$editorUi$$.maxBackgroundSize,function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$){$urlInput$$.value=$data$$;$urlChanged$$()},function(){},function($file$$){return"image/"==$file$$.type.substring(0,6)},function($queue$$){for(var $i$$=0;$i$$<$queue$$.length;$i$$++)$queue$$[$i$$]()},!0,$editorUi$$.maxBackgroundBytes,$editorUi$$.maxBackgroundBytes);else if(0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/uri-list")){var $uri$$=$evt$$.dataTransfer.getData("text/uri-list");/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test($uri$$)&&
($urlInput$$.value=decodeURIComponent($uri$$),$urlChanged$$())}$evt$$.stopPropagation();$evt$$.preventDefault()}),!1)}};$div$$.appendChild($urlInput$$);mxUtils.br($div$$);mxUtils.br($div$$);mxUtils.write($div$$,mxResources.get("width")+":");var $widthInput$$=document.createElement("input");$widthInput$$.setAttribute("type","text");$widthInput$$.style.width="60px";$widthInput$$.style.marginLeft="4px";$widthInput$$.style.marginRight="16px";$widthInput$$.value=null!=$btns_h3_img$$?$btns_h3_img$$.width:
"";$div$$.appendChild($widthInput$$);mxUtils.write($div$$,mxResources.get("height")+":");var $heightInput$$=document.createElement("input");$heightInput$$.setAttribute("type","text");$heightInput$$.style.width="60px";$heightInput$$.style.marginLeft="4px";$heightInput$$.style.marginRight="16px";$heightInput$$.value=null!=$btns_h3_img$$?$btns_h3_img$$.height:"";$div$$.appendChild($heightInput$$);$btns_h3_img$$=mxUtils.button(mxResources.get("reset"),function(){$urlInput$$.value="";$widthInput$$.value=
"";$heightInput$$.value="";$resetting$$=!1});mxEvent.addListener($btns_h3_img$$,"mousedown",function(){$resetting$$=!0});mxEvent.addListener($btns_h3_img$$,"touchstart",function(){$resetting$$=!0});$btns_h3_img$$.className="geBtn";$btns_h3_img$$.width="100";$div$$.appendChild($btns_h3_img$$);mxUtils.br($div$$);mxEvent.addListener($urlInput$$,"change",$urlChanged$$);ImageDialog.filePicked=function $ImageDialog$filePicked$($data$$){$data$$.action==google.picker.Action.PICKED&&null!=$data$$.docs[0].thumbnails&&
($data$$=$data$$.docs[0].thumbnails[$data$$.docs[0].thumbnails.length-1],null!=$data$$&&($urlInput$$.value=$data$$.url,$urlChanged$$()));$urlInput$$.focus()};$btns_h3_img$$=document.createElement("div");$btns_h3_img$$.style.marginTop="40px";$btns_h3_img$$.style.textAlign="right";var $cancelBtn$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$$.className="geBtn";$editorUi$$.editor.cancelFirst&&$btns_h3_img$$.appendChild($cancelBtn$$);if(!$editorUi$$.isOffline()&&
"undefined"!=typeof google&&"undefined"!=typeof google.picker&&window.self===window.top){var $applyBtn_gpBtn_searchBtn$$=mxUtils.button(mxResources.get("search"),function(){if(null==$editorUi$$.imageSearchPicker){var $picker$$=(new google.picker.PickerBuilder).setLocale(mxLanguage).addView(google.picker.ViewId.IMAGE_SEARCH).enableFeature(google.picker.Feature.NAV_HIDDEN);$editorUi$$.imageSearchPicker=$picker$$.setCallback(function($data$$){ImageDialog.filePicked($data$$)}).build()}$editorUi$$.imageSearchPicker.setVisible(!0)});
$applyBtn_gpBtn_searchBtn$$.className="geBtn";$btns_h3_img$$.appendChild($applyBtn_gpBtn_searchBtn$$);null!=$editorUi$$.drive&&"1"==urlParams.photos&&($applyBtn_gpBtn_searchBtn$$=mxUtils.button(mxResources.get("googlePlus"),function(){$editorUi$$.spinner.spin(document.body,mxResources.get("authorizing"))&&$editorUi$$.drive.checkToken(mxUtils.bind(this,function(){$editorUi$$.spinner.stop();if(null==$editorUi$$.photoPicker){var $picker$jscomp$1_token$$=gapi.auth.getToken().access_token,$picker$jscomp$1_token$$=
(new google.picker.PickerBuilder).setAppId($editorUi$$.drive.appId).setLocale(mxLanguage).setOAuthToken($picker$jscomp$1_token$$).addView(google.picker.ViewId.PHOTOS).addView(google.picker.ViewId.PHOTO_ALBUMS).addView(google.picker.ViewId.PHOTO_UPLOAD);$editorUi$$.photoPicker=$picker$jscomp$1_token$$.setCallback(function($data$$){ImageDialog.filePicked($data$$)}).build()}$editorUi$$.photoPicker.setVisible(!0)}))}),$applyBtn_gpBtn_searchBtn$$.className="geBtn",$btns_h3_img$$.appendChild($applyBtn_gpBtn_searchBtn$$))}$applyBtn_gpBtn_searchBtn$$=
mxUtils.button(mxResources.get("apply"),function(){$editorUi$$.hideDialog();$applyFn$$(""!=$urlInput$$.value?new mxImage(mxUtils.trim($urlInput$$.value),$widthInput$$.value,$heightInput$$.value):null)});$applyBtn_gpBtn_searchBtn$$.className="geBtn gePrimaryBtn";$btns_h3_img$$.appendChild($applyBtn_gpBtn_searchBtn$$);$editorUi$$.editor.cancelFirst||$btns_h3_img$$.appendChild($cancelBtn$$);$div$$.appendChild($btns_h3_img$$);this.container=$div$$},ParseDialog=function $ParseDialog$($editorUi$$,$div$jscomp$6_title$$,
$cancelBtn$$){function $parse$$($text$$,$type$$){var $container$jscomp$1_lines_plantUmlServerUrl_view$$=$text$$.split("\n");if("plantUmlPng"==$type$$||"plantUmlSvg"==$type$$||"plantUmlTxt"==$type$$){var $container$jscomp$1_lines_plantUmlServerUrl_view$$="plantUmlTxt"==$type$$?PLANT_URL+"/txt/":"plantUmlPng"==$type$$?PLANT_URL+"/png/":PLANT_URL+"/svg/",$graph$$=$editorUi$$.editor.graph;if($editorUi$$.spinner.spin(document.body,mxResources.get("inserting"))){var $encode6bit$$=function $$encode6bit$$$($b$$){if(10>
$b$$)return String.fromCharCode(48+$b$$);$b$$-=10;if(26>$b$$)return String.fromCharCode(65+$b$$);$b$$-=26;if(26>$b$$)return String.fromCharCode(97+$b$$);$b$$-=26;return 0==$b$$?"-":1==$b$$?"_":"?"},$append3bytes$$=function $$append3bytes$$$($b1$$,$b2$$,$b3$$){c1=$b1$$>>2;c2=($b1$$&3)<<4|$b2$$>>4;c3=($b2$$&15)<<2|$b3$$>>6;c4=$b3$$&63;r="";r+=$encode6bit$$(c1&63);r+=$encode6bit$$(c2&63);r+=$encode6bit$$(c3&63);return r+=$encode6bit$$(c4&63)},$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=
new XMLHttpRequest;$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.open("GET",$container$jscomp$1_lines_plantUmlServerUrl_view$$+function($data$$){r="";for($i$$=0;$i$$<$data$$.length;$i$$+=3)r=$i$$+2==$data$$.length?r+$append3bytes$$($data$$.charCodeAt($i$$),$data$$.charCodeAt($i$$+1),0):$i$$+1==$data$$.length?r+$append3bytes$$($data$$.charCodeAt($i$$),0,0):r+$append3bytes$$($data$$.charCodeAt($i$$),$data$$.charCodeAt($i$$+1),$data$$.charCodeAt($i$$+2));return r}(Graph.bytesToString(pako.deflateRaw(unescape(encodeURIComponent($text$$))))),
!0);"plantUmlTxt"!=$type$$&&($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.responseType="blob");$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.onload=function $$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$$onload$($e$jscomp$0$$){if(200<=this.status&&300>this.status)if("plantUmlTxt"==$type$$)$editorUi$$.spinner.stop(),$graph$$.setSelectionCell($editorUi$$.insertAsPreText(this.response,$insertPoint$$.x,$insertPoint$$.y)),$graph$$.scrollCellToVisible($graph$$.getSelectionCell());
else{var $reader$$=new FileReader;$reader$$.readAsDataURL(this.response);$reader$$.onloadend=function $$reader$$$onloadend$($e$$){var $img$$=new Image;$img$$.onload=function $$img$$$onload$(){$editorUi$$.spinner.stop();var $w$$=$img$$.width,$h$$=$img$$.height;if(0==$w$$&&0==$h$$){var $data$$=$reader$$.result,$comma$$=$data$$.indexOf(","),$data$$=decodeURIComponent(escape(atob($data$$.substring($comma$$+1)))),$data$$=mxUtils.parseXml($data$$).getElementsByTagName("svg");0<$data$$.length&&($w$$=parseFloat($data$$[0].getAttribute("width")),
$h$$=parseFloat($data$$[0].getAttribute("height")))}$graph$$.getModel().beginUpdate();try{cell=$graph$$.insertVertex(null,null,$text$$,$insertPoint$$.x,$insertPoint$$.y,$w$$,$h$$,"shape=image;noLabel=1;verticalAlign=top;aspect=fixed;imageAspect=0;image="+$editorUi$$.convertDataUri($reader$$.result)+";")}finally{$graph$$.getModel().endUpdate()}$graph$$.setSelectionCell(cell);$graph$$.scrollCellToVisible($graph$$.getSelectionCell())};$img$$.src=$reader$$.result};$reader$$.onerror=function $$reader$$$onerror$($e$$){$editorUi$$.handleError($e$$)}}else $editorUi$$.spinner.stop(),
$editorUi$$.handleError($e$jscomp$0$$)};$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.onerror=function $$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$$onerror$($e$$){$editorUi$$.handleError($e$$)};$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.send()}}else if("table"==$type$$){for(var $layout$$=null,$cells$$=[],$dx$$=0,$i$$=0;$i$$<$container$jscomp$1_lines_plantUmlServerUrl_view$$.length;$i$$++)if($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=
mxUtils.trim($container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$]),"create table"==$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.substring(0,12).toLowerCase())$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=mxUtils.trim($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.substring(12)),"("==$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.charAt($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.length-1)&&($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=
$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.substring(0,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.lastIndexOf(" "))),$layout$$=new mxCell($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$,new mxGeometry($dx$$,0,160,26),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#e0e0e0;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;swimlaneFillColor=#ffffff;align=center;"),$layout$$.vertex=!0,$cells$$.push($layout$$),
$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$editorUi$$.editor.graph.getPreferredSizeForCell($getOrCreateVertex_inserted_rowCell$$),null!=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$&&($layout$$.geometry.width=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width+10);else if(null!=$layout$$&&")"==$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.charAt(0))$dx$$+=$layout$$.geometry.width+40,$layout$$=null;else if("("!=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$&&
null!=$layout$$&&($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.substring(0,","==$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.charAt($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.length-1)?$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.length-1:$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.length),"primary key"!=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.substring(0,
11).toLowerCase())){var $pk_source$$=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.toLowerCase().indexOf("primary key"),$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.replace(/primary key/i,""),$getOrCreateVertex_inserted_rowCell$$=new mxCell($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$,new mxGeometry(0,0,90,26),"shape=partialRectangle;top=0;left=0;right=0;bottom=0;align=left;verticalAlign=top;spacingTop=-2;fillColor=none;spacingLeft=34;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;dropTarget=0;");
$getOrCreateVertex_inserted_rowCell$$.vertex=!0;$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=sb.cloneCell($getOrCreateVertex_inserted_rowCell$$,0<$pk_source$$?"PK":"");$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.connectable=!1;$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.style="shape=partialRectangle;top=0;left=0;bottom=0;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[];portConstraint=eastwest;part=1;";
$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.geometry.width=30;$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.geometry.height=26;$getOrCreateVertex_inserted_rowCell$$.insert($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$);$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$editorUi$$.editor.graph.getPreferredSizeForCell($getOrCreateVertex_inserted_rowCell$$);null!=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$&&$layout$$.geometry.width<
$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width+10&&($layout$$.geometry.width=Math.min(220,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width+10));$layout$$.insert($getOrCreateVertex_inserted_rowCell$$);$layout$$.geometry.height+=26}0<$cells$$.length&&($graph$$=$editorUi$$.editor.graph,$container$jscomp$1_lines_plantUmlServerUrl_view$$=$graph$$.view,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$graph$$.getGraphBounds(),$graph$$.setSelectionCells($graph$$.importCells($cells$$,
Math.ceil(Math.max(0,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.x/$container$jscomp$1_lines_plantUmlServerUrl_view$$.scale-$container$jscomp$1_lines_plantUmlServerUrl_view$$.translate.x)+4*$graph$$.gridSize),Math.ceil(Math.max(0,($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.y+$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.height)/$container$jscomp$1_lines_plantUmlServerUrl_view$$.scale-$container$jscomp$1_lines_plantUmlServerUrl_view$$.translate.y)+
4*$graph$$.gridSize))),$graph$$.scrollCellToVisible($graph$$.getSelectionCell()))}else if("list"==$type$$){if(0<$container$jscomp$1_lines_plantUmlServerUrl_view$$.length){$graph$$=$editorUi$$.editor.graph;$layout$$=new mxCell($container$jscomp$1_lines_plantUmlServerUrl_view$$[0],new mxGeometry(0,0,160,30),"swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;swimlaneFillColor=#ffffff;");$layout$$.vertex=!0;
$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$graph$$.getPreferredSizeForCell($layout$$);null!=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$&&$layout$$.geometry.width<$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width+10&&($layout$$.geometry.width=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width+10);$getOrCreateVertex_inserted_rowCell$$=[$layout$$];if(1<$container$jscomp$1_lines_plantUmlServerUrl_view$$.length)for($i$$=1;$i$$<
$container$jscomp$1_lines_plantUmlServerUrl_view$$.length;$i$$++)"--"==$container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$]?($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;"),$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.vertex=!0,$layout$$.geometry.height+=
$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.geometry.height,$layout$$.insert($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$),$getOrCreateVertex_inserted_rowCell$$.push($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$)):0<$container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$].length&&";"!=$container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$].charAt(0)&&($dx$$=new mxCell($container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$],new mxGeometry(0,0,
60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;"),$dx$$.vertex=!0,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$graph$$.getPreferredSizeForCell($dx$$),null!=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$&&$dx$$.geometry.width<$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width&&($dx$$.geometry.width=$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width),
$layout$$.geometry.width=Math.max($layout$$.geometry.width,$dx$$.geometry.width),$layout$$.geometry.height+=$dx$$.geometry.height,$layout$$.insert($dx$$),$getOrCreateVertex_inserted_rowCell$$.push($dx$$));$graph$$.getModel().beginUpdate();try{$layout$$=$graph$$.importCells([$layout$$],$insertPoint$$.x,$insertPoint$$.y)[0],$graph$$.fireEvent(new mxEventObject("cellsInserted","cells",[$layout$$].concat($layout$$.children)))}finally{$graph$$.getModel().endUpdate()}$graph$$.setSelectionCell($layout$$);
$graph$$.scrollCellToVisible($graph$$.getSelectionCell())}}else{for(var $getOrCreateVertex_inserted_rowCell$$=function $$getOrCreateVertex_inserted_rowCell$$$($id$$){var $vertex$$=$vertices$$[$id$$];null==$vertex$$&&($vertex$$=new mxCell($id$$,new mxGeometry(0,0,80,30),"whiteSpace=wrap;html=1;"),$vertex$$.vertex=!0,$vertices$$[$id$$]=$vertex$$,$cells$$.push($vertex$$));return $vertex$$},$vertices$$={},$cells$$=[],$i$$=0;$i$$<$container$jscomp$1_lines_plantUmlServerUrl_view$$.length;$i$$++)if(";"!=
$container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$].charAt(0)){var $edge$jscomp$2_values$$=$container$jscomp$1_lines_plantUmlServerUrl_view$$[$i$$].split("->");if(2<=$edge$jscomp$2_values$$.length){var $pk_source$$=$getOrCreateVertex_inserted_rowCell$$($edge$jscomp$2_values$$[0]),$target$$=$getOrCreateVertex_inserted_rowCell$$($edge$jscomp$2_values$$[$edge$jscomp$2_values$$.length-1]),$edge$jscomp$2_values$$=new mxCell(2<$edge$jscomp$2_values$$.length?$edge$jscomp$2_values$$[1]:"",new mxGeometry);
$edge$jscomp$2_values$$.edge=!0;$pk_source$$.insertEdge($edge$jscomp$2_values$$,!0);$target$$.insertEdge($edge$jscomp$2_values$$,!1);$cells$$.push($edge$jscomp$2_values$$)}}if(0<$cells$$.length){$container$jscomp$1_lines_plantUmlServerUrl_view$$=document.createElement("div");$container$jscomp$1_lines_plantUmlServerUrl_view$$.style.visibility="hidden";document.body.appendChild($container$jscomp$1_lines_plantUmlServerUrl_view$$);$graph$$=new Graph($container$jscomp$1_lines_plantUmlServerUrl_view$$);
$graph$$.getModel().beginUpdate();try{$cells$$=$graph$$.importCells($cells$$);for($i$$=0;$i$$<$cells$$.length;$i$$++)$graph$$.getModel().isVertex($cells$$[$i$$])&&($bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$=$graph$$.getPreferredSizeForCell($cells$$[$i$$]),$cells$$[$i$$].geometry.width=Math.max($cells$$[$i$$].geometry.width,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.width),$cells$$[$i$$].geometry.height=Math.max($cells$$[$i$$].geometry.height,$bds_divider_left$jscomp$3_name$jscomp$59_size$jscomp$13_tmp$$.height));
$layout$$=new mxFastOrganicLayout($graph$$);$layout$$.disableEdgeStyle=!1;$layout$$.forceConstant=120;$layout$$.execute($graph$$.getDefaultParent());$dx$$=new mxParallelEdgeLayout($graph$$);$dx$$.spacing=20;$dx$$.execute($graph$$.getDefaultParent())}finally{$graph$$.getModel().endUpdate()}$graph$$.clearCellOverlays();$getOrCreateVertex_inserted_rowCell$$=[];$editorUi$$.editor.graph.getModel().beginUpdate();try{$getOrCreateVertex_inserted_rowCell$$=$editorUi$$.editor.graph.importCells($graph$$.getModel().getChildren($graph$$.getDefaultParent()),
$insertPoint$$.x,$insertPoint$$.y),$editorUi$$.editor.graph.fireEvent(new mxEventObject("cellsInserted","cells",$getOrCreateVertex_inserted_rowCell$$))}finally{$editorUi$$.editor.graph.getModel().endUpdate()}$editorUi$$.editor.graph.setSelectionCells($getOrCreateVertex_inserted_rowCell$$);$editorUi$$.editor.graph.scrollCellToVisible($editorUi$$.editor.graph.getSelectionCell());$graph$$.destroy();$container$jscomp$1_lines_plantUmlServerUrl_view$$.parentNode.removeChild($container$jscomp$1_lines_plantUmlServerUrl_view$$)}}}
function $getDefaultValue$$(){return"list"==$typeSelect$$.value?"Person\n-name: String\n-birthDate: Date\n--\n+getName(): String\n+setName(String): void\n+isBirthday(): boolean":"table"==$typeSelect$$.value?"CREATE TABLE Suppliers\n(\nsupplier_id int NOT NULL PRIMARY KEY,\nsupplier_name char(50) NOT NULL,\ncontact_name char(50),\n);\nCREATE TABLE Customers\n(\ncustomer_id int NOT NULL PRIMARY KEY,\ncustomer_name char(50) NOT NULL,\naddress char(50),\ncity char(50),\nstate char(25),\nzip_code char(10)\n);\n":
"plantUmlPng"==$typeSelect$$.value?"@startuml\nskinparam backgroundcolor transparent\nskinparam shadowing false\nAlice -> Bob: Authentication Request\nBob --\x3e Alice: Authentication Response\n\nAlice -> Bob: Another authentication Request\nAlice <-- Bob: another authentication Response\n@enduml":"plantUmlSvg"==$typeSelect$$.value||"plantUmlTxt"==$typeSelect$$.value?"@startuml\nskinparam shadowing false\nAlice -> Bob: Authentication Request\nBob --\x3e Alice: Authentication Response\n\nAlice -> Bob: Another authentication Request\nAlice <-- Bob: another authentication Response\n@enduml":
";Example:\na->b\nb->edge label->c\nc->a\n"}var $insertPoint$$=$editorUi$$.editor.graph.getFreeInsertPoint();$div$jscomp$6_title$$=document.createElement("div");$div$jscomp$6_title$$.style.textAlign="right";var $textarea$$=document.createElement("textarea");$textarea$$.style.resize="none";$textarea$$.style.width="100%";$textarea$$.style.height="354px";$textarea$$.style.marginBottom="16px";var $typeSelect$$=document.createElement("select");"formatSql"==$cancelBtn$$&&($typeSelect$$.style.display="none");
var $diagramOption_listOption_okBtn$$=document.createElement("option");$diagramOption_listOption_okBtn$$.setAttribute("value","list");mxUtils.write($diagramOption_listOption_okBtn$$,mxResources.get("list"));"plantUml"!=$cancelBtn$$&&$typeSelect$$.appendChild($diagramOption_listOption_okBtn$$);null!=$cancelBtn$$&&"fromText"!=$cancelBtn$$||$diagramOption_listOption_okBtn$$.setAttribute("selected","selected");$diagramOption_listOption_okBtn$$=document.createElement("option");$diagramOption_listOption_okBtn$$.setAttribute("value",
"table");mxUtils.write($diagramOption_listOption_okBtn$$,mxResources.get("formatSql"));"formatSql"==$cancelBtn$$&&($typeSelect$$.appendChild($diagramOption_listOption_okBtn$$),$diagramOption_listOption_okBtn$$.setAttribute("selected","selected"));$diagramOption_listOption_okBtn$$=document.createElement("option");$diagramOption_listOption_okBtn$$.setAttribute("value","diagram");mxUtils.write($diagramOption_listOption_okBtn$$,mxResources.get("diagram"));"plantUml"!=$cancelBtn$$&&$typeSelect$$.appendChild($diagramOption_listOption_okBtn$$);
$diagramOption_listOption_okBtn$$=document.createElement("option");$diagramOption_listOption_okBtn$$.setAttribute("value","plantUmlSvg");mxUtils.write($diagramOption_listOption_okBtn$$,mxResources.get("plantUml")+" ("+mxResources.get("formatSvg")+")");"plantUml"==$cancelBtn$$&&$diagramOption_listOption_okBtn$$.setAttribute("selected","selected");var $plantUmlPngOption$$=document.createElement("option");$plantUmlPngOption$$.setAttribute("value","plantUmlPng");mxUtils.write($plantUmlPngOption$$,mxResources.get("plantUml")+
" ("+mxResources.get("formatPng")+")");var $plantUmlTxtOption$$=document.createElement("option");$plantUmlTxtOption$$.setAttribute("value","plantUmlTxt");mxUtils.write($plantUmlTxtOption$$,mxResources.get("plantUml")+" ("+mxResources.get("text")+")");EditorUi.enablePlantUml&&Graph.fileSupport&&!$editorUi$$.isOffline()&&"plantUml"==$cancelBtn$$&&($typeSelect$$.appendChild($diagramOption_listOption_okBtn$$),$typeSelect$$.appendChild($plantUmlPngOption$$),$typeSelect$$.appendChild($plantUmlTxtOption$$));
var $defaultValue$$=$getDefaultValue$$();$textarea$$.value=$defaultValue$$;$div$jscomp$6_title$$.appendChild($textarea$$);this.init=function $this$init$(){$textarea$$.focus()};Graph.fileSupport&&($textarea$$.addEventListener("dragover",function($evt$$){$evt$$.stopPropagation();$evt$$.preventDefault()},!1),$textarea$$.addEventListener("drop",function($evt$jscomp$33_file$$){$evt$jscomp$33_file$$.stopPropagation();$evt$jscomp$33_file$$.preventDefault();if(0<$evt$jscomp$33_file$$.dataTransfer.files.length){$evt$jscomp$33_file$$=
$evt$jscomp$33_file$$.dataTransfer.files[0];var $reader$$=new FileReader;$reader$$.onload=function $$reader$$$onload$($e$$){$textarea$$.value=$e$$.target.result};$reader$$.readAsText($evt$jscomp$33_file$$)}},!1));$div$jscomp$6_title$$.appendChild($typeSelect$$);mxEvent.addListener($typeSelect$$,"change",function(){var $newDefaultValue$$=$getDefaultValue$$();if(0==$textarea$$.value.length||$textarea$$.value==$defaultValue$$)$defaultValue$$=$newDefaultValue$$,$textarea$$.value=$defaultValue$$});$cancelBtn$$=
mxUtils.button(mxResources.get("close"),function(){$textarea$$.value==$defaultValue$$?$editorUi$$.hideDialog():$editorUi$$.confirm(mxResources.get("areYouSure"),function(){$editorUi$$.hideDialog()})});$cancelBtn$$.className="geBtn";$editorUi$$.editor.cancelFirst&&$div$jscomp$6_title$$.appendChild($cancelBtn$$);$diagramOption_listOption_okBtn$$=mxUtils.button(mxResources.get("insert"),function(){$editorUi$$.hideDialog();$parse$$($textarea$$.value,$typeSelect$$.value)});$div$jscomp$6_title$$.appendChild($diagramOption_listOption_okBtn$$);
$diagramOption_listOption_okBtn$$.className="geBtn gePrimaryBtn";$editorUi$$.editor.cancelFirst||$div$jscomp$6_title$$.appendChild($cancelBtn$$);this.container=$div$jscomp$6_title$$},NewDialog=function $NewDialog$($app$$,$opts$$){var $$jscomp$this$$=this;$opts$$.showName=$opts$$.hasOwnProperty("showName")?$opts$$.showName:!0;$opts$$.createOnly=$opts$$.createOnly||!1;$opts$$.leftHighlight=$opts$$.leftHighlight||"#ebf2f9";$opts$$.rightHighlight=$opts$$.rightHighlight||"#e6eff8";$opts$$.rightHighlightBorder=
$opts$$.rightHighlightBorder||"1px solid #ccd9ea";$opts$$.templateFile=$opts$$.templateFile||EditorUi.templateFile;var $outer$$=document.createElement("div");$outer$$.style.height="100%";var $btns$jscomp$1_divTop_header$$=document.createElement("div");$btns$jscomp$1_divTop_header$$.style.whiteSpace="nowrap";$btns$jscomp$1_divTop_header$$.style.height="46px";$opts$$.showName&&$outer$$.appendChild($btns$jscomp$1_divTop_header$$);var $cancelBtn$jscomp$3_ext$$=".drawio",$fromTmpBtn_helpBtn_importBtn_resourceimg$$,
$resourceName$$="filename";switch($app$$.mode){case App.MODE_GOOGLE:$cancelBtn$jscomp$3_ext$$=$app$$.drive&&$app$$.drive.extension||$cancelBtn$jscomp$3_ext$$;$fromTmpBtn_helpBtn_importBtn_resourceimg$$="google-drive-logo.svg";$resourceName$$="diagramName";break;case App.MODE_DROPBOX:$cancelBtn$jscomp$3_ext$$=$app$$.dropbox&&$app$$.dropbox.extension||$cancelBtn$jscomp$3_ext$$;$fromTmpBtn_helpBtn_importBtn_resourceimg$$="dropbox-logo.svg";break;case App.MODE_ONEDRIVE:$cancelBtn$jscomp$3_ext$$=$app$$.oneDrive&&
$app$$.oneDrive.extension||$cancelBtn$jscomp$3_ext$$;$fromTmpBtn_helpBtn_importBtn_resourceimg$$="onedrive-logo.svg";break;case App.MODE_GITHUB:$cancelBtn$jscomp$3_ext$$=$app$$.gitHub&&$app$$.gitHub.extension||$cancelBtn$jscomp$3_ext$$;$fromTmpBtn_helpBtn_importBtn_resourceimg$$="github-logo.svg";break;case App.MODE_TRELLO:$cancelBtn$jscomp$3_ext$$=$app$$.trello&&$app$$.trello.extension||$cancelBtn$jscomp$3_ext$$;$fromTmpBtn_helpBtn_importBtn_resourceimg$$="trello-logo.svg";break;case App.MODE_BROWSER:$fromTmpBtn_helpBtn_importBtn_resourceimg$$=
"osa_database.png";$resourceName$$="diagramName";break;default:$fromTmpBtn_helpBtn_importBtn_resourceimg$$="osa_drive-harddisk.png"}var $logo$$=document.createElement("img");$logo$$.setAttribute("border","0");$logo$$.setAttribute("align","absmiddle");$logo$$.style.width="40px";$logo$$.style.height="40px";$logo$$.style.marginRight="10px";$logo$$.style.paddingBottom="4px";$logo$$.src=IMAGE_PATH+"/"+$fromTmpBtn_helpBtn_importBtn_resourceimg$$;!$opts$$.compact&&$opts$$.showName&&$btns$jscomp$1_divTop_header$$.appendChild($logo$$);
$opts$$.showName&&mxUtils.write($btns$jscomp$1_divTop_header$$,mxResources.get($resourceName$$)+":");var $nameInput$$=document.createElement("input");$nameInput$$.setAttribute("value",$app$$.defaultFilename+$cancelBtn$jscomp$3_ext$$);$nameInput$$.style.marginLeft="10px";$nameInput$$.style.width=$opts$$.compact?"220px":"430px";this.init=function $this$init$(){$opts$$.showName&&($nameInput$$.focus(),6<document.documentMode||mxClient.IS_GC||mxClient.IS_FF||mxClient.IS_QUIRKS?$nameInput$$.select():document.execCommand("selectAll",
!1,null))};$opts$$.showName&&($btns$jscomp$1_divTop_header$$.appendChild($nameInput$$),$cancelBtn$jscomp$3_ext$$=$app$$.editor.fileExtensions)&&($cancelBtn$jscomp$3_ext$$=FilenameDialog.createTypeHint($app$$,$nameInput$$,$cancelBtn$jscomp$3_ext$$),$cancelBtn$jscomp$3_ext$$.style.marginTop="12px",$btns$jscomp$1_divTop_header$$.appendChild($cancelBtn$jscomp$3_ext$$));var $addTemplates$$=function $$addTemplates$$$($$jscomp$iter$0_templates$$){$$jscomp$iter$0_templates$$=$jscomp.makeIterator($$jscomp$iter$0_templates$$||
[]);for(var $$jscomp$key$item_item$$=$$jscomp$iter$0_templates$$.next();!$$jscomp$key$item_item$$.done;$$jscomp$key$item_item$$=$$jscomp$iter$0_templates$$.next())$$jscomp$key$item_item$$=$$jscomp$key$item_item$$.value,$$jscomp$key$item_item$$.tooltip=$$jscomp$key$item_item$$.tooltip||$$jscomp$key$item_item$$.title,$addButton$$($$jscomp$key$item_item$$)},$spinner$$=new Spinner({lines:12,length:10,width:5,radius:10,rotate:0,color:"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,top:"40%",zIndex:2E9}),
$create$$=function $$create$$$($tmplt$$){if($tmplt$$.extUrl||$opts$$.callback)$opts$$.showName||$app$$.hideDialog(),$tmplt$$.extUrl?$opts$$.openExtDocCallback($tmplt$$.extUrl,$tmplt$$.infoObj,$nameInput$$.value):$opts$$.callback&&$opts$$.callback($tmplt$$.xml,$nameInput$$.value);else if($tmplt$$.iscset){var $csetfile_folderId$$=$app$$.getCurrentFile();$csetfile_folderId$$&&$csetfile_folderId$$.setFileData($tmplt$$.xml,function(){$app$$.hideDialog()})}else{var $title$$=$nameInput$$.value;$title$$&&
($csetfile_folderId$$=$app$$.stateArg&&$app$$.stateArg.folderId,$app$$.pickFolder($app$$.mode,function($fldid$$){$app$$.createFile($title$$,$tmplt$$.xml,$tmplt$$.libs,void 0,function(){$app$$.hideDialog()},!0,$fldid$$)},$app$$.mode!==App.MODE_GOOGLE||!$csetfile_folderId$$))}},$createButton$$=mxUtils.button($opts$$.createButtonLabel||mxResources.get("create"),function(){$selected$$.template&&($createButton$$.setAttribute("disabled","disabled"),$create$$({iscset:$selected$$.template.iscset,xml:$selected$$.template.xml,
libs:$selected$$.template.libs,extUrl:$selected$$.template.exturl,infoObj:$selected$$.template.infoobj}),$createButton$$.removeAttribute("disabled"))});$createButton$$.className="geBtn gePrimaryBtn";var $btns$jscomp$1_divTop_header$$=$opts$$.showName?72:40,$div$$=document.createElement("div");$div$$.style.border="1px solid #d3d3d3";$div$$.style.position="absolute";$div$$.style.left="160px";$div$$.style.right="34px";$div$$.style.top=$btns$jscomp$1_divTop_header$$+"px";$div$$.style.bottom="68px";$div$$.style.margin=
"6px 0 0 -1px";$div$$.style.padding="6px";$div$$.style.overflow="auto";var $list$$=document.createElement("div");$list$$.style.cssText="position:absolute;left:30px;width:128px;top:"+$btns$jscomp$1_divTop_header$$+"px;bottom:68px;margin-top:6px;overflow:auto;border:1px solid #d3d3d3;'";var $selected$$={element:void 0,template:void 0},$selectElement$$=function $$selectElement$$$($elt$$,$tmplt$$){$selected$$.element&&($selected$$.element.style.backgroundColor="transparent",$selected$$.element.style.border=
"1px solid transparent");$elt$$.style.backgroundColor=$opts$$.rightHighlight;$elt$$.style.border=$opts$$.rightHighlightBorder;$selected$$.element=$elt$$;$selected$$.template=$tmplt$$;$createButton$$.removeAttribute("disabled")},$addButton$$=function $$addButton$$$($tmplt$$){var $elt$$=document.createElement("div");$elt$$.className="geTemplate";$elt$$.style.height="140px";$elt$$.style.width="140px";$tmplt$$.tooltip&&$elt$$.setAttribute("title",$tmplt$$.tooltip);var $onclick_png$$=$tmplt$$.onClick||
function(){$selectElement$$($elt$$,$tmplt$$)},$ondblclick$$=$tmplt$$.onDblClick||function(){$create$$({iscset:$tmplt$$.iscset,xml:$tmplt$$.xml,libs:$tmplt$$.libs,extUrl:$tmplt$$.url,infoObj:$tmplt$$.infoObj})};if($tmplt$$.imgUrl)$elt$$.style.backgroundImage="url("+$tmplt$$.imgUrl+")",$elt$$.style.backgroundSize="contain",$elt$$.style.backgroundPosition="center center",$elt$$.style.backgroundRepeat="no-repeat";else if(!$tmplt$$.noImg&&$tmplt$$.url){$onclick_png$$=$tmplt$$.preview||TEMPLATE_PATH+"/"+
$tmplt$$.url.substring(0,$tmplt$$.url.length-4)+".png";$elt$$.style.backgroundImage="url("+$onclick_png$$+")";$elt$$.style.backgroundPosition="center center";$elt$$.style.backgroundRepeat="no-repeat";var $createIt$$=!1,$onclick_png$$=function $$onclick_png$$$(){$createButton$$.setAttribute("disabled","disabled");$elt$$.style.backgroundColor="transparent";$elt$$.style.border="1px solid transparent";var $realUrl$$=$tmplt$$.url,$realUrl$$=/^https?:\/\//.test($realUrl$$)&&!$app$$.editor.isCorsEnabledForUrl($realUrl$$)?
PROXY_URL+"?url="+encodeURIComponent($realUrl$$):TEMPLATE_PATH+"/"+$realUrl$$;$spinner$$.spin($div$$);mxUtils.get($realUrl$$,mxUtils.bind($$jscomp$this$$,function($req_xml$$){$spinner$$.stop();200<=$req_xml$$.getStatus()&&299>=$req_xml$$.getStatus()&&($selectElement$$($elt$$,$tmplt$$),$createIt$$&&($req_xml$$=$req_xml$$.getText(),$create$$({iscset:!1,xml:$req_xml$$,libs:$tmplt$$.libs,extUrl:$tmplt$$.url,infoObj:$tmplt$$.infoObj})))}))},$ondblclick$$=function $$ondblclick$$$(){$createIt$$=!0}}else $elt$$.innerHTML=
'<table width="100%" height="100%" style="line-height:1em;word-break: break-all;"><tr>'+('<td align="center" valign="middle">'+mxResources.get($tmplt$$.title,null,$tmplt$$.title)+"</td></tr></table>");$tmplt$$.select&&$selectElement$$($elt$$,$tmplt$$);$onclick_png$$&&mxEvent.addListener($elt$$,"click",$onclick_png$$);$ondblclick$$&&mxEvent.addListener($elt$$,"dblclick",$ondblclick$$);$div$$.appendChild($elt$$)},$categories$$={},$initUi$$=function $$initUi$$$(){for(var $currentEntry$$,$addCatClick$$=
function $$addCatClick$$$($cat$$,$entry$$){var $cattemplates$$=$categories$$[$cat$$];mxEvent.addListener($entry$$,"click",function(){$currentEntry$$!==$entry$$&&($currentEntry$$.style.backgroundColor="",$entry$$.style.backgroundColor=$opts$$.leftHighlight,$currentEntry$$=$entry$$,$div$$.scrollTop=0,$div$$.innerHTML="",$addTemplates$$($cattemplates$$))})},$$jscomp$iter$1$$=$jscomp.makeIterator(Object.keys($categories$$)),$$jscomp$key$cat_cat$$=$$jscomp$iter$1$$.next();!$$jscomp$key$cat_cat$$.done;$$jscomp$key$cat_cat$$=
$$jscomp$iter$1$$.next()){var $$jscomp$key$cat_cat$$=$$jscomp$key$cat_cat$$.value,$label$6$$=mxResources.get($$jscomp$key$cat_cat$$)||$$jscomp$key$cat_cat$$.substring(0,1).toUpperCase()+$$jscomp$key$cat_cat$$.substring(1);18<$label$6$$.length&&($label$6$$=$label$6$$.substring(0,18)+"&hellip;");var $templateList$$=$categories$$[$$jscomp$key$cat_cat$$]||[],$entry$jscomp$0$$=document.createElement("div");$entry$jscomp$0$$.style.cssText="display:block;cursor:pointer;padding:6px;white-space:nowrap;margin-bottom:-1px;overflow:hidden;text-overflow:ellipsis;";
$entry$jscomp$0$$.setAttribute("title",$label$6$$+" ("+$templateList$$.length+")");mxUtils.write($entry$jscomp$0$$,$entry$jscomp$0$$.getAttribute("title"));$opts$$.itemPadding&&($entry$jscomp$0$$.style.padding=$opts$$.itemPadding);$list$$.appendChild($entry$jscomp$0$$);!$currentEntry$$&&$templateList$$.length&&($currentEntry$$=$entry$jscomp$0$$,$currentEntry$$.style.backgroundColor=$opts$$.leftHighlight);$addCatClick$$($$jscomp$key$cat_cat$$,$entry$jscomp$0$$)}};$opts$$.compact||($outer$$.appendChild($list$$),
$outer$$.appendChild($div$$),$spinner$$.spin($div$$),function(){return $jscomp.executeAsyncGenerator(function $jscomp$async$generator(){function $$jscomp$generator$impl$$($$jscomp$generator$next$arg$$,$$jscomp$generator$throw$arg$$){for(;;)switch($$jscomp$generator$state$$){case 0:return $category$$="CSET",$categories$$[$category$$]=$categories$$[$category$$]||[],$$jscomp$generator$state$$=1,{value:CsetUtils.getCsetTemplates(),done:!1};case 1:if(void 0===$$jscomp$generator$throw$arg$$){$$jscomp$generator$state$$=
2;break}$$jscomp$generator$state$$=-1;throw $$jscomp$generator$throw$arg$$;case 2:$csetTemplates$$=$$jscomp$generator$next$arg68$$=$$jscomp$generator$next$arg$$;for(var $$jscomp$iter$2$$=$jscomp.makeIterator($csetTemplates$$),$$jscomp$key$tmplt_tmplt$$=$$jscomp$iter$2$$.next();!$$jscomp$key$tmplt_tmplt$$.done;$$jscomp$key$tmplt_tmplt$$=$$jscomp$iter$2$$.next())$$jscomp$key$tmplt_tmplt$$=$$jscomp$key$tmplt_tmplt$$.value,$categories$$[$category$$].push({iscset:!0,xml:$$jscomp$key$tmplt_tmplt$$.markup,
title:$$jscomp$key$tmplt_tmplt$$.name.trim(),tooltip:$$jscomp$key$tmplt_tmplt$$.name.trim(),select:$csetTemplates$$[0]===$$jscomp$key$tmplt_tmplt$$,imgUrl:$$jscomp$key$tmplt_tmplt$$.imageSource&&"'data: image/png;base64,"+$$jscomp$key$tmplt_tmplt$$.imageSource+"'"});$addTemplates$$($categories$$[$category$$]);$spinner$$.stop();$initUi$$();$$jscomp$generator$state$$=-1;default:return{value:void 0,done:!0}}}var $$jscomp$generator$state$$=0,$csetTemplates$$,$$jscomp$generator$next$arg68$$,$category$$,
$iterator$$={next:function($arg$$){return $$jscomp$generator$impl$$($arg$$,void 0)},"throw":function($arg$$){return $$jscomp$generator$impl$$(void 0,$arg$$)},"return":function($arg$$){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();$iterator$$[Symbol.iterator]=function $$iterator$$$Symbol$iterator$(){return this};return $iterator$$}())}());mxEvent.addListener($nameInput$$,"keypress",function($e$$){$app$$.dialog.container.firstChild===$outer$$&&13===$e$$.keyCode&&$selected$$.template&&
($createButton$$.setAttribute("disabled","disabled"),$create$$({iscset:$selected$$.template.iscset,xml:$selected$$.template.xml,libs:$selected$$.template.libs,extUrl:$selected$$.template.exturl,infoObj:$selected$$.template.infoobj}),$createButton$$.removeAttribute("disabled"))});$btns$jscomp$1_divTop_header$$=document.createElement("div");$btns$jscomp$1_divTop_header$$.style.marginTop=$opts$$.compact?"4px":"16px";$btns$jscomp$1_divTop_header$$.style.textAlign="right";$btns$jscomp$1_divTop_header$$.style.position=
"absolute";$btns$jscomp$1_divTop_header$$.style.left="40px";$btns$jscomp$1_divTop_header$$.style.bottom="24px";$btns$jscomp$1_divTop_header$$.style.right="40px";$cancelBtn$jscomp$3_ext$$=mxUtils.button(mxResources.get("cancel"),function(){$opts$$.cancelCallback&&$opts$$.cancelCallback();$app$$.hideDialog(!0)});$cancelBtn$jscomp$3_ext$$.className="geBtn";!$app$$.editor.cancelFirst||$opts$$.createOnly&&!$opts$$.cancelCallback||$btns$jscomp$1_divTop_header$$.appendChild($cancelBtn$jscomp$3_ext$$);$opts$$.compact||
$app$$.isOffline()||!$opts$$.showName||$opts$$.callback||$opts$$.createOnly||($fromTmpBtn_helpBtn_importBtn_resourceimg$$=mxUtils.button(mxResources.get("help"),function(){$app$$.openLink("https://support.draw.io/display/DO/Creating+and+Opening+Files")}),$fromTmpBtn_helpBtn_importBtn_resourceimg$$.className="geBtn",$btns$jscomp$1_divTop_header$$.appendChild($fromTmpBtn_helpBtn_importBtn_resourceimg$$));$opts$$.compact||"1"===urlParams.embed||$opts$$.createOnly||$opts$$.hideFromTemplateUrl||($fromTmpBtn_helpBtn_importBtn_resourceimg$$=
mxUtils.button(mxResources.get("fromTemplateUrl"),function(){var $dlg$$=new FilenameDialog($app$$,"",mxResources.get("create"),function($fileUrl_url$$){$fileUrl_url$$&&($fileUrl_url$$=$app$$.getUrl(window.location.pathname+"?mode="+($app$$.mode||"")+("&title="+encodeURIComponent($nameInput$$.value)+" ")+("&create="+encodeURIComponent($fileUrl_url$$))),$app$$.getCurrentFile()?window.openWindow($fileUrl_url$$):window.location.href=$fileUrl_url$$)},mxResources.get("url"));$app$$.showDialog($dlg$$.container,
300,80,!0,!0);$dlg$$.init()}),$fromTmpBtn_helpBtn_importBtn_resourceimg$$.className="geBtn",$btns$jscomp$1_divTop_header$$.appendChild($fromTmpBtn_helpBtn_importBtn_resourceimg$$));Graph.fileSupport&&$opts$$.showImport&&($fromTmpBtn_helpBtn_importBtn_resourceimg$$=mxUtils.button(mxResources.get("import"),function(){if(!$app$$.newDlgFileInputElt){var $fileInput$$=document.createElement("input");$fileInput$$.setAttribute("multiple","multiple");$fileInput$$.setAttribute("type","file");mxEvent.addListener($fileInput$$,
"change",function(){$app$$.openFiles($fileInput$$.files,!0);$fileInput$$.value=""});$fileInput$$.style.display="none";document.body.appendChild($fileInput$$);$app$$.newDlgFileInputElt=$fileInput$$}$app$$.newDlgFileInputElt.click()}),$fromTmpBtn_helpBtn_importBtn_resourceimg$$.className="geBtn",$btns$jscomp$1_divTop_header$$.appendChild($fromTmpBtn_helpBtn_importBtn_resourceimg$$));$btns$jscomp$1_divTop_header$$.appendChild($createButton$$);$app$$.editor.cancelFirst||$opts$$.callback||$opts$$.createOnly&&
!$opts$$.cancelCallback||$btns$jscomp$1_divTop_header$$.appendChild($cancelBtn$jscomp$3_ext$$);$outer$$.appendChild($btns$jscomp$1_divTop_header$$);this.container=$outer$$},CreateDialog=function $CreateDialog$($editorUi$$,$preview_title$$,$createFn$$,$cancelFn$$,$dlgTitle$$,$btnLabel_div$$,$h3$$,$allowBrowser_browserOption_btns$$,$allowTab_downloadButton$$,$helpLink$$,$showDeviceButton$$,$rowLimit$$,$buttons$jscomp$4_cancelBtn$jscomp$4_data$$,$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,
$base64Encoded_h$$,$hints$$){function $create$$($mode$$){var $title$$=$nameInput$$.value;if(null==$mode$$||null!=$title$$&&0<$title$$.length)$editorUi$$.hideDialog(),$createFn$$($title$$,$mode$$)}console.log("Dialogs.js CreateDialog .... trace:");console.trace();$allowBrowser_browserOption_btns$$=null!=$allowBrowser_browserOption_btns$$?$allowBrowser_browserOption_btns$$:!0;$btnLabel_div$$=document.createElement("div");null==$cancelFn$$&&$editorUi$$.addLanguageMenu($btnLabel_div$$);$h3$$=document.createElement("h2");
mxUtils.write($h3$$,$dlgTitle$$||mxResources.get("create"));$h3$$.style.marginTop="0px";$h3$$.style.marginBottom="24px";$btnLabel_div$$.appendChild($h3$$);mxUtils.write($btnLabel_div$$,mxResources.get("filename")+":");var $nameInput$$=document.createElement("input");$nameInput$$.setAttribute("value",$preview_title$$);$nameInput$$.style.width="280px";$nameInput$$.style.marginLeft="10px";$nameInput$$.style.marginBottom="20px";this.init=function $this$init$(){$nameInput$$.focus();mxClient.IS_GC||mxClient.IS_FF||
5<=document.documentMode||mxClient.IS_QUIRKS?$nameInput$$.select():document.execCommand("selectAll",!1,null)};$btnLabel_div$$.appendChild($nameInput$$);null!=$hints$$&&$btnLabel_div$$.appendChild(FilenameDialog.createTypeHint($editorUi$$,$nameInput$$,$hints$$));null!=$buttons$jscomp$4_cancelBtn$jscomp$4_data$$&&null!=$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$&&"image/"==$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.substring(0,
6)&&($nameInput$$.style.width="160px",$preview_title$$=null,"image/svg+xml"==$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$&&mxClient.IS_SVG?($preview_title$$=document.createElement("div"),$preview_title$$.innerHTML=mxUtils.trim($buttons$jscomp$4_cancelBtn$jscomp$4_data$$),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$=$preview_title$$.getElementsByTagName("svg")[0],$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=
parseInt($buttons$jscomp$4_cancelBtn$jscomp$4_data$$.getAttribute("width")),$base64Encoded_h$$=parseInt($buttons$jscomp$4_cancelBtn$jscomp$4_data$$.getAttribute("height")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.setAttribute("viewBox","0 0 "+$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$+" "+$base64Encoded_h$$),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.setAttribute("width","120px"),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.setAttribute("height",
"80px")):($preview_title$$=document.createElement("img"),$preview_title$$.setAttribute("src","data:"+$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$+($base64Encoded_h$$?";base64,":";utf8,")+$buttons$jscomp$4_cancelBtn$jscomp$4_data$$)),$preview_title$$.style.position="absolute",$preview_title$$.style.top="70px",$preview_title$$.style.right="100px",$preview_title$$.style.maxWidth="120px",$preview_title$$.style.maxHeight="80px",mxUtils.setPrefixedStyle($preview_title$$.style,
"transform","translate(50%,-50%)"),$btnLabel_div$$.appendChild($preview_title$$),$allowTab_downloadButton$$&&Editor.popupsAllowed&&($preview_title$$.style.cursor="pointer",mxEvent.addListener($preview_title$$,"click",function(){$create$$("_blank")})));mxUtils.br($btnLabel_div$$);$buttons$jscomp$4_cancelBtn$jscomp$4_data$$=document.createElement("div");$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.style.textAlign="center";$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.style.marginTop="6px";$btnLabel_div$$.appendChild($buttons$jscomp$4_cancelBtn$jscomp$4_data$$);
$buttons$jscomp$4_cancelBtn$jscomp$4_data$$=document.createElement("select");$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.style.marginLeft="10px";$editorUi$$.isOfflineApp()||$editorUi$$.isOffline()||("function"===typeof window.DriveClient&&($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=document.createElement("option"),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("value",
App.MODE_GOOGLE),mxUtils.write($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,mxResources.get("googleDrive")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$)),"function"===typeof window.OneDriveClient&&($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=
document.createElement("option"),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("value",App.MODE_ONEDRIVE),mxUtils.write($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,mxResources.get("oneDrive")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$),
$editorUi$$.mode==App.MODE_ONEDRIVE&&$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("selected","selected")),"function"===typeof window.DropboxClient&&($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=document.createElement("option"),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("value",
App.MODE_DROPBOX),mxUtils.write($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,mxResources.get("dropbox")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$),$editorUi$$.mode==App.MODE_DROPBOX&&$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("selected",
"selected")),null!=$editorUi$$.gitHub&&($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=document.createElement("option"),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("value",App.MODE_GITHUB),mxUtils.write($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,mxResources.get("github")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$)),
"function"===typeof window.TrelloClient&&($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=document.createElement("option"),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("value",App.MODE_TRELLO),mxUtils.write($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,mxResources.get("trello")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$)));
Editor.useLocalStorage&&"device"!=urlParams.storage&&null==$editorUi$$.getCurrentFile()||($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=document.createElement("option"),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("value",App.MODE_DEVICE),mxUtils.write($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$,
mxResources.get("device")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$),$editorUi$$.mode!=App.MODE_DEVICE&&$allowBrowser_browserOption_btns$$||$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.setAttribute("selected","selected"));$allowBrowser_browserOption_btns$$&&isLocalStorage&&"0"!=urlParams.browser&&($allowBrowser_browserOption_btns$$=
document.createElement("option"),$allowBrowser_browserOption_btns$$.setAttribute("value",App.MODE_BROWSER),mxUtils.write($allowBrowser_browserOption_btns$$,mxResources.get("browser")),$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.appendChild($allowBrowser_browserOption_btns$$),$editorUi$$.mode==App.MODE_BROWSER&&$allowBrowser_browserOption_btns$$.setAttribute("selected","selected"));$allowBrowser_browserOption_btns$$=document.createElement("div");$allowBrowser_browserOption_btns$$.style.marginTop="26px";
$allowBrowser_browserOption_btns$$.style.textAlign="center";null!=$helpLink$$&&(mxUtils.button(mxResources.get("help"),function(){$editorUi$$.openLink($helpLink$$)}).className="geBtn");$buttons$jscomp$4_cancelBtn$jscomp$4_data$$=mxUtils.button(mxResources.get("cancel"),function(){null!=$cancelFn$$?$cancelFn$$():($editorUi$$.fileLoaded(null),$editorUi$$.hideDialog(),window.close(),window.location.href=$editorUi$$.getUrl())});$buttons$jscomp$4_cancelBtn$jscomp$4_data$$.className="geBtn";$editorUi$$.editor.cancelFirst&&
$allowBrowser_browserOption_btns$$.appendChild($buttons$jscomp$4_cancelBtn$jscomp$4_data$$);null==$cancelFn$$&&($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$=mxUtils.button(mxResources.get("decideLater"),function(){$create$$(null)}),$deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$.className="geBtn",$allowBrowser_browserOption_btns$$.appendChild($deviceOption_dropboxOption_gitHubOption_googleOption_laterBtn_mimeType$jscomp$6_oneDriveOption_trelloOption_w$$));
$allowTab_downloadButton$$&&Editor.popupsAllowed&&(mxUtils.button(mxResources.get("openInNewWindow"),function(){$create$$("_blank")}).className="geBtn");CreateDialog.showDownloadButton&&($allowTab_downloadButton$$=mxUtils.button(mxResources.get("download"),function(){$create$$("download")}),$allowTab_downloadButton$$.className="geBtn",$allowBrowser_browserOption_btns$$.appendChild($allowTab_downloadButton$$));$editorUi$$.editor.cancelFirst||$allowBrowser_browserOption_btns$$.appendChild($buttons$jscomp$4_cancelBtn$jscomp$4_data$$);
mxEvent.addListener($nameInput$$,"keypress",function($e$$){13==$e$$.keyCode?$create$$(App.MODE_DEVICE):27==$e$$.keyCode&&($editorUi$$.fileLoaded(null),$editorUi$$.hideDialog(),window.close())});$btnLabel_div$$.appendChild($allowBrowser_browserOption_btns$$);this.container=$btnLabel_div$$};CreateDialog.showDownloadButton=!0;
var PopupDialog=function $PopupDialog$($editorUi$$,$url$$,$pre$$,$fallback$$,$hideDialog$$){$hideDialog$$=null!=$hideDialog$$?$hideDialog$$:!0;var $div$$=document.createElement("div");$div$$.style.textAlign="left";mxUtils.write($div$$,mxResources.get("fileOpenLocation"));mxUtils.br($div$$);mxUtils.br($div$$);var $replaceBtn$$=mxUtils.button(mxResources.get("openInThisWindow"),function(){$hideDialog$$&&$editorUi$$.hideDialog();null!=$fallback$$&&$fallback$$()});$replaceBtn$$.className="geBtn";$replaceBtn$$.style.marginBottom=
"8px";$replaceBtn$$.style.width="280px";$div$$.appendChild($replaceBtn$$);mxUtils.br($div$$);var $wndBtn$$=mxUtils.button(mxResources.get("openInNewWindow"),function(){$hideDialog$$&&$editorUi$$.hideDialog();null!=$pre$$&&$pre$$();$editorUi$$.openLink($url$$,null,!0)});$wndBtn$$.className="geBtn gePrimaryBtn";$wndBtn$$.style.width=$replaceBtn$$.style.width;$div$$.appendChild($wndBtn$$);mxUtils.br($div$$);mxUtils.br($div$$);mxUtils.write($div$$,mxResources.get("allowPopups"));this.container=$div$$},
ImageDialog=function $ImageDialog$($editorUi$$,$bg_cancelBtn$jscomp$5_inner_title$$,$btns$$,$fn$$,$ignoreExisting$$,$convertDataUri$$){$convertDataUri$$=null!=$convertDataUri$$?$convertDataUri$$:!0;var $graph$$=$editorUi$$.editor.graph,$div$$=document.createElement("div");mxUtils.write($div$$,$bg_cancelBtn$jscomp$5_inner_title$$);$bg_cancelBtn$jscomp$5_inner_title$$=document.createElement("div");$bg_cancelBtn$jscomp$5_inner_title$$.className="geTitle";$bg_cancelBtn$jscomp$5_inner_title$$.style.backgroundColor=
"transparent";$bg_cancelBtn$jscomp$5_inner_title$$.style.borderColor="transparent";$bg_cancelBtn$jscomp$5_inner_title$$.style.whiteSpace="nowrap";$bg_cancelBtn$jscomp$5_inner_title$$.style.textOverflow="clip";$bg_cancelBtn$jscomp$5_inner_title$$.style.cursor="default";mxClient.IS_VML||($bg_cancelBtn$jscomp$5_inner_title$$.style.paddingRight="20px");var $linkInput$$=document.createElement("input");$linkInput$$.setAttribute("value",$btns$$);$linkInput$$.setAttribute("type","text");$linkInput$$.setAttribute("spellcheck",
"false");$linkInput$$.setAttribute("autocorrect","off");$linkInput$$.setAttribute("autocomplete","off");$linkInput$$.setAttribute("autocapitalize","off");$linkInput$$.style.marginTop="6px";$linkInput$$.style.width=(Graph.fileSupport?420:340)+(mxClient.IS_QUIRKS?20:-20)+"px";$linkInput$$.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')";$linkInput$$.style.backgroundRepeat="no-repeat";$linkInput$$.style.backgroundPosition="100% 50%";$linkInput$$.style.paddingRight="14px";$btns$$=document.createElement("div");
$btns$$.setAttribute("title",mxResources.get("reset"));$btns$$.style.position="relative";$btns$$.style.left="-16px";$btns$$.style.width="12px";$btns$$.style.height="14px";$btns$$.style.cursor="pointer";$btns$$.style.display=mxClient.IS_VML?"inline":"inline-block";$btns$$.style.top=(mxClient.IS_VML?0:3)+"px";$btns$$.style.background="url('"+$editorUi$$.editor.transparentImage+"')";mxEvent.addListener($btns$$,"click",function(){$linkInput$$.value="";$linkInput$$.focus()});$bg_cancelBtn$jscomp$5_inner_title$$.appendChild($linkInput$$);
$bg_cancelBtn$jscomp$5_inner_title$$.appendChild($btns$$);$div$$.appendChild($bg_cancelBtn$jscomp$5_inner_title$$);var $insertImage$$=function $$insertImage$$$($newValue$$,$w$$,$h$$,$resize$$){var $dataUri$$="data:"==$newValue$$.substring(0,5);!$editorUi$$.isOffline()||$dataUri$$&&"undefined"===typeof chrome?0<$newValue$$.length&&$editorUi$$.spinner.spin(document.body,mxResources.get("inserting"))?$editorUi$$.loadImage($newValue$$,function($img$$){$editorUi$$.spinner.stop();$editorUi$$.hideDialog();
var $s$$=!1===$resize$$?1:null!=$w$$&&null!=$h$$?Math.max($w$$/$img$$.width,$h$$/$img$$.height):Math.min(1,Math.min(520/$img$$.width,520/$img$$.height));$convertDataUri$$&&($newValue$$=$editorUi$$.convertDataUri($newValue$$));$fn$$($newValue$$,Math.round(Number($img$$.width)*$s$$),Math.round(Number($img$$.height)*$s$$))},function(){$editorUi$$.spinner.stop();$fn$$(null);$editorUi$$.showError(mxResources.get("error"),mxResources.get("fileNotFound"),mxResources.get("ok"))}):($editorUi$$.hideDialog(),
$fn$$($newValue$$)):($newValue$$=$editorUi$$.convertDataUri($newValue$$),$w$$=null==$w$$?120:$w$$,$h$$=null==$h$$?100:$h$$,$editorUi$$.hideDialog(),$fn$$($newValue$$,$w$$,$h$$))},$apply$$=function $$apply$$$($newValue$$,$resize$$){if(null!=$newValue$$){var $geo$$=$ignoreExisting$$?null:$graph$$.getModel().getGeometry($graph$$.getSelectionCell());null!=$geo$$?$insertImage$$($newValue$$,$geo$$.width,$geo$$.height,$resize$$):$insertImage$$($newValue$$,null,null,$resize$$)}else $editorUi$$.hideDialog(),
$fn$$(null)};this.init=function $this$init$(){$linkInput$$.focus();if(Graph.fileSupport){$linkInput$$.setAttribute("placeholder",mxResources.get("dragImagesHere"));var $dlg$$=$div$$.parentNode,$dropElt$$=null;mxEvent.addListener($dlg$$,"dragleave",function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);$evt$$.stopPropagation();$evt$$.preventDefault()});mxEvent.addListener($dlg$$,"dragover",mxUtils.bind(this,function($evt$$){null==$dropElt$$&&(!mxClient.IS_IE||
10<document.documentMode)&&($dropElt$$=$editorUi$$.highlightElement($dlg$$));$evt$$.stopPropagation();$evt$$.preventDefault()}));mxEvent.addListener($dlg$$,"drop",mxUtils.bind(this,function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);if(0<$evt$$.dataTransfer.files.length)$editorUi$$.importFiles($evt$$.dataTransfer.files,0,0,$editorUi$$.maxImageSize,function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$fileName$$,$resize$$){$apply$$($data$$,$resize$$)},function(){},
function($file$$){return"image/"==$file$$.type.substring(0,6)},function($queue$$){for(var $i$$=0;$i$$<$queue$$.length;$i$$++)$queue$$[$i$$]()},!mxEvent.isControlDown($evt$$));else if(0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/uri-list")){var $uri$$=$evt$$.dataTransfer.getData("text/uri-list");/\.(gif|jpg|jpeg|tiff|png|svg)($|\?)/i.test($uri$$)&&$apply$$(decodeURIComponent($uri$$))}$evt$$.stopPropagation();$evt$$.preventDefault()}),!1)}};$btns$$=document.createElement("div");$btns$$.style.marginTop=
mxClient.IS_QUIRKS?"22px":"14px";$btns$$.style.textAlign="right";$bg_cancelBtn$jscomp$5_inner_title$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.spinner.stop();$editorUi$$.hideDialog()});$bg_cancelBtn$jscomp$5_inner_title$$.className="geBtn";$editorUi$$.editor.cancelFirst&&$btns$$.appendChild($bg_cancelBtn$jscomp$5_inner_title$$);ImageDialog.filePicked=function $ImageDialog$filePicked$($data$jscomp$63_thumb$$){$data$jscomp$63_thumb$$.action==google.picker.Action.PICKED&&null!=
$data$jscomp$63_thumb$$.docs[0].thumbnails&&($data$jscomp$63_thumb$$=$data$jscomp$63_thumb$$.docs[0].thumbnails[$data$jscomp$63_thumb$$.docs[0].thumbnails.length-1],null!=$data$jscomp$63_thumb$$&&($linkInput$$.value=$data$jscomp$63_thumb$$.url));$linkInput$$.focus()};if(Graph.fileSupport&&null==document.documentMode){if(null==$editorUi$$.imgDlgFileInputElt){var $fileInput$$=document.createElement("input");$fileInput$$.setAttribute("multiple","multiple");$fileInput$$.setAttribute("type","file");mxEvent.addListener($fileInput$$,
"change",function($evt$$){$editorUi$$.importFiles($fileInput$$.files,0,0,$editorUi$$.maxImageSize,function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$){$apply$$($data$$)},function(){},function($file$$){return"image/"==$file$$.type.substring(0,6)},function($queue$$){for(var $i$$=0;$i$$<$queue$$.length;$i$$++)$queue$$[$i$$]()},!0);$fileInput$$.value=""});$fileInput$$.style.display="none";document.body.appendChild($fileInput$$);$editorUi$$.imgDlgFileInputElt=$fileInput$$}var $applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$=
mxUtils.button(mxResources.get("open"),function(){$editorUi$$.imgDlgFileInputElt.click()});$applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$.className="geBtn";$btns$$.appendChild($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$)}document.createElement("canvas").getContext&&"data:image/"==$linkInput$$.value.substring(0,11)&&"data:image/svg"!=$linkInput$$.value.substring(0,14)&&($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$=mxUtils.button(mxResources.get("crop"),
function(){var $dlg$$=new CropImageDialog($editorUi$$,$linkInput$$.value,function($image$$){$linkInput$$.value=$image$$});$editorUi$$.showDialog($dlg$$.container,200,185,!0,!0);$dlg$$.init()}),$applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$.className="geBtn",$btns$$.appendChild($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$));"undefined"!=typeof google&&"undefined"!=typeof google.picker&&window.self===window.top&&($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$=
mxUtils.button(mxResources.get("search"),function(){if(null==$editorUi$$.imageSearchPicker){var $picker$$=(new google.picker.PickerBuilder).setLocale(mxLanguage).addView(google.picker.ViewId.IMAGE_SEARCH).enableFeature(google.picker.Feature.NAV_HIDDEN);$editorUi$$.imageSearchPicker=$picker$$.setCallback(function($data$$){ImageDialog.filePicked($data$$)}).build()}$editorUi$$.imageSearchPicker.setVisible(!0)}),$applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$.className="geBtn",$btns$$.appendChild($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$),
null!=$editorUi$$.drive&&"1"==urlParams.photos&&($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$=mxUtils.button(mxResources.get("googlePlus"),function(){$editorUi$$.spinner.spin(document.body,mxResources.get("authorizing"))&&$editorUi$$.drive.checkToken(mxUtils.bind(this,function(){$editorUi$$.spinner.stop();if(null==$editorUi$$.photoPicker){var $picker$jscomp$3_token$$=gapi.auth.getToken().access_token,$picker$jscomp$3_token$$=(new google.picker.PickerBuilder).setAppId($editorUi$$.drive.appId).setLocale(mxLanguage).setOAuthToken($picker$jscomp$3_token$$).addView(google.picker.ViewId.PHOTOS).addView(google.picker.ViewId.PHOTO_ALBUMS).addView(google.picker.ViewId.PHOTO_UPLOAD);
$editorUi$$.photoPicker=$picker$jscomp$3_token$$.setCallback(function($data$$){ImageDialog.filePicked($data$$)}).build()}$editorUi$$.photoPicker.setVisible(!0)}))}),$applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$.className="geBtn",$btns$$.appendChild($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$)));mxEvent.addListener($linkInput$$,"keypress",function($e$$){13==$e$$.keyCode&&$apply$$($linkInput$$.value)});$applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$=
mxUtils.button(mxResources.get("apply"),function(){$apply$$($linkInput$$.value)});$applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$.className="geBtn gePrimaryBtn";$btns$$.appendChild($applyBtn$jscomp$1_btn$jscomp$2_cropBtn_gpBtn$jscomp$1_searchBtn$$);$editorUi$$.editor.cancelFirst||$btns$$.appendChild($bg_cancelBtn$jscomp$5_inner_title$$);Graph.fileSupport&&($btns$$.style.marginTop="120px",$div$$.style.backgroundImage="url('"+IMAGE_PATH+"/droptarget.png')",$div$$.style.backgroundPosition=
"center 65%",$div$$.style.backgroundRepeat="no-repeat",$bg_cancelBtn$jscomp$5_inner_title$$=document.createElement("div"),$bg_cancelBtn$jscomp$5_inner_title$$.style.position="absolute",$bg_cancelBtn$jscomp$5_inner_title$$.style.width="420px",$bg_cancelBtn$jscomp$5_inner_title$$.style.top="58%",$bg_cancelBtn$jscomp$5_inner_title$$.style.textAlign="center",$bg_cancelBtn$jscomp$5_inner_title$$.style.fontSize="18px",$bg_cancelBtn$jscomp$5_inner_title$$.style.color="#a0c3ff",mxUtils.write($bg_cancelBtn$jscomp$5_inner_title$$,
mxResources.get("dragImagesHere")),$div$$.appendChild($bg_cancelBtn$jscomp$5_inner_title$$));$div$$.appendChild($btns$$);this.container=$div$$},LinkDialog=function $LinkDialog$($editorUi$$,$initialValue$$,$btnLabel$jscomp$1_cancelBtn$$,$fn$$,$pageFound_showPages$$){function $addButton$$($src$$,$img$$,$btn$jscomp$3_fn$$){$btn$jscomp$3_fn$$=mxUtils.button("",$btn$jscomp$3_fn$$);$btn$jscomp$3_fn$$.className="geBtn";$btn$jscomp$3_fn$$.setAttribute("title",$img$$);$img$$=document.createElement("img");
$img$$.style.height="26px";$img$$.style.width="26px";$img$$.setAttribute("src",$src$$);$btn$jscomp$3_fn$$.style.minWidth="42px";$btn$jscomp$3_fn$$.style.verticalAlign="middle";$btn$jscomp$3_fn$$.appendChild($img$$);$btns$$.appendChild($btn$jscomp$3_fn$$)}var $div$$=document.createElement("div");mxUtils.write($div$$,mxResources.get("editLink")+":");var $helpBtn$jscomp$2_inner$$=document.createElement("div");$helpBtn$jscomp$2_inner$$.className="geTitle";$helpBtn$jscomp$2_inner$$.style.backgroundColor=
"transparent";$helpBtn$jscomp$2_inner$$.style.borderColor="transparent";$helpBtn$jscomp$2_inner$$.style.whiteSpace="nowrap";$helpBtn$jscomp$2_inner$$.style.textOverflow="clip";$helpBtn$jscomp$2_inner$$.style.cursor="default";mxClient.IS_VML||($helpBtn$jscomp$2_inner$$.style.paddingRight="20px");var $linkInput$$=document.createElement("input");$linkInput$$.setAttribute("placeholder",mxResources.get("dragUrlsHere"));$linkInput$$.setAttribute("type","text");$linkInput$$.style.marginTop="6px";$linkInput$$.style.width=
"440px";$linkInput$$.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')";$linkInput$$.style.backgroundRepeat="no-repeat";$linkInput$$.style.backgroundPosition="100% 50%";$linkInput$$.style.paddingRight="14px";var $cross$jscomp$1_i$$=document.createElement("div");$cross$jscomp$1_i$$.setAttribute("title",mxResources.get("reset"));$cross$jscomp$1_i$$.style.position="relative";$cross$jscomp$1_i$$.style.left="-16px";$cross$jscomp$1_i$$.style.width="12px";$cross$jscomp$1_i$$.style.height="14px";
$cross$jscomp$1_i$$.style.cursor="pointer";$cross$jscomp$1_i$$.style.display=mxClient.IS_VML?"inline":"inline-block";$cross$jscomp$1_i$$.style.top=(mxClient.IS_VML?0:3)+"px";$cross$jscomp$1_i$$.style.background="url('"+$editorUi$$.editor.transparentImage+"')";mxEvent.addListener($cross$jscomp$1_i$$,"click",function(){$linkInput$$.value="";$linkInput$$.focus()});var $urlRadio$$=document.createElement("input");$urlRadio$$.style.cssText="margin-right:8px;margin-bottom:8px;";$urlRadio$$.setAttribute("value",
"url");$urlRadio$$.setAttribute("type","radio");$urlRadio$$.setAttribute("name","current-linkdialog");var $pageRadio$$=document.createElement("input");$pageRadio$$.style.cssText="margin-right:8px;margin-bottom:8px;";$pageRadio$$.setAttribute("value","url");$pageRadio$$.setAttribute("type","radio");$pageRadio$$.setAttribute("name","current-linkdialog");var $pageSelect$$=document.createElement("select");$pageSelect$$.style.width="420px";if($pageFound_showPages$$&&null!=$editorUi$$.pages){null!=$initialValue$$&&
"data:page/id,"==$initialValue$$.substring(0,13)?($pageRadio$$.setAttribute("checked","checked"),$pageRadio$$.defaultChecked=!0):($linkInput$$.setAttribute("value",$initialValue$$),$urlRadio$$.setAttribute("checked","checked"),$urlRadio$$.defaultChecked=!0);$linkInput$$.style.width="420px";$helpBtn$jscomp$2_inner$$.appendChild($urlRadio$$);$helpBtn$jscomp$2_inner$$.appendChild($linkInput$$);$helpBtn$jscomp$2_inner$$.appendChild($cross$jscomp$1_i$$);mxUtils.br($helpBtn$jscomp$2_inner$$);$helpBtn$jscomp$2_inner$$.appendChild($pageRadio$$);
$pageFound_showPages$$=!1;for($cross$jscomp$1_i$$=0;$cross$jscomp$1_i$$<$editorUi$$.pages.length;$cross$jscomp$1_i$$++){var $pageOption$$=document.createElement("option");mxUtils.write($pageOption$$,$editorUi$$.pages[$cross$jscomp$1_i$$].getName()||mxResources.get("pageWithNumber",[$cross$jscomp$1_i$$+1]));$pageOption$$.setAttribute("value","data:page/id,"+$editorUi$$.pages[$cross$jscomp$1_i$$].getId());$initialValue$$==$pageOption$$.getAttribute("value")&&($pageOption$$.setAttribute("selected","selected"),
$pageFound_showPages$$=!0);$pageSelect$$.appendChild($pageOption$$)}if(!$pageFound_showPages$$&&$pageRadio$$.checked){var $notFoundOption$$=document.createElement("option");mxUtils.write($notFoundOption$$,mxResources.get("pageNotFound"));$notFoundOption$$.setAttribute("disabled","disabled");$notFoundOption$$.setAttribute("selected","selected");$notFoundOption$$.setAttribute("value","pageNotFound");$pageSelect$$.appendChild($notFoundOption$$);mxEvent.addListener($pageSelect$$,"change",function(){null==
$notFoundOption$$.parentNode||$notFoundOption$$.selected||$notFoundOption$$.parentNode.removeChild($notFoundOption$$)})}$helpBtn$jscomp$2_inner$$.appendChild($pageSelect$$)}else $linkInput$$.setAttribute("value",$initialValue$$),$helpBtn$jscomp$2_inner$$.appendChild($linkInput$$),$helpBtn$jscomp$2_inner$$.appendChild($cross$jscomp$1_i$$);$div$$.appendChild($helpBtn$jscomp$2_inner$$);var $mainBtn$$=mxUtils.button($btnLabel$jscomp$1_cancelBtn$$,function(){$editorUi$$.hideDialog();$fn$$($pageRadio$$.checked?
"pageNotFound"!==$pageSelect$$.value?$pageSelect$$.value:$initialValue$$:$linkInput$$.value,LinkDialog.selectedDocs)});$mainBtn$$.style.verticalAlign="middle";$mainBtn$$.className="geBtn gePrimaryBtn";this.init=function $this$init$(){$pageRadio$$.checked?$pageSelect$$.focus():($linkInput$$.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$linkInput$$.select():document.execCommand("selectAll",!1,null));mxEvent.addListener($pageSelect$$,"focus",function(){$urlRadio$$.removeAttribute("checked");
$pageRadio$$.setAttribute("checked","checked");$pageRadio$$.checked=!0});mxEvent.addListener($linkInput$$,"focus",function(){$pageRadio$$.removeAttribute("checked");$urlRadio$$.setAttribute("checked","checked");$urlRadio$$.checked=!0});if(Graph.fileSupport){var $dlg$$=$div$$.parentNode,$dropElt$$=null;mxEvent.addListener($dlg$$,"dragleave",function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);$evt$$.stopPropagation();$evt$$.preventDefault()});mxEvent.addListener($dlg$$,
"dragover",mxUtils.bind(this,function($evt$$){null==$dropElt$$&&(!mxClient.IS_IE||10<document.documentMode)&&($dropElt$$=$editorUi$$.highlightElement($dlg$$));$evt$$.stopPropagation();$evt$$.preventDefault()}));mxEvent.addListener($dlg$$,"drop",mxUtils.bind(this,function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/uri-list")&&($linkInput$$.value=decodeURIComponent($evt$$.dataTransfer.getData("text/uri-list")),
$urlRadio$$.setAttribute("checked","checked"),$urlRadio$$.checked=!0,$mainBtn$$.click());$evt$$.stopPropagation();$evt$$.preventDefault()}),!1)}};var $btns$$=document.createElement("div");$btns$$.style.marginTop="20px";$btns$$.style.textAlign="right";$btnLabel$jscomp$1_cancelBtn$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$btnLabel$jscomp$1_cancelBtn$$.style.verticalAlign="middle";$btnLabel$jscomp$1_cancelBtn$$.className="geBtn";$editorUi$$.editor.cancelFirst&&
$btns$$.appendChild($btnLabel$jscomp$1_cancelBtn$$);$helpBtn$jscomp$2_inner$$=mxUtils.button(mxResources.get("help"),function(){$editorUi$$.openLink("https://desk.draw.io/solution/articles/16000080137")});$helpBtn$jscomp$2_inner$$.style.verticalAlign="middle";$helpBtn$jscomp$2_inner$$.className="geBtn";$btns$$.appendChild($helpBtn$jscomp$2_inner$$);$editorUi$$.isOffline()&&!mxClient.IS_CHROMEAPP&&($helpBtn$jscomp$2_inner$$.style.display="none");LinkDialog.selectedDocs=null;LinkDialog.filePicked=function $LinkDialog$filePicked$($data$$){if($data$$.action==
google.picker.Action.PICKED){LinkDialog.selectedDocs=$data$$.docs;var $href$$=$data$$.docs[0].url;"application/mxe"==$data$$.docs[0].mimeType||null!=$data$$.docs[0].mimeType&&"application/vnd.jgraph."==$data$$.docs[0].mimeType.substring(0,23)?$href$$="https://www.draw.io/#G"+$data$$.docs[0].id:"application/vnd.google-apps.folder"==$data$$.docs[0].mimeType&&($href$$="https://drive.google.com/#folders/"+$data$$.docs[0].id);$linkInput$$.value=$href$$;$linkInput$$.focus()}else LinkDialog.selectedDocs=
null;$linkInput$$.focus()};"undefined"!=typeof google&&"undefined"!=typeof google.picker&&null!=$editorUi$$.drive&&$addButton$$(IMAGE_PATH+"/google-drive-logo.svg",mxResources.get("googlePlus"),function(){$editorUi$$.spinner.spin(document.body,mxResources.get("authorizing"))&&$editorUi$$.drive.checkToken(mxUtils.bind(this,function(){$editorUi$$.spinner.stop();if(null==$editorUi$$.linkPicker){var $picker$jscomp$4_token$$=gapi.auth.getToken().access_token,$view$$=(new google.picker.DocsView(google.picker.ViewId.FOLDERS)).setParent("root").setIncludeFolders(!0).setSelectFolderEnabled(!0),
$view2$$=(new google.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(!0),$view21$$=(new google.picker.DocsView).setIncludeFolders(!0).setEnableTeamDrives(!0).setSelectFolderEnabled(!0),$picker$jscomp$4_token$$=(new google.picker.PickerBuilder).setAppId($editorUi$$.drive.appId).setLocale(mxLanguage).setOAuthToken($picker$jscomp$4_token$$).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).addView($view$$).addView($view2$$).addView($view21$$).addView(google.picker.ViewId.RECENTLY_PICKED).addView(google.picker.ViewId.IMAGE_SEARCH).addView(google.picker.ViewId.VIDEO_SEARCH).addView(google.picker.ViewId.MAPS);
"1"==urlParams.photos&&$picker$jscomp$4_token$$.addView(google.picker.ViewId.PHOTOS).addView(google.picker.ViewId.PHOTO_ALBUMS).addView(google.picker.ViewId.PHOTO_UPLOAD);$editorUi$$.linkPicker=$picker$jscomp$4_token$$.setCallback(function($data$$){LinkDialog.filePicked($data$$)}).build()}$editorUi$$.linkPicker.setVisible(!0)}))});"undefined"!=typeof Dropbox&&"undefined"!=typeof Dropbox.choose&&$addButton$$(IMAGE_PATH+"/dropbox-logo.svg",mxResources.get("dropbox"),function(){Dropbox.choose({linkType:"direct",
cancel:function(){},success:function($files$$){$linkInput$$.value=$files$$[0].link;$linkInput$$.focus()}})});null!=$editorUi$$.oneDrive&&$addButton$$(IMAGE_PATH+"/onedrive-logo.svg",mxResources.get("oneDrive"),function(){$editorUi$$.oneDrive.pickFile(function($id$$,$files$$){$linkInput$$.value=$files$$.value[0].webUrl;$linkInput$$.focus()})});null!=$editorUi$$.gitHub&&$addButton$$(IMAGE_PATH+"/github-logo.svg",mxResources.get("github"),function(){$editorUi$$.gitHub.pickFile(function($path$$){if(null!=
$path$$){$path$$=$path$$.split("/");var $org$$=$path$$[0],$repo$$=$path$$[1],$ref$$=$path$$[2];$path$$=$path$$.slice(3,$path$$.length).join("/");$linkInput$$.value="https://github.com/"+$org$$+"/"+$repo$$+"/blob/"+$ref$$+"/"+$path$$;$linkInput$$.focus()}})});mxEvent.addListener($linkInput$$,"keypress",function($e$$){13==$e$$.keyCode&&($editorUi$$.hideDialog(),$fn$$($pageRadio$$.checked?$pageSelect$$.value:$linkInput$$.value,LinkDialog.selectedDocs))});$btns$$.appendChild($mainBtn$$);$editorUi$$.editor.cancelFirst||
$btns$$.appendChild($btnLabel$jscomp$1_cancelBtn$$);$div$$.appendChild($btns$$);this.container=$div$$},AboutDialog=function $AboutDialog$($editorUi$$){var $div$$=document.createElement("div");$div$$.style.marginTop="6px";$div$$.setAttribute("align","center");CsetUtils.makeHttpRequest({method:"GET",url:"about-diag.html",onreadystatechange:function($e$$){if(4===$e$$.readyState)switch($e$$.status){case 200:$div$$.innerHTML=$e$$.responseText}}});mxEvent.addListener($div$$,"click",function($e$$){"A"!==
mxEvent.getSource($e$$).nodeName&&$editorUi$$.hideDialog()});this.container=$div$$},DrawIoAboutDialog=function $DrawIoAboutDialog$($editorUi$$){var $div$$=document.createElement("div");$div$$.style.marginTop="6px";$div$$.setAttribute("align","center");var $clr_img$$=document.createElement("img");$clr_img$$.style.border="0px";mxClient.IS_SVG?($clr_img$$.setAttribute("width","164"),$clr_img$$.setAttribute("height","221"),$clr_img$$.style.width="164px",$clr_img$$.style.height="221px",$clr_img$$.setAttribute("src",
IMAGE_PATH+"/drawlogo-text-bottom.svg")):($clr_img$$.setAttribute("width","176"),$clr_img$$.setAttribute("height","219"),$clr_img$$.style.width="170px",$clr_img$$.style.height="219px",$clr_img$$.setAttribute("src",IMAGE_PATH+"/logo-flat.png"));"dark"==uiTheme&&($clr_img$$.style.filter="grayscale(100%) invert(100%)");$div$$.appendChild($clr_img$$);mxUtils.br($div$$);var $clr_img$$="dark"==uiTheme?"#cccccc":"#505050",$small_v$$=document.createElement("small");$small_v$$.innerHTML="v "+EditorUi.VERSION;
$small_v$$.style.color=$clr_img$$;$div$$.appendChild($small_v$$);mxUtils.br($div$$);mxUtils.br($div$$);$small_v$$=document.createElement("small");$small_v$$.style.color=$clr_img$$;$small_v$$.innerHTML='&copy; 2005-2019 <a href="https://about.draw.io/" style="color:inherit;" target="_blank">JGraph Ltd</a>.<br>All Rights Reserved.';$div$$.appendChild($small_v$$);mxEvent.addListener($div$$,"click",function($e$$){"A"!==mxEvent.getSource($e$$).nodeName&&$editorUi$$.hideDialog()});this.container=$div$$},
FeedbackDialog=function $FeedbackDialog$($editorUi$$){var $div$$=document.createElement("div"),$buttons$jscomp$5_label$jscomp$7_p2$$=document.createElement("div");mxUtils.write($buttons$jscomp$5_label$jscomp$7_p2$$,mxResources.get("sendYourFeedbackToDrawIo"));$buttons$jscomp$5_label$jscomp$7_p2$$.style.fontSize="18px";$buttons$jscomp$5_label$jscomp$7_p2$$.style.marginBottom="18px";$div$$.appendChild($buttons$jscomp$5_label$jscomp$7_p2$$);$buttons$jscomp$5_label$jscomp$7_p2$$=document.createElement("div");
mxUtils.write($buttons$jscomp$5_label$jscomp$7_p2$$,mxResources.get("yourEmailAddress")+" ("+mxResources.get("required")+")");$div$$.appendChild($buttons$jscomp$5_label$jscomp$7_p2$$);var $email$$=document.createElement("input");$email$$.setAttribute("type","text");$email$$.style.marginTop="6px";$email$$.style.width="600px";var $sendButton$$=mxUtils.button(mxResources.get("sendMessage"),function(){var $diagram$$=$textarea$$.value+($cb$$.checked?"\nDiagram:\n"+mxUtils.getXml($editorUi$$.getXmlFileData()):
"")+"\nBrowser:\n"+navigator.userAgent;$diagram$$.length>FeedbackDialog.maxAttachmentSize?$editorUi$$.alert(mxResources.get("drawingTooLarge")):($editorUi$$.hideDialog(),$editorUi$$.spinner.spin(document.body)&&mxUtils.post(null!=FeedbackDialog.feedbackUrl?FeedbackDialog.feedbackUrl:"/email","email="+encodeURIComponent($email$$.value)+"&version="+encodeURIComponent(EditorUi.VERSION)+"&url="+encodeURIComponent(window.location.href)+"&body="+encodeURIComponent("Feedback:\n"+$diagram$$),function($req$$){$editorUi$$.spinner.stop();
200<=$req$$.getStatus()&&299>=$req$$.getStatus()?$editorUi$$.alert(mxResources.get("feedbackSent")):$editorUi$$.alert(mxResources.get("errorSendingFeedback"))},function(){$editorUi$$.spinner.stop();$editorUi$$.alert(mxResources.get("errorSendingFeedback"))}))});$sendButton$$.className="geBtn gePrimaryBtn";$sendButton$$.setAttribute("disabled","disabled");var $re$$=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
mxEvent.addListener($email$$,"change",function(){0<$email$$.value.length&&0<$re$$.test($email$$.value)?$sendButton$$.removeAttribute("disabled"):$sendButton$$.setAttribute("disabled","disabled")});mxEvent.addListener($email$$,"keyup",function(){0<$email$$.value.length&&$re$$.test($email$$.value)?$sendButton$$.removeAttribute("disabled"):$sendButton$$.setAttribute("disabled","disabled")});$div$$.appendChild($email$$);this.init=function $this$init$(){$email$$.focus()};var $cb$$=document.createElement("input");
$cb$$.setAttribute("type","checkbox");$cb$$.setAttribute("checked","checked");$cb$$.defaultChecked=!0;$buttons$jscomp$5_label$jscomp$7_p2$$=document.createElement("p");$buttons$jscomp$5_label$jscomp$7_p2$$.style.marginTop="14px";$buttons$jscomp$5_label$jscomp$7_p2$$.appendChild($cb$$);var $cancelBtn$jscomp$7_span$$=document.createElement("span");mxUtils.write($cancelBtn$jscomp$7_span$$," "+mxResources.get("includeCopyOfMyDiagram"));$buttons$jscomp$5_label$jscomp$7_p2$$.appendChild($cancelBtn$jscomp$7_span$$);
mxEvent.addListener($cancelBtn$jscomp$7_span$$,"click",function($evt$$){$cb$$.checked=!$cb$$.checked;mxEvent.consume($evt$$)});$div$$.appendChild($buttons$jscomp$5_label$jscomp$7_p2$$);$buttons$jscomp$5_label$jscomp$7_p2$$=document.createElement("div");mxUtils.write($buttons$jscomp$5_label$jscomp$7_p2$$,mxResources.get("feedback"));$div$$.appendChild($buttons$jscomp$5_label$jscomp$7_p2$$);var $textarea$$=document.createElement("textarea");$textarea$$.style.resize="none";$textarea$$.style.width="600px";
$textarea$$.style.height="140px";$textarea$$.style.marginTop="6px";$textarea$$.setAttribute("placeholder",mxResources.get("comments"));$div$$.appendChild($textarea$$);$buttons$jscomp$5_label$jscomp$7_p2$$=document.createElement("div");$buttons$jscomp$5_label$jscomp$7_p2$$.style.marginTop="26px";$buttons$jscomp$5_label$jscomp$7_p2$$.style.textAlign="right";$cancelBtn$jscomp$7_span$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$jscomp$7_span$$.className=
"geBtn";$editorUi$$.editor.cancelFirst?($buttons$jscomp$5_label$jscomp$7_p2$$.appendChild($cancelBtn$jscomp$7_span$$),$buttons$jscomp$5_label$jscomp$7_p2$$.appendChild($sendButton$$)):($buttons$jscomp$5_label$jscomp$7_p2$$.appendChild($sendButton$$),$buttons$jscomp$5_label$jscomp$7_p2$$.appendChild($cancelBtn$jscomp$7_span$$));$div$$.appendChild($buttons$jscomp$5_label$jscomp$7_p2$$);this.container=$div$$};FeedbackDialog.maxAttachmentSize=1E6;
var RevisionDialog=function $RevisionDialog$($editorUi$$,$revs$$,$restoreFn$$){var $div$$=document.createElement("div"),$buttons$jscomp$6_title$$=document.createElement("h3");$buttons$jscomp$6_title$$.style.marginTop="0px";mxUtils.write($buttons$jscomp$6_title$$,mxResources.get("revisionHistory"));$div$$.appendChild($buttons$jscomp$6_title$$);var $closeBtn$jscomp$2_list$$=document.createElement("div");$closeBtn$jscomp$2_list$$.style.position="absolute";$closeBtn$jscomp$2_list$$.style.overflow="auto";
$closeBtn$jscomp$2_list$$.style.width="170px";$closeBtn$jscomp$2_list$$.style.height="378px";$div$$.appendChild($closeBtn$jscomp$2_list$$);var $container$$=document.createElement("div");$container$$.style.position="absolute";$container$$.style.border="1px solid lightGray";$container$$.style.left="199px";$container$$.style.width="470px";$container$$.style.height="376px";$container$$.style.overflow="hidden";mxEvent.disableContextMenu($container$$);$div$$.appendChild($container$$);var $graph$$=new Graph($container$$);
$graph$$.setTooltips(!1);$graph$$.setEnabled(!1);$graph$$.setPanning(!0);$graph$$.panningHandler.ignoreCell=!0;$graph$$.panningHandler.useLeftButtonForPanning=!0;$graph$$.minFitScale=null;$graph$$.maxFitScale=null;$graph$$.centerZoom=!0;var $currentPage$$=0,$diagrams$$=null,$realPage$$=0,$graphGetGlobalVariable$$=$graph$$.getGlobalVariable;$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"==$name$$&&null!=$diagrams$$&&null!=$diagrams$$[$realPage$$]?$diagrams$$[$realPage$$].getAttribute("name"):
"pagenumber"==$name$$?$realPage$$+1:$graphGetGlobalVariable$$.apply(this,arguments)};$graph$$.getLinkForCell=function $$graph$$$getLinkForCell$(){return null};Editor.MathJaxRender&&$graph$$.addListener(mxEvent.SIZE,mxUtils.bind(this,function($sender$$,$evt$$){$editorUi$$.editor.graph.mathEnabled&&Editor.MathJaxRender($graph$$.container)}));var $spinner$$=new Spinner({lines:11,length:15,width:6,radius:10,corners:1,rotate:0,direction:1,color:"#000",speed:1.4,trail:60,shadow:!1,hwaccel:!1,className:"spinner",
zIndex:2E9,top:"50%",left:"50%"}),$file$$=$editorUi$$.getCurrentFile(),$currentRow$$=null,$currentRev$$=null,$currentDoc$$=null,$currentXml$$=null,$zoomInBtn$$=mxUtils.button("",function(){null!=$currentDoc$$&&$graph$$.zoomIn()});$zoomInBtn$$.className="geSprite geSprite-zoomin";$zoomInBtn$$.setAttribute("title",mxResources.get("zoomIn"));$zoomInBtn$$.style.outline="none";$zoomInBtn$$.style.border="none";$zoomInBtn$$.style.margin="2px";$zoomInBtn$$.setAttribute("disabled","disabled");mxUtils.setOpacity($zoomInBtn$$,
20);var $zoomOutBtn$$=mxUtils.button("",function(){null!=$currentDoc$$&&$graph$$.zoomOut()});$zoomOutBtn$$.className="geSprite geSprite-zoomout";$zoomOutBtn$$.setAttribute("title",mxResources.get("zoomOut"));$zoomOutBtn$$.style.outline="none";$zoomOutBtn$$.style.border="none";$zoomOutBtn$$.style.margin="2px";$zoomOutBtn$$.setAttribute("disabled","disabled");mxUtils.setOpacity($zoomOutBtn$$,20);var $zoomFitBtn$$=mxUtils.button("",function(){null!=$currentDoc$$&&($graph$$.maxFitScale=8,$graph$$.fit(8),
$graph$$.center())});$zoomFitBtn$$.className="geSprite geSprite-fit";$zoomFitBtn$$.setAttribute("title",mxResources.get("fit"));$zoomFitBtn$$.style.outline="none";$zoomFitBtn$$.style.border="none";$zoomFitBtn$$.style.margin="2px";$zoomFitBtn$$.setAttribute("disabled","disabled");mxUtils.setOpacity($zoomFitBtn$$,20);var $zoomActualBtn$$=mxUtils.button("",function(){null!=$currentDoc$$&&($graph$$.zoomActual(),$graph$$.center())});$zoomActualBtn$$.className="geSprite geSprite-actualsize";$zoomActualBtn$$.setAttribute("title",
mxResources.get("actualSize"));$zoomActualBtn$$.style.outline="none";$zoomActualBtn$$.style.border="none";$zoomActualBtn$$.style.margin="2px";$zoomActualBtn$$.setAttribute("disabled","disabled");mxUtils.setOpacity($zoomActualBtn$$,20);var $fileInfo$$=document.createElement("div");$fileInfo$$.style.position="absolute";$fileInfo$$.style.textAlign="right";$fileInfo$$.style.color="gray";$fileInfo$$.style.marginTop="10px";$fileInfo$$.style.backgroundColor="transparent";$fileInfo$$.style.top="440px";$fileInfo$$.style.right=
"32px";$fileInfo$$.style.maxWidth="380px";$fileInfo$$.style.cursor="default";var $downloadBtn$$=mxUtils.button(mxResources.get("download"),function(){if(null!=$currentDoc$$){var $data$jscomp$69_param$$=mxUtils.getXml($currentDoc$$.documentElement),$filename$$=$editorUi$$.getBaseFilename()+".drawio";$editorUi$$.isLocalFileSave()?$editorUi$$.saveLocalFile($data$jscomp$69_param$$,$filename$$,"text/xml"):($data$jscomp$69_param$$="undefined"===typeof pako?"&xml="+encodeURIComponent($data$jscomp$69_param$$):
"&data="+encodeURIComponent(Graph.compress($data$jscomp$69_param$$)),(new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent($filename$$)+"&format=xml"+$data$jscomp$69_param$$)).simulate(document,"_blank"))}});$downloadBtn$$.className="geBtn";$downloadBtn$$.setAttribute("disabled","disabled");var $restoreBtn$$=mxUtils.button(mxResources.get("restore"),function(){null!=$currentDoc$$&&null!=$currentXml$$&&$editorUi$$.confirm(mxResources.get("areYouSure"),function(){null!=$restoreFn$$?$restoreFn$$($currentXml$$):
$editorUi$$.spinner.spin(document.body,mxResources.get("restoring"))&&$file$$.save(!0,function($resp$$){$editorUi$$.spinner.stop();$editorUi$$.replaceFileData($currentXml$$);$editorUi$$.hideDialog()},function($resp$$){$editorUi$$.spinner.stop();$editorUi$$.editor.setStatus("");$editorUi$$.handleError($resp$$,null!=$resp$$?mxResources.get("errorSavingFile"):null)})})});$restoreBtn$$.className="geBtn";$restoreBtn$$.setAttribute("disabled","disabled");var $pageSelect$$=document.createElement("select");
$pageSelect$$.setAttribute("disabled","disabled");$pageSelect$$.style.maxWidth="80px";$pageSelect$$.style.position="relative";$pageSelect$$.style.top="-2px";$pageSelect$$.style.verticalAlign="bottom";$pageSelect$$.style.marginRight="6px";$pageSelect$$.style.display="none";var $pageSelectFunction$$=null;mxEvent.addListener($pageSelect$$,"change",function($evt$$){null!=$pageSelectFunction$$&&($pageSelectFunction$$($evt$$),mxEvent.consume($evt$$))});var $newBtn$$=mxUtils.button(mxResources.get("edit"),
function(){null!=$currentDoc$$&&(window.openFile=new OpenFile(function(){window.openFile=null}),window.openFile.setData(mxUtils.getXml($currentDoc$$.documentElement)),$editorUi$$.openLink($editorUi$$.getUrl(),null,!0))});$newBtn$$.className="geBtn";$newBtn$$.setAttribute("disabled","disabled");null!=$restoreFn$$&&($newBtn$$.style.display="none");var $showBtn$$=mxUtils.button(mxResources.get("show"),function(){null!=$currentRev$$&&$editorUi$$.openLink($currentRev$$.getUrl($pageSelect$$.selectedIndex))});
$showBtn$$.className="geBtn gePrimaryBtn";$showBtn$$.setAttribute("disabled","disabled");null!=$restoreFn$$&&($showBtn$$.style.display="none",$restoreBtn$$.className="geBtn gePrimaryBtn");$buttons$jscomp$6_title$$=document.createElement("div");$buttons$jscomp$6_title$$.style.position="absolute";$buttons$jscomp$6_title$$.style.top="482px";$buttons$jscomp$6_title$$.style.width="640px";$buttons$jscomp$6_title$$.style.textAlign="right";var $tb$$=document.createElement("div");$tb$$.className="geToolbarContainer";
$tb$$.style.backgroundColor="transparent";$tb$$.style.padding="2px";$tb$$.style.border="none";$tb$$.style.left="199px";$tb$$.style.top="442px";var $currentElt$$=null;if(null!=$revs$$&&0<$revs$$.length){$container$$.style.cursor="move";var $table$$=document.createElement("table");$table$$.style.border="1px solid lightGray";$table$$.style.borderCollapse="collapse";$table$$.style.borderSpacing="0px";$table$$.style.width="100%";var $tbody$$=document.createElement("tbody"),$today$$=(new Date).toDateString();
null!=$editorUi$$.currentPage&&null!=$editorUi$$.pages&&($currentPage$$=mxUtils.indexOf($editorUi$$.pages,$editorUi$$.currentPage));for(var $i$$=$revs$$.length-1;0<=$i$$;$i$$--){var $elt$$=function($item$$){var $ts$$=new Date($item$$.modifiedDate),$row$$=null;if(0<=$ts$$.getTime()){var $updateGraph$$=function $$updateGraph$$$($i$jscomp$15_shortUser_xml$$){$spinner$$.stop();var $doc$jscomp$1_pageOption$jscomp$1_tmp$$=mxUtils.parseXml($i$jscomp$15_shortUser_xml$$),$node$$=$editorUi$$.editor.extractGraphModel($doc$jscomp$1_pageOption$jscomp$1_tmp$$.documentElement,
!0);if(null!=$node$$){var $parseDiagram$$=function $$parseDiagram$$$($diagramNode$$){null!=$diagramNode$$&&($diagramNode$$=$parseGraphModel$$(mxUtils.parseXml(Graph.decompress(mxUtils.getTextContent($diagramNode$$))).documentElement));return $diagramNode$$},$parseGraphModel$$=function $$parseGraphModel$$$($dataNode$$){var $bg$$=$dataNode$$.getAttribute("background");if(null==$bg$$||""==$bg$$||$bg$$==mxConstants.NONE)$bg$$="#ffffff";$container$$.style.backgroundColor=$bg$$;(new mxCodec($dataNode$$.ownerDocument)).decode($dataNode$$,
$graph$$.getModel());$graph$$.maxFitScale=1;$graph$$.fit(8);$graph$$.center();return $dataNode$$};$pageSelect$$.style.display="none";$pageSelect$$.innerHTML="";$currentDoc$$=$doc$jscomp$1_pageOption$jscomp$1_tmp$$;$currentXml$$=$i$jscomp$15_shortUser_xml$$;$diagrams$$=parseSelectFunction=null;$realPage$$=0;if("mxfile"==$node$$.nodeName){$doc$jscomp$1_pageOption$jscomp$1_tmp$$=$node$$.getElementsByTagName("diagram");$diagrams$$=[];for($i$jscomp$15_shortUser_xml$$=0;$i$jscomp$15_shortUser_xml$$<$doc$jscomp$1_pageOption$jscomp$1_tmp$$.length;$i$jscomp$15_shortUser_xml$$++)$diagrams$$.push($doc$jscomp$1_pageOption$jscomp$1_tmp$$[$i$jscomp$15_shortUser_xml$$]);
$realPage$$=Math.min($currentPage$$,$diagrams$$.length-1);0<$diagrams$$.length&&$parseDiagram$$($diagrams$$[$realPage$$]);if(1<$diagrams$$.length)for($pageSelect$$.removeAttribute("disabled"),$pageSelect$$.style.display="",$i$jscomp$15_shortUser_xml$$=0;$i$jscomp$15_shortUser_xml$$<$diagrams$$.length;$i$jscomp$15_shortUser_xml$$++)$doc$jscomp$1_pageOption$jscomp$1_tmp$$=document.createElement("option"),mxUtils.write($doc$jscomp$1_pageOption$jscomp$1_tmp$$,$diagrams$$[$i$jscomp$15_shortUser_xml$$].getAttribute("name")||
mxResources.get("pageWithNumber",[$i$jscomp$15_shortUser_xml$$+1])),$doc$jscomp$1_pageOption$jscomp$1_tmp$$.setAttribute("value",$i$jscomp$15_shortUser_xml$$),$i$jscomp$15_shortUser_xml$$==$realPage$$&&$doc$jscomp$1_pageOption$jscomp$1_tmp$$.setAttribute("selected","selected"),$pageSelect$$.appendChild($doc$jscomp$1_pageOption$jscomp$1_tmp$$);$pageSelectFunction$$=function $$pageSelectFunction$$$(){try{var $temp$$=parseInt($pageSelect$$.value);$parseDiagram$$($diagrams$$[$temp$$]);$realPage$$=$currentPage$$=
$temp$$}catch($e$$){$pageSelect$$.value=$currentPage$$,$editorUi$$.handleError($e$$)}}}else $parseGraphModel$$($node$$);$i$jscomp$15_shortUser_xml$$=$item$$.lastModifyingUserName;null!=$i$jscomp$15_shortUser_xml$$&&20<$i$jscomp$15_shortUser_xml$$.length&&($i$jscomp$15_shortUser_xml$$=$i$jscomp$15_shortUser_xml$$.substring(0,20)+"...");$fileInfo$$.innerHTML="";mxUtils.write($fileInfo$$,(null!=$i$jscomp$15_shortUser_xml$$?$i$jscomp$15_shortUser_xml$$+" ":"")+$ts$$.toLocaleDateString()+" "+$ts$$.toLocaleTimeString());
$fileInfo$$.setAttribute("title",$row$$.getAttribute("title"));$zoomInBtn$$.removeAttribute("disabled");$zoomOutBtn$$.removeAttribute("disabled");$zoomFitBtn$$.removeAttribute("disabled");$zoomActualBtn$$.removeAttribute("disabled");null!=$file$$&&$file$$.isRestricted()||($editorUi$$.editor.graph.isEnabled()&&$restoreBtn$$.removeAttribute("disabled"),$downloadBtn$$.removeAttribute("disabled"),$showBtn$$.removeAttribute("disabled"),$newBtn$$.removeAttribute("disabled"));mxUtils.setOpacity($zoomInBtn$$,
60);mxUtils.setOpacity($zoomOutBtn$$,60);mxUtils.setOpacity($zoomFitBtn$$,60);mxUtils.setOpacity($zoomActualBtn$$,60)}else $pageSelect$$.style.display="none",$pageSelect$$.innerHTML="",$fileInfo$$.innerHTML="",mxUtils.write($fileInfo$$,mxResources.get("errorLoadingFile"))},$row$$=document.createElement("tr");$row$$.style.borderBottom="1px solid lightGray";$row$$.style.fontSize="12px";$row$$.style.cursor="pointer";var $date$$=document.createElement("td");$date$$.style.padding="6px";$date$$.style.whiteSpace=
"nowrap";$item$$==$revs$$[$revs$$.length-1]?mxUtils.write($date$$,mxResources.get("current")):$ts$$.toDateString()===$today$$?mxUtils.write($date$$,$ts$$.toLocaleTimeString()):mxUtils.write($date$$,$ts$$.toLocaleDateString()+" "+$ts$$.toLocaleTimeString());$row$$.appendChild($date$$);$row$$.setAttribute("title",$ts$$.toLocaleDateString()+" "+$ts$$.toLocaleTimeString()+(null!=$item$$.fileSize?" "+$editorUi$$.formatFileSize(parseInt($item$$.fileSize)):"")+(null!=$item$$.lastModifyingUserName?" "+$item$$.lastModifyingUserName:
""));mxEvent.addListener($row$$,"click",function($evt$$){$currentRev$$!=$item$$&&($spinner$$.stop(),null!=$currentRow$$&&($currentRow$$.style.backgroundColor=""),$currentRev$$=$item$$,$currentRow$$=$row$$,$currentRow$$.style.backgroundColor="#ebf2f9",$currentXml$$=$currentDoc$$=null,$fileInfo$$.removeAttribute("title"),$fileInfo$$.innerHTML=mxUtils.htmlEntities(mxResources.get("loading")+"..."),$container$$.style.backgroundColor="#ffffff",$graph$$.getModel().clear(),$restoreBtn$$.setAttribute("disabled",
"disabled"),$downloadBtn$$.setAttribute("disabled","disabled"),$zoomInBtn$$.setAttribute("disabled","disabled"),$zoomOutBtn$$.setAttribute("disabled","disabled"),$zoomActualBtn$$.setAttribute("disabled","disabled"),$zoomFitBtn$$.setAttribute("disabled","disabled"),$newBtn$$.setAttribute("disabled","disabled"),$showBtn$$.setAttribute("disabled","disabled"),$pageSelect$$.setAttribute("disabled","disabled"),mxUtils.setOpacity($zoomInBtn$$,20),mxUtils.setOpacity($zoomOutBtn$$,20),mxUtils.setOpacity($zoomFitBtn$$,
20),mxUtils.setOpacity($zoomActualBtn$$,20),$spinner$$.spin($container$$),$item$$.getXml(function($xml$$){if($currentRev$$==$item$$)try{$updateGraph$$($xml$$)}catch($e$$){$fileInfo$$.innerHTML=mxUtils.htmlEntities(mxResources.get("error")+": "+$e$$.message)}},function($err$$){$spinner$$.stop();$pageSelect$$.style.display="none";$pageSelect$$.innerHTML="";$fileInfo$$.innerHTML="";mxUtils.write($fileInfo$$,mxResources.get("errorLoadingFile"))}),mxEvent.consume($evt$$))});mxEvent.addListener($row$$,
"dblclick",function($evt$$){$showBtn$$.click();window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty();mxEvent.consume($evt$$)},!1);$tbody$$.appendChild($row$$)}return $row$$}($revs$$[$i$$]);null!=$elt$$&&$i$$==$revs$$.length-1&&($currentElt$$=$elt$$)}$table$$.appendChild($tbody$$);$closeBtn$jscomp$2_list$$.appendChild($table$$)}else null==$file$$||null==$editorUi$$.drive&&$file$$.constructor==window.DriveFile||null==$editorUi$$.dropbox&&$file$$.constructor==
window.DropboxFile?($container$$.style.display="none",$tb$$.style.display="none",mxUtils.write($closeBtn$jscomp$2_list$$,mxResources.get("notAvailable"))):($container$$.style.display="none",$tb$$.style.display="none",mxUtils.write($closeBtn$jscomp$2_list$$,mxResources.get("noRevisions")));this.init=function $this$init$(){null!=$currentElt$$&&$currentElt$$.click()};$closeBtn$jscomp$2_list$$=mxUtils.button(mxResources.get("close"),function(){$editorUi$$.hideDialog()});$closeBtn$jscomp$2_list$$.className=
"geBtn";$tb$$.appendChild($pageSelect$$);$tb$$.appendChild($zoomInBtn$$);$tb$$.appendChild($zoomOutBtn$$);$tb$$.appendChild($zoomActualBtn$$);$tb$$.appendChild($zoomFitBtn$$);$editorUi$$.editor.cancelFirst?($buttons$jscomp$6_title$$.appendChild($closeBtn$jscomp$2_list$$),$buttons$jscomp$6_title$$.appendChild($downloadBtn$$),$buttons$jscomp$6_title$$.appendChild($newBtn$$),$buttons$jscomp$6_title$$.appendChild($restoreBtn$$),$buttons$jscomp$6_title$$.appendChild($showBtn$$)):($buttons$jscomp$6_title$$.appendChild($downloadBtn$$),
$buttons$jscomp$6_title$$.appendChild($newBtn$$),$buttons$jscomp$6_title$$.appendChild($restoreBtn$$),$buttons$jscomp$6_title$$.appendChild($showBtn$$),$buttons$jscomp$6_title$$.appendChild($closeBtn$jscomp$2_list$$));$div$$.appendChild($buttons$jscomp$6_title$$);$div$$.appendChild($tb$$);$div$$.appendChild($fileInfo$$);this.container=$div$$},DraftDialog=function $DraftDialog$($editorUi$$,$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$,$xml$jscomp$3_zoomOutBtn$$,$editFn_showBtn$$,$discardFn_restoreBtn$$,
$buttons$$,$discardLabel_tb$$,$ignoreBtn_ignoreFn$$){var $div$$=document.createElement("div"),$titleDiv_zoomFitBtn$$=document.createElement("div");$titleDiv_zoomFitBtn$$.style.marginTop="0px";$titleDiv_zoomFitBtn$$.style.whiteSpace="nowrap";$titleDiv_zoomFitBtn$$.style.overflow="auto";mxUtils.write($titleDiv_zoomFitBtn$$,$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$);$div$$.appendChild($titleDiv_zoomFitBtn$$);var $container$$=document.createElement("div");$container$$.style.position=
"absolute";$container$$.style.border="1px solid lightGray";$container$$.style.marginTop="10px";$container$$.style.width="640px";$container$$.style.top="46px";$container$$.style.bottom="74px";$container$$.style.overflow="hidden";mxEvent.disableContextMenu($container$$);$div$$.appendChild($container$$);var $graph$$=new Graph($container$$);$graph$$.setEnabled(!1);$graph$$.setPanning(!0);$graph$$.panningHandler.ignoreCell=!0;$graph$$.panningHandler.useLeftButtonForPanning=!0;$graph$$.minFitScale=null;
$graph$$.maxFitScale=null;$graph$$.centerZoom=!0;$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$=mxUtils.parseXml($xml$jscomp$3_zoomOutBtn$$);var $node$$=$editorUi$$.editor.extractGraphModel($cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.documentElement,!0),$currentPage$$=0,$diagrams$$=null,$graphGetGlobalVariable$$=$graph$$.getGlobalVariable;$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"==$name$$&&null!=$diagrams$$&&null!=$diagrams$$[$currentPage$$]?
$diagrams$$[$currentPage$$].getAttribute("name"):"pagenumber"==$name$$?$currentPage$$+1:$graphGetGlobalVariable$$.apply(this,arguments)};$graph$$.getLinkForCell=function $$graph$$$getLinkForCell$(){return null};$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$=mxUtils.button("",function(){$graph$$.zoomIn()});$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.className="geSprite geSprite-zoomin";$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.setAttribute("title",
mxResources.get("zoomIn"));$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.style.outline="none";$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.style.border="none";$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.style.margin="2px";mxUtils.setOpacity($cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$,60);$xml$jscomp$3_zoomOutBtn$$=mxUtils.button("",function(){$graph$$.zoomOut()});$xml$jscomp$3_zoomOutBtn$$.className="geSprite geSprite-zoomout";$xml$jscomp$3_zoomOutBtn$$.setAttribute("title",
mxResources.get("zoomOut"));$xml$jscomp$3_zoomOutBtn$$.style.outline="none";$xml$jscomp$3_zoomOutBtn$$.style.border="none";$xml$jscomp$3_zoomOutBtn$$.style.margin="2px";mxUtils.setOpacity($xml$jscomp$3_zoomOutBtn$$,60);$titleDiv_zoomFitBtn$$=mxUtils.button("",function(){$graph$$.maxFitScale=8;$graph$$.fit(8);$graph$$.center()});$titleDiv_zoomFitBtn$$.className="geSprite geSprite-fit";$titleDiv_zoomFitBtn$$.setAttribute("title",mxResources.get("fit"));$titleDiv_zoomFitBtn$$.style.outline="none";$titleDiv_zoomFitBtn$$.style.border=
"none";$titleDiv_zoomFitBtn$$.style.margin="2px";mxUtils.setOpacity($titleDiv_zoomFitBtn$$,60);var $zoomActualBtn$$=mxUtils.button("",function(){$graph$$.zoomActual();$graph$$.center()});$zoomActualBtn$$.className="geSprite geSprite-actualsize";$zoomActualBtn$$.setAttribute("title",mxResources.get("actualSize"));$zoomActualBtn$$.style.outline="none";$zoomActualBtn$$.style.border="none";$zoomActualBtn$$.style.margin="2px";mxUtils.setOpacity($zoomActualBtn$$,60);$discardFn_restoreBtn$$=mxUtils.button($discardLabel_tb$$||
mxResources.get("discard"),$discardFn_restoreBtn$$);$discardFn_restoreBtn$$.className="geBtn";var $pageSelect$$=document.createElement("select");$pageSelect$$.style.maxWidth="80px";$pageSelect$$.style.position="relative";$pageSelect$$.style.top="-2px";$pageSelect$$.style.verticalAlign="bottom";$pageSelect$$.style.marginRight="6px";$pageSelect$$.style.display="none";$editFn_showBtn$$=mxUtils.button($buttons$$||mxResources.get("edit"),$editFn_showBtn$$);$editFn_showBtn$$.className="geBtn gePrimaryBtn";
$buttons$$=document.createElement("div");$buttons$$.style.position="absolute";$buttons$$.style.bottom="30px";$buttons$$.style.width="640px";$buttons$$.style.textAlign="right";$discardLabel_tb$$=document.createElement("div");$discardLabel_tb$$.className="geToolbarContainer";$discardLabel_tb$$.style.cssText="box-shadow:none !important;background-color:transparent;padding:2px;border-style:none !important;bottom:30px;";this.init=function $this$init$(){function $parseGraphModel$$($dataNode$$){if(null!=
$dataNode$$){var $bg$$=$dataNode$$.getAttribute("background");if(null==$bg$$||""==$bg$$||$bg$$==mxConstants.NONE)$bg$$="#ffffff";$container$$.style.backgroundColor=$bg$$;(new mxCodec($dataNode$$.ownerDocument)).decode($dataNode$$,$graph$$.getModel());$graph$$.maxFitScale=1;$graph$$.fit(8);$graph$$.center()}}function $parseDiagram$$($diagramNode$$){null!=$diagramNode$$&&($diagramNode$$=$parseGraphModel$$(mxUtils.parseXml(Graph.decompress(mxUtils.getTextContent($diagramNode$$))).documentElement));return $diagramNode$$}
mxEvent.addListener($pageSelect$$,"change",function($evt$$){$currentPage$$=parseInt($pageSelect$$.value);$parseDiagram$$($diagrams$$[$currentPage$$]);mxEvent.consume($evt$$)});if("mxfile"==$node$$.nodeName){var $pageOption$jscomp$2_tmp$$=$node$$.getElementsByTagName("diagram");$diagrams$$=[];for(var $i$$=0;$i$$<$pageOption$jscomp$2_tmp$$.length;$i$$++)$diagrams$$.push($pageOption$jscomp$2_tmp$$[$i$$]);0<$diagrams$$.length&&$parseDiagram$$($diagrams$$[$currentPage$$]);if(1<$diagrams$$.length)for($pageSelect$$.style.display=
"",$i$$=0;$i$$<$diagrams$$.length;$i$$++)$pageOption$jscomp$2_tmp$$=document.createElement("option"),mxUtils.write($pageOption$jscomp$2_tmp$$,$diagrams$$[$i$$].getAttribute("name")||mxResources.get("pageWithNumber",[$i$$+1])),$pageOption$jscomp$2_tmp$$.setAttribute("value",$i$$),$i$$==$currentPage$$&&$pageOption$jscomp$2_tmp$$.setAttribute("selected","selected"),$pageSelect$$.appendChild($pageOption$jscomp$2_tmp$$)}else $parseGraphModel$$($node$$)};$discardLabel_tb$$.appendChild($pageSelect$$);$discardLabel_tb$$.appendChild($cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$);
$discardLabel_tb$$.appendChild($xml$jscomp$3_zoomOutBtn$$);$discardLabel_tb$$.appendChild($zoomActualBtn$$);$discardLabel_tb$$.appendChild($titleDiv_zoomFitBtn$$);$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog(!0)});$cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$.className="geBtn";$ignoreBtn_ignoreFn$$=null!=$ignoreBtn_ignoreFn$$?mxUtils.button(mxResources.get("ignore"),$ignoreBtn_ignoreFn$$):null;
null!=$ignoreBtn_ignoreFn$$&&($ignoreBtn_ignoreFn$$.className="geBtn");$editorUi$$.editor.cancelFirst?($buttons$$.appendChild($cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$),null!=$ignoreBtn_ignoreFn$$&&$buttons$$.appendChild($ignoreBtn_ignoreFn$$),$buttons$$.appendChild($discardFn_restoreBtn$$),$buttons$$.appendChild($editFn_showBtn$$)):($buttons$$.appendChild($editFn_showBtn$$),$buttons$$.appendChild($discardFn_restoreBtn$$),null!=$ignoreBtn_ignoreFn$$&&$buttons$$.appendChild($ignoreBtn_ignoreFn$$),
$buttons$$.appendChild($cancelBtn$jscomp$8_doc$jscomp$2_title$jscomp$47_zoomInBtn$$));$div$$.appendChild($buttons$$);$div$$.appendChild($discardLabel_tb$$);this.container=$div$$},FindWindow=function $FindWindow$($ui$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$){function $testMeta$$($re$$,$attrs_cell$$,$search$$){if("object"===typeof $attrs_cell$$.value&&null!=$attrs_cell$$.value.attributes){$attrs_cell$$=$attrs_cell$$.value.attributes;for(var $i$$=0;$i$$<$attrs_cell$$.length;$i$$++)if("label"!=$attrs_cell$$[$i$$].nodeName){var $value$$=
mxUtils.trim($attrs_cell$$[$i$$].nodeValue.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")).toLowerCase();if(null==$re$$&&$value$$.substring(0,$search$$.length)===$search$$||null!=$re$$&&$re$$.test($value$$))return!0}}return!1}function $search$$(){var $cells$$=$graph$$.model.getDescendants($graph$$.model.getRoot()),$search$$=$searchInput$$.value.toLowerCase(),$re$$=$regexInput$$.checked?new RegExp($search$$):null,$firstMatch$$=null;$lastSearch$$!=$search$$&&($lastSearch$$=$search$$,$lastFound$$=null);var $active$$=
null==$lastFound$$;if(0<$search$$.length)for(var $i$$=0;$i$$<$cells$$.length;$i$$++){var $state$$=$graph$$.view.getState($cells$$[$i$$]);if(null!=$state$$&&null!=$state$$.cell.value&&($active$$||null==$firstMatch$$)&&($graph$$.model.isVertex($state$$.cell)||$graph$$.model.isEdge($state$$.cell))&&($graph$$.isHtmlLabel($state$$.cell)?($tmp$$.innerHTML=$graph$$.getLabel($state$$.cell),label=mxUtils.extractTextWithWhitespace([$tmp$$])):label=$graph$$.getLabel($state$$.cell),label=mxUtils.trim(label.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g,
" ")).toLowerCase(),null==$re$$&&(label.substring(0,$search$$.length)===$search$$||$testMeta$$($re$$,$state$$.cell,$search$$))||null!=$re$$&&($re$$.test(label)||$testMeta$$($re$$,$state$$.cell,$search$$))))if($active$$){$firstMatch$$=$state$$;break}else null==$firstMatch$$&&($firstMatch$$=$state$$);$active$$=$active$$||$state$$==$lastFound$$}null!=$firstMatch$$?($lastFound$$=$firstMatch$$,$graph$$.scrollCellToVisible($lastFound$$.cell),$graph$$.isEnabled()?$graph$$.setSelectionCell($lastFound$$.cell):
$graph$$.highlightCell($lastFound$$.cell)):$graph$$.isEnabled()&&$graph$$.clearSelection();return 0==$search$$.length||null!=$firstMatch$$}var $action$$=$ui$$.actions.get("find"),$graph$$=$ui$$.editor.graph,$lastSearch$$=null,$lastFound$$=null,$div$$=document.createElement("div");$div$$.style.userSelect="none";$div$$.style.overflow="hidden";$div$$.style.padding="10px";$div$$.style.height="100%";var $searchInput$$=document.createElement("input");$searchInput$$.setAttribute("placeholder",mxResources.get("find"));
$searchInput$$.setAttribute("type","text");$searchInput$$.style.marginTop="4px";$searchInput$$.style.marginBottom="6px";$searchInput$$.style.width="200px";$searchInput$$.style.fontSize="12px";$searchInput$$.style.borderRadius="4px";$searchInput$$.style.padding="6px";$div$$.appendChild($searchInput$$);mxUtils.br($div$$);var $regexInput$$=document.createElement("input");$regexInput$$.setAttribute("type","checkbox");$regexInput$$.style.marginRight="4px";$div$$.appendChild($regexInput$$);mxUtils.write($div$$,
mxResources.get("regularExpression"));var $btn$jscomp$4_help$jscomp$2_resetBtn$$=$ui$$.menus.createHelpLink("../../../../Documents/htmlhelp/home__edit_menu.htm?ms=AAAA&st=MA%3D%3D&sct=MTcxOS4zMzMzNzQwMjM0Mzc1&mw=NTEx");$btn$jscomp$4_help$jscomp$2_resetBtn$$.style.position="relative";$btn$jscomp$4_help$jscomp$2_resetBtn$$.style.marginLeft="6px";$btn$jscomp$4_help$jscomp$2_resetBtn$$.style.top="-1px";$div$$.appendChild($btn$jscomp$4_help$jscomp$2_resetBtn$$);var $tmp$$=document.createElement("div");
mxUtils.br($div$$);$btn$jscomp$4_help$jscomp$2_resetBtn$$=mxUtils.button(mxResources.get("reset"),function(){$searchInput$$.value="";$searchInput$$.style.backgroundColor="";$lastSearch$$=$lastFound$$=null;$searchInput$$.focus()});$btn$jscomp$4_help$jscomp$2_resetBtn$$.setAttribute("title",mxResources.get("reset"));$btn$jscomp$4_help$jscomp$2_resetBtn$$.style.marginTop="6px";$btn$jscomp$4_help$jscomp$2_resetBtn$$.style.marginRight="4px";$btn$jscomp$4_help$jscomp$2_resetBtn$$.className="geBtn";$div$$.appendChild($btn$jscomp$4_help$jscomp$2_resetBtn$$);
$btn$jscomp$4_help$jscomp$2_resetBtn$$=mxUtils.button(mxResources.get("find"),function(){try{$searchInput$$.style.backgroundColor=$search$$()?"":"#ffcfcf"}catch($e$$){$ui$$.handleError($e$$)}});$btn$jscomp$4_help$jscomp$2_resetBtn$$.setAttribute("title",mxResources.get("find")+" (Enter)");$btn$jscomp$4_help$jscomp$2_resetBtn$$.style.marginTop="6px";$btn$jscomp$4_help$jscomp$2_resetBtn$$.className="geBtn gePrimaryBtn";$div$$.appendChild($btn$jscomp$4_help$jscomp$2_resetBtn$$);mxEvent.addListener($searchInput$$,
"keyup",function($evt$$){if(91==$evt$$.keyCode||17==$evt$$.keyCode)mxEvent.consume($evt$$);else if(27==$evt$$.keyCode)$action$$.funct();else if($lastSearch$$!=$searchInput$$.value.toLowerCase()||13==$evt$$.keyCode)try{$searchInput$$.style.backgroundColor=$search$$()?"":"#ffcfcf"}catch($e$$){$searchInput$$.style.backgroundColor="#ffcfcf"}});mxEvent.addListener($div$$,"keydown",function($evt$$){70==$evt$$.keyCode&&$ui$$.keyHandler.isControlDown($evt$$)&&!mxEvent.isShiftDown($evt$$)&&($action$$.funct(),
mxEvent.consume($evt$$))});this.window=new mxWindow(mxResources.get("find"),$div$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$,!0,!0);this.window.destroyOnClose=!1;this.window.setMaximizable(!1);this.window.setResizable(!1);this.window.setClosable(!0);this.window.addListener("show",mxUtils.bind(this,function(){this.window.fit();this.window.isVisible()?($searchInput$$.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$searchInput$$.select():document.execCommand("selectAll",
!1,null)):$graph$$.container.focus()}));this.window.setLocation=function $this$window$setLocation$($x$$,$y$$){var $ih$$=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;$x$$=Math.max(0,Math.min($x$$,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-this.table.clientWidth));$y$$=Math.max(0,Math.min($y$$,$ih$$-this.table.clientHeight-48));this.getX()==$x$$&&this.getY()==$y$$||mxWindow.prototype.setLocation.apply(this,arguments)};
var $resizeListener$$=mxUtils.bind(this,function(){var $x$$=this.window.getX(),$y$$=this.window.getY();this.window.setLocation($x$$,$y$$)});mxEvent.addListener(window,"resize",$resizeListener$$);this.destroy=function $this$destroy$(){mxEvent.removeListener(window,"resize",$resizeListener$$);this.window.destroy()}},TagsWindow=function $TagsWindow$($editorUi$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$){var $graph$$=$editorUi$$.editor.graph,$propertyName$$="tags",$div$$=document.createElement("div");$div$$.style.userSelect=
"none";$div$$.style.overflow="hidden";$div$$.style.padding="10px";$div$$.style.height="100%";var $searchInput$$=document.createElement("input");$searchInput$$.setAttribute("placeholder",mxResources.get("allTags"));$searchInput$$.setAttribute("type","text");$searchInput$$.style.marginTop="4px";$searchInput$$.style.width="260px";$searchInput$$.style.fontSize="12px";$searchInput$$.style.borderRadius="4px";$searchInput$$.style.padding="6px";$div$$.appendChild($searchInput$$);if(!$editorUi$$.isOffline()||
mxClient.IS_CHROMEAPP){$searchInput$$.style.width="240px";var $btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$=$editorUi$$.menus.createHelpLink("https://desk.draw.io/support/solutions/articles/16000046966");$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.firstChild.style.marginBottom="6px";$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.style.marginLeft="6px";$div$$.appendChild($btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$)}mxEvent.addListener($searchInput$$,"dblclick",function(){var $dlg$$=new FilenameDialog($editorUi$$,
$propertyName$$,mxResources.get("ok"),mxUtils.bind(this,function($name$$){null!=$name$$&&0<$name$$.length&&($propertyName$$=$name$$)}),mxResources.get("enterPropertyName"));$editorUi$$.showDialog($dlg$$.container,300,80,!0,!0);$dlg$$.init()});$searchInput$$.setAttribute("title",mxResources.get("doubleClickChangeProperty"));mxUtils.br($div$$);$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$=mxUtils.button(mxResources.get("hide"),function(){var $cells$$=$graph$$.getCellsForTags($searchInput$$.value.split(" "),
void 0,$propertyName$$,!0);$graph$$.setCellsVisible($cells$$,!1)});$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.setAttribute("title",mxResources.get("hide"));$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.style.marginTop="8px";$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.style.marginRight="4px";$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.className="geBtn";$div$$.appendChild($btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$);$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$=mxUtils.button(mxResources.get("show"),
function(){var $cells$$=$graph$$.getCellsForTags($searchInput$$.value.split(" "),void 0,$propertyName$$,!0);$graph$$.setCellsVisible($cells$$,!0);if($graph$$.isEnabled()){for(var $temp$$=[],$i$$=0;$i$$<$cells$$.length;$i$$++)($graph$$.model.isVertex($cells$$[$i$$])||$graph$$.model.isEdge($cells$$[$i$$]))&&$temp$$.push($cells$$[$i$$]);$graph$$.setSelectionCells($temp$$)}else for($i$$=0;$i$$<$cells$$.length;$i$$++)$graph$$.highlightCell($cells$$[$i$$])});$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.setAttribute("title",
mxResources.get("show"));$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.style.marginTop="8px";$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.style.marginRight="4px";$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.className="geBtn";$div$$.appendChild($btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$);var $action$$=$editorUi$$.actions.get("tags");$action$$&&($btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$=mxUtils.button(mxResources.get("close"),function(){$action$$.funct()}),$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.setAttribute("title",
mxResources.get("close")+" (Enter/Esc)"),$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.style.marginTop="8px",$btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$.className="geBtn gePrimaryBtn",$div$$.appendChild($btn$jscomp$5_elt$jscomp$7_hideBtn_showBtn$$),mxEvent.addListener($searchInput$$,"keyup",function($evt$$){13!=$evt$$.keyCode&&27!=$evt$$.keyCode||$action$$.funct()}));this.window=new mxWindow(mxResources.get("tags"),$div$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$,!0,!0);this.window.destroyOnClose=!1;
this.window.setMaximizable(!1);this.window.setResizable(!1);this.window.setClosable(!0);this.window.addListener("show",mxUtils.bind(this,function(){this.window.fit();this.window.isVisible()?($searchInput$$.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$searchInput$$.select():document.execCommand("selectAll",!1,null)):$graph$$.container.focus()}));this.window.setLocation=function $this$window$setLocation$($x$$,$y$$){var $ih$$=window.innerHeight||document.body.clientHeight||
document.documentElement.clientHeight;$x$$=Math.max(0,Math.min($x$$,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-this.table.clientWidth));$y$$=Math.max(0,Math.min($y$$,$ih$$-this.table.clientHeight-48));this.getX()==$x$$&&this.getY()==$y$$||mxWindow.prototype.setLocation.apply(this,arguments)};var $resizeListener$$=mxUtils.bind(this,function(){var $x$$=this.window.getX(),$y$$=this.window.getY();this.window.setLocation($x$$,$y$$)});mxEvent.addListener(window,
"resize",$resizeListener$$);this.destroy=function $this$destroy$(){mxEvent.removeListener(window,"resize",$resizeListener$$);this.window.destroy()}},AuthDialog=function $AuthDialog$($editorUi$$,$peer$$,$p2$$,$fn$$){var $div$$=document.createElement("div");$div$$.style.textAlign="center";var $hd$jscomp$2_span$$=document.createElement("p");$hd$jscomp$2_span$$.style.fontSize="16pt";$hd$jscomp$2_span$$.style.padding="0px";$hd$jscomp$2_span$$.style.margin="0px";$hd$jscomp$2_span$$.style.color="gray";mxUtils.write($hd$jscomp$2_span$$,
mxResources.get("authorizationRequired"));var $button$jscomp$2_service$$="Unknown",$img$$=document.createElement("img");$img$$.setAttribute("border","0");$img$$.setAttribute("align","absmiddle");$img$$.style.marginRight="10px";$peer$$==$editorUi$$.drive?($button$jscomp$2_service$$=mxResources.get("googleDrive"),$img$$.src=IMAGE_PATH+"/google-drive-logo-white.svg"):$peer$$==$editorUi$$.dropbox?($button$jscomp$2_service$$=mxResources.get("dropbox"),$img$$.src=IMAGE_PATH+"/dropbox-logo-white.svg"):$peer$$==
$editorUi$$.oneDrive?($button$jscomp$2_service$$=mxResources.get("oneDrive"),$img$$.src=IMAGE_PATH+"/onedrive-logo-white.svg"):$peer$$==$editorUi$$.gitHub?($button$jscomp$2_service$$=mxResources.get("github"),$img$$.src=IMAGE_PATH+"/github-logo-white.svg"):$peer$$==$editorUi$$.trello&&($button$jscomp$2_service$$=mxResources.get("trello"),$img$$.src=IMAGE_PATH+"/trello-logo-white.svg");$editorUi$$=document.createElement("p");mxUtils.write($editorUi$$,mxResources.get("authorizeThisAppIn",[$button$jscomp$2_service$$]));
var $cb$$=document.createElement("input");$cb$$.setAttribute("type","checkbox");$button$jscomp$2_service$$=mxUtils.button(mxResources.get("authorize"),function(){$fn$$($cb$$.checked)});$button$jscomp$2_service$$.insertBefore($img$$,$button$jscomp$2_service$$.firstChild);$button$jscomp$2_service$$.style.marginTop="6px";$button$jscomp$2_service$$.className="geBigButton";$div$$.appendChild($hd$jscomp$2_span$$);$div$$.appendChild($editorUi$$);$div$$.appendChild($button$jscomp$2_service$$);$p2$$&&($p2$$=
document.createElement("p"),$p2$$.style.marginTop="20px",$p2$$.appendChild($cb$$),$hd$jscomp$2_span$$=document.createElement("span"),mxUtils.write($hd$jscomp$2_span$$," "+mxResources.get("rememberMe")),$p2$$.appendChild($hd$jscomp$2_span$$),$div$$.appendChild($p2$$),$cb$$.checked=!0,$cb$$.defaultChecked=!0,mxEvent.addListener($hd$jscomp$2_span$$,"click",function($evt$$){$cb$$.checked=!$cb$$.checked;mxEvent.consume($evt$$)}));this.container=$div$$},MoreShapesDialog=function $MoreShapesDialog$($editorUi$$,
$applyBtn$$,$buttons$$){$buttons$$=null!=$buttons$$?$buttons$$:$editorUi$$.sidebar.entries;var $div$$=document.createElement("div"),$midDiv_newEntries$$=[];if(null!=$editorUi$$.sidebar.customEntries)for(var $i$jscomp$0$$=0;$i$jscomp$0$$<$editorUi$$.sidebar.customEntries.length;$i$jscomp$0$$++){for(var $rightDiv_section$$=$editorUi$$.sidebar.customEntries[$i$jscomp$0$$],$row$jscomp$1_tmp$$={title:$editorUi$$.getResource($rightDiv_section$$.title),entries:[]},$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=
0;$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$<$rightDiv_section$$.entries.length;$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$++){var $entry$jscomp$0$$=$rightDiv_section$$.entries[$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$];$row$jscomp$1_tmp$$.entries.push({id:$entry$jscomp$0$$.id,title:$editorUi$$.getResource($entry$jscomp$0$$.title),desc:$editorUi$$.getResource($entry$jscomp$0$$.desc),image:$entry$jscomp$0$$.preview})}$midDiv_newEntries$$.push($row$jscomp$1_tmp$$)}for($i$jscomp$0$$=
0;$i$jscomp$0$$<$buttons$$.length;$i$jscomp$0$$++)if(null==$editorUi$$.sidebar.enabledLibraries)$midDiv_newEntries$$.push($buttons$$[$i$jscomp$0$$]);else{$row$jscomp$1_tmp$$={title:$buttons$$[$i$jscomp$0$$].title,entries:[]};for($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=0;$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$<$buttons$$[$i$jscomp$0$$].entries.length;$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$++)0<=mxUtils.indexOf($editorUi$$.sidebar.enabledLibraries,$buttons$$[$i$jscomp$0$$].entries[$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$].id)&&
$row$jscomp$1_tmp$$.entries.push($buttons$$[$i$jscomp$0$$].entries[$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$]);0<$row$jscomp$1_tmp$$.entries.length&&$midDiv_newEntries$$.push($row$jscomp$1_tmp$$)}$buttons$$=$midDiv_newEntries$$;if($applyBtn$$){$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=document.createElement("div");$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.className="geDialogTitle";mxUtils.write($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$,mxResources.get("shapes"));
$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.position="absolute";$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.top="0px";$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.left="0px";$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.lineHeight="40px";$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.height="40px";$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.right="0px";mxClient.IS_QUIRKS&&($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.width=
"718px");var $list$$=document.createElement("div"),$preview$$=document.createElement("div");$list$$.style.position="absolute";$list$$.style.top="40px";$list$$.style.left="0px";$list$$.style.width="202px";$list$$.style.bottom="60px";$list$$.style.overflow="auto";mxClient.IS_QUIRKS&&($list$$.style.height="437px",$list$$.style.marginTop="1px");$preview$$.style.position="absolute";$preview$$.style.left="202px";$preview$$.style.right="0px";$preview$$.style.top="40px";$preview$$.style.bottom="60px";$preview$$.style.overflow=
"auto";$preview$$.style.borderLeft="1px solid rgb(211, 211, 211)";$preview$$.style.textAlign="center";mxClient.IS_QUIRKS&&($preview$$.style.width=parseInt($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.width)-202+"px",$preview$$.style.height=$list$$.style.height,$preview$$.style.marginTop=$list$$.style.marginTop);var $currentListItem$$=null,$applyFunctions$$=[],$listEntry$$=document.createElement("div");$listEntry$$.style.position="relative";$listEntry$$.style.left="0px";$listEntry$$.style.right=
"0px";for($i$jscomp$0$$=0;$i$jscomp$0$$<$buttons$$.length;$i$jscomp$0$$++)(function($section$$){var $title$$=$listEntry$$.cloneNode(!1);$title$$.style.fontWeight="bold";$title$$.style.backgroundColor="dark"==uiTheme?"#505759":"#e5e5e5";$title$$.style.padding="6px 0px 6px 20px";mxUtils.write($title$$,$section$$.title);$list$$.appendChild($title$$);for(var $j$$=0;$j$$<$section$$.entries.length;$j$$++)(function($entry$$){var $option$$=$listEntry$$.cloneNode(!1);$option$$.style.cursor="pointer";$option$$.style.padding=
"4px 0px 4px 20px";$option$$.setAttribute("title",$entry$$.title+" ("+$entry$$.id+")");var $checkbox$$=document.createElement("input");$checkbox$$.setAttribute("type","checkbox");$checkbox$$.checked=$editorUi$$.sidebar.isEntryVisible($entry$$.id);$checkbox$$.defaultChecked=$checkbox$$.checked;$option$$.appendChild($checkbox$$);mxUtils.write($option$$," "+$entry$$.title);$list$$.appendChild($option$$);var $itemClicked$$=function $$itemClicked$$$($evt$$){if(null==$evt$$||"INPUT"!=mxEvent.getSource($evt$$).nodeName){$preview$$.style.textAlign=
"center";$preview$$.style.padding="0px";$preview$$.style.color="";$preview$$.innerHTML="";if(null!=$entry$$.desc){var $pre$$=document.createElement("pre");$pre$$.style.boxSizing="border-box";$pre$$.style.fontFamily="inherit";$pre$$.style.margin="20px";$pre$$.style.right="0px";$pre$$.style.textAlign="left";mxUtils.write($pre$$,$entry$$.desc);$preview$$.appendChild($pre$$)}null!=$entry$$.imageCallback?$entry$$.imageCallback($preview$$):null!=$entry$$.image?$preview$$.innerHTML+='<img border="0" src="'+
$entry$$.image+'"/>':null==$entry$$.desc&&($preview$$.style.padding="20px",$preview$$.style.color="rgb(179, 179, 179)",mxUtils.write($preview$$,mxResources.get("noPreview")));null!=$currentListItem$$&&($currentListItem$$.style.backgroundColor="");$currentListItem$$=$option$$;$currentListItem$$.style.backgroundColor="dark"==uiTheme?"#505759":"#ebf2f9";null!=$evt$$&&mxEvent.consume($evt$$)}};mxEvent.addListener($option$$,"click",$itemClicked$$);mxEvent.addListener($option$$,"dblclick",function($evt$$){$checkbox$$.checked=
!$checkbox$$.checked;mxEvent.consume($evt$$)});$applyFunctions$$.push(function(){return $checkbox$$.checked?$entry$$.id:null});0==$i$jscomp$0$$&&0==$j$$&&$itemClicked$$()})($section$$.entries[$j$$])})($buttons$$[$i$jscomp$0$$]);$div$$.style.padding="30px";$div$$.appendChild($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$);$div$$.appendChild($list$$);$div$$.appendChild($preview$$);$buttons$$=document.createElement("div");$buttons$$.className="geDialogFooter";$buttons$$.style.position="absolute";
$buttons$$.style.paddingRight="16px";$buttons$$.style.color="gray";$buttons$$.style.left="0px";$buttons$$.style.right="0px";$buttons$$.style.bottom="0px";$buttons$$.style.height="60px";$buttons$$.style.lineHeight="52px";mxClient.IS_QUIRKS&&($buttons$$.style.width=$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.width,$buttons$$.style.paddingTop="12px");var $cb$$=document.createElement("input");$cb$$.setAttribute("type","checkbox");if(isLocalStorage||mxClient.IS_CHROMEAPP)$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=
document.createElement("span"),$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.paddingRight="20px",$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.appendChild($cb$$),mxUtils.write($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$," "+mxResources.get("rememberThisSetting")),$cb$$.checked=!0,$cb$$.defaultChecked=!0,mxEvent.addListener($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$,"click",function($evt$$){mxEvent.getSource($evt$$)!=$cb$$&&($cb$$.checked=!$cb$$.checked,
mxEvent.consume($evt$$))}),mxClient.IS_QUIRKS&&($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.position="relative",$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.style.top="-6px"),$buttons$$.appendChild($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$);$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.className="geBtn";$applyBtn$$=
mxUtils.button(mxResources.get("apply"),function(){$editorUi$$.hideDialog();for(var $libs$$=[],$i$$=0;$i$$<$applyFunctions$$.length;$i$$++){var $lib$$=$applyFunctions$$[$i$$].apply(this,arguments);null!=$lib$$&&$libs$$.push($lib$$)}$editorUi$$.sidebar.showEntries($libs$$.join(";"),$cb$$.checked,!0)});$applyBtn$$.className="geBtn gePrimaryBtn"}else{var $libFS$$=document.createElement("table"),$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=document.createElement("tbody");$div$$.style.height=
"100%";$div$$.style.overflow="auto";$row$jscomp$1_tmp$$=document.createElement("tr");$libFS$$.style.width="100%";$applyBtn$$=document.createElement("td");var $midDiv_newEntries$$=document.createElement("td"),$rightDiv_section$$=document.createElement("td"),$addLibCB$$=mxUtils.bind(this,function($wrapperDiv$$,$label$jscomp$8_title$$,$key$$){var $libCB$$=document.createElement("input");$libCB$$.type="checkbox";$libFS$$.appendChild($libCB$$);$libCB$$.checked=$editorUi$$.sidebar.isEntryVisible($key$$);
var $libSpan$$=document.createElement("span");mxUtils.write($libSpan$$,$label$jscomp$8_title$$);$label$jscomp$8_title$$=document.createElement("div");$label$jscomp$8_title$$.style.display="block";$label$jscomp$8_title$$.appendChild($libCB$$);$label$jscomp$8_title$$.appendChild($libSpan$$);mxEvent.addListener($libSpan$$,"click",function($evt$$){$libCB$$.checked=!$libCB$$.checked;mxEvent.consume($evt$$)});$wrapperDiv$$.appendChild($label$jscomp$8_title$$);return function(){return $libCB$$.checked?$key$$:
null}});$row$jscomp$1_tmp$$.appendChild($applyBtn$$);$row$jscomp$1_tmp$$.appendChild($midDiv_newEntries$$);$row$jscomp$1_tmp$$.appendChild($rightDiv_section$$);$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.appendChild($row$jscomp$1_tmp$$);$libFS$$.appendChild($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$);for(var $applyFunctions$$=[],$count$$=0,$i$jscomp$0$$=0;$i$jscomp$0$$<$buttons$$.length;$i$jscomp$0$$++)for($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=0;$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$<
$buttons$$[$i$jscomp$0$$].entries.length;$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$++)$count$$++;for(var $cols$$=[$applyBtn$$,$midDiv_newEntries$$,$rightDiv_section$$],$counter$$=0,$i$jscomp$0$$=0;$i$jscomp$0$$<$buttons$$.length;$i$jscomp$0$$++)(function($section$$){for(var $j$$=0;$j$$<$section$$.entries.length;$j$$++){var $entry$$=$section$$.entries[$j$$];$applyFunctions$$.push($addLibCB$$($cols$$[Math.floor($counter$$/($count$$/3))],$entry$$.title,$entry$$.id));$counter$$++}})($buttons$$[$i$jscomp$0$$]);
$div$$.appendChild($libFS$$);$buttons$$=document.createElement("div");$buttons$$.style.marginTop="18px";$buttons$$.style.textAlign="center";$cb$$=document.createElement("input");isLocalStorage&&($cb$$.setAttribute("type","checkbox"),$cb$$.checked=!0,$cb$$.defaultChecked=!0,$buttons$$.appendChild($cb$$),$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=document.createElement("span"),mxUtils.write($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$," "+mxResources.get("rememberThisSetting")),
$buttons$$.appendChild($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$),mxEvent.addListener($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$,"click",function($evt$$){$cb$$.checked=!$cb$$.checked;mxEvent.consume($evt$$)}));$div$$.appendChild($buttons$$);$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$.className="geBtn";$applyBtn$$=mxUtils.button(mxResources.get("apply"),
function(){for(var $libs$$=["search"],$i$$=0;$i$$<$applyFunctions$$.length;$i$$++){var $lib$$=$applyFunctions$$[$i$$].apply(this,arguments);null!=$lib$$&&$libs$$.push($lib$$)}$editorUi$$.sidebar.showEntries(0<$libs$$.length?$libs$$.join(";"):"",$cb$$.checked);$editorUi$$.hideDialog()});$applyBtn$$.className="geBtn gePrimaryBtn";$buttons$$=document.createElement("div");$buttons$$.style.marginTop="26px";$buttons$$.style.textAlign="right"}$editorUi$$.editor.cancelFirst?($buttons$$.appendChild($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$),
$buttons$$.appendChild($applyBtn$$)):($buttons$$.appendChild($applyBtn$$),$buttons$$.appendChild($cancelBtn$jscomp$9_hd$jscomp$3_j_span$jscomp$3_tbody$$));$div$$.appendChild($buttons$$);this.container=$div$$},PluginsDialog=function $PluginsDialog$($editorUi$$){function $refresh$$(){if(0==$plugins$$.length)$inner$$.innerHTML=mxUtils.htmlEntities(mxResources.get("noPlugins"));else{$inner$$.innerHTML="";for(var $i$$=0;$i$$<$plugins$$.length;$i$$++){var $span$$=document.createElement("span");$span$$.style.whiteSpace=
"nowrap";var $img$$=document.createElement("span");$img$$.className="geSprite geSprite-delete";$img$$.style.position="relative";$img$$.style.cursor="pointer";$img$$.style.top="5px";$img$$.style.marginRight="4px";$img$$.style.display="inline-block";$span$$.appendChild($img$$);mxUtils.write($span$$,$plugins$$[$i$$]);$inner$$.appendChild($span$$);mxUtils.br($inner$$);mxEvent.addListener($img$$,"click",function($index$$){return function(){$editorUi$$.confirm(mxResources.get("delete")+' "'+$plugins$$[$index$$]+
'"?',function(){$plugins$$.splice($index$$,1);$refresh$$()})}}($i$$))}}}var $div$$=document.createElement("div"),$inner$$=document.createElement("div");$inner$$.style.height="120px";$inner$$.style.overflow="auto";var $plugins$$=mxSettings.getPlugins().slice();$div$$.appendChild($inner$$);$refresh$$();var $addBtn$$=mxUtils.button(mxResources.get("add"),function(){var $dlg$jscomp$6_tmp$$="",$i$jscomp$24_param$$=urlParams.p;if(null!=$i$jscomp$24_param$$&&0<$i$jscomp$24_param$$.length){for(var $tokens$$=
$i$jscomp$24_param$$.split(";"),$i$jscomp$24_param$$=0;$i$jscomp$24_param$$<$tokens$$.length;$i$jscomp$24_param$$++){var $url$jscomp$0$$=App.pluginRegistry[$tokens$$[$i$jscomp$24_param$$]];null!=$url$jscomp$0$$&&($dlg$jscomp$6_tmp$$+=$url$jscomp$0$$+";")}";"==$dlg$jscomp$6_tmp$$.charAt($dlg$jscomp$6_tmp$$.length-1)&&($dlg$jscomp$6_tmp$$=$dlg$jscomp$6_tmp$$.substring(0,$dlg$jscomp$6_tmp$$.length-1))}$dlg$jscomp$6_tmp$$=new FilenameDialog($editorUi$$,$dlg$jscomp$6_tmp$$,mxResources.get("add"),function($i$jscomp$25_newValue$$){if(null!=
$i$jscomp$25_newValue$$&&0<$i$jscomp$25_newValue$$.length){$tokens$$=$i$jscomp$25_newValue$$.split(";");for($i$jscomp$25_newValue$$=0;$i$jscomp$25_newValue$$<$tokens$$.length;$i$jscomp$25_newValue$$++){var $token$$=$tokens$$[$i$jscomp$25_newValue$$],$url$$=App.pluginRegistry[$token$$];null!=$url$$&&($token$$=$url$$);0<$token$$.length&&0>mxUtils.indexOf($plugins$$,$token$$)&&$plugins$$.push($token$$)}$refresh$$()}},mxResources.get("enterValue")+" ("+mxResources.get("url")+")");$editorUi$$.showDialog($dlg$jscomp$6_tmp$$.container,
300,80,!0,!0);$dlg$jscomp$6_tmp$$.init()});$addBtn$$.className="geBtn";var $cancelBtn$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$$.className="geBtn";var $applyBtn$$=mxUtils.button(mxResources.get("apply"),function(){mxSettings.setPlugins($plugins$$);mxSettings.save();$editorUi$$.hideDialog();$editorUi$$.alert(mxResources.get("restartForChangeRequired"))});$applyBtn$$.className="geBtn gePrimaryBtn";var $helpBtn$$=mxUtils.button(mxResources.get("help"),
function(){$editorUi$$.openLink("https://desk.draw.io/support/solutions/articles/16000056430")});$helpBtn$$.className="geBtn";$editorUi$$.isOffline()&&!mxClient.IS_CHROMEAPP&&($helpBtn$$.style.display="none");var $buttons$$=document.createElement("div");$buttons$$.style.marginTop="14px";$buttons$$.style.textAlign="right";$editorUi$$.editor.cancelFirst?($buttons$$.appendChild($cancelBtn$$),$buttons$$.appendChild($helpBtn$$),$buttons$$.appendChild($addBtn$$),$buttons$$.appendChild($applyBtn$$)):($buttons$$.appendChild($helpBtn$$),
$buttons$$.appendChild($addBtn$$),$buttons$$.appendChild($applyBtn$$),$buttons$$.appendChild($cancelBtn$$));$div$$.appendChild($buttons$$);this.container=$div$$},CropImageDialog=function $CropImageDialog$($editorUi$$,$buttons$jscomp$10_image$$,$fn$$){var $div$$=document.createElement("div"),$cancelBtn$jscomp$11_table$$=document.createElement("table"),$tbody$$=document.createElement("tbody"),$row$$=document.createElement("tr"),$size$$=document.createElement("td");$size$$.style.whiteSpace="nowrap";
$size$$.setAttribute("colspan","2");mxUtils.write($size$$,mxResources.get("loading")+"...");$row$$.appendChild($size$$);$tbody$$.appendChild($row$$);var $row$$=document.createElement("tr"),$left$$=document.createElement("td"),$right$$=document.createElement("td");$cancelBtn$jscomp$11_table$$.style.paddingLeft="6px";mxUtils.write($left$$,mxResources.get("left")+":");var $xInput$$=document.createElement("input");$xInput$$.setAttribute("type","text");$xInput$$.style.width="100px";$xInput$$.value="0";
this.init=function $this$init$(){$xInput$$.focus();$xInput$$.select()};$right$$.appendChild($xInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("top")+":");var $yInput$$=document.createElement("input");$yInput$$.setAttribute("type","text");$yInput$$.style.width="100px";$yInput$$.value="0";$right$$.appendChild($yInput$$);
$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("right")+":");var $wInput$$=document.createElement("input");$wInput$$.setAttribute("type","text");$wInput$$.style.width="100px";$wInput$$.value="0";$right$$.appendChild($wInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);
$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("bottom")+":");var $hInput$$=document.createElement("input");$hInput$$.setAttribute("type","text");$hInput$$.style.width="100px";$hInput$$.value="0";$right$$.appendChild($hInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");
mxUtils.write($left$$,mxResources.get("circle")+":");$row$$.appendChild($left$$);var $circleInput$$=document.createElement("input");$circleInput$$.setAttribute("type","checkbox");$right$$.appendChild($circleInput$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$cancelBtn$jscomp$11_table$$.appendChild($tbody$$);$div$$.appendChild($cancelBtn$jscomp$11_table$$);$cancelBtn$jscomp$11_table$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$jscomp$11_table$$.className=
"geBtn";var $imageObj$$=new Image,$applyBtn$$=mxUtils.button(mxResources.get("apply"),function(){$editorUi$$.hideDialog();var $canvas$$=document.createElement("canvas"),$context$$=$canvas$$.getContext("2d"),$sourceWidth_w$$=$imageObj$$.width,$h$$=$imageObj$$.height,$sourceX$$=parseInt($xInput$$.value),$sourceY$$=parseInt($yInput$$.value),$sourceWidth_w$$=Math.max(1,$sourceWidth_w$$-$sourceX$$-parseInt($wInput$$.value)),$h$$=Math.max(1,$h$$-$sourceY$$-parseInt($hInput$$.value));$canvas$$.width=$sourceWidth_w$$;
$canvas$$.height=$h$$;$circleInput$$.checked&&($context$$.fillStyle="#000000",$context$$.arc($sourceWidth_w$$/2,$h$$/2,Math.min($sourceWidth_w$$/2,$h$$/2),0,2*Math.PI),$context$$.fill(),$context$$.globalCompositeOperation="source-in");$context$$.drawImage($imageObj$$,$sourceX$$,$sourceY$$,$sourceWidth_w$$,$h$$,0,0,$sourceWidth_w$$,$h$$);$fn$$($canvas$$.toDataURL())});$applyBtn$$.className="geBtn gePrimaryBtn";$applyBtn$$.setAttribute("disabled","disabled");$imageObj$$.onload=function $$imageObj$$$onload$(){$applyBtn$$.removeAttribute("disabled");
$size$$.innerHTML="";mxUtils.write($size$$,mxResources.get("width")+": "+$imageObj$$.width+" "+mxResources.get("height")+": "+$imageObj$$.height)};$imageObj$$.src=$buttons$jscomp$10_image$$;mxEvent.addListener($div$$,"keypress",function($e$$){13==$e$$.keyCode&&$applyBtn$$.click()});$buttons$jscomp$10_image$$=document.createElement("div");$buttons$jscomp$10_image$$.style.marginTop="20px";$buttons$jscomp$10_image$$.style.textAlign="right";$editorUi$$.editor.cancelFirst?($buttons$jscomp$10_image$$.appendChild($cancelBtn$jscomp$11_table$$),
$buttons$jscomp$10_image$$.appendChild($applyBtn$$)):($buttons$jscomp$10_image$$.appendChild($applyBtn$$),$buttons$jscomp$10_image$$.appendChild($cancelBtn$jscomp$11_table$$));$div$$.appendChild($buttons$jscomp$10_image$$);this.container=$div$$},EditGeometryDialog=function $EditGeometryDialog$($editorUi$$,$vertices$$){var $graph$$=$editorUi$$.editor.graph,$cancelBtn$jscomp$12_geo$$=1==$vertices$$.length?$graph$$.getCellGeometry($vertices$$[0]):null,$div$$=document.createElement("div"),$buttons$jscomp$11_table$$=
document.createElement("table"),$tbody$$=document.createElement("tbody"),$row$$=document.createElement("tr"),$left$$=document.createElement("td"),$right$$=document.createElement("td");$buttons$jscomp$11_table$$.style.paddingLeft="6px";mxUtils.write($left$$,mxResources.get("relative")+":");var $relInput$$=document.createElement("input");$relInput$$.setAttribute("type","checkbox");null!=$cancelBtn$jscomp$12_geo$$&&$cancelBtn$jscomp$12_geo$$.relative&&($relInput$$.setAttribute("checked","checked"),$relInput$$.defaultChecked=
!0);this.init=function $this$init$(){$relInput$$.focus()};$right$$.appendChild($relInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("left")+":");var $xInput$$=document.createElement("input");$xInput$$.setAttribute("type","text");$xInput$$.style.width="100px";$xInput$$.value=null!=$cancelBtn$jscomp$12_geo$$?
$cancelBtn$jscomp$12_geo$$.x:"";$right$$.appendChild($xInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("top")+":");var $yInput$$=document.createElement("input");$yInput$$.setAttribute("type","text");$yInput$$.style.width="100px";$yInput$$.value=null!=$cancelBtn$jscomp$12_geo$$?$cancelBtn$jscomp$12_geo$$.y:
"";$right$$.appendChild($yInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("dx")+":");var $dxInput$$=document.createElement("input");$dxInput$$.setAttribute("type","text");$dxInput$$.style.width="100px";$dxInput$$.value=null!=$cancelBtn$jscomp$12_geo$$&&null!=$cancelBtn$jscomp$12_geo$$.offset?$cancelBtn$jscomp$12_geo$$.offset.x:
"";$right$$.appendChild($dxInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("dy")+":");var $dyInput$$=document.createElement("input");$dyInput$$.setAttribute("type","text");$dyInput$$.style.width="100px";$dyInput$$.value=null!=$cancelBtn$jscomp$12_geo$$&&null!=$cancelBtn$jscomp$12_geo$$.offset?$cancelBtn$jscomp$12_geo$$.offset.y:
"";$right$$.appendChild($dyInput$$);$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("width")+":");var $wInput$$=document.createElement("input");$wInput$$.setAttribute("type","text");$wInput$$.style.width="100px";$wInput$$.value=null!=$cancelBtn$jscomp$12_geo$$?$cancelBtn$jscomp$12_geo$$.width:"";$right$$.appendChild($wInput$$);
$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("height")+":");var $hInput$$=document.createElement("input");$hInput$$.setAttribute("type","text");$hInput$$.style.width="100px";$hInput$$.value=null!=$cancelBtn$jscomp$12_geo$$?$cancelBtn$jscomp$12_geo$$.height:"";$right$$.appendChild($hInput$$);$row$$.appendChild($left$$);
$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$left$$=document.createElement("td");$right$$=document.createElement("td");mxUtils.write($left$$,mxResources.get("rotation")+":");var $rotInput$$=document.createElement("input");$rotInput$$.setAttribute("type","text");$rotInput$$.style.width="100px";$rotInput$$.value=1==$vertices$$.length?mxUtils.getValue($graph$$.getCellStyle($vertices$$[0]),mxConstants.STYLE_ROTATION,0):"";$right$$.appendChild($rotInput$$);
$row$$.appendChild($left$$);$row$$.appendChild($right$$);$tbody$$.appendChild($row$$);$buttons$jscomp$11_table$$.appendChild($tbody$$);$div$$.appendChild($buttons$jscomp$11_table$$);$cancelBtn$jscomp$12_geo$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});$cancelBtn$jscomp$12_geo$$.className="geBtn";var $applyBtn$$=mxUtils.button(mxResources.get("apply"),function(){$editorUi$$.hideDialog();$graph$$.getModel().beginUpdate();try{for(var $i$$=0;$i$$<$vertices$$.length;$i$$++){var $g$$=
$graph$$.getCellGeometry($vertices$$[$i$$]);null!=$g$$&&($g$$=$g$$.clone(),$graph$$.isCellMovable($vertices$$[$i$$])&&($g$$.relative=$relInput$$.checked,0<mxUtils.trim($xInput$$.value).length&&($g$$.x=Number($xInput$$.value)),0<mxUtils.trim($yInput$$.value).length&&($g$$.y=Number($yInput$$.value)),0<mxUtils.trim($dxInput$$.value).length&&(null==$g$$.offset&&($g$$.offset=new mxPoint),$g$$.offset.x=Number($dxInput$$.value)),0<mxUtils.trim($dyInput$$.value).length&&(null==$g$$.offset&&($g$$.offset=new mxPoint),
$g$$.offset.y=Number($dyInput$$.value))),$graph$$.isCellResizable($vertices$$[$i$$])&&(0<mxUtils.trim($wInput$$.value).length&&($g$$.width=Number($wInput$$.value)),0<mxUtils.trim($hInput$$.value).length&&($g$$.height=Number($hInput$$.value))),$graph$$.getModel().setGeometry($vertices$$[$i$$],$g$$));0<mxUtils.trim($rotInput$$.value).length&&$graph$$.setCellStyles(mxConstants.STYLE_ROTATION,Number($rotInput$$.value),[$vertices$$[$i$$]])}}finally{$graph$$.getModel().endUpdate()}});$applyBtn$$.className=
"geBtn gePrimaryBtn";mxEvent.addListener($div$$,"keypress",function($e$$){13==$e$$.keyCode&&$applyBtn$$.click()});$buttons$jscomp$11_table$$=document.createElement("div");$buttons$jscomp$11_table$$.style.marginTop="20px";$buttons$jscomp$11_table$$.style.textAlign="right";$editorUi$$.editor.cancelFirst?($buttons$jscomp$11_table$$.appendChild($cancelBtn$jscomp$12_geo$$),$buttons$jscomp$11_table$$.appendChild($applyBtn$$)):($buttons$jscomp$11_table$$.appendChild($applyBtn$$),$buttons$jscomp$11_table$$.appendChild($cancelBtn$jscomp$12_geo$$));
$div$$.appendChild($buttons$jscomp$11_table$$);this.container=$div$$},LibraryDialog=function $LibraryDialog$($editorUi$$,$cancelBtn$jscomp$13_i$jscomp$27_name$$,$library_outer$$,$btns$$,$file$jscomp$0$$,$mode$jscomp$0$$){function $getIndexForEvent$$($dropTarget_evt$$){for($dropTarget_evt$$=document.elementFromPoint($dropTarget_evt$$.clientX,$dropTarget_evt$$.clientY);null!=$dropTarget_evt$$&&$dropTarget_evt$$.parentNode!=$div$$;)$dropTarget_evt$$=$dropTarget_evt$$.parentNode;var $result$$=null;if(null!=
$dropTarget_evt$$)for(var $tmp$$=$div$$.firstChild,$result$$=0;null!=$tmp$$&&$tmp$$!=$dropTarget_evt$$;)$tmp$$=$tmp$$.nextSibling,$result$$++;return $result$$}function $addButton$$($data$$,$mimeType$$,$x$$,$y$$,$done_w$$,$h$$,$img$$,$aspect$$,$title$$){try{if(null==$mimeType$$||"image/"==$mimeType$$.substring(0,6))if(null==$data$$&&null!=$img$$||null==$entries$$[$data$$]){var $updateLabel$$=function $$updateLabel$$$(){$label$$.innerHTML="";$label$$.style.cursor="pointer";$label$$.style.whiteSpace=
"nowrap";$label$$.style.textOverflow="ellipsis";mxUtils.write($label$$,null!=$entry$$.title&&0<$entry$$.title.length?$entry$$.title:mxResources.get("untitled"));$label$$.style.color=null==$entry$$.title||0==$entry$$.title.length?"#d0d0d0":""};$div$$.style.backgroundImage="";$bg$$.style.display="none";var $doc$jscomp$3_iw$$=$done_w$$,$ih$jscomp$2_temp$$=$h$$;if($done_w$$>$editorUi$$.maxImageSize||$h$$>$editorUi$$.maxImageSize){var $s$$=Math.min(1,Math.min($editorUi$$.maxImageSize/Math.max(1,$done_w$$)),
$editorUi$$.maxImageSize/Math.max(1,$h$$));$done_w$$*=$s$$;$h$$*=$s$$}$doc$jscomp$3_iw$$>$ih$jscomp$2_temp$$?($ih$jscomp$2_temp$$=Math.round(100*$ih$jscomp$2_temp$$/$doc$jscomp$3_iw$$),$doc$jscomp$3_iw$$=100):($doc$jscomp$3_iw$$=Math.round(100*$doc$jscomp$3_iw$$/$ih$jscomp$2_temp$$),$ih$jscomp$2_temp$$=100);var $wrapper$$=document.createElement("div");$wrapper$$.setAttribute("draggable","true");$wrapper$$.style.display=mxClient.IS_QUIRKS?"inline":"inline-block";$wrapper$$.style.position="relative";
$wrapper$$.style.cursor="move";mxUtils.setPrefixedStyle($wrapper$$.style,"transition","transform .1s ease-in-out");if(null!=$data$$){var $elt$$=document.createElement("img");$elt$$.setAttribute("src",$converter$$.convert($data$$));$elt$$.style.width=$doc$jscomp$3_iw$$+"px";$elt$$.style.height=$ih$jscomp$2_temp$$+"px";$elt$$.style.margin="10px";$elt$$.style.paddingBottom=Math.floor((100-$ih$jscomp$2_temp$$)/2)+"px";$elt$$.style.paddingLeft=Math.floor((100-$doc$jscomp$3_iw$$)/2)+"px";$wrapper$$.appendChild($elt$$)}else if(null!=
$img$$){var $cells$$=$editorUi$$.stringToCells(Graph.decompress($img$$.xml));0<$cells$$.length&&($editorUi$$.sidebar.createThumb($cells$$,100,100,$wrapper$$,null,!0,!1),$wrapper$$.firstChild.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",$wrapper$$.firstChild.style.cursor="")}var $rem$$=document.createElement("img");$rem$$.setAttribute("src",Editor.closeImage);$rem$$.setAttribute("border","0");$rem$$.setAttribute("title",mxResources.get("delete"));$rem$$.setAttribute("align","top");$rem$$.style.paddingTop=
"4px";$rem$$.style.position="absolute";$rem$$.style.marginLeft="-12px";$rem$$.style.zIndex="1";$rem$$.style.cursor="pointer";mxEvent.addListener($rem$$,"dragstart",function($evt$$){mxEvent.consume($evt$$)});(function($wrapperDiv$$,$dataParam$$,$imgParam$$){mxEvent.addListener($rem$$,"click",function($evt$$){$entries$$[$dataParam$$]=null;for(var $i$$=0;$i$$<$images$$.length;$i$$++)if(null!=$images$$[$i$$].data&&$images$$[$i$$].data==$dataParam$$||null!=$images$$[$i$$].xml&&null!=$imgParam$$&&$images$$[$i$$].xml==
$imgParam$$.xml){$images$$.splice($i$$,1);break}$wrapper$$.parentNode.removeChild($wrapperDiv$$);0==$images$$.length&&($div$$.style.backgroundImage="url('"+IMAGE_PATH+"/droptarget.png')",$bg$$.style.display="");mxEvent.consume($evt$$)});mxEvent.addListener($rem$$,"dblclick",function($evt$$){mxEvent.consume($evt$$)})})($wrapper$$,$data$$,$img$$);$wrapper$$.appendChild($rem$$);$wrapper$$.style.marginBottom="30px";var $label$$=document.createElement("div");$label$$.style.position="absolute";$label$$.style.boxSizing=
"border-box";$label$$.style.bottom="-18px";$label$$.style.left="10px";$label$$.style.right="10px";$label$$.style.backgroundColor="#ffffff";$label$$.style.overflow="hidden";$label$$.style.textAlign="center";var $entry$$=null;null!=$data$$?($entry$$={data:$data$$,w:$done_w$$,h:$h$$,title:$title$$},null!=$aspect$$&&($entry$$.aspect=$aspect$$),$entries$$[$data$$]=$elt$$,$images$$.push($entry$$)):null!=$img$$&&($img$$.aspect="fixed",$images$$.push($img$$),$entry$$=$img$$);mxEvent.addListener($label$$,
"keydown",function($evt$$){13==$evt$$.keyCode&&null!=$stopEditing$$&&($stopEditing$$(),$stopEditing$$=null,mxEvent.consume($evt$$))});$updateLabel$$();$wrapper$$.appendChild($label$$);mxEvent.addListener($label$$,"mousedown",function($evt$$){"true"!=$label$$.getAttribute("contentEditable")&&mxEvent.consume($evt$$)});$cells$$=function $$cells$$$($evt$$){if(mxClient.IS_IOS||mxClient.IS_QUIRKS||mxClient.IS_FF||!(null==document.documentMode||9<document.documentMode)){var $dlg$$=new FilenameDialog($editorUi$$,
$entry$$.title||"",mxResources.get("ok"),function($newTitle$$){null!=$newTitle$$&&($entry$$.title=$newTitle$$,$updateLabel$$())},mxResources.get("enterValue"));$editorUi$$.showDialog($dlg$$.container,300,80,!0,!0);$dlg$$.init();mxEvent.consume($evt$$)}else if("true"!=$label$$.getAttribute("contentEditable")){null!=$stopEditing$$&&($stopEditing$$(),$stopEditing$$=null);if(null==$entry$$.title||0==$entry$$.title.length)$label$$.innerHTML="";$label$$.style.textOverflow="";$label$$.style.whiteSpace="";
$label$$.style.cursor="text";$label$$.style.color="";$label$$.setAttribute("contentEditable","true");$label$$.focus();document.execCommand("selectAll",!1,null);$stopEditing$$=function $$stopEditing$$$(){$label$$.removeAttribute("contentEditable");$label$$.style.cursor="pointer";$entry$$.title=$label$$.innerHTML;$updateLabel$$()};mxEvent.consume($evt$$)}};mxEvent.addListener($label$$,"click",$cells$$);mxEvent.addListener($wrapper$$,"dblclick",$cells$$);$div$$.appendChild($wrapper$$);mxEvent.addListener($wrapper$$,
"dragstart",function($evt$$){null==$data$$&&null!=$img$$&&($rem$$.style.visibility="hidden",$label$$.style.visibility="hidden");mxClient.IS_FF&&null!=$img$$.xml&&$evt$$.dataTransfer.setData("Text",$img$$.xml);$dragSourceIndex$$=$getIndexForEvent$$($evt$$);mxClient.IS_GC&&($wrapper$$.style.opacity="0.9");window.setTimeout(function(){mxUtils.setPrefixedStyle($wrapper$$.style,"transform","scale(0.5,0.5)");mxUtils.setOpacity($wrapper$$,30);$rem$$.style.visibility="";$label$$.style.visibility=""},0)});
mxEvent.addListener($wrapper$$,"dragend",function($evt$$){"hidden"==$rem$$.style.visibility&&($rem$$.style.visibility="",$label$$.style.visibility="");$dragSourceIndex$$=null;mxUtils.setOpacity($wrapper$$,100);mxUtils.setPrefixedStyle($wrapper$$.style,"transform",null)})}else $errorShowed$$||($errorShowed$$=!0,$editorUi$$.handleError({message:mxResources.get("fileExists")}));else{$done_w$$=!1;try{if($editorUi$$.spinner.stop(),$doc$jscomp$3_iw$$=mxUtils.parseXml($data$$),"mxlibrary"==$doc$jscomp$3_iw$$.documentElement.nodeName){$ih$jscomp$2_temp$$=
JSON.parse(mxUtils.getTextContent($doc$jscomp$3_iw$$.documentElement));if(null!=$ih$jscomp$2_temp$$&&0<$ih$jscomp$2_temp$$.length)for(var $i$jscomp$0$$=0;$i$jscomp$0$$<$ih$jscomp$2_temp$$.length;$i$jscomp$0$$++)null!=$ih$jscomp$2_temp$$[$i$jscomp$0$$].xml?$addButton$$(null,null,0,0,0,0,$ih$jscomp$2_temp$$[$i$jscomp$0$$]):$addButton$$($ih$jscomp$2_temp$$[$i$jscomp$0$$].data,null,0,0,$ih$jscomp$2_temp$$[$i$jscomp$0$$].w,$ih$jscomp$2_temp$$[$i$jscomp$0$$].h,null,"fixed",$ih$jscomp$2_temp$$[$i$jscomp$0$$].title);
$done_w$$=!0}else if("mxfile"==$doc$jscomp$3_iw$$.documentElement.nodeName){for(var $pages$$=$doc$jscomp$3_iw$$.documentElement.getElementsByTagName("diagram"),$i$jscomp$0$$=0;$i$jscomp$0$$<$pages$$.length;$i$jscomp$0$$++){var $ih$jscomp$2_temp$$=mxUtils.getTextContent($pages$$[$i$jscomp$0$$]),$cells$$=$editorUi$$.stringToCells(Graph.decompress($ih$jscomp$2_temp$$)),$size$$=$editorUi$$.editor.graph.getBoundingBoxFromGeometry($cells$$);$addButton$$(null,null,0,0,0,0,{xml:$ih$jscomp$2_temp$$,w:$size$$.width,
h:$size$$.height})}$done_w$$=!0}}catch($e$$){}$done_w$$||($editorUi$$.spinner.stop(),$editorUi$$.handleError({message:mxResources.get("errorLoadingFile")}))}}catch($e$7$$){}return null}function $dragOver$$($evt$$){$evt$$.dataTransfer.dropEffect=null!=$dragSourceIndex$$?"move":"copy";$evt$$.stopPropagation();$evt$$.preventDefault()}function $dropHandler$$($evt$$){$evt$$.stopPropagation();$evt$$.preventDefault();$errorShowed$$=!1;$dropTargetIndex$$=$getIndexForEvent$$($evt$$);if(null!=$dragSourceIndex$$)null!=
$dropTargetIndex$$&&$dropTargetIndex$$<$div$$.children.length?($images$$.splice($dropTargetIndex$$>$dragSourceIndex$$?$dropTargetIndex$$-1:$dropTargetIndex$$,0,$images$$.splice($dragSourceIndex$$,1)[0]),$div$$.insertBefore($div$$.children[$dragSourceIndex$$],$div$$.children[$dropTargetIndex$$])):($images$$.push($images$$.splice($dragSourceIndex$$,1)[0]),$div$$.appendChild($div$$.children[$dragSourceIndex$$]));else if(0<$evt$$.dataTransfer.files.length)$editorUi$$.importFiles($evt$$.dataTransfer.files,
0,0,$editorUi$$.maxImageSize,$createImportHandler$$($evt$$));else if(0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/uri-list")){var $uri$$=decodeURIComponent($evt$$.dataTransfer.getData("text/uri-list"));(/(\.jpg)($|\?)/i.test($uri$$)||/(\.png)($|\?)/i.test($uri$$)||/(\.gif)($|\?)/i.test($uri$$)||/(\.svg)($|\?)/i.test($uri$$))&&$editorUi$$.loadImage($uri$$,function($img$$){$addButton$$($uri$$,null,0,0,$img$$.width,$img$$.height);$div$$.scrollTop=$div$$.scrollHeight})}$evt$$.stopPropagation();
$evt$$.preventDefault()}var $images$$=[];$library_outer$$=document.createElement("div");$library_outer$$.style.height="100%";var $btn$jscomp$6_header$jscomp$3_img$$=document.createElement("div");$btn$jscomp$6_header$jscomp$3_img$$.style.whiteSpace="nowrap";$btn$jscomp$6_header$jscomp$3_img$$.style.height="40px";$library_outer$$.appendChild($btn$jscomp$6_header$jscomp$3_img$$);mxUtils.write($btn$jscomp$6_header$jscomp$3_img$$,mxResources.get("filename")+":");null==$cancelBtn$jscomp$13_i$jscomp$27_name$$&&
($cancelBtn$jscomp$13_i$jscomp$27_name$$=$editorUi$$.defaultLibraryName+".xml");var $nameInput$$=document.createElement("input");$nameInput$$.setAttribute("value",$cancelBtn$jscomp$13_i$jscomp$27_name$$);$nameInput$$.style.marginRight="20px";$nameInput$$.style.marginLeft="10px";$nameInput$$.style.width="500px";null==$file$jscomp$0$$||$file$jscomp$0$$.isRenamable()||$nameInput$$.setAttribute("disabled","true");this.init=function $this$init$(){if(null==$file$jscomp$0$$||$file$jscomp$0$$.isRenamable())$nameInput$$.focus(),
mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$nameInput$$.select():document.execCommand("selectAll",!1,null)};$btn$jscomp$6_header$jscomp$3_img$$.appendChild($nameInput$$);var $div$$=document.createElement("div");$div$$.style.borderWidth="1px 0px 1px 0px";$div$$.style.borderColor="#d3d3d3";$div$$.style.borderStyle="solid";$div$$.style.marginTop="6px";$div$$.style.overflow="auto";$div$$.style.height="340px";$div$$.style.backgroundPosition="center center";$div$$.style.backgroundRepeat=
"no-repeat";0==$images$$.length&&Graph.fileSupport&&($div$$.style.backgroundImage="url('"+IMAGE_PATH+"/droptarget.png')");var $bg$$=document.createElement("div");$bg$$.style.position="absolute";$bg$$.style.width="640px";$bg$$.style.top="260px";$bg$$.style.textAlign="center";$bg$$.style.fontSize="22px";$bg$$.style.color="#a0c3ff";mxUtils.write($bg$$,mxResources.get("dragImagesHere"));$library_outer$$.appendChild($bg$$);var $entries$$={},$dragSourceIndex$$=null,$dropTargetIndex$$=null,$stopEditing$$=
null;$cancelBtn$jscomp$13_i$jscomp$27_name$$=function $$cancelBtn$jscomp$13_i$jscomp$27_name$$$($evt$$){"true"!=mxEvent.getSource($evt$$).getAttribute("contentEditable")&&null!=$stopEditing$$&&($stopEditing$$(),$stopEditing$$=null,mxEvent.consume($evt$$))};mxEvent.addListener($div$$,"mousedown",$cancelBtn$jscomp$13_i$jscomp$27_name$$);mxEvent.addListener($div$$,"pointerdown",$cancelBtn$jscomp$13_i$jscomp$27_name$$);mxEvent.addListener($div$$,"touchstart",$cancelBtn$jscomp$13_i$jscomp$27_name$$);var $converter$$=
new mxUrlConverter,$errorShowed$$=!1;if(null!=$btns$$)for($cancelBtn$jscomp$13_i$jscomp$27_name$$=0;$cancelBtn$jscomp$13_i$jscomp$27_name$$<$btns$$.length;$cancelBtn$jscomp$13_i$jscomp$27_name$$++)$btn$jscomp$6_header$jscomp$3_img$$=$btns$$[$cancelBtn$jscomp$13_i$jscomp$27_name$$],$addButton$$($btn$jscomp$6_header$jscomp$3_img$$.data,null,0,0,$btn$jscomp$6_header$jscomp$3_img$$.w,$btn$jscomp$6_header$jscomp$3_img$$.h,$btn$jscomp$6_header$jscomp$3_img$$,$btn$jscomp$6_header$jscomp$3_img$$.aspect,$btn$jscomp$6_header$jscomp$3_img$$.title);
mxEvent.addListener($div$$,"dragleave",function($evt$$){$bg$$.style.cursor="";for(var $source$$=mxEvent.getSource($evt$$);null!=$source$$;){if($source$$==$div$$||$source$$==$bg$$){$evt$$.stopPropagation();$evt$$.preventDefault();break}$source$$=$source$$.parentNode}});var $createImportHandler$$=function $$createImportHandler$$$($evt$$){return function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,$doneFn$$,$file$$){null!=$file$$&&(/(\.vsdx)($|\?)/i.test($file$$.name)||/(\.vssx)($|\?)/i.test($file$$.name))?
$editorUi$$.importVisio($file$$,mxUtils.bind(this,function($xml$$){$editorUi$$.spinner.stop();$addButton$$($xml$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,"fixed",mxEvent.isAltDown($evt$$)?null:$img$$.substring(0,$img$$.lastIndexOf(".")).replace(/_/g," "))})):null!=$file$$&&!$editorUi$$.isOffline()&&(new XMLHttpRequest).upload&&$editorUi$$.isRemoteFileFormat($data$$,$file$$.name)?$editorUi$$.parseFile($file$$,mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&($editorUi$$.spinner.stop(),200<=
$xhr$$.status&&299>=$xhr$$.status&&($addButton$$($xhr$$.responseText,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,"fixed",mxEvent.isAltDown($evt$$)?null:$img$$.substring(0,$img$$.lastIndexOf(".")).replace(/_/g," ")),$div$$.scrollTop=$div$$.scrollHeight))})):($addButton$$($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,"fixed",mxEvent.isAltDown($evt$$)?null:$img$$.substring(0,$img$$.lastIndexOf(".")).replace(/_/g," ")),$div$$.scrollTop=$div$$.scrollHeight)}};mxEvent.addListener($div$$,"dragover",$dragOver$$);
mxEvent.addListener($div$$,"drop",$dropHandler$$);mxEvent.addListener($bg$$,"dragover",$dragOver$$);mxEvent.addListener($bg$$,"drop",$dropHandler$$);$library_outer$$.appendChild($div$$);$btns$$=document.createElement("div");$btns$$.style.textAlign="right";$btns$$.style.marginTop="20px";$cancelBtn$jscomp$13_i$jscomp$27_name$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog(!0)});$cancelBtn$jscomp$13_i$jscomp$27_name$$.setAttribute("id","btnCancel");$cancelBtn$jscomp$13_i$jscomp$27_name$$.className=
"geBtn";$editorUi$$.editor.cancelFirst&&$btns$$.appendChild($cancelBtn$jscomp$13_i$jscomp$27_name$$);$btn$jscomp$6_header$jscomp$3_img$$=mxUtils.button(mxResources.get("export"),function(){var $data$$=$editorUi$$.createLibraryDataFromImages($images$$),$filename$$=$nameInput$$.value;/(\.xml)$/i.test($filename$$)||($filename$$+=".xml");$editorUi$$.isLocalFileSave()?$editorUi$$.saveLocalFile($data$$,$filename$$,"text/xml",null,null,!0):(new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent($filename$$)+
"&format=xml&xml="+encodeURIComponent($data$$))).simulate(document,"_blank")});$btn$jscomp$6_header$jscomp$3_img$$.setAttribute("id","btnDownload");$btn$jscomp$6_header$jscomp$3_img$$.className="geBtn";$btns$$.appendChild($btn$jscomp$6_header$jscomp$3_img$$);if(null==document.documentMode){if(null==$editorUi$$.libDlgFileInputElt){var $fileInput$$=document.createElement("input");$fileInput$$.setAttribute("multiple","multiple");$fileInput$$.setAttribute("type","file");mxEvent.addListener($fileInput$$,
"change",function($evt$$){$errorShowed$$=!1;$editorUi$$.importFiles($fileInput$$.files,0,0,$editorUi$$.maxImageSize,function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,$doneFn$$,$file$$){$createImportHandler$$($evt$$)($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,$doneFn$$,$file$$);$fileInput$$.value=""});$div$$.scrollTop=$div$$.scrollHeight});$fileInput$$.style.display="none";document.body.appendChild($fileInput$$);$editorUi$$.libDlgFileInputElt=$fileInput$$}$btn$jscomp$6_header$jscomp$3_img$$=
mxUtils.button(mxResources.get("import"),function(){null!=$stopEditing$$&&($stopEditing$$(),$stopEditing$$=null);$editorUi$$.libDlgFileInputElt.click()});$btn$jscomp$6_header$jscomp$3_img$$.setAttribute("id","btnAddImage");$btn$jscomp$6_header$jscomp$3_img$$.className="geBtn";$btns$$.appendChild($btn$jscomp$6_header$jscomp$3_img$$)}$btn$jscomp$6_header$jscomp$3_img$$=mxUtils.button(mxResources.get("addImageUrl"),function(){null!=$stopEditing$$&&($stopEditing$$(),$stopEditing$$=null);$editorUi$$.showImageDialog(mxResources.get("addImageUrl"),
"",function($url$$,$w$$,$h$$){$errorShowed$$=!1;if(null!=$url$$){if("data:image/"==$url$$.substring(0,11)){var $comma$$=$url$$.indexOf(",");0<$comma$$&&($url$$=$url$$.substring(0,$comma$$)+";base64,"+$url$$.substring($comma$$+1))}$addButton$$($url$$,null,0,0,$w$$,$h$$);$div$$.scrollTop=$div$$.scrollHeight}})});$btn$jscomp$6_header$jscomp$3_img$$.setAttribute("id","btnAddImageUrl");$btn$jscomp$6_header$jscomp$3_img$$.className="geBtn";$btns$$.appendChild($btn$jscomp$6_header$jscomp$3_img$$);this.saveBtnClickHandler=
function $this$saveBtnClickHandler$($name$$,$images$$,$file$$,$mode$$){$editorUi$$.saveLibrary($name$$,$images$$,$file$$,$mode$$)};$btn$jscomp$6_header$jscomp$3_img$$=mxUtils.button(mxResources.get("save"),mxUtils.bind(this,function(){null!=$stopEditing$$&&($stopEditing$$(),$stopEditing$$=null);this.saveBtnClickHandler($nameInput$$.value,$images$$,$file$jscomp$0$$,$mode$jscomp$0$$)}));$btn$jscomp$6_header$jscomp$3_img$$.setAttribute("id","btnSave");$btn$jscomp$6_header$jscomp$3_img$$.className="geBtn gePrimaryBtn";
$btns$$.appendChild($btn$jscomp$6_header$jscomp$3_img$$);$editorUi$$.editor.cancelFirst||$btns$$.appendChild($cancelBtn$jscomp$13_i$jscomp$27_name$$);$library_outer$$.appendChild($btns$$);this.container=$library_outer$$},EditShapeDialog=function $EditShapeDialog$($editorUi$$,$cell$$,$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$,$w$$,$cancelBtn$jscomp$14_h$$){$w$$=null!=$w$$?$w$$:300;$cancelBtn$jscomp$14_h$$=null!=$cancelBtn$jscomp$14_h$$?
$cancelBtn$jscomp$14_h$$:120;var $row$$,$td$$,$table$$=document.createElement("table"),$tbody$$=document.createElement("tbody");$table$$.style.cellPadding="4px";$row$$=document.createElement("tr");$td$$=document.createElement("td");$td$$.setAttribute("colspan","2");$td$$.style.fontSize="10pt";mxUtils.write($td$$,$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$);$row$$.appendChild($td$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");
$td$$=document.createElement("td");var $nameInput$$=document.createElement("textarea");$nameInput$$.style.outline="none";$nameInput$$.style.resize="none";$nameInput$$.style.width=$w$$-200+"px";$nameInput$$.style.height=$cancelBtn$jscomp$14_h$$+"px";this.textarea=$nameInput$$;this.init=function $this$init$(){$nameInput$$.focus();$nameInput$$.scrollTop=0};$td$$.appendChild($nameInput$$);$row$$.appendChild($td$$);$td$$=document.createElement("td");$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$=
document.createElement("div");$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.position="relative";$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.border="1px solid gray";$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.top="6px";$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.width=
"200px";$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.height=$cancelBtn$jscomp$14_h$$+4+"px";$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.overflow="hidden";$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.style.marginBottom="16px";mxEvent.disableContextMenu($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$);
$td$$.appendChild($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$);var $graph$$=new Graph($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$);$graph$$.setEnabled(!1);var $clone$$=$editorUi$$.editor.graph.cloneCell($cell$$);$graph$$.addCells([$clone$$]);$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$=$graph$$.view.getState($clone$$);
var $stencil$$="";null!=$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.shape&&null!=$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.shape.stencil&&($stencil$$=mxUtils.getPrettyXml($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.shape.stencil.desc));mxUtils.write($nameInput$$,$stencil$$||"");$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$=
$graph$$.getGraphBounds();$cancelBtn$jscomp$14_h$$=Math.min(160/$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.width,($cancelBtn$jscomp$14_h$$-40)/$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.height);$graph$$.view.scaleAndTranslate($cancelBtn$jscomp$14_h$$,20/$cancelBtn$jscomp$14_h$$-$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.x,
20/$cancelBtn$jscomp$14_h$$-$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.y);$row$$.appendChild($td$$);$tbody$$.appendChild($row$$);$row$$=document.createElement("tr");$td$$=document.createElement("td");$td$$.setAttribute("colspan","2");$td$$.style.paddingTop="2px";$td$$.style.whiteSpace="nowrap";$td$$.setAttribute("align","right");$cancelBtn$jscomp$14_h$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog()});
$cancelBtn$jscomp$14_h$$.className="geBtn";$editorUi$$.editor.cancelFirst&&$td$$.appendChild($cancelBtn$jscomp$14_h$$);$editorUi$$.isOffline()||($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$=mxUtils.button(mxResources.get("help"),function(){$editorUi$$.openLink("https://desk.draw.io/support/solutions/articles/16000052874")}),$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.className=
"geBtn",$td$$.appendChild($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$));var $updateShape$$=function $$updateShape$$$($targetGraph$$,$targetCell$$,$hide$$){var $newValue$$=$nameInput$$.value,$doc$$=mxUtils.parseXml($newValue$$),$newValue$$=mxUtils.getPrettyXml($doc$$.documentElement),$doc$$=$doc$$.documentElement.getElementsByTagName("parsererror");if(null!=$doc$$&&0<$doc$$.length)$editorUi$$.showError(mxResources.get("error"),mxResources.get("containsValidationErrors"),
mxResources.get("ok"));else if($hide$$&&$editorUi$$.hideDialog(),$doc$$=!$targetGraph$$.model.contains($targetCell$$),!$hide$$||$doc$$||$newValue$$!=$stencil$$){$newValue$$=Graph.compress($newValue$$);$targetGraph$$.getModel().beginUpdate();try{if($doc$$){var $pt$$=$editorUi$$.editor.graph.getInsertPoint();$targetCell$$.geometry.x=$pt$$.x;$targetCell$$.geometry.y=$pt$$.y;$targetGraph$$.addCell($targetCell$$)}$targetGraph$$.setCellStyles(mxConstants.STYLE_SHAPE,"stencil("+$newValue$$+")",[$targetCell$$])}catch($e$$){throw $e$$;
}finally{$targetGraph$$.getModel().endUpdate()}$doc$$&&$targetGraph$$.setSelectionCell($targetCell$$)}};$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$=mxUtils.button(mxResources.get("preview"),function(){$updateShape$$($graph$$,$clone$$,!1)});$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.className="geBtn";$td$$.appendChild($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$);
$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$=mxUtils.button(mxResources.get("apply"),function(){$updateShape$$($editorUi$$.editor.graph,$cell$$,!0)});$applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$.className="geBtn gePrimaryBtn";$td$$.appendChild($applyBtn$jscomp$6_b$jscomp$1_container$jscomp$4_helpBtn$jscomp$4_previewBtn$jscomp$1_state$jscomp$4_title$$);$editorUi$$.editor.cancelFirst||
$td$$.appendChild($cancelBtn$jscomp$14_h$$);$row$$.appendChild($td$$);$tbody$$.appendChild($row$$);$table$$.appendChild($tbody$$);this.container=$table$$},CustomDialog=function $CustomDialog$($editorUi$$,$btns$jscomp$6_content$$,$okFn$$,$cancelFn$$,$okBtn$$,$helpLink$$,$buttonsContent_cancelBtn$$,$helpBtn$$){var $div$$=document.createElement("div");$div$$.appendChild($btns$jscomp$6_content$$);$btns$jscomp$6_content$$=document.createElement("div");$btns$jscomp$6_content$$.style.marginTop="16px";$btns$jscomp$6_content$$.style.textAlign=
"center";null!=$buttonsContent_cancelBtn$$&&$btns$jscomp$6_content$$.appendChild($buttonsContent_cancelBtn$$);$buttonsContent_cancelBtn$$=mxUtils.button(mxResources.get("cancel"),function(){$editorUi$$.hideDialog();null!=$cancelFn$$&&$cancelFn$$()});$buttonsContent_cancelBtn$$.className="geBtn";$helpBtn$$&&($buttonsContent_cancelBtn$$.style.display="none");$editorUi$$.editor.cancelFirst&&$btns$jscomp$6_content$$.appendChild($buttonsContent_cancelBtn$$);$editorUi$$.isOffline()||null==$helpLink$$||
($helpBtn$$=mxUtils.button(mxResources.get("help"),function(){$editorUi$$.openLink($helpLink$$)}),$helpBtn$$.className="geBtn",$btns$jscomp$6_content$$.appendChild($helpBtn$$));$okBtn$$=mxUtils.button($okBtn$$||mxResources.get("ok"),function(){$editorUi$$.hideDialog();null!=$okFn$$&&$okFn$$()});$btns$jscomp$6_content$$.appendChild($okBtn$$);$okBtn$$.className="geBtn gePrimaryBtn";$editorUi$$.editor.cancelFirst||$btns$jscomp$6_content$$.appendChild($buttonsContent_cancelBtn$$);$div$$.appendChild($btns$jscomp$6_content$$);
this.cancelBtn=$buttonsContent_cancelBtn$$;this.okButton=$okBtn$$;this.container=$div$$},TemplatesDialog=function $TemplatesDialog$(){var $dialogSkeleton_ww$$='<div class="geTempDlgHeader"><img src="/images/draw.io-logo.svg" class="geTempDlgHeaderLogo"><input type="search" class="geTempDlgSearchBox" placeholder="'+mxResources.get("search",null,"Search")+'"></div><div class="geTemplatesList"><div class="geTempDlgNewDiagramlbl">'+mxResources.get("newDiagram",null,"New Diagram")+'</div><div class="geTempDlgHLine"></div><div class="geTemplatesLbl">'+
mxResources.get("templates",null,"Templates")+'</div></div><div class="geTempDlgContent"><div class="geTempDlgNewDiagramCat"><div class="geTempDlgNewDiagramCatLbl">'+mxResources.get("newDiagram",null,"New Diagram")+'</div><div class="geTempDlgNewDiagramCatList"></div><div class="geTempDlgNewDiagramCatFooter"><div class="geTempDlgShowAllBtn">'+mxResources.get("showAll",null,"+ Show all")+'</div></div></div><div class="geTempDlgDiagramsList"><div class="geTempDlgDiagramsListHeader"><div class="geTempDlgDiagramsListTitle"></div><div class="geTempDlgDiagramsListBtns"><div class="geTempDlgRadioBtn geTempDlgRadioBtnLarge" data-id="myDiagramsBtn"><img src="/images/my-diagrams.svg" class="geTempDlgMyDiagramsBtnImg"> <span>'+
mxResources.get("myDiagrams",null,"My diagrams")+'</span></div><div class="geTempDlgRadioBtn geTempDlgRadioBtnLarge geTempDlgRadioBtnActive" data-id="allDiagramsBtn"><img src="/images/all-diagrams-sel.svg" class="geTempDlgAllDiagramsBtnImg"> <span>'+mxResources.get("allDiagrams",null,"All diagrams")+'</span></div><div class="geTempDlgSpacer"> </div><div class="geTempDlgRadioBtn geTempDlgRadioBtnSmall geTempDlgRadioBtnActive" data-id="tilesBtn"><img src="/images/tiles-sel.svg" class="geTempDlgTilesBtnImg"></div><div class="geTempDlgRadioBtn geTempDlgRadioBtnSmall" data-id="listBtn"><img src="/images/list.svg" class="geTempDlgListBtnImg"></div></div></div><div class="geTempDlgDiagramsTiles"></div></div></div><br style="clear:both;"/><div class="geTempDlgFooter"><span class="geTempDlgLinkToDiagram geTempDlgLinkToDiagramHint">&#x1F6C8; '+
mxResources.get("linkToDiagramHint",null,"Add a link to this diagram. The diagram can only be edited from the page that owns it.")+'</span><button class="geTempDlgLinkToDiagram geTempDlgLinkToDiagramBtn">'+mxResources.get("linkToDiagram",null,"Link to Diagram")+'</button><div class="geTempDlgCreateBtn">'+mxResources.get("create",null,"Create")+'</div><div class="geTempDlgCancelBtn">'+mxResources.get("cancel",null,"Cancel")+"</div></div>",$div$$=document.createElement("div");$div$$.innerHTML=$dialogSkeleton_ww$$;
$div$$.className="geTemplateDlg";var $dialogSkeleton_ww$$=window.innerWidth,$wh$$=window.innerHeight,$dw$$=987,$dh$$=712;.9*$dialogSkeleton_ww$$<$dw$$&&($dw$$=Math.max(.9*$dialogSkeleton_ww$$,600),$div$$.style.width=$dw$$+"px");.9*$wh$$<$dh$$&&($dh$$=Math.max(.9*$wh$$,300),$div$$.style.height=$dh$$+"px");this.width=$dw$$;this.height=$dh$$;this.container=$div$$};
TemplatesDialog.prototype.init=function $TemplatesDialog$$init$($editorUi$$,$callback$$,$cancelCallback$$,$templateFile$$,$newDiagramCatsFile$$,$username$$,$recentDocsCallback$$,$searchDocsCallback$$,$openExtDocCallback$$,$linkToDiagramCallback$$){function $deselectTempCat$$(){null!=$currentEntry$$&&($currentEntry$$.style.fontWeight="normal",$currentEntry$$.style.textDecoration="none",$currentEntry$$=null)}function $radioClick$$($btn$$,$btnImgId$$,$btnImgFile$$,$otherBtnId$$,$otherBtnImgId$$,$otherBtnImgFile$$,
$isLarge$$){if(-1<$btn$$.className.indexOf("geTempDlgRadioBtnActive"))return!1;$btn$$.className+=" geTempDlgRadioBtnActive";$dlgDiv$$.querySelector(".geTempDlgRadioBtn[data-id="+$otherBtnId$$+"]").className="geTempDlgRadioBtn "+($isLarge$$?"geTempDlgRadioBtnLarge":"geTempDlgRadioBtnSmall");$dlgDiv$$.querySelector("."+$btnImgId$$).src="/images/"+$btnImgFile$$+"-sel.svg";$dlgDiv$$.querySelector("."+$otherBtnImgId$$).src="/images/"+$otherBtnImgFile$$+".svg";return!0}function $createPreview$$($closeBtn$jscomp$3_diagram$$){function $closeBox$$($evt$$){$tempDlgContent$$.removeChild($prevBox$$);
$dlgDiv$$.removeChild($mask$$);$tempDlgContent$$.scrollTop=$scrollTop$$}$closeBtn$jscomp$3_diagram$$=$closeBtn$jscomp$3_diagram$$.prevImgUrl||$closeBtn$jscomp$3_diagram$$.imgUrl||TEMPLATE_PATH+"/"+$closeBtn$jscomp$3_diagram$$.url.substring(0,$closeBtn$jscomp$3_diagram$$.url.length-4)+".png";var $mask$$=document.createElement("div");$mask$$.className="geTempDlgDialogMask";$dlgDiv$$.appendChild($mask$$);var $prevBox$$=document.createElement("div");$prevBox$$.className="geTempDlgDiagramPreviewBox";var $img$$=
document.createElement("img");$img$$.src=$closeBtn$jscomp$3_diagram$$;$prevBox$$.appendChild($img$$);$closeBtn$jscomp$3_diagram$$=document.createElement("img");$closeBtn$jscomp$3_diagram$$.src="/images/close.png";$closeBtn$jscomp$3_diagram$$.className="geTempDlgPreviewCloseBtn";$closeBtn$jscomp$3_diagram$$.setAttribute("title",mxResources.get("close"));$prevBox$$.appendChild($closeBtn$jscomp$3_diagram$$);var $scrollTop$$=$tempDlgContent$$.scrollTop;mxEvent.addListener($closeBtn$jscomp$3_diagram$$,
"click",$closeBox$$);mxEvent.addListener($mask$$,"click",$closeBox$$);$tempDlgContent$$.appendChild($prevBox$$);$tempDlgContent$$.scrollTop=0;$prevBox$$.style.lineHeight=$prevBox$$.clientHeight+"px"}function $swapActiveItem$$($newItem$$,$activeCls$$,$itemInfo$$){if(null!=$currentItem$$){for(var $classes$$=$currentItem$$.className.split(" "),$i$$=0;$i$$<$classes$$.length;$i$$++)if(-1<$classes$$[$i$$].indexOf("Active")){$classes$$.splice($i$$,1);break}$currentItem$$.className=$classes$$.join(" ")}null!=
$newItem$$?($currentItem$$=$newItem$$,$currentItem$$.className+=" "+$activeCls$$,$currentItemInfo$$=$itemInfo$$,$createBtn$$.className="geTempDlgCreateBtn"):($currentItemInfo$$=$currentItem$$=null,$createBtn$$.className="geTempDlgCreateBtn geTempDlgCreateBtnDisabled")}function $handleDialogOK$$($linkToDiagram$$){if(null!=$currentItemInfo$$){var $itemInfo$$=$currentItemInfo$$;$currentItemInfo$$=null;$createBtn$$.className="geTempDlgCreateBtn geTempDlgCreateBtnDisabled geTempDlgCreateBtnBusy";$itemInfo$$.isExternal?
(1==$linkToDiagram$$?$linkToDiagramCallback$$($itemInfo$$.url,$itemInfo$$,"nameInput.value"):$openExtDocCallback$$($itemInfo$$.url,$itemInfo$$,"nameInput.value"),$editorUi$$.hideDialog(!0)):mxUtils.get(TEMPLATE_PATH+"/"+$itemInfo$$.url,mxUtils.bind(this,function($req$$){200<=$req$$.getStatus()&&299>=$req$$.getStatus()&&($callback$$($req$$.getText(),"nameInput.value"),$editorUi$$.hideDialog(!0))}))}}function $showLinkToDiagram$$($isShown_linkDisplay$$){$isShown_linkDisplay$$=$isShown_linkDisplay$$?
"":"none";for(var $elems$$=$dlgDiv$$.querySelectorAll(".geTempDlgLinkToDiagram"),$i$$=0;$i$$<$elems$$.length;$i$$++)$elems$$[$i$$].style.display=$isShown_linkDisplay$$}function $fillDiagramsList$$($diagrams$$,$isTemplate$$,$asList$$){function $setSubmitBtnLbl$$(){$createBtn$$.innerHTML=$isTemplate$$?mxUtils.htmlEntities(mxResources.get("create")):mxUtils.htmlEntities(mxResources.get("copy"));$showLinkToDiagram$$(!$isTemplate$$)}$diagramsTiles$$.innerHTML="";$swapActiveItem$$();$curDiagList$$=$diagrams$$;
var $grid$$=null;if($asList$$){$grid$$=document.createElement("table");$grid$$.className="geTempDlgDiagramsListGrid";var $hrow_i$$=document.createElement("tr"),$th_title$$=document.createElement("th");$th_title$$.style.width="50%";$th_title$$.innerHTML=mxUtils.htmlEntities(mxResources.get("diagram",null,"Diagram"));$hrow_i$$.appendChild($th_title$$);$th_title$$=document.createElement("th");$th_title$$.style.width="25%";$th_title$$.innerHTML=mxUtils.htmlEntities(mxResources.get("changedBy",null,"Changed By"));
$hrow_i$$.appendChild($th_title$$);$th_title$$=document.createElement("th");$th_title$$.style.width="25%";$th_title$$.innerHTML=mxUtils.htmlEntities(mxResources.get("lastModifiedOn",null,"Last modified on"));$hrow_i$$.appendChild($th_title$$);$grid$$.appendChild($hrow_i$$);$diagramsTiles$$.appendChild($grid$$)}for($hrow_i$$=0;$hrow_i$$<$diagrams$$.length;$hrow_i$$++){$diagrams$$[$hrow_i$$].isExternal=!$isTemplate$$;var $titleLimit_url$$=$diagrams$$[$hrow_i$$].url,$th_title$$=mxUtils.htmlEntities($diagrams$$[$hrow_i$$].title),
$titleSpan_tooltip$$=$diagrams$$[$hrow_i$$].tooltip||$diagrams$$[$hrow_i$$].title,$imgUrl$jscomp$1_td$$=$diagrams$$[$hrow_i$$].imgUrl,$changedBy_imgDiv_lblDiv$$=mxUtils.htmlEntities($diagrams$$[$hrow_i$$].changedBy||""),$lastModifiedOn$$=mxUtils.htmlEntities($diagrams$$[$hrow_i$$].lastModifiedOn||"");$imgUrl$jscomp$1_td$$||($imgUrl$jscomp$1_td$$=TEMPLATE_PATH+"/"+$titleLimit_url$$.substring(0,$titleLimit_url$$.length-4)+".png");$titleLimit_url$$=$asList$$?50:15;null!=$th_title$$&&$th_title$$.length>
$titleLimit_url$$&&($th_title$$=$th_title$$.substring(0,$titleLimit_url$$)+"&hellip;");if($asList$$){var $row$$=document.createElement("tr"),$imgUrl$jscomp$1_td$$=document.createElement("td"),$prevImg$$=document.createElement("img");$prevImg$$.src="/images/icon-search.svg";$prevImg$$.className="geTempDlgDiagramListPreviewBtn";$prevImg$$.setAttribute("title",mxResources.get("preview"));$imgUrl$jscomp$1_td$$.appendChild($prevImg$$);$titleSpan_tooltip$$=document.createElement("span");$titleSpan_tooltip$$.className=
"geTempDlgDiagramTitle";$titleSpan_tooltip$$.innerHTML=$th_title$$;$imgUrl$jscomp$1_td$$.appendChild($titleSpan_tooltip$$);$row$$.appendChild($imgUrl$jscomp$1_td$$);$imgUrl$jscomp$1_td$$=document.createElement("td");$imgUrl$jscomp$1_td$$.innerHTML=$changedBy_imgDiv_lblDiv$$;$row$$.appendChild($imgUrl$jscomp$1_td$$);$imgUrl$jscomp$1_td$$=document.createElement("td");$imgUrl$jscomp$1_td$$.innerHTML=$lastModifiedOn$$;$row$$.appendChild($imgUrl$jscomp$1_td$$);$grid$$.appendChild($row$$);null==$currentItem$$&&
($setSubmitBtnLbl$$(),$swapActiveItem$$($row$$,"geTempDlgDiagramsListGridActive",$diagrams$$[$hrow_i$$]));(function($diagram2$$,$row2$$){mxEvent.addListener($row$$,"click",function(){$currentItem$$!=$row2$$&&($setSubmitBtnLbl$$(),$swapActiveItem$$($row2$$,"geTempDlgDiagramsListGridActive",$diagram2$$))});mxEvent.addListener($row$$,"dblclick",$handleDialogOK$$);mxEvent.addListener($prevImg$$,"click",function(){$createPreview$$($diagram2$$)})})($diagrams$$[$hrow_i$$],$row$$)}else{var $tile$$=document.createElement("div");
$tile$$.className="geTempDlgDiagramTile";$tile$$.setAttribute("title",$titleSpan_tooltip$$);null==$currentItem$$&&($setSubmitBtnLbl$$(),$swapActiveItem$$($tile$$,"geTempDlgDiagramTileActive",$diagrams$$[$hrow_i$$]));$changedBy_imgDiv_lblDiv$$=document.createElement("div");$changedBy_imgDiv_lblDiv$$.className="geTempDlgDiagramTileImg geTempDlgDiagramTileImgLoading";var $img$$=document.createElement("img");$img$$.style.display="none";(function($img2$$,$imgDiv2$$){$img$$.onload=function $$img$$$onload$(){$imgDiv2$$.className=
"geTempDlgDiagramTileImg";$img2$$.style.display=""};$img$$.onerror=function $$img$$$onerror$(){$imgDiv2$$.className="geTempDlgDiagramTileImg geTempDlgDiagramTileImgError"}})($img$$,$changedBy_imgDiv_lblDiv$$);$img$$.src=$imgUrl$jscomp$1_td$$;$changedBy_imgDiv_lblDiv$$.appendChild($img$$);$tile$$.appendChild($changedBy_imgDiv_lblDiv$$);$changedBy_imgDiv_lblDiv$$=document.createElement("div");$changedBy_imgDiv_lblDiv$$.className="geTempDlgDiagramTileLbl";$changedBy_imgDiv_lblDiv$$.innerHTML=null!=$th_title$$?
$th_title$$:"";$tile$$.appendChild($changedBy_imgDiv_lblDiv$$);$prevImg$$=document.createElement("img");$prevImg$$.src="/images/icon-search.svg";$prevImg$$.className="geTempDlgDiagramPreviewBtn";$prevImg$$.setAttribute("title",mxResources.get("preview"));$tile$$.appendChild($prevImg$$);(function($diagram2$$,$tile2$$){mxEvent.addListener($tile$$,"click",function(){$currentItem$$!=$tile2$$&&($setSubmitBtnLbl$$(),$swapActiveItem$$($tile2$$,"geTempDlgDiagramTileActive",$diagram2$$))});mxEvent.addListener($tile$$,
"dblclick",$handleDialogOK$$);mxEvent.addListener($prevImg$$,"click",function(){$createPreview$$($diagram2$$)})})($diagrams$$[$hrow_i$$],$tile$$);$diagramsTiles$$.appendChild($tile$$)}}}function $fillNewDiagramCats$$($newDiagramCats$$,$showAll$$){$newDiagramCatList$$.innerHTML="";$swapActiveItem$$();for(var $catCount$$=!$showAll$$&&5<$newDiagramCats$$.length?5:$newDiagramCats$$.length,$i$$=0;$i$$<$catCount$$;$i$$++){var $cat$$=$newDiagramCats$$[$i$$];$cat$$.isCategory=!0;var $entry$$=document.createElement("div"),
$label$$=mxResources.get($cat$$.title);null==$label$$&&($label$$=$cat$$.title.substring(0,1).toUpperCase()+$cat$$.title.substring(1));$entry$$.className="geTempDlgNewDiagramCatItem";$entry$$.setAttribute("title",$label$$);$label$$=mxUtils.htmlEntities($label$$);15<$label$$.length&&($label$$=$label$$.substring(0,15)+"&hellip;");null==$currentItem$$&&($createBtn$$.innerHTML=mxUtils.htmlEntities(mxResources.get("create")),$showLinkToDiagram$$(),$swapActiveItem$$($entry$$,"geTempDlgNewDiagramCatItemActive",
$cat$$));var $imgDiv$jscomp$1_lblDiv$$=document.createElement("div");$imgDiv$jscomp$1_lblDiv$$.className="geTempDlgNewDiagramCatItemImg";var $img$$=document.createElement("img");$img$$.src=NEW_DIAGRAM_CATS_PATH+"/"+$cat$$.img;$imgDiv$jscomp$1_lblDiv$$.appendChild($img$$);$entry$$.appendChild($imgDiv$jscomp$1_lblDiv$$);$imgDiv$jscomp$1_lblDiv$$=document.createElement("div");$imgDiv$jscomp$1_lblDiv$$.className="geTempDlgNewDiagramCatItemLbl";$imgDiv$jscomp$1_lblDiv$$.innerHTML=$label$$;$entry$$.appendChild($imgDiv$jscomp$1_lblDiv$$);
$newDiagramCatList$$.appendChild($entry$$);(function($cat2$$,$entry2$$){mxEvent.addListener($entry$$,"click",function(){$currentItem$$!=$entry2$$&&($createBtn$$.innerHTML=mxUtils.htmlEntities(mxResources.get("create")),$showLinkToDiagram$$(),$swapActiveItem$$($entry2$$,"geTempDlgNewDiagramCatItemActive",$cat2$$))});mxEvent.addListener($entry$$,"dblclick",$handleDialogOK$$)})($cat$$,$entry$$)}$showAllBtn$$.style.display=5>$newDiagramCats$$.length?"none":""}function $fillTemplatesList$$($categories$$){var $list$$=
$dlgDiv$$.querySelector(".geTemplatesList"),$cat$$;for($cat$$ in $categories$$){var $entry$$=document.createElement("div"),$label$$=mxResources.get($cat$$),$templateList$$=$categories$$[$cat$$];null==$label$$&&($label$$=$cat$$.substring(0,1).toUpperCase()+$cat$$.substring(1));$entry$$.className="geTemplateCatLink";$entry$$.setAttribute("title",$label$$+" ("+$templateList$$.length+")");$label$$=mxUtils.htmlEntities($label$$);15<$label$$.length&&($label$$=$label$$.substring(0,15)+"&hellip;");$entry$$.innerHTML=
$label$$+" ("+$templateList$$.length+")";$list$$.appendChild($entry$$);(function($cat2$$,$label2$$,$entry2$$){mxEvent.addListener($entry$$,"click",function(){$currentEntry$$!=$entry2$$&&(null!=$currentEntry$$?($currentEntry$$.style.fontWeight="normal",$currentEntry$$.style.textDecoration="none"):($newDiagramCat$$.style.display="none",$diagramsList$$.style.minHeight="100%"),$currentEntry$$=$entry2$$,$currentEntry$$.style.fontWeight="bold",$currentEntry$$.style.textDecoration="underline",$tempDlgContent$$.scrollTop=
0,$callInitiated$$&&($cancelPendingCall$$=!0),$diagramsListTitle$$.innerHTML=$label2$$,$diagramsListBtns$$.style.display="none",$fillDiagramsList$$($categories$$[$cat2$$],!0))})})($cat$$,$label$$,$entry$$)}}function $getRecentDocs$$($getAll$$){$recentDocsCallback$$&&($tempDlgContent$$.scrollTop=0,$diagramsTiles$$.innerHTML="",$spinner$$.spin($diagramsTiles$$),$cancelPendingCall$$=!1,$callInitiated$$=!0,$diagramsListTitle$$.innerHTML=mxUtils.htmlEntities(mxResources.get("recentDiag",null,"Recent Diagrams")),
$lastSearchStr$$=null,$recentDocsCallback$$($extDiagramsCallback$$,$getAll$$?null:$username$$))}function $doSearch$$($searchStr$$){$deselectTempCat$$();$tempDlgContent$$.scrollTop=0;$diagramsTiles$$.innerHTML="";$spinner$$.spin($diagramsTiles$$);$cancelPendingCall$$=!1;$callInitiated$$=!0;$delayTimer$$=null;$diagramsListTitle$$.innerHTML=mxUtils.htmlEntities(mxResources.get("searchResults",null,"Search Results"))+' "'+mxUtils.htmlEntities($searchStr$$)+'"';$searchDocsCallback$$($searchStr$$,$extDiagramsCallback$$,
$isGetAll$$?null:$username$$);$lastSearchStr$$=$searchStr$$}$templateFile$$=null!=$templateFile$$?$templateFile$$:TEMPLATE_PATH+"/index.xml";$newDiagramCatsFile$$=null!=$newDiagramCatsFile$$?$newDiagramCatsFile$$:NEW_DIAGRAM_CATS_PATH+"/index.xml";var $dlgDiv$$=this.container,$callInitiated$$=!1,$cancelPendingCall$$=!1,$currentEntry$$=null,$currentItem$$=null,$currentItemInfo$$=null,$showingAll$$=!1,$isGetAll$$=!0,$showAsList$$=!1,$curDiagList$$=[],$lastSearchStr$$,$showAllBtn$$=$dlgDiv$$.querySelector(".geTempDlgShowAllBtn"),
$diagramsTiles$$=$dlgDiv$$.querySelector(".geTempDlgDiagramsTiles"),$diagramsListTitle$$=$dlgDiv$$.querySelector(".geTempDlgDiagramsListTitle"),$diagramsListBtns$$=$dlgDiv$$.querySelector(".geTempDlgDiagramsListBtns"),$tempDlgContent$$=$dlgDiv$$.querySelector(".geTempDlgContent"),$diagramsList$$=$dlgDiv$$.querySelector(".geTempDlgDiagramsList"),$newDiagramCat$$=$dlgDiv$$.querySelector(".geTempDlgNewDiagramCat"),$newDiagramCatList$$=$dlgDiv$$.querySelector(".geTempDlgNewDiagramCatList"),$createBtn$$=
$dlgDiv$$.querySelector(".geTempDlgCreateBtn"),$spinner$$=new Spinner({lines:12,length:10,width:5,radius:10,rotate:0,color:"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,top:"50px",zIndex:2E9});mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgNewDiagramlbl"),"click",function(){$deselectTempCat$$();$newDiagramCat$$.style.display="";$diagramsList$$.style.minHeight="calc(100% - 280px)";$getRecentDocs$$($isGetAll$$)});mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgRadioBtn[data-id=allDiagramsBtn]"),
"click",function(){$radioClick$$(this,"geTempDlgAllDiagramsBtnImg","all-diagrams","myDiagramsBtn","geTempDlgMyDiagramsBtnImg","my-diagrams",!0)&&($isGetAll$$=!0,null==$lastSearchStr$$?$getRecentDocs$$($isGetAll$$):$doSearch$$($lastSearchStr$$))});mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgRadioBtn[data-id=myDiagramsBtn]"),"click",function(){$radioClick$$(this,"geTempDlgMyDiagramsBtnImg","my-diagrams","allDiagramsBtn","geTempDlgAllDiagramsBtnImg","all-diagrams",!0)&&($isGetAll$$=!1,null==
$lastSearchStr$$?$getRecentDocs$$($isGetAll$$):$doSearch$$($lastSearchStr$$))});mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgRadioBtn[data-id=listBtn]"),"click",function(){$radioClick$$(this,"geTempDlgListBtnImg","list","tilesBtn","geTempDlgTilesBtnImg","tiles",!1)&&($showAsList$$=!0,$fillDiagramsList$$($curDiagList$$,!1,$showAsList$$))});mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgRadioBtn[data-id=tilesBtn]"),"click",function(){$radioClick$$(this,"geTempDlgTilesBtnImg","tiles",
"listBtn","geTempDlgListBtnImg","list",!1)&&($showAsList$$=!1,$fillDiagramsList$$($curDiagList$$,!1,$showAsList$$))});mxEvent.addListener($showAllBtn$$,"click",function(){$showingAll$$?($newDiagramCat$$.style.height="280px",$newDiagramCatList$$.style.height="190px",$showAllBtn$$.innerHTML=mxUtils.htmlEntities(mxResources.get("showAll",null,"+ Show all")),$fillNewDiagramCats$$($newDiagramCats$$)):($newDiagramCat$$.style.height="440px",$newDiagramCatList$$.style.height="355px",$showAllBtn$$.innerHTML=
mxUtils.htmlEntities(mxResources.get("showLess",null,"- Show less")),$fillNewDiagramCats$$($newDiagramCats$$,!0));$showingAll$$=!$showingAll$$});var $indexLoaded$$=!1,$indexLoaded2$$=!1,$categories$jscomp$0$$={},$newDiagramCats$$=[],$categoryCount$$=1;mxUtils.get($templateFile$$,function($node$jscomp$5_req$$){if(!$indexLoaded$$){$indexLoaded$$=!0;for($node$jscomp$5_req$$=$node$jscomp$5_req$$.getXml().documentElement.firstChild;null!=$node$jscomp$5_req$$;){if("undefined"!==typeof $node$jscomp$5_req$$.getAttribute){var $category$jscomp$1_url$$=
$node$jscomp$5_req$$.getAttribute("url");if(null!=$category$jscomp$1_url$$){var $list$$=$category$jscomp$1_url$$.indexOf("/"),$category$jscomp$1_url$$=$category$jscomp$1_url$$.substring(0,$list$$),$list$$=$categories$jscomp$0$$[$category$jscomp$1_url$$];null==$list$$&&($categoryCount$$++,$list$$=[],$categories$jscomp$0$$[$category$jscomp$1_url$$]=$list$$);$list$$.push({url:$node$jscomp$5_req$$.getAttribute("url"),libs:$node$jscomp$5_req$$.getAttribute("libs"),title:$node$jscomp$5_req$$.getAttribute("title"),
tooltip:$node$jscomp$5_req$$.getAttribute("url"),imgUrl:$node$jscomp$5_req$$.getAttribute("imgUrl")})}}$node$jscomp$5_req$$=$node$jscomp$5_req$$.nextSibling}$fillTemplatesList$$($categories$jscomp$0$$)}});mxUtils.get($newDiagramCatsFile$$,function($node$jscomp$6_req$$){if(!$indexLoaded2$$){$indexLoaded2$$=!0;for($node$jscomp$6_req$$=$node$jscomp$6_req$$.getXml().documentElement.firstChild;null!=$node$jscomp$6_req$$;)"undefined"!==typeof $node$jscomp$6_req$$.getAttribute&&null!=$node$jscomp$6_req$$.getAttribute("title")&&
$newDiagramCats$$.push({img:$node$jscomp$6_req$$.getAttribute("img"),libs:$node$jscomp$6_req$$.getAttribute("libs"),title:$node$jscomp$6_req$$.getAttribute("title")}),$node$jscomp$6_req$$=$node$jscomp$6_req$$.nextSibling;$fillNewDiagramCats$$($newDiagramCats$$)}});var $extDiagramsCallback$$=function $$extDiagramsCallback$$$($list$$,$errorMsg$$){$diagramsListBtns$$.style.display="";$spinner$$.stop();$callInitiated$$=!1;$cancelPendingCall$$?$cancelPendingCall$$=!1:$errorMsg$$?$diagramsTiles$$.innerHTML=
$errorMsg$$:0==$list$$.length?$diagramsTiles$$.innerHTML=mxUtils.htmlEntities(mxResources.get("noDiagrams",null,"No Diagrams Found")):$fillDiagramsList$$($list$$,!1,$showAsList$$)};$getRecentDocs$$($isGetAll$$);var $delayTimer$$=null;$searchDocsCallback$$&&mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgSearchBox"),"keyup",function($evt$$){var $searchInout$$=this;null!=$delayTimer$$&&clearTimeout($delayTimer$$);13==$evt$$.keyCode?$doSearch$$($searchInout$$.value):$delayTimer$$=setTimeout(function(){$doSearch$$($searchInout$$.value)},
500)});mxEvent.addListener($createBtn$$,"click",$handleDialogOK$$);mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgLinkToDiagramBtn"),"click",function($evt$$){$handleDialogOK$$(!0)});mxEvent.addListener($dlgDiv$$.querySelector(".geTempDlgCancelBtn"),"click",function(){null!=$cancelCallback$$&&$cancelCallback$$();$editorUi$$.hideDialog(!0)})};
var BtnDialog=function $BtnDialog$($editorUi$jscomp$26_p$$,$peer$$,$btnLbl_button$$,$fn$$){var $div$$=document.createElement("div");$div$$.style.textAlign="center";var $hd$$=document.createElement("p");$hd$$.style.fontSize="16pt";$hd$$.style.padding="0px";$hd$$.style.margin="0px";$hd$$.style.color="gray";mxUtils.write($hd$$,mxResources.get("done"));var $service$$="Unknown",$img$$=document.createElement("img");$img$$.setAttribute("border","0");$img$$.setAttribute("align","absmiddle");$img$$.style.marginRight=
"10px";$peer$$==$editorUi$jscomp$26_p$$.drive?($service$$=mxResources.get("googleDrive"),$img$$.src=IMAGE_PATH+"/google-drive-logo-white.svg"):$peer$$==$editorUi$jscomp$26_p$$.dropbox?($service$$=mxResources.get("dropbox"),$img$$.src=IMAGE_PATH+"/dropbox-logo-white.svg"):$peer$$==$editorUi$jscomp$26_p$$.oneDrive?($service$$=mxResources.get("oneDrive"),$img$$.src=IMAGE_PATH+"/onedrive-logo-white.svg"):$peer$$==$editorUi$jscomp$26_p$$.gitHub?($service$$=mxResources.get("github"),$img$$.src=IMAGE_PATH+
"/github-logo-white.svg"):$peer$$==$editorUi$jscomp$26_p$$.trello&&($service$$=mxResources.get("trello"),$img$$.src=IMAGE_PATH+"/trello-logo-white.svg");$editorUi$jscomp$26_p$$=document.createElement("p");mxUtils.write($editorUi$jscomp$26_p$$,mxResources.get("authorizedIn",[$service$$],"You are now authorized in {1}"));$btnLbl_button$$=mxUtils.button($btnLbl_button$$,$fn$$);$btnLbl_button$$.insertBefore($img$$,$btnLbl_button$$.firstChild);$btnLbl_button$$.style.marginTop="6px";$btnLbl_button$$.className=
"geBigButton";$div$$.appendChild($hd$$);$div$$.appendChild($editorUi$jscomp$26_p$$);$div$$.appendChild($btnLbl_button$$);this.container=$div$$};(function(){Editor.prototype.appName="cset";Editor.prototype.fileExtensions=[{ext:"html",title:"filetypeHtml"},{ext:"png",title:"filetypePng"},{ext:"svg",title:"filetypeSvg"}];Editor.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAApVBMVEUAAAD////k5OT///8AAAB1dXXMzMz9/f39/f37+/v5+fn+/v7///9iYmJaWlqFhYWnp6ejo6OHh4f////////////////7+/v5+fnx8fH///8AAAD///8bGxv7+/v5+fkoKCghISFDQ0MYGBjh4eHY2Njb29tQUFBvb29HR0c/Pz82NjYrKyu/v78SEhLu7u7s7OzV1dVVVVU7OzsVFRXAv78QEBBzqehMAAAAG3RSTlMAA/7p/vz5xZlrTiPL/v78+/v7+OXd2TYQDs8L70ZbAAABKUlEQVQoz3VS13LCMBBUXHChd8iukDslQChJ/v/TchaG4cXS+OSb1c7trU7V60OpdRz2ZtNZL4zXNlcN8BEtSG6+NxIXkeRPoBuQ1cjvZ31/VJFB10ISli6diYfH8iYO3WUNCcNlB0gTrXOtkxTo0O1aKKiBBMhhv2MNBQKoiA5wxlZo0JDzD3AYKbWacyj3fs01wxey0pyEP+R8pWKWXoqtIZ0DDg5pbki9krEKOa6LVDQsdoXEsi46Zqh69KFz7B1u7Hb2yDV8firXDKBlZ4UFiswKGRhXTS93/ECK7yxnJ3+S3y/ThpO+cfSD017nqa18aasabU0/t7d+tk0/1oMEJ1NaD67iwdF68OabFSLn+eHb0+vjy+uk8br9fdrftH0O2menfd7+AQfYM/lNjoDHAAAAAElFTkSuQmCC":
IMAGE_PATH+"/delete.png";Editor.plusImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDdCMTdENjVCOEM4MTFFNDlCRjVBNDdCODU5NjNBNUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDdCMTdENjZCOEM4MTFFNDlCRjVBNDdCODU5NjNBNUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowN0IxN0Q2M0I4QzgxMUU0OUJGNUE0N0I4NTk2M0E1QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowN0IxN0Q2NEI4QzgxMUU0OUJGNUE0N0I4NTk2M0E1QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtjrjmgAAAAtSURBVHjaYvz//z8DMigvLwcLdHZ2MiKLMzEQCaivkLGsrOw/dU0cAr4GCDAARQsQbTFrv10AAAAASUVORK5CYII=":
IMAGE_PATH+"/plus.png";Editor.spinImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDAAMAPUxAEVriVp7lmCAmmGBm2OCnGmHn3OPpneSqYKbr4OcsIScsI2kto6kt46lt5KnuZmtvpquvpuvv56ywaCzwqK1xKu7yay9yq+/zLHAzbfF0bjG0bzJ1LzK1MDN18jT28nT3M3X3tHa4dTc49Xd5Njf5dng5t3k6d/l6uDm6uru8e7x8/Dz9fT29/b4+Pj5+fj5+vr6+v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkKADEAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAADAAMAAAGR8CYcEgsOgYAIax4CCQuQldrCBEsiK8VS2hoFGOrlJDA+cZQwkLnqyoJFZKviSS0ICrE0ec0jDAwIiUeGyBFGhMPFBkhZo1BACH5BAkKAC4ALAAAAAAMAAwAhVB0kFR3k1V4k2CAmmWEnW6Lo3KOpXeSqH2XrIOcsISdsImhtIqhtJCmuJGnuZuwv52wwJ+ywZ+ywqm6yLHBzbLCzrXEz7fF0LnH0rrI0r7L1b/M1sXR2cfT28rV3czW3s/Z4Nfe5Nvi6ODm6uLn6+Ln7OLo7OXq7efs7+zw8u/y9PDy9PX3+Pr7+////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZDQJdwSCxGDAIAoVFkFBwYSyIwGE4OkCJxIdG6WkJEx8sSKj7elfBB0a5SQg1EQ0SVVMPKhDM6iUIkRR4ZFxsgJl6JQQAh+QQJCgAxACwAAAAADAAMAIVGa4lcfZdjgpxkg51nhp5ui6N3kqh5lKqFnbGHn7KIoLOQp7iRp7mSqLmTqbqarr6br7+fssGitcOitcSuvsuuv8uwwMyzw861xNC5x9K6x9K/zNbDztjE0NnG0drJ1NzQ2eDS2+LT2+LV3ePZ4Oba4ebb4ufc4+jm6+7t8PLt8PPt8fPx8/Xx9PX09vf19/j3+Pn///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQ8CYcEgsUhQFggFSjCQmnE1jcBhqGBXiIuAQSi7FGEIgfIzCFoCXFCZiPO0hKBMiwl7ET6eUYqlWLkUnISImKC1xbUEAIfkECQoAMgAsAAAAAAwADACFTnKPT3KPVHaTYoKcb4yjcY6leZSpf5mtgZuvh5+yiqG0i6K1jqW3kae5nrHBnrLBn7LCoLPCobTDqbrIqrvIs8LOtMPPtcPPtcTPuMbRucfSvcrUvsvVwMzWxdHaydTcytXdzNbezdff0drh2ODl2+Ln3eTp4Obq4ujs5Ont5uvu6O3w6u7w6u7x7/L09vj5+vr7+vv7////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkdAmXBILHIcicOCUqxELKKPxKAYgiYd4oMAEWo8RVmjIMScwhmBcJMKXwLCECmMGAhPI1QRwBiaSixCMDFhLSorLi8wYYxCQQAh+QQJCgAxACwAAAAADAAMAIVZepVggJphgZtnhp5vjKN2kah3kqmBmq+KobSLorWNpLaRp7mWq7ybr7+gs8KitcSktsWnuManucexwM2ywc63xtG6yNO9ytS+ytW/zNbDz9jH0tvL1d3N197S2+LU3OPU3ePV3eTX3+Xa4efb4ufd5Onl6u7r7vHs7/Lt8PLw8/Xy9Pby9fb09ff2+Pn3+Pn6+vr///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGSMCYcEgseiwSR+RS7GA4JFGF8RiWNiEiJTERgkjFGAQh/KTCGoJwpApnBkITKrwoCFWnFlEhaAxXLC9CBwAGRS4wQgELYY1CQQAh+QQJCgAzACwAAAAADAAMAIVMcI5SdZFhgZtti6JwjaR4k6mAma6Cm6+KobSLorWLo7WNo7aPpredsMCescGitMOitcSmuMaqu8ixwc2zws63xdC4xtG5x9K9ytXAzdfCztjF0NnF0drK1d3M1t7P2N/P2eDT2+LX3+Xe5Onh5+vi5+vj6Ozk6e3n7O/o7O/q7vHs7/Lt8PPu8fPx8/X3+Pn6+vv7+/v8/Pz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRcCZcEgsmkIbTOZTLIlGqZNnchm2SCgiJ6IRqljFmQUiXIVnoITQde4chC9Y+LEQxmTFRkFSNFAqDAMIRQoCAAEEDmeLQQAh+QQJCgAwACwAAAAADAAMAIVXeZRefplff5lhgZtph59yjqV2kaeAmq6FnbGFnrGLorWNpLaQp7mRqLmYrb2essGgs8Klt8apusitvcquv8u2xNC7yNO8ydS8ytTAzdfBzdfM1t7N197Q2eDU3OPX3+XZ4ObZ4ebc4+jf5erg5erg5uvp7fDu8fPv8vTz9fb09vf19/j3+Pn4+fn5+vr6+/v///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRUCYcEgspkwjEKhUVJ1QsBNp0xm2VixiSOMRvlxFGAcTJook5eEHIhQcwpWIkAFQECkNy9AQWFwyEAkPRQ4FAwQIE2llQQAh+QQJCgAvACwAAAAADAAMAIVNcY5SdZFigptph6BvjKN0kKd8lquAmq+EnbGGn7KHn7ONpLaOpbearr+csMCdscCescGhtMOnuMauvsuzws60w862xdC9ytW/y9a/zNbCztjG0drH0tvK1N3M1t7N19/U3ePb4uff5urj6Ozk6e3l6u7m6u7o7PDq7vDt8PPv8vTw8vTw8/X19vf6+vv///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQ8CXcEgsvlytVUplJLJIpSEDUESFTELBwSgCCQEV42kjDFiMo4uQsDB2MkLHoEHUTD7DRAHC8VAiZ0QSCgYIDxhNiUEAOw==":
IMAGE_PATH+"/spin.gif";Editor.globeImage='data:images/svg+xml;utf8,<svg xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" style="enable-background:new 0 0 500 500;" version="1.1" viewBox="0 0 500 500" width="50" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path class="fill-white" d="M384.4,166.7c0-14.3-0.1-30.7-0.6-38.9C379.4,58.8,317,6.2,246.3,6.4v0c-0.1,0-0.2,0-0.3,0\tc-0.1,0-0.1,0-0.3,0h0C175,7.5,113.6,61.2,110.4,130.2c-0.4,9.7-0.3,25.2-0.1,36.4h-0.2v27.2h62.4v-14.1c0,0-0.5-33.8,1-50.1\tc3.3-34.8,36.7-60.2,73-60.9c36.3,0,70.2,24.9,74.1,59.6c1.8,16.3,0.5,65.5,0.5,65.5h0.9h62.3V166.7L384.4,166.7z"></path><path class="fill-primary" d="M331.7,183.5c0.3-15.6,0.6-44.2-0.8-56.3c-4.3-38.5-41.3-68.8-84.4-68.8,c-43.2,0.8-79.7,31.7-83.3,70.3c-1.5,16.7-1.1,49.8-1.1,51.2v3.6h-41.7v-14.9c0.2-0.7,0.2-1.4,0.2-2.2c-0.2-11.2-0.4-26.4,0.1-35.8,c2.9-61.8,59-113,125.1-114c0.1,0,0.6,0,0.7,0c66,0,122.9,50.1,126.9,111.8c0.4,6.3,0.6,18.8,0.6,38.2v16.9H331.7z"></path><path class="fill-white" d="M404.6,207.6H90c-19.4,0-35.1,15.7-35.1,35.1v215.8c0,19.4,15.7,35.1,35.1,35.1h314.6,c19.4,0,35.1-15.7,35.1-35.1V242.7C439.7,223.3,424,207.6,404.6,207.6z"></path><path class="fill-primary" d="M90,483.2c-13.6,0-24.7-11.1-24.7-24.7V242.7c0-13.6,11.1-24.7,24.7-24.7h314.6,c13.6,0,24.7,11.1,24.7,24.7v215.8c0,13.6-11.1,24.7-24.7,24.7H90z"></path><path class="fill-white" d="M393,302.9H146.2c-4.3,0-4.6,1-4.6,6v91.2c0,3.2,0.5,4.8,3.4,5.3c0.4,0.2-0.2,0,0.2,0h243.2,v37.2H132.8c-12,0-20-5.3-25.4-15.4c-2.5-4.6-3.1-10.1-3.1-15.9V295.8c0-12.3,4.3-21.3,14.4-26.3c4.3-2.3,8.6-3.7,14.1-3.7H393,V302.9z"></path></svg>';
Editor.commentImage='data:images/svg+xml;utf8,<svg xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" style="enable-background:new 0 0 500 500;" version="1.1" viewBox="0 0 500 500" width="50" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path class="fill-white" d="M384.4,166.7c0-14.3-0.1-30.7-0.6-38.9C379.4,58.8,317,6.2,246.3,6.4v0c-0.1,0-0.2,0-0.3,0\tc-0.1,0-0.1,0-0.3,0h0C175,7.5,113.6,61.2,110.4,130.2c-0.4,9.7-0.3,25.2-0.1,36.4h-0.2v27.2h62.4v-14.1c0,0-0.5-33.8,1-50.1\tc3.3-34.8,36.7-60.2,73-60.9c36.3,0,70.2,24.9,74.1,59.6c1.8,16.3,0.5,65.5,0.5,65.5h0.9h62.3V166.7L384.4,166.7z"></path><path class="fill-primary" d="M331.7,183.5c0.3-15.6,0.6-44.2-0.8-56.3c-4.3-38.5-41.3-68.8-84.4-68.8,c-43.2,0.8-79.7,31.7-83.3,70.3c-1.5,16.7-1.1,49.8-1.1,51.2v3.6h-41.7v-14.9c0.2-0.7,0.2-1.4,0.2-2.2c-0.2-11.2-0.4-26.4,0.1-35.8,c2.9-61.8,59-113,125.1-114c0.1,0,0.6,0,0.7,0c66,0,122.9,50.1,126.9,111.8c0.4,6.3,0.6,18.8,0.6,38.2v16.9H331.7z"></path><path class="fill-white" d="M404.6,207.6H90c-19.4,0-35.1,15.7-35.1,35.1v215.8c0,19.4,15.7,35.1,35.1,35.1h314.6,c19.4,0,35.1-15.7,35.1-35.1V242.7C439.7,223.3,424,207.6,404.6,207.6z"></path><path class="fill-primary" d="M90,483.2c-13.6,0-24.7-11.1-24.7-24.7V242.7c0-13.6,11.1-24.7,24.7-24.7h314.6,c13.6,0,24.7,11.1,24.7,24.7v215.8c0,13.6-11.1,24.7-24.7,24.7H90z"></path><path class="fill-white" d="M393,302.9H146.2c-4.3,0-4.6,1-4.6,6v91.2c0,3.2,0.5,4.8,3.4,5.3c0.4,0.2-0.2,0,0.2,0h243.2,v37.2H132.8c-12,0-20-5.3-25.4-15.4c-2.5-4.6-3.1-10.1-3.1-15.9V295.8c0-12.3,4.3-21.3,14.4-26.3c4.3-2.3,8.6-3.7,14.1-3.7H393,V302.9z"></path></svg>';
Editor.commentImageInverted="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABLElEQVRYR+2Wvy4FQRjFf4dINAq9XqtSaVRqXArPINEodUqlhxC5/pU6nYdQSHQeQTRHNtmVuXuXrIxv1k1sN5vMOb85c75kxMCfBvZnCsD2ErAGzAfAvUt6THUnAGwfAWfAQoB5I3kh6aBZfALYXgGeg80b31VJT9UiBRgB48CTp9Lbku7aAPvAZSGAHUm3swEgKWtUbbsj1f4JDA4AbGb24iErgUzzr7bvSrrpVcKgK5ghgKAO9E/gvwNBJRxJuu41BUEd+BFARA3+JsAWcB9x3A7NzgSqt+ALsFwAYhqgMrW9Ub8J14G5QJBugAhD2yfAaUt7T9LVxBhGmDeato/rZJtfZQHq600hygPUEIfAOTAMQALxWrQD7X7ZXpT0VqyE3xU868n9G5PzASPvpiHavBAUAAAAAElFTkSuQmCC";
Editor.userImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgMTJjMi4yMSAwIDQtMS43OSA0LTRzLTEuNzktNC00LTQtNCAxLjc5LTQgNCAxLjc5IDQgNCA0em0wIDJjLTIuNjcgMC04IDEuMzQtOCA0djJoMTZ2LTJjMC0yLjY2LTUuMzMtNC04LTR6Ii8+PC9zdmc+";Editor.shareImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTggMTYuMDhjLS43NiAwLTEuNDQuMy0xLjk2Ljc3TDguOTEgMTIuN2MuMDUtLjIzLjA5LS40Ni4wOS0uN3MtLjA0LS40Ny0uMDktLjdsNy4wNS00LjExYy41NC41IDEuMjUuODEgMi4wNC44MSAxLjY2IDAgMy0xLjM0IDMtM3MtMS4zNC0zLTMtMy0zIDEuMzQtMyAzYzAgLjI0LjA0LjQ3LjA5LjdMOC4wNCA5LjgxQzcuNSA5LjMxIDYuNzkgOSA2IDljLTEuNjYgMC0zIDEuMzQtMyAzczEuMzQgMyAzIDNjLjc5IDAgMS41LS4zMSAyLjA0LS44MWw3LjEyIDQuMTZjLS4wNS4yMS0uMDguNDMtLjA4LjY1IDAgMS42MSAxLjMxIDIuOTIgMi45MiAyLjkyIDEuNjEgMCAyLjkyLTEuMzEgMi45Mi0yLjkycy0xLjMxLTIuOTItMi45Mi0yLjkyeiIvPjwvc3ZnPg==";
Editor.syncImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgNFYxTDggNWw0IDRWNmMzLjMxIDAgNiAyLjY5IDYgNiAwIDEuMDEtLjI1IDEuOTctLjcgMi44bDEuNDYgMS40NkMxOS41NCAxNS4wMyAyMCAxMy41NyAyMCAxMmMwLTQuNDItMy41OC04LTgtOHptMCAxNGMtMy4zMSAwLTYtMi42OS02LTYgMC0xLjAxLjI1LTEuOTcuNy0yLjhMNS4yNCA3Ljc0QzQuNDYgOC45NyA0IDEwLjQzIDQgMTJjMCA0LjQyIDMuNTggOCA4IDh2M2w0LTQtNC00djN6Ii8+PC9zdmc+";Editor.syncDisabledImage=
"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTAgNi4zNVY0LjI2Yy0uOC4yMS0xLjU1LjU0LTIuMjMuOTZsMS40NiAxLjQ2Yy4yNS0uMTIuNS0uMjQuNzctLjMzem0tNy4xNC0uOTRsMi4zNiAyLjM2QzQuNDUgOC45OSA0IDEwLjQ0IDQgMTJjMCAyLjIxLjkxIDQuMiAyLjM2IDUuNjRMNCAyMGg2di02bC0yLjI0IDIuMjRDNi42OCAxNS4xNSA2IDEzLjY2IDYgMTJjMC0xIC4yNS0xLjk0LjY4LTIuNzdsOC4wOCA4LjA4Yy0uMjUuMTMtLjUuMjUtLjc3LjM0djIuMDljLjgtLjIxIDEuNTUtLjU0IDIuMjMtLjk2bDIuMzYgMi4zNiAxLjI3LTEuMjdMNC4xNCA0LjE0IDIuODYgNS40MXpNMjAgNGgtNnY2bDIuMjQtMi4yNEMxNy4zMiA4Ljg1IDE4IDEwLjM0IDE4IDEyYzAgMS0uMjUgMS45NC0uNjggMi43N2wxLjQ2IDEuNDZDMTkuNTUgMTUuMDEgMjAgMTMuNTYgMjAgMTJjMC0yLjIxLS45MS00LjItMi4zNi01LjY0TDIwIDR6Ii8+PC9zdmc+";
Editor.syncProblemImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyAxMmMwIDIuMjEuOTEgNC4yIDIuMzYgNS42NEwzIDIwaDZ2LTZsLTIuMjQgMi4yNEM1LjY4IDE1LjE1IDUgMTMuNjYgNSAxMmMwLTIuNjEgMS42Ny00LjgzIDQtNS42NVY0LjI2QzUuNTUgNS4xNSAzIDguMjcgMyAxMnptOCA1aDJ2LTJoLTJ2MnpNMjEgNGgtNnY2bDIuMjQtMi4yNEMxOC4zMiA4Ljg1IDE5IDEwLjM0IDE5IDEyYzAgMi42MS0xLjY3IDQuODMtNCA1LjY1djIuMDljMy40NS0uODkgNi00LjAxIDYtNy43NCAwLTIuMjEtLjkxLTQuMi0yLjM2LTUuNjRMMjEgNHptLTEwIDloMlY3aC0ydjZ6Ii8+PC9zdmc+";
Editor.tweetImage=IMAGE_PATH+"/tweet.png";Editor.facebookImage=IMAGE_PATH+"/facebook.png";Editor.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==";Editor.hiResImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA+CAMAAACLMWy1AAAAh1BMVEUAAABMTExERERBQUFBQUFFRUVAQEBCQkJAQEA6OjpDQ0NKSkpBQUFBQUFERERERERBQUFCQkJCQkJCQkJJSUlBQUFCQkJDQ0NDQ0NCQkJDQ0NBQUFBQUFCQkJBQUFCQkJCQkJDQ0NCQkJHR0dBQUFCQkJCQkJAQEBCQkJDQ0NAQEBERERCQkIk1hS2AAAAKnRSTlMAAjj96BL7PgQFRwfu3TYazKuVjRXl1V1DPCn1uLGjnWNVIgy9hU40eGqPkM38AAACG0lEQVRYw+2X63KbMBCFzwZblgGDceN74muatpLe//m6MHV3gHGFAv2RjM94MAbxzdnVsQbBDKwH8AH8MDAyafzjqYeyOG04XE7RS8nIRDXg6BlT+rA0nmtAPh+NQRDxIASIMG44rAMrGunBgHwy3uUldxggIStGKp2f+DQc2O4h4eQsX3O2IFB/oEbsjOKbStnjAEA+zJ0ylZTbgvoDn8xNyn6Dbj5Kd4GsNpABa6duQPfSdEj88TgMAhKuCWjAkgmFXPLnsD0pWd3OFGdrMugQII/eOMPEiGOzqPMIeWrcSoMCg71W1pXBPvCP+gS/OdXqQ3uW23+93XGWLl/OaBb805bNcBPoEIcVJsnHzcxpZH86u5KZ9gDby5dQCcnKqdbke4ItI4Tzd7IW9hZQt4EO6GG9b9sYuuK9Wwn8TIr2xKbF2+3Nhr+qxChJ/AI6pIfCu4z4Zowp4ZUNihz79vewzctnHDwTvQO/hCdFBzrUGDOPn2Y/F8YKT4oOATLvlhOznzmBSdFBJWtc58y7r+UVFOCQczy3wpN6pegDqHtsCPTGvH9JuTO0Dyg8icldYPk+RB6g8Aofj4m2EKBvtTmUPD9xDd1pPcSReV2U5iD/ik2yrngtvvqBfPzOvKiDTKTsCdoHZJ7pLLffgTwlJ5vJdtJV2/jiAYaLvLGhMAEDO5QcDg2M/jOw/8Zn+K3ZwJvHT7ZffgC/NvA3zcybTeIfE4EAAAAASUVORK5CYII=":
IMAGE_PATH+"/img-hi-res.png";Editor.loResImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA+CAMAAACLMWy1AAAAS1BMVEVAQEAAAAA1NTVBQUFDQ0NDQ0NFRUVERERBQUFBQUFBQUFAQEBBQUFBQUFCQkJCQkJCQkJBQUFCQkJDQ0NDQ0NCQkJCQkJCQkJGRkb5/XqTAAAAGXRSTlP+AAWODlASCsesX+Lc2LyWe3pwa1tCPjohjSJfoAAAAI1JREFUWMPt1MkKhTAMRuG0anvneXr/J71nUypKcdqI/N8yhLMKMZE1CahnClDQzMPB44ED3EgeCubgDWnWQMHpwTtKwTe+UHD4sJ94wbUEHHFGhILlYDeSnsQeabeCgsPBgB0MOZZ9oGA5GJFiJSfUULAfjLjARrhCwX7wh2YCDwVbwZkUBKqFFJRN+wOcwSgR2sREcgAAAABJRU5ErkJggg==":
IMAGE_PATH+"/img-lo-res.png";Editor.cameraLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAA/BJREFUWAnFl0uIjWEYx885buPSuGwmSYwtwsY1ikKSNYNclmQnadgrZSPlsnBLSlaGBdNYKY0Vdi4L4zYzIqxGxmXG//d+7//0+uY7nWMiT/2/53mf+3v7vnNKpf9M5UbrDw8Pj4m+wzmeT1FBUS6Xf+YNox6reMONukijMXUTM3NmI75PyXcJPwRWg5kS7xysDLNmfEUxpx2rceNE50IlYjyRklcLf0prY+x4BTqfmx3ZUHQaO9ISGngYq38V/1EH+ECPa+QaK1u1kVBQirDMChiS3CTeIkwWvghtwhKBpZ8g1CO2B99FynVU/KowSRgQ3mlrBsVZ1awmQlS0SGbfXglfBPbdRGMm5O8RXg2P835pDCvzWjghTHETcLpZLHwS8kTCtBEK1SN83Egam8YxyVZqc+Do5qkwS+gT9grNwkUBG6cbsG/gs3BTuC/0ChCxq4QtwgzBMdwUZBPyN4Ftfi4sYPZHktbOSRlIuutRP5jYj0ueZp88xyYcS/zZoiLyQT1IA/cTj7eSlwnrhI+JnkQbCwo2Sx/2M7VJt17wdhVtgxvrpoFnAuSAbJQ97biZAlKxBfD9wgOhV+BgIR/AZtJ4kwD5PGSj7OmmekjWEy0oAQHAS3+KpBpzXqYK3UItopHpSRMno2N+cm7gDYnfRCcr3QBqriMHLJDkeyhFfiG5aVbK+8rhtP9M6QcIEJHX5Fp9NMAyQlYiu+OOJNlODCIXyka/P23bncTdiC7OydC1+v1Bsb+5r84DK8S3Rdmf5cRUFW3bXtWUSt1Rdk6G4SyJV2o1YId+vNUxr+x5yCJiapFtcxQzLjrxboGcMxvFJwEOKnLwjIbkx/sdSmeSaUY++SwTAxV+4DJT7RVwkbk46gNCsifIItuy0e9PF33Cb4homhN5YRyzL5q5V2VNkv98kqgoGTo3YF9CnMM5Y5rItFfvBSi9JulVXOgI+VwIntkt+SaZ6weQfcovJf7zpTfl86P/wAF7Fz18NeKwmvAWCaX0Z/uMHQr42ZxvR/Rxcw5xM+9J/CJq8w2gduDhmDgso/QrBH47dEXQ1IqczyHpIOfIRtnTtV7SwO1oKXKkU3fbToFGSDHtMWcaH1WBuVYnDbRFi99iqSMySdzxXckrazUh23KBVYGIcfNBkTxca0e4ATJ0KukGYVBgr/MnlhPOtQq/ksUfCbzh+EFCjtnCUoHfjhA/OsiTv2HcEvJMELp0VakZDliTmriTdPivxU4VmEhtPrGV+KJhO7ZKt0doFZh1fgZSBWIW2AGEHwg3BUWOnKtH+suqdw07tYMfglCrWPD5mw9qVYuniaXkT0OtWaSuo5LJTY1RBf+roF9X5+y/5qU+DAAAAABJRU5ErkJggg==";
Editor.defaultCustomLibraries=[];Editor.enableCustomLibraries=!0;Editor.enableCustomProperties=!0;Editor.commonEdgeProperties=[{type:"separator"},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"targetPortConstraint",dispName:"Target Port Constraint",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"None"},{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"sourcePortConstraint",
dispName:"Source Port Constraint",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"None"},{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"fillOpacity",dispName:"Fill Opacity",type:"int",min:0,max:100,defVal:100},{name:"strokeOpacity",dispName:"Stroke Opacity",type:"int",min:0,max:100,defVal:100},{name:"startFill",dispName:"Start Fill",type:"bool",defVal:!0},{name:"endFill",dispName:"End Fill",type:"bool",defVal:!0},
{name:"sourcePerimeterSpacing",dispName:"Source Perimeter Spacing",type:"float",defVal:0},{name:"targetPerimeterSpacing",dispName:"Target Perimeter Spacing",type:"float",defVal:0},{name:"perimeterSpacing",dispName:"Perimeter Spacing",type:"float",defVal:0},{name:"anchorPointDirection",dispName:"Anchor Point Direction",type:"bool",defVal:!0},{name:"snapToPoint",dispName:"Snap to Point",type:"bool",defVal:!1},{name:"fixDash",dispName:"Fixed Dash",type:"bool",defVal:!1},{name:"jiggle",dispName:"Jiggle",
type:"float",min:0,defVal:1.5,isVisible:function($state$$){return"1"==mxUtils.getValue($state$$.style,"comic","0")}},{name:"editable",dispName:"Editable",type:"bool",defVal:!0},{name:"backgroundOutline",dispName:"Background Outline",type:"bool",defVal:!1},{name:"bendable",dispName:"Bendable",type:"bool",defVal:!0},{name:"movable",dispName:"Movable",type:"bool",defVal:!0},{name:"cloneable",dispName:"Cloneable",type:"bool",defVal:!0},{name:"deletable",dispName:"Deletable",type:"bool",defVal:!0},{name:"orthogonalLoop",
dispName:"Loop Routing",type:"bool",defVal:!1},{name:"noJump",dispName:"No Jumps",type:"bool",defVal:!1}];Editor.commonVertexProperties=[{type:"separator"},{name:"fillOpacity",dispName:"Fill Opacity",type:"int",min:0,max:100,defVal:100},{name:"strokeOpacity",dispName:"Stroke Opacity",type:"int",min:0,max:100,defVal:100},{name:"overflow",dispName:"Text Overflow",defVal:"visible",type:"enum",enumList:[{val:"visible",dispName:"Visible"},{val:"hidden",dispName:"Hidden"},{val:"fill",dispName:"Fill"},{val:"width",
dispName:"Width"}]},{name:"noLabel",dispName:"Hide Label",type:"bool",defVal:!1},{name:"labelPadding",dispName:"Label Padding",type:"float",defVal:0},{name:"direction",dispName:"Direction",type:"enum",defVal:"east",enumList:[{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"portConstraint",dispName:"Port Constraint",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"None"},{val:"east",dispName:"East"},{val:"north",
dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"portConstraintRotation",dispName:"Port Const. Rot.",type:"bool",defVal:!1},{name:"connectable",dispName:"Connectable",type:"bool",defVal:!0},{name:"snapToPoint",dispName:"Snap to Point",type:"bool",defVal:!1},{name:"perimeter",dispName:"Perimeter",defVal:"none",type:"enum",enumList:[{val:"none",dispName:"None"},{val:"rectanglePerimeter",dispName:"Rectangle"},{val:"ellipsePerimeter",dispName:"Ellipse"},{val:"rhombusPerimeter",
dispName:"Rhombus"},{val:"trianglePerimeter",dispName:"Triangle"},{val:"hexagonPerimeter2",dispName:"Hexagon"},{val:"lifelinePerimeter",dispName:"Lifeline"},{val:"orthogonalPerimeter",dispName:"Orthogonal"},{val:"backbonePerimeter",dispName:"Backbone"},{val:"calloutPerimeter",dispName:"Callout"},{val:"parallelogramPerimeter",dispName:"Parallelogram"},{val:"trapezoidPerimeter",dispName:"Trapezoid"},{val:"stepPerimeter",dispName:"Step"}]},{name:"fixDash",dispName:"Fixed Dash",type:"bool",defVal:!1},
{name:"jiggle",dispName:"Jiggle",type:"float",min:0,defVal:1.5,isVisible:function($state$$){return"1"==mxUtils.getValue($state$$.style,"comic","0")}},{name:"autosize",dispName:"Autosize",type:"bool",defVal:!1},{name:"collapsible",dispName:"Collapsible",type:"bool",defVal:!1},{name:"container",dispName:"Container",type:"bool",defVal:!1},{name:"recursiveResize",dispName:"Resize Children",type:"bool",defVal:!0},{name:"part",dispName:"Part",type:"bool",defVal:!1},{name:"editable",dispName:"Editable",
type:"bool",defVal:!0},{name:"backgroundOutline",dispName:"Background Outline",type:"bool",defVal:!1},{name:"movable",dispName:"Movable",type:"bool",defVal:!0},{name:"resizable",dispName:"Resizable",type:"bool",defVal:!0},{name:"resizeWidth",dispName:"Resize Width",type:"bool",defVal:!1},{name:"resizeHeight",dispName:"Resize Height",type:"bool",defVal:!1},{name:"rotatable",dispName:"Rotatable",type:"bool",defVal:!0},{name:"cloneable",dispName:"Cloneable",type:"bool",defVal:!0},{name:"deletable",dispName:"Deletable",
type:"bool",defVal:!0}];Editor.defaultCsvValue='##\n## Example CSV import. Use ## for comments and # for configuration. Paste CSV below.\n## The following names are reserved and should not be used (or ignored):\n## id, tooltip, placeholder(s), link and label (see below)\n##\n#\n## Node label with placeholders and HTML.\n## Default is \'%name_of_first_column%\'.\n#\n# label: %name%<br><i style="color:gray;">%position%</i><br><a href="mailto:%email%">Email</a>\n#\n## Node style (placeholders are replaced once).\n## Default is the current style for nodes.\n#\n# style: label;image=%image%;whiteSpace=wrap;html=1;rounded=1;fillColor=%fill%;strokeColor=%stroke%;\n#\n## Parent style for nodes with child nodes (placeholders are replaced once).\n#\n# parentstyle: swimlane;whiteSpace=wrap;html=1;childLayout=stackLayout;horizontal=1;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;\n#\n## Uses the given column name as the identity for cells (updates existing cells).\n## Default is no identity (empty value or -).\n#\n# identity: -\n#\n## Uses the given column name as the parent reference for cells. Default is no parent (empty or -).\n## The identity above is used for resolving the reference so it must be specified.\n#\n# parent: -\n#\n## Adds a prefix to the identity of cells to make sure they do not collide with existing cells (whose\n## IDs are numbers from 0..n, sometimes with a GUID prefix in the context of realtime collaboration).\n## Default is csvimport-.\n#\n# namespace: csvimport-\n#\n## Connections between rows ("from": source colum, "to": target column).\n## Label, style and invert are optional. Defaults are \'\', current style and false.\n## In addition to label, an optional fromlabel and tolabel can be used to name the column\n## that contains the text for the label in the edges source or target (invert ignored).\n## The label is concatenated in the form fromlabel + label + tolabel if all are defined.\n## The target column may contain a comma-separated list of values.\n## Multiple connect entries are allowed.\n#\n# connect: {"from": "manager", "to": "name", "invert": true, "label": "manages", \\\n#          "style": "curved=1;endArrow=blockThin;endFill=1;fontSize=11;"}\n# connect: {"from": "refs", "to": "id", "style": "curved=1;fontSize=11;"}\n#\n## Node x-coordinate. Possible value is a column name. Default is empty. Layouts will\n## override this value.\n#\n# left: \n#\n## Node y-coordinate. Possible value is a column name. Default is empty. Layouts will\n## override this value.\n#\n# top: \n#\n## Node width. Possible value is a number (in px), auto or an @ sign followed by a column\n## name that contains the value for the width. Default is auto.\n#\n# width: auto\n#\n## Node height. Possible value is a number (in px), auto or an @ sign followed by a column\n## name that contains the value for the height. Default is auto.\n#\n# height: auto\n#\n## Padding for autosize. Default is 0.\n#\n# padding: -12\n#\n## Comma-separated list of ignored columns for metadata. (These can be\n## used for connections and styles but will not be added as metadata.)\n#\n# ignore: id,image,fill,stroke\n#\n## Column to be renamed to link attribute (used as link).\n#\n# link: url\n#\n## Spacing between nodes. Default is 40.\n#\n# nodespacing: 40\n#\n## Spacing between levels of hierarchical layouts. Default is 100.\n#\n# levelspacing: 100\n#\n## Spacing between parallel edges. Default is 40. Use 0 to disable.\n#\n# edgespacing: 40\n#\n## Name or JSON of layout. Possible values are auto, none, verticaltree, horizontaltree,\n## verticalflow, horizontalflow, organic, circle or a JSON string as used in Layout, Apply.\n## Default is auto.\n#\n# layout: auto\n#\n## ---- CSV below this line. First line are column names. ----\nname,position,id,location,manager,email,fill,stroke,refs,url,image\nEvan Miller,CFO,emi,Office 1,,me@example.com,#dae8fc,#6c8ebf,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-9-2-128.png\nEdward Morrison,Brand Manager,emo,Office 2,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-10-3-128.png\nRon Donovan,System Admin,rdo,Office 3,Evan Miller,me@example.com,#d5e8d4,#82b366,"emo,tva",https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-2-128.png\nTessa Valet,HR Director,tva,Office 4,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-3-128.png\n';
Editor.shadowOptionEnabled=!0;Editor.config=null;Editor.configVersion=null;Editor.prototype.timeout=25E3;Editor.configure=function $Editor$configure$($config$$,$untrusted$$){if(null!=$config$$){Editor.config=$config$$;Editor.configVersion=$config$$.version;Menus.prototype.defaultFonts=$config$$.defaultFonts||Menus.prototype.defaultFonts;ColorDialog.prototype.presetColors=$config$$.presetColors||ColorDialog.prototype.presetColors;ColorDialog.prototype.defaultColors=$config$$.defaultColors||ColorDialog.prototype.defaultColors;
StyleFormatPanel.prototype.defaultColorSchemes=$config$$.defaultColorSchemes||StyleFormatPanel.prototype.defaultColorSchemes;Graph.prototype.defaultEdgeLength=$config$$.defaultEdgeLength||Graph.prototype.defaultEdgeLength;DrawioFile.prototype.autosaveDelay=$config$$.autosaveDelay||DrawioFile.prototype.autosaveDelay;null!=$config$$.templateFile&&(EditorUi.templateFile=$config$$.templateFile);$config$$.customFonts&&(Menus.prototype.defaultFonts=$config$$.customFonts.concat(Menus.prototype.defaultFonts));
$config$$.customPresetColors&&(ColorDialog.prototype.presetColors=$config$$.customPresetColors.concat(ColorDialog.prototype.presetColors));null!=$config$$.customColorSchemes&&(StyleFormatPanel.prototype.defaultColorSchemes=$config$$.customColorSchemes.concat(StyleFormatPanel.prototype.defaultColorSchemes));if(null!=$config$$.css){var $i$jscomp$34_s$$=document.createElement("style");$i$jscomp$34_s$$.setAttribute("type","text/css");$i$jscomp$34_s$$.appendChild(document.createTextNode($config$$.css));
var $t$$=document.getElementsByTagName("script")[0];$t$$.parentNode.insertBefore($i$jscomp$34_s$$,$t$$)}null!=$config$$.libraries&&(Sidebar.prototype.customEntries=$config$$.libraries);null!=$config$$.enabledLibraries&&(Sidebar.prototype.enabledLibraries=$config$$.enabledLibraries);null!=$config$$.defaultLibraries&&(Sidebar.prototype.defaultEntries=$config$$.defaultLibraries);null!=$config$$.defaultCustomLibraries&&(Editor.defaultCustomLibraries=$config$$.defaultCustomLibraries);null!=$config$$.enableCustomLibraries&&
(Editor.enableCustomLibraries=$config$$.enableCustomLibraries);null!=$config$$.defaultVertexStyle&&(Graph.prototype.defaultVertexStyle=$config$$.defaultVertexStyle);null!=$config$$.defaultEdgeStyle&&(Graph.prototype.defaultEdgeStyle=$config$$.defaultEdgeStyle);$config$$.emptyDiagramXml&&(EditorUi.prototype.emptyDiagramXml=$config$$.emptyDiagramXml);$config$$.thumbWidth&&(Sidebar.prototype.thumbWidth=$config$$.thumbWidth);$config$$.thumbHeight&&(Sidebar.prototype.thumbHeight=$config$$.thumbHeight);
$config$$.emptyLibraryXml&&(EditorUi.prototype.emptyLibraryXml=$config$$.emptyLibraryXml);$config$$.sidebarWidth&&(EditorUi.prototype.hsplitPosition=$config$$.sidebarWidth);$config$$.fontCss&&($i$jscomp$34_s$$=document.createElement("style"),$i$jscomp$34_s$$.setAttribute("type","text/css"),$i$jscomp$34_s$$.appendChild(document.createTextNode($config$$.fontCss)),$t$$=document.getElementsByTagName("script")[0],$t$$.parentNode.insertBefore($i$jscomp$34_s$$,$t$$),Editor.prototype.fontCss=$config$$.fontCss);
if(null!=$config$$.plugins&&!$untrusted$$)for(App.initPluginCallback(),$i$jscomp$34_s$$=0;$i$jscomp$34_s$$<$config$$.plugins.length;$i$jscomp$34_s$$++)mxscript($config$$.plugins[$i$jscomp$34_s$$])}};Editor.GUID_ALPHABET="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";Editor.GUID_LENGTH=20;Editor.guid=function $Editor$guid$($len_length$$){$len_length$$=null!=$len_length$$?$len_length$$:Editor.GUID_LENGTH;for(var $rtn$$=[],$i$$=0;$i$$<$len_length$$;$i$$++)$rtn$$.push(Editor.GUID_ALPHABET.charAt(Math.floor(Math.random()*
Editor.GUID_ALPHABET.length)));return $rtn$$.join("")};Editor.prototype.useForeignObjectForMath=!1;Editor.prototype.editButtonLink=null!=urlParams.edit?decodeURIComponent(urlParams.edit):null;var $editorSetGraphXml$$=Editor.prototype.setGraphXml;Editor.prototype.setGraphXml=function $Editor$$setGraphXml$($node$$){$node$$=null!=$node$$&&"mxlibrary"!=$node$$.nodeName?this.extractGraphModel($node$$):null;if(null!=$node$$){var $bgImg_elt$$=$node$$.getElementsByTagName("parsererror");if(null!=$bgImg_elt$$&&
0<$bgImg_elt$$.length){var $bgImg_elt$$=$bgImg_elt$$[0],$divs_node2$$=$bgImg_elt$$.getElementsByTagName("div");null!=$divs_node2$$&&0<$divs_node2$$.length&&($bgImg_elt$$=$divs_node2$$[0]);throw{message:mxUtils.getTextContent($bgImg_elt$$)};}if("mxGraphModel"==$node$$.nodeName){$bgImg_elt$$=$node$$.getAttribute("style")||"default-style2";if("1"==urlParams.embed||null!=$bgImg_elt$$&&""!=$bgImg_elt$$)$bgImg_elt$$!=this.graph.currentStyle&&($divs_node2$$=null!=this.graph.themes?this.graph.themes[$bgImg_elt$$]:
mxUtils.load(STYLE_PATH+"/"+$bgImg_elt$$+".xml").getDocumentElement(),null!=$divs_node2$$&&($dec2$$=new mxCodec($divs_node2$$.ownerDocument),$dec2$$.decode($divs_node2$$,this.graph.getStylesheet())));else if($divs_node2$$=null!=this.graph.themes?this.graph.themes["default-old"]:mxUtils.load(STYLE_PATH+"/default-old.xml").getDocumentElement(),null!=$divs_node2$$){var $dec2$$=new mxCodec($divs_node2$$.ownerDocument);$dec2$$.decode($divs_node2$$,this.graph.getStylesheet())}this.graph.currentStyle=$bgImg_elt$$;
this.graph.mathEnabled="1"==urlParams.math||"1"==$node$$.getAttribute("math");$bgImg_elt$$=$node$$.getAttribute("backgroundImage");null!=$bgImg_elt$$?($bgImg_elt$$=JSON.parse($bgImg_elt$$),this.graph.setBackgroundImage(new mxImage($bgImg_elt$$.src,$bgImg_elt$$.width,$bgImg_elt$$.height))):this.graph.setBackgroundImage(null);mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath?!0:this.originalNoForeignObject;this.graph.useCssTransforms=!mxClient.NO_FO&&this.isChromelessView()&&this.graph.isCssTransformsSupported();
this.graph.updateCssTransform();this.graph.setShadowVisible("1"==$node$$.getAttribute("shadow"),!1)}$editorSetGraphXml$$.apply(this,arguments)}else throw{message:mxResources.get("notADiagramFile")||"Invalid data",toString:function(){return this.message}};};var $editorGetGraphXml$$=Editor.prototype.getGraphXml;Editor.prototype.getGraphXml=function $Editor$$getGraphXml$($ignoreSelection$$){$ignoreSelection$$=null!=$ignoreSelection$$?$ignoreSelection$$:!0;var $node$$=$editorGetGraphXml$$.apply(this,
arguments);null!=this.graph.currentStyle&&"default-style2"!=this.graph.currentStyle&&$node$$.setAttribute("style",this.graph.currentStyle);null!=this.graph.backgroundImage&&$node$$.setAttribute("backgroundImage",JSON.stringify(this.graph.backgroundImage));$node$$.setAttribute("math",this.graph.mathEnabled?"1":"0");$node$$.setAttribute("shadow",this.graph.shadowVisible?"1":"0");return $node$$};Editor.prototype.isDataSvg=function $Editor$$isDataSvg$($svg$$){try{var $tmp$$=mxUtils.parseXml($svg$$).documentElement.getAttribute("content");
if(null!=$tmp$$&&(null!=$tmp$$&&"<"!=$tmp$$.charAt(0)&&"%"!=$tmp$$.charAt(0)&&($tmp$$=unescape(window.atob?atob($tmp$$):Base64.decode(cont,$tmp$$))),null!=$tmp$$&&"%"==$tmp$$.charAt(0)&&($tmp$$=decodeURIComponent($tmp$$)),null!=$tmp$$&&0<$tmp$$.length)){var $node$$=mxUtils.parseXml($tmp$$).documentElement;return"mxfile"==$node$$.nodeName||"mxGraphModel"==$node$$.nodeName}}catch($e$$){}return!1};Editor.prototype.extractGraphModel=function $Editor$$extractGraphModel$($node$$,$allowMxFile$$){if(null!=
$node$$&&"undefined"!==typeof pako){var $data$jscomp$74_diagrams$jscomp$3_tmp$$=$node$$.ownerDocument.getElementsByTagName("div"),$config$jscomp$3_diagramNode$jscomp$2_divs$$=[];if(null!=$data$jscomp$74_diagrams$jscomp$3_tmp$$&&0<$data$jscomp$74_diagrams$jscomp$3_tmp$$.length)for(var $i$$=0;$i$$<$data$jscomp$74_diagrams$jscomp$3_tmp$$.length;$i$$++)if("mxgraph"==$data$jscomp$74_diagrams$jscomp$3_tmp$$[$i$$].getAttribute("class")){$config$jscomp$3_diagramNode$jscomp$2_divs$$.push($data$jscomp$74_diagrams$jscomp$3_tmp$$[$i$$]);
break}0<$config$jscomp$3_diagramNode$jscomp$2_divs$$.length&&($data$jscomp$74_diagrams$jscomp$3_tmp$$=$config$jscomp$3_diagramNode$jscomp$2_divs$$[0].getAttribute("data-mxgraph"),null!=$data$jscomp$74_diagrams$jscomp$3_tmp$$?($config$jscomp$3_diagramNode$jscomp$2_divs$$=JSON.parse($data$jscomp$74_diagrams$jscomp$3_tmp$$),null!=$config$jscomp$3_diagramNode$jscomp$2_divs$$&&null!=$config$jscomp$3_diagramNode$jscomp$2_divs$$.xml&&($config$jscomp$3_diagramNode$jscomp$2_divs$$=mxUtils.parseXml($config$jscomp$3_diagramNode$jscomp$2_divs$$.xml),
$node$$=$config$jscomp$3_diagramNode$jscomp$2_divs$$.documentElement)):($config$jscomp$3_diagramNode$jscomp$2_divs$$=$config$jscomp$3_diagramNode$jscomp$2_divs$$[0].getElementsByTagName("div"),0<$config$jscomp$3_diagramNode$jscomp$2_divs$$.length&&($data$jscomp$74_diagrams$jscomp$3_tmp$$=mxUtils.getTextContent($config$jscomp$3_diagramNode$jscomp$2_divs$$[0]),$data$jscomp$74_diagrams$jscomp$3_tmp$$=Graph.decompress($data$jscomp$74_diagrams$jscomp$3_tmp$$),0<$data$jscomp$74_diagrams$jscomp$3_tmp$$.length&&
($config$jscomp$3_diagramNode$jscomp$2_divs$$=mxUtils.parseXml($data$jscomp$74_diagrams$jscomp$3_tmp$$),$node$$=$config$jscomp$3_diagramNode$jscomp$2_divs$$.documentElement))))}if(null!=$node$$&&"svg"==$node$$.nodeName)if($data$jscomp$74_diagrams$jscomp$3_tmp$$=$node$$.getAttribute("content"),null!=$data$jscomp$74_diagrams$jscomp$3_tmp$$&&"<"!=$data$jscomp$74_diagrams$jscomp$3_tmp$$.charAt(0)&&"%"!=$data$jscomp$74_diagrams$jscomp$3_tmp$$.charAt(0)&&($data$jscomp$74_diagrams$jscomp$3_tmp$$=unescape(window.atob?
atob($data$jscomp$74_diagrams$jscomp$3_tmp$$):Base64.decode(cont,$data$jscomp$74_diagrams$jscomp$3_tmp$$))),null!=$data$jscomp$74_diagrams$jscomp$3_tmp$$&&"%"==$data$jscomp$74_diagrams$jscomp$3_tmp$$.charAt(0)&&($data$jscomp$74_diagrams$jscomp$3_tmp$$=decodeURIComponent($data$jscomp$74_diagrams$jscomp$3_tmp$$)),null!=$data$jscomp$74_diagrams$jscomp$3_tmp$$&&0<$data$jscomp$74_diagrams$jscomp$3_tmp$$.length)$node$$=mxUtils.parseXml($data$jscomp$74_diagrams$jscomp$3_tmp$$).documentElement;else throw{message:mxResources.get("notADiagramFile")};
null==$node$$||$allowMxFile$$||($config$jscomp$3_diagramNode$jscomp$2_divs$$=null,"diagram"==$node$$.nodeName?$config$jscomp$3_diagramNode$jscomp$2_divs$$=$node$$:"mxfile"==$node$$.nodeName&&($data$jscomp$74_diagrams$jscomp$3_tmp$$=$node$$.getElementsByTagName("diagram"),0<$data$jscomp$74_diagrams$jscomp$3_tmp$$.length&&($config$jscomp$3_diagramNode$jscomp$2_divs$$=$data$jscomp$74_diagrams$jscomp$3_tmp$$[Math.max(0,Math.min($data$jscomp$74_diagrams$jscomp$3_tmp$$.length-1,urlParams.page||0))])),null!=
$config$jscomp$3_diagramNode$jscomp$2_divs$$&&($data$jscomp$74_diagrams$jscomp$3_tmp$$=Graph.decompress(mxUtils.getTextContent($config$jscomp$3_diagramNode$jscomp$2_divs$$)),null!=$data$jscomp$74_diagrams$jscomp$3_tmp$$&&0<$data$jscomp$74_diagrams$jscomp$3_tmp$$.length&&($node$$=mxUtils.parseXml($data$jscomp$74_diagrams$jscomp$3_tmp$$).documentElement)));null==$node$$||"mxGraphModel"==$node$$.nodeName||$allowMxFile$$&&"mxfile"==$node$$.nodeName||($node$$=null);return $node$$};var $editorResetGraph$$=
Editor.prototype.resetGraph;Editor.prototype.resetGraph=function $Editor$$resetGraph$(){this.graph.mathEnabled="1"==urlParams.math;this.graph.view.x0=null;this.graph.view.y0=null;mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath?!0:this.originalNoForeignObject;this.graph.useCssTransforms=!mxClient.NO_FO&&this.isChromelessView()&&this.graph.isCssTransformsSupported();this.graph.updateCssTransform();$editorResetGraph$$.apply(this,arguments)};var $editorUpdateGraphComponents$$=Editor.prototype.updateGraphComponents;
Editor.prototype.updateGraphComponents=function $Editor$$updateGraphComponents$(){$editorUpdateGraphComponents$$.apply(this,arguments);mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath&&null!=Editor.MathJaxRender?!0:this.originalNoForeignObject;this.graph.useCssTransforms=!mxClient.NO_FO&&this.isChromelessView()&&this.graph.isCssTransformsSupported();this.graph.updateCssTransform()};Editor.initMath=function $Editor$initMath$($src$$,$config$$){$src$$=null!=$src$$?$src$$:DRAW_MATH_URL+
"/MathJax.js?config=TeX-MML-AM_HTMLorMML";Editor.mathJaxQueue=[];Editor.doMathJaxRender=function $Editor$doMathJaxRender$($container$$){window.setTimeout(function(){"hidden"!=$container$$.style.visibility&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,$container$$])},0)};window.MathJax={skipStartupTypeset:!0,showMathMenu:!1,messageStyle:"none",AuthorInit:function $window$MathJax$AuthorInit$(){MathJax.Hub.Config($config$$||{jax:["input/TeX","input/MathML","input/AsciiMath","output/HTML-CSS"],extensions:["tex2jax.js",
"mml2jax.js","asciimath2jax.js"],"HTML-CSS":{imageFont:null},TeX:{extensions:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]},tex2jax:{ignoreClass:"mxCellEditor"},asciimath2jax:{ignoreClass:"mxCellEditor"}});MathJax.Hub.Register.StartupHook("Begin",function(){for(var $i$$=0;$i$$<Editor.mathJaxQueue.length;$i$$++)Editor.doMathJaxRender(Editor.mathJaxQueue[$i$$])})}};Editor.MathJaxRender=function $Editor$MathJaxRender$($container$$){"undefined"!==typeof MathJax&&"undefined"!==typeof MathJax.Hub?
Editor.doMathJaxRender($container$$):Editor.mathJaxQueue.push($container$$)};Editor.MathJaxClear=function $Editor$MathJaxClear$(){Editor.mathJaxQueue=[]};var $editorInit$$=Editor.prototype.init;Editor.prototype.init=function $Editor$$init$(){$editorInit$$.apply(this,arguments);this.graph.addListener(mxEvent.SIZE,mxUtils.bind(this,function($sender$$,$evt$$){null!=this.graph.container&&this.graph.mathEnabled&&!this.graph.blockMathRender&&Editor.MathJaxRender(this.graph.container)}))};var $tags$$=document.getElementsByTagName("script");
if(null!=$tags$$&&0<$tags$$.length){var $script$$=document.createElement("script");$script$$.type="text/javascript";$script$$.src=$src$$;$tags$$[0].parentNode.appendChild($script$$)}};Editor.prototype.csvToArray=function $Editor$$csvToArray$($text$$){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test($text$$))return null;var $a$$=
[];$text$$.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,function($m0$$,$m1$$,$m2$$,$m3$$){void 0!==$m1$$?$a$$.push($m1$$.replace(/\\'/g,"'")):void 0!==$m2$$?$a$$.push($m2$$.replace(/\\"/g,'"')):void 0!==$m3$$&&$a$$.push($m3$$);return""});/,\s*$/.test($text$$)&&$a$$.push("");return $a$$};Editor.prototype.isCorsEnabledForUrl=function $Editor$$isCorsEnabledForUrl$($url$$){null!=urlParams.cors&&null==this.corsRegExp&&
(this.corsRegExp=new RegExp(decodeURIComponent(urlParams.cors)));return null!=this.corsRegExp&&this.corsRegExp.test($url$$)||"https://raw.githubusercontent.com/"===$url$$.substring(0,34)||"https://cdn.rawgit.com/"===$url$$.substring(0,23)||"https://rawgit.com/"===$url$$.substring(0,19)||/^https?:\/\/[^\/]*\.blob.core.windows.net\//.test($url$$)||/^https?:\/\/[^\/]*\.iconfinder.com\//.test($url$$)||/^https?:\/\/[^\/]*\.draw\.io\/proxy/.test($url$$)||/^https?:\/\/[^\/]*\.github\.io\//.test($url$$)};
Editor.prototype.createImageUrlConverter=function $Editor$$createImageUrlConverter$(){var $converter$$=new mxUrlConverter;$converter$$.updateBaseUrl();var $convert$$=$converter$$.convert,$self$$=this;$converter$$.convert=function $$converter$$$convert$($src$$){if(null!=$src$$){var $remote$$="http://"==$src$$.substring(0,7)||"https://"==$src$$.substring(0,8);$remote$$&&!navigator.onLine?$src$$=EditorUi.prototype.svgBrokenImage.src:!$remote$$||$src$$.substring(0,$converter$$.baseUrl.length)==$converter$$.baseUrl||
EditorUi.prototype.crossOriginImages&&$self$$.isCorsEnabledForUrl($src$$)?"chrome-extension://"!=$src$$.substring(0,19)&&($src$$=$convert$$.apply(this,arguments)):$src$$=PROXY_URL+"?url="+encodeURIComponent($src$$)}return $src$$};return $converter$$};Editor.prototype.createSvgDataUri=function $Editor$$createSvgDataUri$($svg$$){return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent($svg$$)))};Editor.prototype.convertImageToDataUri=function $Editor$$convertImageToDataUri$($url$$,$callback$$){if(/(\.svg)$/i.test($url$$))mxUtils.get($url$$,
mxUtils.bind(this,function($req$$){$callback$$(this.createSvgDataUri($req$$.getText()))}),function(){$callback$$(EditorUi.prototype.svgBrokenImage.src)});else{var $img$$=new Image;EditorUi.prototype.crossOriginImages&&($img$$.crossOrigin="anonymous");$img$$.onload=function $$img$$$onload$(){var $canvas$$=document.createElement("canvas"),$ctx$$=$canvas$$.getContext("2d");$canvas$$.height=$img$$.height;$canvas$$.width=$img$$.width;$ctx$$.drawImage($img$$,0,0);try{$callback$$($canvas$$.toDataURL())}catch($e$$){$callback$$(EditorUi.prototype.svgBrokenImage.src)}};
$img$$.onerror=function $$img$$$onerror$(){$callback$$(EditorUi.prototype.svgBrokenImage.src)};$img$$.src=$url$$}};Editor.prototype.convertImages=function $Editor$$convertImages$($svgRoot$$,$callback$$,$convertImages_imageCache$$,$converter$$){null==$converter$$&&($converter$$=this.createImageUrlConverter());var $counter$$=0,$cache$$=$convertImages_imageCache$$||{};$convertImages_imageCache$$=mxUtils.bind(this,function($tagName$$,$srcAttr$$){for(var $images$$=$svgRoot$$.getElementsByTagName($tagName$$),
$i$$=0;$i$$<$images$$.length;$i$$++)mxUtils.bind(this,function($img$$){var $src$$=$converter$$.convert($img$$.getAttribute($srcAttr$$));if(null!=$src$$&&"data:"!=$src$$.substring(0,5)){var $tmp$$=$cache$$[$src$$];null==$tmp$$?($counter$$++,this.convertImageToDataUri($src$$,function($uri$$){null!=$uri$$&&($cache$$[$src$$]=$uri$$,$img$$.setAttribute($srcAttr$$,$uri$$));$counter$$--;0==$counter$$&&$callback$$($svgRoot$$)})):$img$$.setAttribute($srcAttr$$,$tmp$$)}else null!=$src$$&&$img$$.setAttribute($srcAttr$$,
$src$$)})($images$$[$i$$])});$convertImages_imageCache$$("image","xlink:href");$convertImages_imageCache$$("img","src");0==$counter$$&&$callback$$($svgRoot$$)};Editor.prototype.base64Encode=function $Editor$$base64Encode$($str$$){for(var $out$$="",$i$$=0,$len$$=$str$$.length,$c1$$,$c2$$,$c3$$;$i$$<$len$$;){$c1$$=$str$$.charCodeAt($i$$++)&255;if($i$$==$len$$){$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c1$$>>2);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c1$$&
3)<<4);$out$$+="==";break}$c2$$=$str$$.charCodeAt($i$$++);if($i$$==$len$$){$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c1$$>>2);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c1$$&3)<<4|($c2$$&240)>>4);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c2$$&15)<<2);$out$$+="=";break}$c3$$=$str$$.charCodeAt($i$$++);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c1$$>>
2);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c1$$&3)<<4|($c2$$&240)>>4);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c2$$&15)<<2|($c3$$&192)>>6);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c3$$&63)}return $out$$};Editor.prototype.loadUrl=function $Editor$$loadUrl$($url$$,$success$$,$error$$,$forceBinary$$,$retry$$,$dataUriPrefix$$){try{var $binary$$=$forceBinary$$||/(\.png)($|\?)/i.test($url$$)||
/(\.jpe?g)($|\?)/i.test($url$$)||/(\.gif)($|\?)/i.test($url$$);$retry$$=null!=$retry$$?$retry$$:!0;var $fn$$=mxUtils.bind(this,function(){mxUtils.get($url$$,mxUtils.bind(this,function($bin_req$$){if(200<=$bin_req$$.getStatus()&&299>=$bin_req$$.getStatus()){if(null!=$success$$){var $data$jscomp$75_tmp$$=$bin_req$$.getText();if($binary$$){if((9==document.documentMode||10==document.documentMode)&&"undefined"!==typeof window.mxUtilsBinaryToArray){$bin_req$$=mxUtilsBinaryToArray($bin_req$$.request.responseBody).toArray();
for(var $data$jscomp$75_tmp$$=Array($bin_req$$.length),$i$$=0;$i$$<$bin_req$$.length;$i$$++)$data$jscomp$75_tmp$$[$i$$]=String.fromCharCode($bin_req$$[$i$$]);$data$jscomp$75_tmp$$=$data$jscomp$75_tmp$$.join("")}$dataUriPrefix$$=null!=$dataUriPrefix$$?$dataUriPrefix$$:"data:image/png;base64,";$data$jscomp$75_tmp$$=$dataUriPrefix$$+this.base64Encode($data$jscomp$75_tmp$$)}$success$$($data$jscomp$75_tmp$$)}}else null!=$error$$&&$error$$({code:App.ERROR_UNKNOWN},$bin_req$$)}),function(){null!=$error$$&&
$error$$({code:App.ERROR_UNKNOWN})},$binary$$,this.timeout,function(){$retry$$&&null!=$error$$&&$error$$({code:App.ERROR_TIMEOUT,retry:$fn$$})})});$fn$$()}catch($e$$){null!=$error$$&&$error$$($e$$)}};Editor.prototype.loadFonts=function $Editor$$loadFonts$($then$$){if(null!=this.fontCss&&null==this.resolvedFontCss){var $trimString$$=function $$trimString$$$($str$$){return $str$$.replace(RegExp("^[\\s\"']+","g"),"").replace(RegExp("[\\s\"']+$","g"),"")},$parts$$=this.fontCss.split("url("),$waiting$$=
0,$fonts$$={},$finish$$=mxUtils.bind(this,function(){if(0==$waiting$$){for(var $result$$=[$parts$$[0]],$j$$=1;$j$$<$parts$$.length;$j$$++){var $idx$$=$parts$$[$j$$].indexOf(")");$result$$.push('url("');$result$$.push($fonts$$[$trimString$$($parts$$[$j$$].substring(0,$idx$$))]);$result$$.push('"'+$parts$$[$j$$].substring($idx$$))}this.resolvedFontCss=$result$$.join("");$then$$()}});if(0<$parts$$.length)for(var $i$$=1;$i$$<$parts$$.length;$i$$++){var $idx$jscomp$0$$=$parts$$[$i$$].indexOf(")"),$format$$=
null,$fmtIdx$$=$parts$$[$i$$].indexOf("format(",$idx$jscomp$0$$);0<$fmtIdx$$&&($format$$=$trimString$$($parts$$[$i$$].substring($fmtIdx$$+7,$parts$$[$i$$].indexOf(")",$fmtIdx$$))));mxUtils.bind(this,function($url$$){if(null==$fonts$$[$url$$]){$fonts$$[$url$$]=$url$$;$waiting$$++;var $mime$$="application/x-font-ttf";if("svg"==$format$$||/(\.svg)($|\?)/i.test($url$$))$mime$$="image/svg+xml";else if("otf"==$format$$||"embedded-opentype"==$format$$||/(\.otf)($|\?)/i.test($url$$))$mime$$="application/x-font-opentype";
else if("woff"==$format$$||/(\.woff)($|\?)/i.test($url$$))$mime$$="application/font-woff";else if("woff2"==$format$$||/(\.woff2)($|\?)/i.test($url$$))$mime$$="application/font-woff2";else if("eot"==$format$$||/(\.eot)($|\?)/i.test($url$$))$mime$$="application/vnd.ms-fontobject";else if("sfnt"==$format$$||/(\.sfnt)($|\?)/i.test($url$$))$mime$$="application/font-sfnt";var $realUrl$$=$url$$;/^https?:\/\//.test($realUrl$$)&&!this.isCorsEnabledForUrl($realUrl$$)&&($realUrl$$=PROXY_URL+"?url="+encodeURIComponent($url$$));
this.loadUrl($realUrl$$,mxUtils.bind(this,function($uri$$){$fonts$$[$url$$]=$uri$$;$waiting$$--;$finish$$()}),mxUtils.bind(this,function($err$$){$waiting$$--;$finish$$()}),!0,null,"data:"+$mime$$+";charset=utf-8;base64,")}})($trimString$$($parts$$[$i$$].substring(0,$idx$jscomp$0$$)),$format$$)}}else $then$$()};Editor.prototype.convertMath=function $Editor$$convertMath$($graph$$,$svgRoot$$,$fixPosition$$,$callback$$){$graph$$.mathEnabled&&"undefined"!==typeof MathJax&&"undefined"!==typeof MathJax.Hub?
(Editor.MathJaxRender($svgRoot$$),window.setTimeout(mxUtils.bind(this,function(){MathJax.Hub.Queue(mxUtils.bind(this,function(){$callback$$()}))}),0)):$callback$$()};Editor.prototype.isExportToCanvas=function $Editor$$isExportToCanvas$(){return mxClient.IS_CHROMEAPP||!this.graph.mathEnabled&&this.useCanvasForExport};Editor.prototype.exportToCanvas=function $Editor$$exportToCanvas$($callback$$,$width$$,$imageCache$$,$background$$,$error$$,$limitHeight$$,$ignoreSelection$$,$scale$$,$transparentBackground$$,
$addShadow$$,$converter$$,$graph$$,$border$$,$noCrop$$){$limitHeight$$=null!=$limitHeight$$?$limitHeight$$:!0;$graph$$=null!=$graph$$?$graph$$:this.graph;$border$$=null!=$border$$?$border$$:0;var $bg$$=$transparentBackground$$?null:$graph$$.background;$bg$$==mxConstants.NONE&&($bg$$=null);null==$bg$$&&($bg$$=$background$$);null==$bg$$&&0==$transparentBackground$$&&($bg$$=this.graph.defaultPageBackgroundColor);this.convertImages($graph$$.getSvg($bg$$,null,null,$noCrop$$,null,null!=$ignoreSelection$$?
$ignoreSelection$$:!0,null,null,null,$addShadow$$),mxUtils.bind(this,function($svgRoot$$){var $img$$=new Image;$img$$.onload=mxUtils.bind(this,function(){try{var $canvas$$=document.createElement("canvas"),$w$$=parseInt($svgRoot$$.getAttribute("width")),$h$$=parseInt($svgRoot$$.getAttribute("height"));$scale$$=null!=$scale$$?$scale$$:1;null!=$width$$&&($scale$$=$limitHeight$$?Math.min(1,Math.min(3*$width$$/(4*$h$$),$width$$/$w$$)):$width$$/$w$$);$w$$=Math.ceil($scale$$*$w$$)+2*$border$$;$h$$=Math.ceil($scale$$*
$h$$)+2*$border$$;$canvas$$.setAttribute("width",$w$$);$canvas$$.setAttribute("height",$h$$);var $ctx$$=$canvas$$.getContext("2d");null!=$bg$$&&($ctx$$.beginPath(),$ctx$$.rect(0,0,$w$$,$h$$),$ctx$$.fillStyle=$bg$$,$ctx$$.fill());$ctx$$.scale($scale$$,$scale$$);mxClient.IS_SF?window.setTimeout(function(){$ctx$$.drawImage($img$$,$border$$/$scale$$,$border$$/$scale$$);$callback$$($canvas$$)},0):($ctx$$.drawImage($img$$,$border$$/$scale$$,$border$$/$scale$$),$callback$$($canvas$$))}catch($e$$){null!=
$error$$&&$error$$($e$$)}});$img$$.onerror=function $$img$$$onerror$($e$$){null!=$error$$&&$error$$($e$$)};try{$addShadow$$&&this.graph.addSvgShadow($svgRoot$$);var $done$$=mxUtils.bind(this,function(){if(null!=this.resolvedFontCss){var $st$$=document.createElement("style");$st$$.setAttribute("type","text/css");$st$$.innerHTML=this.resolvedFontCss;$svgRoot$$.getElementsByTagName("defs")[0].appendChild($st$$)}this.convertMath($graph$$,$svgRoot$$,!0,mxUtils.bind(this,function(){$img$$.src=this.createSvgDataUri(mxUtils.getXml($svgRoot$$))}))});
this.loadFonts($done$$)}catch($e$$){null!=$error$$&&$error$$($e$$)}}),$imageCache$$,$converter$$)};Editor.prototype.writeGraphModelToPng=function $Editor$$writeGraphModelToPng$($base64_data$jscomp$76_f$$,$type$$,$chunkData_key$$,$crc_value$$,$error$jscomp$51_result$$){function $fread$$($d$$,$count$$){var $start$$=$pos$$;$pos$$+=$count$$;return $d$$.substring($start$$,$pos$$)}function $_freadint$$($bytes_d$$){$bytes_d$$=$fread$$($bytes_d$$,4);return $bytes_d$$.charCodeAt(3)+($bytes_d$$.charCodeAt(2)<<
8)+($bytes_d$$.charCodeAt(1)<<16)+($bytes_d$$.charCodeAt(0)<<24)}function $writeInt$$($num$$){return String.fromCharCode($num$$>>24&255,$num$$>>16&255,$num$$>>8&255,$num$$&255)}$base64_data$jscomp$76_f$$=$base64_data$jscomp$76_f$$.substring($base64_data$jscomp$76_f$$.indexOf(",")+1);$base64_data$jscomp$76_f$$=window.atob?atob($base64_data$jscomp$76_f$$):Base64.decode($base64_data$jscomp$76_f$$,!0);var $pos$$=0;if($fread$$($base64_data$jscomp$76_f$$,8)!=String.fromCharCode(137)+"PNG"+String.fromCharCode(13,
10,26,10))null!=$error$jscomp$51_result$$&&$error$jscomp$51_result$$();else if($fread$$($base64_data$jscomp$76_f$$,4),"IHDR"!=$fread$$($base64_data$jscomp$76_f$$,4))null!=$error$jscomp$51_result$$&&$error$jscomp$51_result$$();else{$fread$$($base64_data$jscomp$76_f$$,17);$error$jscomp$51_result$$=$base64_data$jscomp$76_f$$.substring(0,$pos$$);do{var $n$$=$_freadint$$($base64_data$jscomp$76_f$$);if("IDAT"==$fread$$($base64_data$jscomp$76_f$$,4)){$error$jscomp$51_result$$=$base64_data$jscomp$76_f$$.substring(0,
$pos$$-8);$chunkData_key$$=$chunkData_key$$+String.fromCharCode(0)+("zTXt"==$type$$?String.fromCharCode(0):"")+$crc_value$$;$crc_value$$=4294967295;$crc_value$$=EditorUi.prototype.updateCRC($crc_value$$,$type$$,0,4);$crc_value$$=EditorUi.prototype.updateCRC($crc_value$$,$chunkData_key$$,0,$chunkData_key$$.length);$error$jscomp$51_result$$+=$writeInt$$($chunkData_key$$.length)+$type$$+$chunkData_key$$+$writeInt$$($crc_value$$^4294967295);$error$jscomp$51_result$$+=$base64_data$jscomp$76_f$$.substring($pos$$-
8,$base64_data$jscomp$76_f$$.length);break}$error$jscomp$51_result$$+=$base64_data$jscomp$76_f$$.substring($pos$$-8,$pos$$-4+$n$$);$fread$$($base64_data$jscomp$76_f$$,$n$$);$fread$$($base64_data$jscomp$76_f$$,4)}while($n$$);return"data:image/png;base64,"+(window.btoa?btoa($error$jscomp$51_result$$):Base64.encode($error$jscomp$51_result$$,!0))}};if(window.ColorDialog){FilenameDialog.filenameHelpLink="../../../../Documents/htmlhelp/home__file_menu.htm?ms=AAAA&st=MA%3D%3D&sct=MTcxOS4zMzMzNzQwMjM0Mzc1&mw=NTEx";
var $colorDialogAddRecentColor$$=ColorDialog.addRecentColor;ColorDialog.addRecentColor=function $ColorDialog$addRecentColor$($color$$,$max$$){$colorDialogAddRecentColor$$.apply(this,arguments);mxSettings.setRecentColors(ColorDialog.recentColors);mxSettings.save()};var $colorDialogResetRecentColors$$=ColorDialog.resetRecentColors;ColorDialog.resetRecentColors=function $ColorDialog$resetRecentColors$(){$colorDialogResetRecentColors$$.apply(this,arguments);mxSettings.setRecentColors(ColorDialog.recentColors);
mxSettings.save()}}window.EditDataDialog&&(EditDataDialog.getDisplayIdForCell=function $EditDataDialog$getDisplayIdForCell$($ui$$,$cell$$){var $id$$=null;null!=$ui$$.editor.graph.getModel().getParent($cell$$)?$id$$=$cell$$.getId():null!=$ui$$.currentPage&&($id$$=$ui$$.currentPage.getId());return $id$$});if(null!=window.StyleFormatPanel){var $formatInit$$=Format.prototype.init;Format.prototype.init=function $Format$$init$(){$formatInit$$.apply(this,arguments);this.editorUi.editor.addListener("fileLoaded",
this.update)};var $formatRefresh$$=Format.prototype.refresh;Format.prototype.refresh=function $Format$$refresh$(){null!=this.editorUi.getCurrentFile()||"1"==urlParams.embed||this.editorUi.editor.chromeless?$formatRefresh$$.apply(this,arguments):this.clear()};DiagramFormatPanel.prototype.isShadowOptionVisible=function $DiagramFormatPanel$$isShadowOptionVisible$(){var $file$$=this.editorUi.getCurrentFile();return"1"==urlParams.embed||null!=$file$$&&$file$$.isEditable()};DiagramFormatPanel.prototype.isMathOptionVisible=
function $DiagramFormatPanel$$isMathOptionVisible$($div$$){return!1};var $diagramFormatPanelAddView$$=DiagramFormatPanel.prototype.addView;DiagramFormatPanel.prototype.addView=function $DiagramFormatPanel$$addView$($div$$){$div$$=$diagramFormatPanelAddView$$.apply(this,arguments);this.editorUi.getCurrentFile();if(mxClient.IS_SVG&&this.isShadowOptionVisible()){var $ui$$=this.editorUi,$graph$$=$ui$$.editor.graph,$option$$=this.createOption(mxResources.get("shadow"),function(){return $graph$$.shadowVisible},
function($checked$$){var $change$$=new ChangePageSetup($ui$$);$change$$.ignoreColor=!0;$change$$.ignoreImage=!0;$change$$.shadowVisible=$checked$$;$graph$$.model.execute($change$$)},{install:function($apply$$){this.listener=function $this$listener$(){$apply$$($graph$$.shadowVisible)};$ui$$.addListener("shadowVisibleChanged",this.listener)},destroy:function(){$ui$$.removeListener(this.listener)}});Editor.shadowOptionEnabled||($option$$.getElementsByTagName("input")[0].setAttribute("disabled","disabled"),
mxUtils.setOpacity($option$$,60));$div$$.appendChild($option$$)}return $div$$};var $diagramFormatPanelAddOptions$$=DiagramFormatPanel.prototype.addOptions;DiagramFormatPanel.prototype.addOptions=function $DiagramFormatPanel$$addOptions$($div$$){$div$$=$diagramFormatPanelAddOptions$$.apply(this,arguments);var $ui$$=this.editorUi,$graph$$=$ui$$.editor.graph;if($graph$$.isEnabled()){var $file$jscomp$17_opt_option$$=$ui$$.getCurrentFile();null!=$file$jscomp$17_opt_option$$&&$file$jscomp$17_opt_option$$.isAutosaveOptional()&&
($file$jscomp$17_opt_option$$=this.createOption(mxResources.get("autosave"),function(){return $ui$$.editor.autosave},function($checked$$){$ui$$.editor.setAutosave($checked$$)},{install:function($apply$$){this.listener=function $this$listener$(){$apply$$($ui$$.editor.autosave)};$ui$$.editor.addListener("autosaveChanged",this.listener)},destroy:function(){$ui$$.editor.removeListener(this.listener)}}),$div$$.appendChild($file$jscomp$17_opt_option$$))}if(this.isMathOptionVisible()&&$graph$$.isEnabled()&&
"undefined"!==typeof MathJax){$file$jscomp$17_opt_option$$=this.createOption(mxResources.get("mathematicalTypesetting"),function(){return $graph$$.mathEnabled},function($checked$$){$ui$$.actions.get("mathematicalTypesetting").funct()},{install:function($apply$$){this.listener=function $this$listener$(){$apply$$($graph$$.mathEnabled)};$ui$$.addListener("mathEnabledChanged",this.listener)},destroy:function(){$ui$$.removeListener(this.listener)}});$file$jscomp$17_opt_option$$.style.paddingTop="5px";
$div$$.appendChild($file$jscomp$17_opt_option$$);var $help$$=$ui$$.menus.createHelpLink("https://desk.draw.io/support/solutions/articles/16000032875");$help$$.style.position="relative";$help$$.style.marginLeft="6px";$help$$.style.top="2px";$file$jscomp$17_opt_option$$.appendChild($help$$)}return $div$$};mxCellRenderer.prototype.defaultVertexShape.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"absoluteArcSize",dispName:"Abs. Arc Size",
type:"bool",defVal:!1}];mxCellRenderer.defaultShapes.link.prototype.customProperties=[{name:"width",dispName:"Width",type:"float",min:0,defVal:4}];mxCellRenderer.defaultShapes.flexArrow.prototype.customProperties=[{name:"width",dispName:"Width",type:"float",min:0,defVal:10},{name:"startWidth",dispName:"Start Width",type:"float",min:0,defVal:20},{name:"endWidth",dispName:"End Width",type:"float",min:0,defVal:20}];mxCellRenderer.defaultShapes.process.prototype.customProperties=[{name:"size",dispName:"Indent",
type:"float",min:0,max:.5,defVal:.1}];mxCellRenderer.defaultShapes.rhombus.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,max:50,defVal:mxConstants.LINE_ARCSIZE},{name:"double",dispName:"Double",type:"bool",defVal:!1}];mxCellRenderer.defaultShapes.partialRectangle.prototype.customProperties=[{name:"top",dispName:"Top Line",type:"bool",defVal:!0},{name:"bottom",dispName:"Bottom Line",type:"bool",defVal:!0},{name:"left",dispName:"Left Line",type:"bool",defVal:!0},
{name:"right",dispName:"Right Line",type:"bool",defVal:!0}];mxCellRenderer.defaultShapes.parallelogram.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Slope Angle",type:"float",min:0,max:1,defVal:.2}];mxCellRenderer.defaultShapes.hexagon.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Slope Angle",type:"float",min:0,max:1,
defVal:.25}];mxCellRenderer.defaultShapes.triangle.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE}];mxCellRenderer.defaultShapes.document.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",defVal:.3,min:0,max:1}];mxCellRenderer.defaultShapes.internalStorage.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"dx",dispName:"Left Line",type:"float",
min:0,defVal:20},{name:"dy",dispName:"Top Line",type:"float",min:0,defVal:20}];mxCellRenderer.defaultShapes.cube.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:20},{name:"darkOpacity",dispName:"Dark Opacity",type:"float",min:-1,max:1,defVal:0},{name:"darkOpacity2",dispName:"Dark Opacity 2",type:"float",min:-1,max:1,defVal:0}];mxCellRenderer.defaultShapes.step.prototype.customProperties=[{name:"size",dispName:"Notch Size",type:"float",min:0,defVal:20},{name:"fixedSize",
dispName:"Fixed Size",type:"bool",defVal:!0}];mxCellRenderer.defaultShapes.trapezoid.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Slope Angle",type:"float",min:0,max:1,defVal:.2}];mxCellRenderer.defaultShapes.tape.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.4}];mxCellRenderer.defaultShapes.note.prototype.customProperties=[{name:"size",dispName:"Fold Size",type:"float",
min:0,defVal:30},{name:"darkOpacity",dispName:"Dark Opacity",type:"float",min:-1,max:1,defVal:0}];mxCellRenderer.defaultShapes.card.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Cutoff Size",type:"float",min:0,defVal:30}];mxCellRenderer.defaultShapes.callout.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"base",dispName:"Callout Width",
type:"float",min:0,defVal:20},{name:"size",dispName:"Callout Length",type:"float",min:0,defVal:30},{name:"position",dispName:"Callout Position",type:"float",min:0,max:1,defVal:.5},{name:"position2",dispName:"Callout Tip Position",type:"float",min:0,max:1,defVal:.5}];mxCellRenderer.defaultShapes.folder.prototype.customProperties=[{name:"tabWidth",dispName:"Tab Width",type:"float"},{name:"tabHeight",dispName:"Tab Height",type:"float"},{name:"tabPosition",dispName:"Tap Position",type:"enum",enumList:[{val:"left",
dispName:"Left"},{val:"right",dispName:"Right"}]}];mxCellRenderer.defaultShapes.swimlane.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:15},{name:"startSize",dispName:"Header Size",type:"float"},{name:"horizontal",dispName:"Horizontal",type:"bool",defVal:!0},{name:"separatorColor",dispName:"Separator Color",type:"color",defVal:null}];mxCellRenderer.defaultShapes.doubleEllipse.prototype.customProperties=[{name:"margin",dispName:"Indent",type:"float",min:0,
defVal:4}];mxCellRenderer.defaultShapes.ext.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:15},{name:"double",dispName:"Double",type:"bool",defVal:!1},{name:"margin",dispName:"Indent",type:"float",min:0,defVal:0}];mxCellRenderer.defaultShapes.curlyBracket.prototype.customProperties=[{name:"rounded",dispName:"Rounded",type:"bool",defVal:!0},{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.5}];mxCellRenderer.defaultShapes.image.prototype.customProperties=
[{name:"imageAspect",dispName:"Fixed Image Aspect",type:"bool",defVal:!0}];mxCellRenderer.defaultShapes.label.prototype.customProperties=[{name:"imageAspect",dispName:"Fixed Image Aspect",type:"bool",defVal:!0},{name:"imageAlign",dispName:"Image Align",type:"enum",enumList:[{val:"left",dispName:"Left"},{val:"center",dispName:"Center"},{val:"right",dispName:"Right"}],defVal:"left"},{name:"imageVerticalAlign",dispName:"Image Vertical Align",type:"enum",enumList:[{val:"top",dispName:"Top"},{val:"middle",
dispName:"Middle"},{val:"bottom",dispName:"Bottom"}],defVal:"middle"},{name:"imageWidth",dispName:"Image Width",type:"float",min:0,defVal:24},{name:"imageHeight",dispName:"Image Height",type:"float",min:0,defVal:24},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:12},{name:"absoluteArcSize",dispName:"Abs. Arc Size",type:"bool",defVal:!1}];mxCellRenderer.defaultShapes.dataStorage.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.1}];mxCellRenderer.defaultShapes.manualInput.prototype.customProperties=
[{name:"size",dispName:"Size",type:"float",min:0,defVal:30},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:20}];mxCellRenderer.defaultShapes.loopLimit.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:20},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:20}];mxCellRenderer.defaultShapes.offPageConnector.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:38},{name:"arcSize",dispName:"Arc Size",type:"float",
min:0,defVal:20}];mxCellRenderer.defaultShapes.display.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.25}];mxCellRenderer.defaultShapes.singleArrow.prototype.customProperties=[{name:"arrowWidth",dispName:"Arrow Width",type:"float",min:0,max:1,defVal:.3},{name:"arrowSize",dispName:"Arrowhead Length",type:"float",min:0,max:1,defVal:.2}];mxCellRenderer.defaultShapes.doubleArrow.prototype.customProperties=[{name:"arrowWidth",dispName:"Arrow Width",type:"float",
min:0,max:1,defVal:.3},{name:"arrowSize",dispName:"Arrowhead Length",type:"float",min:0,max:1,defVal:.2}];mxCellRenderer.defaultShapes.cross.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.2}];mxCellRenderer.defaultShapes.corner.prototype.customProperties=[{name:"dx",dispName:"Width1",type:"float",min:0,defVal:20},{name:"dy",dispName:"Width2",type:"float",min:0,defVal:20}];mxCellRenderer.defaultShapes.tee.prototype.customProperties=[{name:"dx",dispName:"Width1",
type:"float",min:0,defVal:20},{name:"dy",dispName:"Width2",type:"float",min:0,defVal:20}];mxCellRenderer.defaultShapes.umlLifeline.prototype.customProperties=[{name:"participant",dispName:"Participant",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"Default"},{val:"umlActor",dispName:"Actor"},{val:"umlBoundary",dispName:"Boundary"},{val:"umlEntity",dispName:"Entity"},{val:"umlControl",dispName:"Control"}]},{name:"size",dispName:"Height",type:"float",defVal:40,min:0}];mxCellRenderer.defaultShapes.umlFrame.prototype.customProperties=
[{name:"width",dispName:"Title Width",type:"float",defVal:60,min:0},{name:"height",dispName:"Title Height",type:"float",defVal:30,min:0}];StyleFormatPanel.prototype.defaultColorSchemes=[[{fill:"",stroke:""},{fill:"#f5f5f5",stroke:"#666666",font:"#333333"},{fill:"#dae8fc",stroke:"#6c8ebf"},{fill:"#d5e8d4",stroke:"#82b366"},{fill:"#ffe6cc",stroke:"#d79b00"},{fill:"#fff2cc",stroke:"#d6b656"},{fill:"#f8cecc",stroke:"#b85450"},{fill:"#e1d5e7",stroke:"#9673a6"}],[{fill:"#60a917",stroke:"#2D7600",font:"#ffffff"},
{fill:"#008a00",stroke:"#005700",font:"#ffffff"},{fill:"#1ba1e2",stroke:"#006EAF",font:"#ffffff"},{fill:"#0050ef",stroke:"#001DBC",font:"#ffffff"},{fill:"#6a00ff",stroke:"#3700CC",font:"#ffffff"},{fill:"#aa00ff",stroke:"#7700CC",font:"#ffffff"},{fill:"#d80073",stroke:"#A50040",font:"#ffffff"},{fill:"#a20025",stroke:"#6F0000",font:"#ffffff"}],[{fill:"#e51400",stroke:"#B20000",font:"#ffffff"},{fill:"#fa6800",stroke:"#C73500",font:"#ffffff"},{fill:"#f0a30a",stroke:"#BD7000",font:"#ffffff"},{fill:"#e3c800",
stroke:"#B09500",font:"#ffffff"},{fill:"#6d8764",stroke:"#3A5431",font:"#ffffff"},{fill:"#647687",stroke:"#314354",font:"#ffffff"},{fill:"#76608a",stroke:"#432D57",font:"#ffffff"},{fill:"#a0522d",stroke:"#6D1F00",font:"#ffffff"}],[{fill:"",stroke:""},{fill:mxConstants.NONE,stroke:""},{fill:"#fad7ac",stroke:"#b46504"},{fill:"#fad9d5",stroke:"#ae4132"},{fill:"#b0e3e6",stroke:"#0e8088"},{fill:"#b1ddf0",stroke:"#10739e"},{fill:"#d0cee2",stroke:"#56517e"},{fill:"#bac8d3",stroke:"#23445d"}],[{fill:"",stroke:""},
{fill:"#f5f5f5",stroke:"#666666",gradient:"#b3b3b3"},{fill:"#dae8fc",stroke:"#6c8ebf",gradient:"#7ea6e0"},{fill:"#d5e8d4",stroke:"#82b366",gradient:"#97d077"},{fill:"#ffcd28",stroke:"#d79b00",gradient:"#ffa500"},{fill:"#fff2cc",stroke:"#d6b656",gradient:"#ffd966"},{fill:"#f8cecc",stroke:"#b85450",gradient:"#ea6b66"},{fill:"#e6d0de",stroke:"#996185",gradient:"#d5739d"}],[{fill:"",stroke:""},{fill:"#eeeeee",stroke:"#36393d"},{fill:"#f9f7ed",stroke:"#36393d"},{fill:"#ffcc99",stroke:"#36393d"},{fill:"#cce5ff",
stroke:"#36393d"},{fill:"#ffff88",stroke:"#36393d"},{fill:"#cdeb8b",stroke:"#36393d"},{fill:"#ffcccc",stroke:"#36393d"}]];StyleFormatPanel.prototype.customColorSchemes=null;StyleFormatPanel.prototype.findCommonProperties=function $StyleFormatPanel$$findCommonProperties$($cell$$,$properties$$,$addAll$$){if(null!=$properties$$){var $handleCustomProp$$=function $$handleCustomProp$$$($custProperties$$){if(null!=$custProperties$$)if($addAll$$)for(var $i$$=0;$i$$<$custProperties$$.length;$i$$++)$properties$$[$custProperties$$[$i$$].name]=
$custProperties$$[$i$$];else for(var $key$$ in $properties$$){for(var $found$$=!1,$i$$=0;$i$$<$custProperties$$.length;$i$$++)if($custProperties$$[$i$$].name==$key$$&&$custProperties$$[$i$$].type==$properties$$[$key$$].type){$found$$=!0;break}$found$$||delete $properties$$[$key$$]}},$state$$=this.editorUi.editor.graph.view.getState($cell$$);null!=$state$$&&null!=$state$$.shape&&($state$$.shape.commonCustomPropAdded||($state$$.shape.commonCustomPropAdded=!0,$state$$.shape.customProperties=$state$$.shape.customProperties||
[],$state$$.cell.vertex?Array.prototype.push.apply($state$$.shape.customProperties,Editor.commonVertexProperties):Array.prototype.push.apply($state$$.shape.customProperties,Editor.commonEdgeProperties)),$handleCustomProp$$($state$$.shape.customProperties));$cell$$=$cell$$.getAttribute("customProperties");if(null!=$cell$$)try{$handleCustomProp$$(JSON.parse($cell$$))}catch($e$$){}}};var $styleFormatPanelInit$$=StyleFormatPanel.prototype.init;StyleFormatPanel.prototype.init=function $StyleFormatPanel$$init$(){var $sstate$$=
this.format.createSelectionState();"image"==$sstate$$.style.shape||$sstate$$.containsLabel||this.container.appendChild(this.addStyles(this.createPanel()));$styleFormatPanelInit$$.apply(this,arguments);if(Editor.enableCustomProperties){for(var $properties$$={},$vertices$$=$sstate$$.vertices,$edges$$=$sstate$$.edges,$i$$=0;$i$$<$vertices$$.length;$i$$++)this.findCommonProperties($vertices$$[$i$$],$properties$$,0==$i$$);for($i$$=0;$i$$<$edges$$.length;$i$$++)this.findCommonProperties($edges$$[$i$$],
$properties$$,0==$vertices$$.length&&0==$i$$);null!=Object.getOwnPropertyNames&&0<Object.getOwnPropertyNames($properties$$).length&&this.container.appendChild(this.addProperties(this.createPanel(),$properties$$,$sstate$$))}};var $styleFormatPanelAddStyleOps$$=StyleFormatPanel.prototype.addStyleOps;StyleFormatPanel.prototype.addStyleOps=function $StyleFormatPanel$$addStyleOps$($div$$){var $btn$$=mxUtils.button(mxResources.get("copyStyle"),mxUtils.bind(this,function($evt$$){this.editorUi.actions.get("copyStyle").funct()}));
$btn$$.setAttribute("title",mxResources.get("copyStyle")+" ("+this.editorUi.actions.get("copyStyle").shortcut+")");$btn$$.style.marginBottom="2px";$btn$$.style.width="100px";$btn$$.style.marginRight="2px";$div$$.appendChild($btn$$);$btn$$=mxUtils.button(mxResources.get("pasteStyle"),mxUtils.bind(this,function($evt$$){this.editorUi.actions.get("pasteStyle").funct()}));$btn$$.setAttribute("title",mxResources.get("pasteStyle")+" ("+this.editorUi.actions.get("pasteStyle").shortcut+")");$btn$$.style.marginBottom=
"2px";$btn$$.style.width="100px";$div$$.appendChild($btn$$);mxUtils.br($div$$);return $styleFormatPanelAddStyleOps$$.apply(this,arguments)};EditorUi.prototype.propertiesCollapsed=!0;StyleFormatPanel.prototype.addProperties=function $StyleFormatPanel$$addProperties$($div$$,$insertElem_properties$$,$j$jscomp$4_state$$){function $applyStyleVal$$($i$$,$newVal$$,$prop$$,$delIndex$$){$graph$$.getModel().beginUpdate();try{var $changedProps$$=[],$changedVals$$=[];if(null!=$prop$$.index){for(var $allVals$$=
[],$curVal$$=$prop$$.parentRow.nextSibling;$curVal$$&&$curVal$$.getAttribute("data-pName")==$i$$;)$allVals$$.push($curVal$$.getAttribute("data-pValue")),$curVal$$=$curVal$$.nextSibling;$prop$$.index<$allVals$$.length?null!=$delIndex$$?$allVals$$.splice($delIndex$$,1):$allVals$$[$prop$$.index]=$newVal$$:$allVals$$.push($newVal$$);null!=$prop$$.size&&$allVals$$.length>$prop$$.size&&($allVals$$=$allVals$$.slice(0,$prop$$.size));$newVal$$=$allVals$$.join(",");null!=$prop$$.countProperty&&($graph$$.setCellStyles($prop$$.countProperty,
$allVals$$.length,$graph$$.getSelectionCells()),$changedProps$$.push($prop$$.countProperty),$changedVals$$.push($allVals$$.length))}$graph$$.setCellStyles($i$$,$newVal$$,$graph$$.getSelectionCells());$changedProps$$.push($i$$);$changedVals$$.push($newVal$$);if(null!=$prop$$.dependentProps)for($i$$=0;$i$$<$prop$$.dependentProps.length;$i$$++){var $defVal$$=$prop$$.dependentPropsDefVal[$i$$],$vals$$=$prop$$.dependentPropsVals[$i$$];if($vals$$.length>$newVal$$)$vals$$=$vals$$.slice(0,$newVal$$);else for(var $j$$=
$vals$$.length;$j$$<$newVal$$;$j$$++)$vals$$.push($defVal$$);$vals$$=$vals$$.join(",");$graph$$.setCellStyles($prop$$.dependentProps[$i$$],$vals$$,$graph$$.getSelectionCells());$changedProps$$.push($prop$$.dependentProps[$i$$]);$changedVals$$.push($vals$$)}if("function"==typeof $prop$$.onChange)$prop$$.onChange($graph$$,$newVal$$);$that$$.editorUi.fireEvent(new mxEventObject("styleChanged","keys",$changedProps$$,"values",$changedVals$$,"cells",$graph$$.getSelectionCells()))}finally{$graph$$.getModel().endUpdate()}}
function $setElementPos$$($td$$,$elem$$,$adjustHeight$$){var $divPos$$=mxUtils.getOffset($div$$,!0),$pos$$=mxUtils.getOffset($td$$,!0);$elem$$.style.position="absolute";$elem$$.style.left=$pos$$.x-$divPos$$.x+"px";$elem$$.style.top=$pos$$.y-$divPos$$.y+"px";$elem$$.style.width=$td$$.offsetWidth+"px";$elem$$.style.height=$td$$.offsetHeight-($adjustHeight$$?4:0)+"px";$elem$$.style.zIndex=5}function $createColorBtn$$($pName$$,$pValue$$,$prop$$){var $clrDiv$$=document.createElement("div");$clrDiv$$.style.width=
"32px";$clrDiv$$.style.height="4px";$clrDiv$$.style.margin="2px";$clrDiv$$.style.border="1px solid black";$clrDiv$$.style.background=$pValue$$&&"none"!=$pValue$$?$pValue$$:"url('"+Dialog.prototype.noColorImage+"')";btn=mxUtils.button("",mxUtils.bind($that$$,function($evt$$){this.editorUi.pickColor($pValue$$,function($color$$){$clrDiv$$.style.background="none"==$color$$?"url('"+Dialog.prototype.noColorImage+"')":$color$$;$applyStyleVal$$($pName$$,$color$$,$prop$$)});mxEvent.consume($evt$$)}));btn.style.height=
"12px";btn.style.width="40px";btn.className="geColorBtn";btn.appendChild($clrDiv$$);return btn}function $createDynArrList$$($pName$$,$pValue$jscomp$2_vals$$,$subType$$,$defVal$$,$countProperty$$,$myRow$$,$flipBkg$$){null!=$pValue$jscomp$2_vals$$&&($pValue$jscomp$2_vals$$=$pValue$jscomp$2_vals$$.split(","),$secondLevel$$.push({name:$pName$$,values:$pValue$jscomp$2_vals$$,type:$subType$$,defVal:$defVal$$,countProperty:$countProperty$$,parentRow:$myRow$$,isDeletable:!0,flipBkg:$flipBkg$$}));btn=mxUtils.button("+",
mxUtils.bind($that$$,function($evt$$){for(var $beforeElem$$=$myRow$$,$arrItem$jscomp$1_index$$=0;null!=$beforeElem$$.nextSibling;)if($beforeElem$$.nextSibling.getAttribute("data-pName")==$pName$$)$beforeElem$$=$beforeElem$$.nextSibling,$arrItem$jscomp$1_index$$++;else break;var $newProp$$={type:$subType$$,parentRow:$myRow$$,index:$arrItem$jscomp$1_index$$,isDeletable:!0,defVal:$defVal$$,countProperty:$countProperty$$},$arrItem$jscomp$1_index$$=$createPropertyRow$$($pName$$,"",$newProp$$,0==$arrItem$jscomp$1_index$$%
2,$flipBkg$$);$applyStyleVal$$($pName$$,$defVal$$,$newProp$$);$beforeElem$$.parentNode.insertBefore($arrItem$jscomp$1_index$$,$beforeElem$$.nextSibling);mxEvent.consume($evt$$)}));btn.style.height="16px";btn.style.width="25px";btn.className="geColorBtn";return btn}function $createStaticArrList$$($pName$$,$curVals_pValue$$,$subType$$,$defVal$$,$size$$,$myRow$$,$flipBkg$$){if(0<$size$$){var $vals$$=Array($size$$);$curVals_pValue$$=null!=$curVals_pValue$$?$curVals_pValue$$.split(","):[];for(var $i$$=
0;$i$$<$size$$;$i$$++)$vals$$[$i$$]=null!=$curVals_pValue$$[$i$$]?$curVals_pValue$$[$i$$]:null!=$defVal$$?$defVal$$:"";$secondLevel$$.push({name:$pName$$,values:$vals$$,type:$subType$$,defVal:$defVal$$,parentRow:$myRow$$,flipBkg:$flipBkg$$,size:$size$$})}return document.createElement("div")}function $createCheckbox$$($pName$$,$pValue$$,$prop$$){var $input$$=document.createElement("input");$input$$.type="checkbox";$input$$.checked="1"==$pValue$$;mxEvent.addListener($input$$,"change",function(){$applyStyleVal$$($pName$$,
$input$$.checked?"1":"0",$prop$$)});return $input$$}function $createPropertyRow$$($pName$$,$pValue$$,$prop$$,$isOdd$$,$delBtn_flipBkg$jscomp$3_i$$){var $op_pDiplayName$$=$prop$$.dispName,$pType$$=$prop$$.type,$row$$=document.createElement("tr");$row$$.className="gePropRow"+($delBtn_flipBkg$jscomp$3_i$$?"Dark":"")+($isOdd$$?"Alt":"")+" gePropNonHeaderRow";$row$$.setAttribute("data-pName",$pName$$);$row$$.setAttribute("data-pValue",$pValue$$);$isOdd$$=!1;null!=$prop$$.index&&($row$$.setAttribute("data-index",
$prop$$.index),$op_pDiplayName$$=(null!=$op_pDiplayName$$?$op_pDiplayName$$:"")+"["+$prop$$.index+"]",$isOdd$$=!0);var $td$$=document.createElement("td");$td$$.className="gePropRowCell";$td$$.innerHTML=mxUtils.htmlEntities(mxResources.get($op_pDiplayName$$,null,$op_pDiplayName$$));$isOdd$$&&($td$$.style.textAlign="right");$row$$.appendChild($td$$);$td$$=document.createElement("td");$td$$.className="gePropRowCell";if("color"==$pType$$)$td$$.appendChild($createColorBtn$$($pName$$,$pValue$$,$prop$$));
else if("bool"==$pType$$||"boolean"==$pType$$)$td$$.appendChild($createCheckbox$$($pName$$,$pValue$$,$prop$$));else if("enum"==$pType$$){var $pEnumList$$=$prop$$.enumList;for($delBtn_flipBkg$jscomp$3_i$$=0;$delBtn_flipBkg$jscomp$3_i$$<$pEnumList$$.length;$delBtn_flipBkg$jscomp$3_i$$++)if($op_pDiplayName$$=$pEnumList$$[$delBtn_flipBkg$jscomp$3_i$$],$op_pDiplayName$$.val==$pValue$$){$td$$.innerHTML=mxUtils.htmlEntities(mxResources.get($op_pDiplayName$$.dispName,null,$op_pDiplayName$$.dispName));break}mxEvent.addListener($td$$,
"click",mxUtils.bind($that$$,function(){var $select$$=document.createElement("select");$setElementPos$$($td$$,$select$$);for(var $i$$=0;$i$$<$pEnumList$$.length;$i$$++){var $op$$=$pEnumList$$[$i$$],$opElem$$=document.createElement("option");$opElem$$.value=mxUtils.htmlEntities($op$$.val);$opElem$$.innerHTML=mxUtils.htmlEntities(mxResources.get($op$$.dispName,null,$op$$.dispName));$select$$.appendChild($opElem$$)}$select$$.value=$pValue$$;$div$$.appendChild($select$$);mxEvent.addListener($select$$,
"change",function(){var $newVal$$=mxUtils.htmlEntities($select$$.value);$applyStyleVal$$($pName$$,$newVal$$,$prop$$)});$select$$.focus();mxEvent.addListener($select$$,"blur",function(){$div$$.removeChild($select$$)})}))}else"dynamicArr"==$pType$$?$td$$.appendChild($createDynArrList$$($pName$$,$pValue$$,$prop$$.subType,$prop$$.subDefVal,$prop$$.countProperty,$row$$,$delBtn_flipBkg$jscomp$3_i$$)):"staticArr"==$pType$$?$td$$.appendChild($createStaticArrList$$($pName$$,$pValue$$,$prop$$.subType,$prop$$.subDefVal,
$prop$$.size,$row$$,$delBtn_flipBkg$jscomp$3_i$$)):($td$$.innerHTML=$pValue$$,mxEvent.addListener($td$$,"click",mxUtils.bind($that$$,function(){function $setInputVal$$(){var $inputVal_newVal$$=$input$$.value,$inputVal_newVal$$=0==$inputVal_newVal$$.length&&"string"!=$pType$$?0:$inputVal_newVal$$;$prop$$.allowAuto&&("auto"==$inputVal_newVal$$.trim().toLowerCase()?($inputVal_newVal$$="auto",$pType$$="string"):($inputVal_newVal$$=parseFloat($inputVal_newVal$$),$inputVal_newVal$$=isNaN($inputVal_newVal$$)?
0:$inputVal_newVal$$));null!=$prop$$.min&&$inputVal_newVal$$<$prop$$.min?$inputVal_newVal$$=$prop$$.min:null!=$prop$$.max&&$inputVal_newVal$$>$prop$$.max&&($inputVal_newVal$$=$prop$$.max);$inputVal_newVal$$=mxUtils.htmlEntities(("int"==$pType$$?parseInt($inputVal_newVal$$):$inputVal_newVal$$)+"");$applyStyleVal$$($pName$$,$inputVal_newVal$$,$prop$$)}var $input$$=document.createElement("input");$setElementPos$$($td$$,$input$$,!0);$input$$.value=$pValue$$;$input$$.className="gePropEditor";"int"!=$pType$$&&
"float"!=$pType$$||$prop$$.allowAuto||($input$$.type="number",$input$$.step="int"==$pType$$?"1":"any",null!=$prop$$.min&&($input$$.min=parseFloat($prop$$.min)),null!=$prop$$.max&&($input$$.max=parseFloat($prop$$.max)));$div$$.appendChild($input$$);mxEvent.addListener($input$$,"keypress",function($e$$){13==$e$$.keyCode&&$setInputVal$$()});$input$$.focus();mxEvent.addListener($input$$,"blur",function(){$setInputVal$$()})})));$prop$$.isDeletable&&($delBtn_flipBkg$jscomp$3_i$$=mxUtils.button("-",mxUtils.bind($that$$,
function($evt$$){$applyStyleVal$$($pName$$,"",$prop$$,$prop$$.index);mxEvent.consume($evt$$)})),$delBtn_flipBkg$jscomp$3_i$$.style.height="16px",$delBtn_flipBkg$jscomp$3_i$$.style.width="25px",$delBtn_flipBkg$jscomp$3_i$$.style["float"]="right",$delBtn_flipBkg$jscomp$3_i$$.className="geColorBtn",$td$$.appendChild($delBtn_flipBkg$jscomp$3_i$$));$row$$.appendChild($td$$);return $row$$}var $that$$=this,$graph$$=this.editorUi.editor.graph,$secondLevel$$=[];$div$$.style.position="relative";$div$$.style.padding=
"0";var $grid$$=document.createElement("table");$grid$$.style.whiteSpace="nowrap";$grid$$.style.width="100%";var $hrow$jscomp$1_prop$$=document.createElement("tr");$hrow$jscomp$1_prop$$.className="gePropHeader";var $i$jscomp$45_th$$=document.createElement("th");$i$jscomp$45_th$$.className="gePropHeaderCell";var $collapseImg$$=document.createElement("img");$collapseImg$$.src=Sidebar.prototype.expandedImage;$i$jscomp$45_th$$.appendChild($collapseImg$$);mxUtils.write($i$jscomp$45_th$$,mxResources.get("property"));
$hrow$jscomp$1_prop$$.style.cursor="pointer";var $onFold$$=function $$onFold$$$(){var $rows$$=$grid$$.querySelectorAll(".gePropNonHeaderRow"),$display$$;if($that$$.editorUi.propertiesCollapsed){$collapseImg$$.src=Sidebar.prototype.collapsedImage;$display$$="none";for(var $e$jscomp$44_r$$=$div$$.childNodes.length-1;0<=$e$jscomp$44_r$$;$e$jscomp$44_r$$--)try{var $child$$=$div$$.childNodes[$e$jscomp$44_r$$],$nodeName$$=$child$$.nodeName.toUpperCase();"INPUT"!=$nodeName$$&&"SELECT"!=$nodeName$$||$div$$.removeChild($child$$)}catch($ex$$){}}else $collapseImg$$.src=
Sidebar.prototype.expandedImage,$display$$="";for($e$jscomp$44_r$$=0;$e$jscomp$44_r$$<$rows$$.length;$e$jscomp$44_r$$++)$rows$$[$e$jscomp$44_r$$].style.display=$display$$};mxEvent.addListener($hrow$jscomp$1_prop$$,"click",function(){$that$$.editorUi.propertiesCollapsed=!$that$$.editorUi.propertiesCollapsed;$onFold$$()});$hrow$jscomp$1_prop$$.appendChild($i$jscomp$45_th$$);$i$jscomp$45_th$$=document.createElement("th");$i$jscomp$45_th$$.className="gePropHeaderCell";$i$jscomp$45_th$$.innerHTML=mxResources.get("value");
$hrow$jscomp$1_prop$$.appendChild($i$jscomp$45_th$$);$grid$$.appendChild($hrow$jscomp$1_prop$$);var $isOdd$$=!1,$flipBkg$$=!1,$arrItem_key$$;for($arrItem_key$$ in $insertElem_properties$$)if($hrow$jscomp$1_prop$$=$insertElem_properties$$[$arrItem_key$$],"function"!=typeof $hrow$jscomp$1_prop$$.isVisible||$hrow$jscomp$1_prop$$.isVisible($j$jscomp$4_state$$)){var $pValue$$=null!=$j$jscomp$4_state$$.style[$arrItem_key$$]?mxUtils.htmlEntities($j$jscomp$4_state$$.style[$arrItem_key$$]+""):$hrow$jscomp$1_prop$$.defVal;
if("separator"==$hrow$jscomp$1_prop$$.type)$flipBkg$$=!$flipBkg$$;else{if("staticArr"==$hrow$jscomp$1_prop$$.type)$hrow$jscomp$1_prop$$.size=parseInt($j$jscomp$4_state$$.style[$hrow$jscomp$1_prop$$.sizeProperty]||$insertElem_properties$$[$hrow$jscomp$1_prop$$.sizeProperty].defVal)||0;else if(null!=$hrow$jscomp$1_prop$$.dependentProps){for(var $dependentProps$$=$hrow$jscomp$1_prop$$.dependentProps,$dependentPropsVals$$=[],$dependentPropsDefVal$$=[],$i$jscomp$45_th$$=0;$i$jscomp$45_th$$<$dependentProps$$.length;$i$jscomp$45_th$$++){var $propVal$$=
$j$jscomp$4_state$$.style[$dependentProps$$[$i$jscomp$45_th$$]];$dependentPropsDefVal$$.push($insertElem_properties$$[$dependentProps$$[$i$jscomp$45_th$$]].subDefVal);$dependentPropsVals$$.push(null!=$propVal$$?$propVal$$.split(","):[])}$hrow$jscomp$1_prop$$.dependentPropsDefVal=$dependentPropsDefVal$$;$hrow$jscomp$1_prop$$.dependentPropsVals=$dependentPropsVals$$}$grid$$.appendChild($createPropertyRow$$($arrItem_key$$,$pValue$$,$hrow$jscomp$1_prop$$,$isOdd$$,$flipBkg$$));$isOdd$$=!$isOdd$$}}for($i$jscomp$45_th$$=
0;$i$jscomp$45_th$$<$secondLevel$$.length;$i$jscomp$45_th$$++)for($hrow$jscomp$1_prop$$=$secondLevel$$[$i$jscomp$45_th$$],$insertElem_properties$$=$hrow$jscomp$1_prop$$.parentRow,$j$jscomp$4_state$$=0;$j$jscomp$4_state$$<$hrow$jscomp$1_prop$$.values.length;$j$jscomp$4_state$$++)$arrItem_key$$=$createPropertyRow$$($hrow$jscomp$1_prop$$.name,$hrow$jscomp$1_prop$$.values[$j$jscomp$4_state$$],{type:$hrow$jscomp$1_prop$$.type,parentRow:$hrow$jscomp$1_prop$$.parentRow,isDeletable:$hrow$jscomp$1_prop$$.isDeletable,
index:$j$jscomp$4_state$$,defVal:$hrow$jscomp$1_prop$$.defVal,countProperty:$hrow$jscomp$1_prop$$.countProperty,size:$hrow$jscomp$1_prop$$.size},0==$j$jscomp$4_state$$%2,$hrow$jscomp$1_prop$$.flipBkg),$insertElem_properties$$.parentNode.insertBefore($arrItem_key$$,$insertElem_properties$$.nextSibling),$insertElem_properties$$=$arrItem_key$$;$div$$.appendChild($grid$$);$onFold$$();return $div$$};StyleFormatPanel.prototype.addStyles=function $StyleFormatPanel$$addStyles$($div$$){function $updateScheme$$($colorsets$$){function $addButton$$($colorset$$){var $btn$$=
mxUtils.button("",function($evt$jscomp$80_i$$){$graph$$.getModel().beginUpdate();try{var $cells$$=$graph$$.getSelectionCells();for($evt$jscomp$80_i$$=0;$evt$jscomp$80_i$$<$cells$$.length;$evt$jscomp$80_i$$++){for(var $style$$=$graph$$.getModel().getStyle($cells$$[$evt$jscomp$80_i$$]),$j$$=0;$j$$<$stylenames$$.length;$j$$++)$style$$=mxUtils.removeStylename($style$$,$stylenames$$[$j$$]);var $defaults$$=$graph$$.getModel().isVertex($cells$$[$evt$jscomp$80_i$$])?$graph$$.defaultVertexStyle:$graph$$.defaultEdgeStyle;
null!=$colorset$$?($style$$=mxUtils.setStyle($style$$,mxConstants.STYLE_GRADIENTCOLOR,$colorset$$.gradient||mxUtils.getValue($defaults$$,mxConstants.STYLE_GRADIENTCOLOR,null)),$style$$=""==$colorset$$.fill?mxUtils.setStyle($style$$,mxConstants.STYLE_FILLCOLOR,null):mxUtils.setStyle($style$$,mxConstants.STYLE_FILLCOLOR,$colorset$$.fill||mxUtils.getValue($defaults$$,mxConstants.STYLE_FILLCOLOR,null)),$style$$=""==$colorset$$.stroke?mxUtils.setStyle($style$$,mxConstants.STYLE_STROKECOLOR,null):mxUtils.setStyle($style$$,
mxConstants.STYLE_STROKECOLOR,$colorset$$.stroke||mxUtils.getValue($defaults$$,mxConstants.STYLE_STROKECOLOR,null)),$graph$$.getModel().isVertex($cells$$[$evt$jscomp$80_i$$])&&($style$$=mxUtils.setStyle($style$$,mxConstants.STYLE_FONTCOLOR,$colorset$$.font||mxUtils.getValue($defaults$$,mxConstants.STYLE_FONTCOLOR,null)))):($style$$=mxUtils.setStyle($style$$,mxConstants.STYLE_FILLCOLOR,mxUtils.getValue($defaults$$,mxConstants.STYLE_FILLCOLOR,"#ffffff")),$style$$=mxUtils.setStyle($style$$,mxConstants.STYLE_STROKECOLOR,
mxUtils.getValue($defaults$$,mxConstants.STYLE_STROKECOLOR,"#000000")),$style$$=mxUtils.setStyle($style$$,mxConstants.STYLE_GRADIENTCOLOR,mxUtils.getValue($defaults$$,mxConstants.STYLE_GRADIENTCOLOR,null)),$graph$$.getModel().isVertex($cells$$[$evt$jscomp$80_i$$])&&($style$$=mxUtils.setStyle($style$$,mxConstants.STYLE_FONTCOLOR,mxUtils.getValue($defaults$$,mxConstants.STYLE_FONTCOLOR,null))));$graph$$.getModel().setStyle($cells$$[$evt$jscomp$80_i$$],$style$$)}}finally{$graph$$.getModel().endUpdate()}});
$btn$$.className="geStyleButton";$btn$$.style.width="36px";$btn$$.style.height="30px";$btn$$.style.margin="0px 6px 6px 0px";if(null!=$colorset$$)null!=$colorset$$.gradient?mxClient.IS_IE&&(mxClient.IS_QUIRKS||10>document.documentMode)?$btn$$.style.filter="progid:DXImageTransform.Microsoft.Gradient(StartColorStr='"+$colorset$$.fill+"', EndColorStr='"+$colorset$$.gradient+"', GradientType=0)":$btn$$.style.backgroundImage="linear-gradient("+$colorset$$.fill+" 0px,"+$colorset$$.gradient+" 100%)":$colorset$$.fill==
mxConstants.NONE?$btn$$.style.background="url('"+Dialog.prototype.noColorImage+"')":$btn$$.style.backgroundColor=""==$colorset$$.fill?mxUtils.getValue($graph$$.defaultVertexStyle,mxConstants.STYLE_FILLCOLOR,"dark"==uiTheme?"#000000":"#ffffff"):$colorset$$.fill||mxUtils.getValue($graph$$.defaultVertexStyle,mxConstants.STYLE_FILLCOLOR,"dark"==uiTheme?"#000000":"#ffffff"),$btn$$.style.border=$colorset$$.stroke==mxConstants.NONE?"1px solid transparent":""==$colorset$$.stroke?"1px solid "+mxUtils.getValue($graph$$.defaultVertexStyle,
mxConstants.STYLE_STROKECOLOR,"dark"!=uiTheme?"#000000":"#ffffff"):"1px solid "+($colorset$$.stroke||mxUtils.getValue($graph$$.defaultVertexStyle,mxConstants.STYLE_STROKECOLOR,"dark"!=uiTheme?"#000000":"#ffffff"));else{var $bg$$=mxUtils.getValue($graph$$.defaultVertexStyle,mxConstants.STYLE_FILLCOLOR,"#ffffff"),$bd$$=mxUtils.getValue($graph$$.defaultVertexStyle,mxConstants.STYLE_STROKECOLOR,"#000000");$btn$$.style.backgroundColor=$bg$$;$btn$$.style.border="1px solid "+$bd$$}$picker$$.appendChild($btn$$)}
$picker$$.innerHTML="";for(var $i$$=0;$i$$<$colorsets$$.length;$i$$++)0<$i$$&&0==mxUtils.mod($i$$,4)&&mxUtils.br($picker$$),$addButton$$($colorsets$$[$i$$])}function $addHoverState$$($elt$$){mxEvent.addListener($elt$$,"mouseenter",function(){$elt$$.style.opacity="1"});mxEvent.addListener($elt$$,"mouseleave",function(){$elt$$.style.opacity="0.5"})}var $graph$$=this.editorUi.editor.graph,$picker$$=document.createElement("div");$picker$$.style.whiteSpace="nowrap";$picker$$.style.paddingLeft="24px";$picker$$.style.paddingRight=
"20px";$div$$.style.paddingLeft="16px";$div$$.style.paddingBottom="6px";$div$$.style.position="relative";$div$$.appendChild($picker$$);var $stylenames$$="plain-gray plain-blue plain-green plain-turquoise plain-orange plain-yellow plain-red plain-pink plain-purple gray blue green turquoise orange yellow red pink purple".split(" ");null==this.editorUi.currentScheme&&(this.editorUi.currentScheme=0);var $left$$=document.createElement("div");$left$$.style.cssText="position:absolute;left:10px;top:8px;bottom:8px;width:20px;margin:4px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);";
mxEvent.addListener($left$$,"click",mxUtils.bind(this,function(){this.editorUi.currentScheme=mxUtils.mod(this.editorUi.currentScheme-1,this.defaultColorSchemes.length);$updateScheme$$(this.defaultColorSchemes[this.editorUi.currentScheme])}));var $right$$=document.createElement("div");$right$$.style.cssText="position:absolute;left:202px;top:8px;bottom:8px;width:20px;margin:4px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);";
1<this.defaultColorSchemes.length&&($div$$.appendChild($left$$),$div$$.appendChild($right$$));mxEvent.addListener($right$$,"click",mxUtils.bind(this,function(){this.editorUi.currentScheme=mxUtils.mod(this.editorUi.currentScheme+1,this.defaultColorSchemes.length);$updateScheme$$(this.defaultColorSchemes[this.editorUi.currentScheme])}));$addHoverState$$($left$$);$addHoverState$$($right$$);$updateScheme$$(this.defaultColorSchemes[this.editorUi.currentScheme]);return $div$$};StyleFormatPanel.prototype.addEditOps=
function $StyleFormatPanel$$addEditOps$($div$$){var $btn2_ss$$=this.format.getSelectionState(),$btn$$=null;1==this.editorUi.editor.graph.getSelectionCount()&&($btn$$=mxUtils.button(mxResources.get("editStyle"),mxUtils.bind(this,function($evt$$){this.editorUi.actions.get("editStyle").funct()})),$btn$$.setAttribute("title",mxResources.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),$btn$$.style.width="202px",$btn$$.style.marginBottom="2px",$div$$.appendChild($btn$$));var $graph$$=
this.editorUi.editor.graph,$state$$=$graph$$.view.getState($graph$$.getSelectionCell());1==$graph$$.getSelectionCount()&&null!=$state$$&&null!=$state$$.shape&&null!=$state$$.shape.stencil?($btn2_ss$$=mxUtils.button(mxResources.get("editShape"),mxUtils.bind(this,function($evt$$){this.editorUi.actions.get("editShape").funct()})),$btn2_ss$$.setAttribute("title",mxResources.get("editShape")),$btn2_ss$$.style.marginBottom="2px",null==$btn$$?$btn2_ss$$.style.width="202px":($btn$$.style.width="100px",$btn2_ss$$.style.width=
"100px",$btn2_ss$$.style.marginLeft="2px"),$div$$.appendChild($btn2_ss$$)):$btn2_ss$$.image&&($btn2_ss$$=mxUtils.button(mxResources.get("editImage"),mxUtils.bind(this,function($evt$$){this.editorUi.actions.get("image").funct()})),$btn2_ss$$.setAttribute("title",mxResources.get("editImage")),$btn2_ss$$.style.marginBottom="2px",null==$btn$$?$btn2_ss$$.style.width="202px":($btn$$.style.width="100px",$btn2_ss$$.style.width="100px",$btn2_ss$$.style.marginLeft="2px"),$div$$.appendChild($btn2_ss$$));return $div$$}}Graph.prototype.defaultThemeName=
"default-style2";Graph.prototype.lastPasteXml=null;Graph.prototype.pasteCounter=0;Graph.prototype.defaultScrollbars="0"!=urlParams.sb;Graph.prototype.defaultPageVisible="0"!=urlParams.pv;Graph.prototype.shadowId="dropShadow";Graph.prototype.svgShadowColor="#3D4574";Graph.prototype.svgShadowOpacity="0.4";Graph.prototype.svgShadowBlur="1.7";Graph.prototype.svgShadowSize="3";Graph.prototype.edgeMode="move"!=urlParams.edge;var $graphInit$$=Graph.prototype.init;Graph.prototype.init=function $Graph$$init$(){function $setMouseEvent$$($evt$$){$mouseEvent$$=
$evt$$;try{if(mxClient.IS_QUIRKS||7==document.documentMode||8==document.documentMode)$mouseEvent$$=document.createEventObject($evt$$),$mouseEvent$$.type=$evt$$.type,$mouseEvent$$.canBubble=$evt$$.canBubble,$mouseEvent$$.cancelable=$evt$$.cancelable,$mouseEvent$$.view=$evt$$.view,$mouseEvent$$.detail=$evt$$.detail,$mouseEvent$$.screenX=$evt$$.screenX,$mouseEvent$$.screenY=$evt$$.screenY,$mouseEvent$$.clientX=$evt$$.clientX,$mouseEvent$$.clientY=$evt$$.clientY,$mouseEvent$$.ctrlKey=$evt$$.ctrlKey,$mouseEvent$$.altKey=
$evt$$.altKey,$mouseEvent$$.shiftKey=$evt$$.shiftKey,$mouseEvent$$.metaKey=$evt$$.metaKey,$mouseEvent$$.button=$evt$$.button,$mouseEvent$$.relatedTarget=$evt$$.relatedTarget}catch($e$$){}}$graphInit$$.apply(this,arguments);var $mouseEvent$$=null;mxEvent.addListener(this.container,"mouseenter",$setMouseEvent$$);mxEvent.addListener(this.container,"mousemove",$setMouseEvent$$);mxEvent.addListener(this.container,"mouseleave",function($evt$$){$mouseEvent$$=null});this.isMouseInsertPoint=function $this$isMouseInsertPoint$(){return null!=
$mouseEvent$$};var $getInsertPoint$$=this.getInsertPoint;this.getInsertPoint=function $this$getInsertPoint$(){return null!=$mouseEvent$$?this.getPointForEvent($mouseEvent$$):$getInsertPoint$$.apply(this,arguments)};var $layoutManagerGetLayout$$=this.layoutManager.getLayout;this.layoutManager.getLayout=function $this$layoutManager$getLayout$($cell$$){var $style$$=this.graph.getCellStyle($cell$$);if(null!=$style$$){if("rack"==$style$$.childLayout){var $rackLayout_tableLayout$$=new mxStackLayout(this.graph,
!1);$rackLayout_tableLayout$$.fill=!0;$rackLayout_tableLayout$$.gridSize="undefined"!==typeof mxRackContainer?mxRackContainer.unitSize:20;$rackLayout_tableLayout$$.marginLeft=$style$$.marginLeft||0;$rackLayout_tableLayout$$.marginRight=$style$$.marginRight||0;$rackLayout_tableLayout$$.marginTop=$style$$.marginTop||0;$rackLayout_tableLayout$$.marginBottom=$style$$.marginBottom||0;$rackLayout_tableLayout$$.allowGaps=$style$$.allowGaps||0;$rackLayout_tableLayout$$.resizeParent=!1;return $rackLayout_tableLayout$$}if("undefined"!==
typeof mxTableLayout&&"tableLayout"==$style$$.childLayout)return $rackLayout_tableLayout$$=new mxTableLayout(this.graph),$rackLayout_tableLayout$$.rows=$style$$.tableRows||2,$rackLayout_tableLayout$$.columns=$style$$.tableColumns||2,$rackLayout_tableLayout$$.colPercentages=$style$$.colPercentages,$rackLayout_tableLayout$$.rowPercentages=$style$$.rowPercentages,$rackLayout_tableLayout$$.equalColumns="1"==mxUtils.getValue($style$$,"equalColumns",$rackLayout_tableLayout$$.colPercentages?"0":"1"),$rackLayout_tableLayout$$.equalRows=
"1"==mxUtils.getValue($style$$,"equalRows",$rackLayout_tableLayout$$.rowPercentages?"0":"1"),$rackLayout_tableLayout$$.resizeParent="1"==mxUtils.getValue($style$$,"resizeParent","1"),$rackLayout_tableLayout$$.border=$style$$.tableBorder||$rackLayout_tableLayout$$.border,$rackLayout_tableLayout$$.marginLeft=$style$$.marginLeft||0,$rackLayout_tableLayout$$.marginRight=$style$$.marginRight||0,$rackLayout_tableLayout$$.marginTop=$style$$.marginTop||0,$rackLayout_tableLayout$$.marginBottom=$style$$.marginBottom||
0,$rackLayout_tableLayout$$.autoAddCol="1"==mxUtils.getValue($style$$,"autoAddCol","0"),$rackLayout_tableLayout$$.autoAddRow="1"==mxUtils.getValue($style$$,"autoAddRow",$rackLayout_tableLayout$$.autoAddCol?"0":"1"),$rackLayout_tableLayout$$.colWidths=$style$$.colWidths||"100",$rackLayout_tableLayout$$.rowHeights=$style$$.rowHeights||"50",$rackLayout_tableLayout$$}return $layoutManagerGetLayout$$.apply(this,arguments)}};var $graphGetSvg$$=Graph.prototype.getSvg;Graph.prototype.getSvg=function $Graph$$getSvg$(){var $temp$$=
null;if(null!=this.themes&&"darkTheme"==this.defaultThemeName){$temp$$=this.stylesheet;this.stylesheet=new mxStylesheet;var $node$jscomp$11_result$$=this.themes["default-style2"];(new mxCodec($node$jscomp$11_result$$.ownerDocument)).decode($node$jscomp$11_result$$,this.getStylesheet());this.refresh()}$node$jscomp$11_result$$=$graphGetSvg$$.apply(this,arguments);null!=$temp$$&&(this.stylesheet=$temp$$,this.refresh());return $node$jscomp$11_result$$};var $graphIsCssTransformsSupported$$=Graph.prototype.isCssTransformsSupported;
Graph.prototype.isCssTransformsSupported=function $Graph$$isCssTransformsSupported$(){return $graphIsCssTransformsSupported$$.apply(this,arguments)&&!mxClient.IS_SF};var $graphGetGlobalVariable$jscomp$0$$=Graph.prototype.getGlobalVariable;Graph.prototype.getGlobalVariable=function $Graph$$getGlobalVariable$($name$$){var $val$$=$graphGetGlobalVariable$jscomp$0$$.apply(this,arguments);if(null==$val$$){if(null==this.globalUrlVars&&null!=urlParams.vars)try{this.globalUrlVars=JSON.parse(decodeURIComponent(urlParams.vars))}catch($e$$){null!=
window.console&&console.log("Error in vars URL parameter: "+$e$$)}null!=this.globalUrlVars&&($val$$=this.globalUrlVars[$name$$])}return $val$$};var $graphViewValidateBackgroundPage$$=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function $mxGraphView$$validateBackgroundPage$(){$graphViewValidateBackgroundPage$$.apply(this,arguments);if(mxClient.IS_GC&&null!=this.getDrawPane()){var $g$$=this.getDrawPane().parentNode;!this.graph.mathEnabled||mxClient.NO_FO||
null!=this.webKitForceRepaintNode&&null!=this.webKitForceRepaintNode.parentNode||"svg"!=this.graph.container.firstChild.nodeName?null==this.webKitForceRepaintNode||this.graph.mathEnabled&&("svg"==this.graph.container.firstChild.nodeName||this.graph.container.firstChild==this.webKitForceRepaintNode)||(null!=this.webKitForceRepaintNode.parentNode&&this.webKitForceRepaintNode.parentNode.removeChild(this.webKitForceRepaintNode),this.webKitForceRepaintNode=null):(this.webKitForceRepaintNode=document.createElement("div"),
this.webKitForceRepaintNode.style.cssText="position:absolute;",$g$$.ownerSVGElement.parentNode.insertBefore(this.webKitForceRepaintNode,$g$$.ownerSVGElement))}};var $graphLoadStylesheet$$=Graph.prototype.loadStylesheet;Graph.prototype.loadStylesheet=function $Graph$$loadStylesheet$(){$graphLoadStylesheet$$.apply(this,arguments);this.currentStyle="default-style2"};Graph.prototype.handleCustomLink=function $Graph$$handleCustomLink$($action$jscomp$2_href$$){if("data:action/json,"==$action$jscomp$2_href$$.substring(0,
17)&&($action$jscomp$2_href$$=JSON.parse($action$jscomp$2_href$$.substring(17)),null!=$action$jscomp$2_href$$.actions)){for(var $i$$=0;$i$$<$action$jscomp$2_href$$.actions.length;$i$$++)if(null!=$action$jscomp$2_href$$.actions[$i$$].open)if(this.isCustomLink($action$jscomp$2_href$$.actions[$i$$].open)){if(!this.customLinkClicked($action$jscomp$2_href$$.actions[$i$$].open))return}else this.openLink($action$jscomp$2_href$$.actions[$i$$].open);this.model.beginUpdate();try{for($i$$=0;$i$$<$action$jscomp$2_href$$.actions.length;$i$$++)this.handleLinkAction($action$jscomp$2_href$$.actions[$i$$])}finally{this.model.endUpdate()}}};
Graph.prototype.handleLinkAction=function $Graph$$handleLinkAction$($action$$){var $cells$$=[];null!=$action$$.select&&this.isEnabled()&&($cells$$=this.getCellsForAction($action$$.select),this.setSelectionCells($cells$$));null!=$action$$.highlight&&($cells$$=this.getCellsForAction($action$$.highlight),this.highlightCells($cells$$,$action$$.highlight.color,$action$$.highlight.duration,$action$$.highlight.opacity));null!=$action$$.toggle&&this.toggleCells(this.getCellsForAction($action$$.toggle,!0));
null!=$action$$.show&&this.setCellsVisible(this.getCellsForAction($action$$.show,!0),!0);null!=$action$$.hide&&this.setCellsVisible(this.getCellsForAction($action$$.hide,!0),!1);null!=$action$$.scroll&&($cells$$=this.getCellsForAction($action$$.scroll));0<$cells$$.length&&this.scrollCellToVisible($cells$$[0])};Graph.prototype.getCellsForAction=function $Graph$$getCellsForAction$($action$$,$includeLayers$$){return this.getCellsById($action$$.cells).concat(this.getCellsForTags($action$$.tags,null,null,
$includeLayers$$))};Graph.prototype.getCellsById=function $Graph$$getCellsById$($ids$$){var $result$$=[];if(null!=$ids$$)for(var $i$$=0;$i$$<$ids$$.length;$i$$++)if("*"==$ids$$[$i$$])var $parent$$=this.getDefaultParent(),$result$$=$result$$.concat(this.model.filterDescendants(function($cell$$){return $cell$$!=$parent$$},$parent$$));else{var $cell$jscomp$0$$=this.model.getCell($ids$$[$i$$]);null!=$cell$jscomp$0$$&&$result$$.push($cell$jscomp$0$$)}return $result$$};Graph.prototype.getCellsForTags=function $Graph$$getCellsForTags$($tagList$$,
$cells$$,$propertyName$$,$includeLayers$$){var $result$$=[];if(null!=$tagList$$){$cells$$=null!=$cells$$?$cells$$:this.model.getDescendants(this.model.getRoot());$propertyName$$=null!=$propertyName$$?$propertyName$$:"tags";for(var $i$$=0;$i$$<$cells$$.length;$i$$++)if($includeLayers$$&&this.model.getParent($cells$$[$i$$])==this.model.root||this.model.isVertex($cells$$[$i$$])||this.model.isEdge($cells$$[$i$$])){var $tags$jscomp$1_tmp$$=null!=$cells$$[$i$$].value&&"object"==typeof $cells$$[$i$$].value?
mxUtils.trim($cells$$[$i$$].value.getAttribute($propertyName$$)||""):"",$match$$=!0;if(0<$tags$jscomp$1_tmp$$.length)for(var $tags$jscomp$1_tmp$$=$tags$jscomp$1_tmp$$.toLowerCase().split(" "),$j$$=0;$j$$<$tagList$$.length&&$match$$;$j$$++)var $tag$$=mxUtils.trim($tagList$$[$j$$]).toLowerCase(),$match$$=$match$$&&(0==$tag$$.length||0<=mxUtils.indexOf($tags$jscomp$1_tmp$$,$tag$$));else $match$$=0==$tagList$$.length;$match$$&&$result$$.push($cells$$[$i$$])}}return $result$$};Graph.prototype.toggleCells=
function $Graph$$toggleCells$($cells$$){this.model.beginUpdate();try{for(var $i$$=0;$i$$<$cells$$.length;$i$$++)this.model.setVisible($cells$$[$i$$],!this.model.isVisible($cells$$[$i$$]))}finally{this.model.endUpdate()}};Graph.prototype.setCellsVisible=function $Graph$$setCellsVisible$($cells$$,$visible$$){this.model.beginUpdate();try{for(var $i$$=0;$i$$<$cells$$.length;$i$$++)this.model.setVisible($cells$$[$i$$],$visible$$)}finally{this.model.endUpdate()}};Graph.prototype.highlightCells=function $Graph$$highlightCells$($cells$$,
$color$$,$duration$$,$opacity$$){for(var $i$$=0;$i$$<$cells$$.length;$i$$++)this.highlightCell($cells$$[$i$$],$color$$,$duration$$,$opacity$$)};Graph.prototype.highlightCell=function $Graph$$highlightCell$($cell$jscomp$9_state$$,$color$$,$duration$$,$opacity$$){$color$$=null!=$color$$?$color$$:mxConstants.DEFAULT_VALID_COLOR;$duration$$=null!=$duration$$?$duration$$:1E3;$cell$jscomp$9_state$$=this.view.getState($cell$jscomp$9_state$$);if(null!=$cell$jscomp$9_state$$){var $sw$$=Math.max(5,mxUtils.getValue($cell$jscomp$9_state$$.style,
mxConstants.STYLE_STROKEWIDTH,1)+4),$hl$$=new mxCellHighlight(this,$color$$,$sw$$,!1);null!=$opacity$$&&($hl$$.opacity=$opacity$$);$hl$$.highlight($cell$jscomp$9_state$$);window.setTimeout(function(){null!=$hl$$.shape&&(mxUtils.setPrefixedStyle($hl$$.shape.node.style,"transition","all 1200ms ease-in-out"),$hl$$.shape.node.style.opacity=0);window.setTimeout(function(){$hl$$.destroy()},1200)},$duration$$)}};Graph.prototype.addSvgShadow=function $Graph$$addSvgShadow$($svgRoot$$,$group_tokens$$,$createOnly$$){$createOnly$$=
null!=$createOnly$$?$createOnly$$:!1;var $defsElt_svgDoc$$=$svgRoot$$.ownerDocument,$filter$$=null!=$defsElt_svgDoc$$.createElementNS?$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,"filter"):$defsElt_svgDoc$$.createElement("filter");$filter$$.setAttribute("id",this.shadowId);var $blur_composite_defs$jscomp$1_feBlend_flood_offset$$=null!=$defsElt_svgDoc$$.createElementNS?$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,"feGaussianBlur"):$defsElt_svgDoc$$.createElement("feGaussianBlur");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("in",
"SourceAlpha");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("stdDeviation",this.svgShadowBlur);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("result","blur");$filter$$.appendChild($blur_composite_defs$jscomp$1_feBlend_flood_offset$$);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$=null!=$defsElt_svgDoc$$.createElementNS?$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,"feOffset"):$defsElt_svgDoc$$.createElement("feOffset");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("in",
"blur");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("dx",this.svgShadowSize);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("dy",this.svgShadowSize);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("result","offsetBlur");$filter$$.appendChild($blur_composite_defs$jscomp$1_feBlend_flood_offset$$);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$=null!=$defsElt_svgDoc$$.createElementNS?$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,
"feFlood"):$defsElt_svgDoc$$.createElement("feFlood");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("flood-color",this.svgShadowColor);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("flood-opacity",this.svgShadowOpacity);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("result","offsetColor");$filter$$.appendChild($blur_composite_defs$jscomp$1_feBlend_flood_offset$$);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$=null!=$defsElt_svgDoc$$.createElementNS?
$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,"feComposite"):$defsElt_svgDoc$$.createElement("feComposite");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("in","offsetColor");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("in2","offsetBlur");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("operator","in");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("result","offsetBlur");$filter$$.appendChild($blur_composite_defs$jscomp$1_feBlend_flood_offset$$);
$blur_composite_defs$jscomp$1_feBlend_flood_offset$$=null!=$defsElt_svgDoc$$.createElementNS?$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,"feBlend"):$defsElt_svgDoc$$.createElement("feBlend");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("in","SourceGraphic");$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.setAttribute("in2","offsetBlur");$filter$$.appendChild($blur_composite_defs$jscomp$1_feBlend_flood_offset$$);$blur_composite_defs$jscomp$1_feBlend_flood_offset$$=
$svgRoot$$.getElementsByTagName("defs");0==$blur_composite_defs$jscomp$1_feBlend_flood_offset$$.length?($defsElt_svgDoc$$=null!=$defsElt_svgDoc$$.createElementNS?$defsElt_svgDoc$$.createElementNS(mxConstants.NS_SVG,"defs"):$defsElt_svgDoc$$.createElement("defs"),null!=$svgRoot$$.firstChild?$svgRoot$$.insertBefore($defsElt_svgDoc$$,$svgRoot$$.firstChild):$svgRoot$$.appendChild($defsElt_svgDoc$$)):$defsElt_svgDoc$$=$blur_composite_defs$jscomp$1_feBlend_flood_offset$$[0];$defsElt_svgDoc$$.appendChild($filter$$);
$createOnly$$||($group_tokens$$=null!=$group_tokens$$?$group_tokens$$:$svgRoot$$.getElementsByTagName("g")[0],null!=$group_tokens$$&&($group_tokens$$.setAttribute("filter","url(#"+this.shadowId+")"),isNaN(parseInt($svgRoot$$.getAttribute("width")))||($svgRoot$$.setAttribute("width",parseInt($svgRoot$$.getAttribute("width"))+6),$svgRoot$$.setAttribute("height",parseInt($svgRoot$$.getAttribute("height"))+6),$group_tokens$$=$svgRoot$$.getAttribute("viewBox"),null!=$group_tokens$$&&0<$group_tokens$$.length&&
($group_tokens$$=$group_tokens$$.split(" "),3<$group_tokens$$.length&&(w=parseFloat($group_tokens$$[2])+6,h=parseFloat($group_tokens$$[3])+6,$svgRoot$$.setAttribute("viewBox",$group_tokens$$[0]+" "+$group_tokens$$[1]+" "+w+" "+h))))));return $filter$$};Graph.prototype.setShadowVisible=function $Graph$$setShadowVisible$($value$$,$fireEvent$$){mxClient.IS_SVG&&($fireEvent$$=null!=$fireEvent$$?$fireEvent$$:!0,(this.shadowVisible=$value$$)?this.view.getDrawPane().setAttribute("filter","url(#"+this.shadowId+
")"):this.view.getDrawPane().removeAttribute("filter"),$fireEvent$$&&this.fireEvent(new mxEventObject("shadowVisibleChanged")))};Graph.prototype.selectUnlockedLayer=function $Graph$$selectUnlockedLayer$(){if(null==this.defaultParent){var $childCount$$=this.model.getChildCount(this.model.root),$cell$$,$index$$=0;do $cell$$=this.model.getChildAt(this.model.root,$index$$);while($index$$++<$childCount$$&&"1"==mxUtils.getValue(this.getCellStyle($cell$$),"locked","0"));null!=$cell$$&&this.setDefaultParent($cell$$)}};
mxStencilRegistry.libraries.mockup=[SHAPES_PATH+"/mockup/mxMockupButtons.js"];mxStencilRegistry.libraries.arrows2=[SHAPES_PATH+"/mxArrows.js"];mxStencilRegistry.libraries.atlassian=[STENCIL_PATH+"/atlassian.xml",SHAPES_PATH+"/mxAtlassian.js"];mxStencilRegistry.libraries.bpmn=[SHAPES_PATH+"/bpmn/mxBpmnShape2.js",STENCIL_PATH+"/bpmn.xml"];mxStencilRegistry.libraries.dfd=[SHAPES_PATH+"/mxDFD.js"];mxStencilRegistry.libraries.er=[SHAPES_PATH+"/er/mxER.js"];mxStencilRegistry.libraries.flowchart=[SHAPES_PATH+
"/mxFlowchart.js",STENCIL_PATH+"/flowchart.xml"];mxStencilRegistry.libraries.ios=[SHAPES_PATH+"/mockup/mxMockupiOS.js"];mxStencilRegistry.libraries.rackGeneral=[SHAPES_PATH+"/rack/mxRack.js",STENCIL_PATH+"/rack/general.xml"];mxStencilRegistry.libraries.rackF5=[STENCIL_PATH+"/rack/f5.xml"];mxStencilRegistry.libraries.lean_mapping=[SHAPES_PATH+"/mxLeanMap.js",STENCIL_PATH+"/lean_mapping.xml"];mxStencilRegistry.libraries.basic=[SHAPES_PATH+"/mxBasic.js",STENCIL_PATH+"/basic.xml"];mxStencilRegistry.libraries.ios7icons=
[STENCIL_PATH+"/ios7/icons.xml"];mxStencilRegistry.libraries.ios7ui=[SHAPES_PATH+"/ios7/mxIOS7Ui.js",STENCIL_PATH+"/ios7/misc.xml"];mxStencilRegistry.libraries.android=[SHAPES_PATH+"/mxAndroid.js",STENCIL_PATH+"/android/android.xml"];mxStencilRegistry.libraries["electrical/miscellaneous"]=[SHAPES_PATH+"/mxElectrical.js",STENCIL_PATH+"/electrical/miscellaneous.xml"];mxStencilRegistry.libraries["electrical/transmission"]=[SHAPES_PATH+"/mxElectrical.js",STENCIL_PATH+"/electrical/transmission.xml"];mxStencilRegistry.libraries["electrical/logic_gates"]=
[SHAPES_PATH+"/mxElectrical.js",STENCIL_PATH+"/electrical/logic_gates.xml"];mxStencilRegistry.libraries["electrical/abstract"]=[SHAPES_PATH+"/mxElectrical.js",STENCIL_PATH+"/electrical/abstract.xml"];mxStencilRegistry.libraries.infographic=[SHAPES_PATH+"/mxInfographic.js"];mxStencilRegistry.libraries["mockup/buttons"]=[SHAPES_PATH+"/mockup/mxMockupButtons.js"];mxStencilRegistry.libraries["mockup/containers"]=[SHAPES_PATH+"/mockup/mxMockupContainers.js"];mxStencilRegistry.libraries["mockup/forms"]=
[SHAPES_PATH+"/mockup/mxMockupForms.js"];mxStencilRegistry.libraries["mockup/graphics"]=[SHAPES_PATH+"/mockup/mxMockupGraphics.js",STENCIL_PATH+"/mockup/misc.xml"];mxStencilRegistry.libraries["mockup/markup"]=[SHAPES_PATH+"/mockup/mxMockupMarkup.js"];mxStencilRegistry.libraries["mockup/misc"]=[SHAPES_PATH+"/mockup/mxMockupMisc.js",STENCIL_PATH+"/mockup/misc.xml"];mxStencilRegistry.libraries["mockup/navigation"]=[SHAPES_PATH+"/mockup/mxMockupNavigation.js",STENCIL_PATH+"/mockup/misc.xml"];mxStencilRegistry.libraries["mockup/text"]=
[SHAPES_PATH+"/mockup/mxMockupText.js"];mxStencilRegistry.libraries.floorplan=[SHAPES_PATH+"/mxFloorplan.js",STENCIL_PATH+"/floorplan.xml"];mxStencilRegistry.libraries.bootstrap=[SHAPES_PATH+"/mxBootstrap.js",STENCIL_PATH+"/bootstrap.xml"];mxStencilRegistry.libraries.gmdl=[SHAPES_PATH+"/mxGmdl.js",STENCIL_PATH+"/gmdl.xml"];mxStencilRegistry.libraries.gcp2=[SHAPES_PATH+"/mxGCP2.js",STENCIL_PATH+"/gcp2.xml"];mxStencilRegistry.libraries.cabinets=[SHAPES_PATH+"/mxCabinets.js",STENCIL_PATH+"/cabinets.xml"];
mxStencilRegistry.libraries.archimate=[SHAPES_PATH+"/mxArchiMate.js"];mxStencilRegistry.libraries.archimate3=[SHAPES_PATH+"/mxArchiMate3.js"];mxStencilRegistry.libraries.sysml=[SHAPES_PATH+"/mxSysML.js"];mxStencilRegistry.libraries.eip=[SHAPES_PATH+"/mxEip.js",STENCIL_PATH+"/eip.xml"];mxStencilRegistry.libraries.networks=[SHAPES_PATH+"/mxNetworks.js",STENCIL_PATH+"/networks.xml"];mxStencilRegistry.libraries.aws3d=[SHAPES_PATH+"/mxAWS3D.js",STENCIL_PATH+"/aws3d.xml"];mxStencilRegistry.libraries.aws4=
[SHAPES_PATH+"/mxAWS4.js",STENCIL_PATH+"/aws4.xml"];mxStencilRegistry.libraries.aws4b=[SHAPES_PATH+"/mxAWS4.js",STENCIL_PATH+"/aws4.xml"];mxStencilRegistry.libraries.veeam=[STENCIL_PATH+"/veeam/2d.xml",STENCIL_PATH+"/veeam/3d.xml",STENCIL_PATH+"/veeam/veeam.xml"];mxStencilRegistry.libraries.pid2inst=[SHAPES_PATH+"/pid2/mxPidInstruments.js"];mxStencilRegistry.libraries.pid2misc=[SHAPES_PATH+"/pid2/mxPidMisc.js",STENCIL_PATH+"/pid/misc.xml"];mxStencilRegistry.libraries.pid2valves=[SHAPES_PATH+"/pid2/mxPidValves.js"];
mxStencilRegistry.libraries.pidFlowSensors=[STENCIL_PATH+"/pid/flow_sensors.xml"];mxMarker.getPackageForType=function $mxMarker$getPackageForType$($type$$){var $name$$=null;null!=$type$$&&0<$type$$.length&&("ER"==$type$$.substring(0,2)?$name$$="mxgraph.er":"sysML"==$type$$.substring(0,5)&&($name$$="mxgraph.sysml"));return $name$$};var $mxMarkerCreateMarker$$=mxMarker.createMarker;mxMarker.createMarker=function $mxMarker$createMarker$($canvas$$,$shape$$,$type$$,$pe$$,$unitX$$,$unitY$$,$size$$,$source$$,
$sw$$,$filled$$){if(null!=$type$$&&null==mxMarker.markers[$type$$]){var $name$$=this.getPackageForType($type$$);null!=$name$$&&mxStencilRegistry.getStencil($name$$)}return $mxMarkerCreateMarker$$.apply(this,arguments)};PrintDialog.prototype.create=function $PrintDialog$$create$($editorUi$$,$titleText$$){function $validatePageRange$$(){$pagesToInput$$.value=Math.max(1,Math.min($pageCount$$,Math.max(parseInt($pagesToInput$$.value),parseInt($pagesFromInput$$.value))));$pagesFromInput$$.value=Math.max(1,
Math.min($pageCount$$,Math.min(parseInt($pagesToInput$$.value),parseInt($pagesFromInput$$.value))))}function $preview$$($print$$){function $printGraph$$($file$$,$pv$$,$forcePageBreaks$$){var $gb_layout$$=$file$$.getGraphBounds(),$x0$$=0,$y0$$=0,$bg$$=$accessor$$.get(),$h$jscomp$22_scale$$=1/$file$$.pageScale,$autoOrigin$$=$fitRadio$$.checked;if($autoOrigin$$)var $h$jscomp$22_scale$$=parseInt($sheetsAcrossInput$$.value),$v$$=parseInt($sheetsDownInput$$.value),$h$jscomp$22_scale$$=Math.min($bg$$.height*
$v$$/($gb_layout$$.height/$file$$.view.scale),$bg$$.width*$h$jscomp$22_scale$$/($gb_layout$$.width/$file$$.view.scale));else $h$jscomp$22_scale$$=parseInt($zoomInput$$.value)/(100*$file$$.pageScale),isNaN($h$jscomp$22_scale$$)&&($printScale$$=1/$file$$.pageScale,$zoomInput$$.value="100 %");$bg$$=mxRectangle.fromRectangle($bg$$);$bg$$.width=Math.ceil($bg$$.width*$printScale$$);$bg$$.height=Math.ceil($bg$$.height*$printScale$$);$h$jscomp$22_scale$$*=$printScale$$;!$autoOrigin$$&&$file$$.pageVisible?
($gb_layout$$=$file$$.getPageLayout(),$x0$$-=$gb_layout$$.x*$bg$$.width,$y0$$-=$gb_layout$$.y*$bg$$.height):$autoOrigin$$=!0;if(null==$pv$$){$pv$$=PrintDialog.createPrintPreview($file$$,$h$jscomp$22_scale$$,$bg$$,0,$x0$$,$y0$$,$autoOrigin$$);$pv$$.pageSelector=!1;$pv$$.mathEnabled=!1;$file$$=$editorUi$$.getCurrentFile();null!=$file$$&&($pv$$.title=$file$$.getTitle());var $writeHead$$=$pv$$.writeHead;$pv$$.writeHead=function $$pv$$$writeHead$($doc$$){$writeHead$$.apply(this,arguments);null!=$editorUi$$.editor.fontCss&&
($doc$$.writeln('<style type="text/css">'),$doc$$.writeln($editorUi$$.editor.fontCss),$doc$$.writeln("</style>"))};if("undefined"!==typeof MathJax){var $printPreviewRenderPage$$=$pv$$.renderPage;$pv$$.renderPage=function $$pv$$$renderPage$($w$$,$h$$,$dx$$,$dy$$,$content$$,$pageNumber$$){var $prev$$=mxClient.NO_FO;mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath?!0:this.originalNoForeignObject;var $result$$=$printPreviewRenderPage$$.apply(this,arguments);mxClient.NO_FO=$prev$$;
this.graph.mathEnabled?this.mathEnabled=this.mathEnabled||!0:$result$$.className="geDisableMathJax";return $result$$}}$pv$$.open(null,null,$forcePageBreaks$$,!0)}else{$bg$$=$file$$.background;if(null==$bg$$||""==$bg$$||$bg$$==mxConstants.NONE)$bg$$="#ffffff";$pv$$.backgroundColor=$bg$$;$pv$$.autoOrigin=$autoOrigin$$;$pv$$.appendGraph($file$$,$h$jscomp$22_scale$$,$x0$$,$y0$$,$forcePageBreaks$$,!0)}return $pv$$}var $printScale$$=parseInt($pageScaleInput$$.value)/100;isNaN($printScale$$)&&($printScale$$=
1,$pageScaleInput$$.value="100 %");var $printScale$$=.75*$printScale$$,$pagesFrom_tempGraph$$=$pagesFromInput$$.value,$pageVisible_pagesTo$$=$pagesToInput$$.value,$doc$jscomp$0$$=!$allPagesRadio$$.checked,$pv$$=null;$doc$jscomp$0$$&&($doc$jscomp$0$$=$pagesFrom_tempGraph$$==$currentPage$$&&$pageVisible_pagesTo$$==$currentPage$$);if(!$doc$jscomp$0$$&&null!=$editorUi$$.pages&&$editorUi$$.pages.length){var $i0_mathEnabled$$=0,$doc$jscomp$0$$=$editorUi$$.pages.length-1;$allPagesRadio$$.checked||($i0_mathEnabled$$=
parseInt($pagesFrom_tempGraph$$)-1,$doc$jscomp$0$$=parseInt($pageVisible_pagesTo$$)-1);for(var $i$$=$i0_mathEnabled$$;$i$$<=$doc$jscomp$0$$;$i$$++){var $page$$=$editorUi$$.pages[$i$$],$pagesFrom_tempGraph$$=$page$$==$editorUi$$.currentPage?$graph$$:null;if(null==$pagesFrom_tempGraph$$){var $pagesFrom_tempGraph$$=$editorUi$$.createTemporaryGraph($graph$$.getStylesheet()),$pageVisible_pagesTo$$=!0,$i0_mathEnabled$$=!1,$bg$jscomp$0$$=null,$bgImage$$=null;null==$page$$.viewState&&null==$page$$.root&&
$editorUi$$.updatePageRoot($page$$);null!=$page$$.viewState&&($pageVisible_pagesTo$$=$page$$.viewState.pageVisible,$i0_mathEnabled$$=$page$$.viewState.mathEnabled,$bg$jscomp$0$$=$page$$.viewState.background,$bgImage$$=$page$$.viewState.backgroundImage);$pagesFrom_tempGraph$$.background=$bg$jscomp$0$$;$pagesFrom_tempGraph$$.backgroundImage=null!=$bgImage$$?new mxImage($bgImage$$.src,$bgImage$$.width,$bgImage$$.height):null;$pagesFrom_tempGraph$$.pageVisible=$pageVisible_pagesTo$$;$pagesFrom_tempGraph$$.mathEnabled=
$i0_mathEnabled$$;var $graphGetGlobalVariable$$=$pagesFrom_tempGraph$$.getGlobalVariable;$pagesFrom_tempGraph$$.getGlobalVariable=function $$pagesFrom_tempGraph$$$getGlobalVariable$($name$$){return"page"==$name$$?$page$$.getName():"pagenumber"==$name$$?$i$$+1:$graphGetGlobalVariable$$.apply(this,arguments)};document.body.appendChild($pagesFrom_tempGraph$$.container);$editorUi$$.updatePageRoot($page$$);$pagesFrom_tempGraph$$.model.setRoot($page$$.root)}$pv$$=$printGraph$$($pagesFrom_tempGraph$$,$pv$$,
$i$$!=$doc$jscomp$0$$);$pagesFrom_tempGraph$$!=$graph$$&&$pagesFrom_tempGraph$$.container.parentNode.removeChild($pagesFrom_tempGraph$$.container)}}else $pv$$=$printGraph$$($graph$$);null==$pv$$?$editorUi$$.handleError({message:mxResources.get("errorUpdatingPreview")}):($pv$$.mathEnabled&&($doc$jscomp$0$$=$pv$$.wnd.document,$doc$jscomp$0$$.writeln('<script type="text/x-mathjax-config">'),$doc$jscomp$0$$.writeln("MathJax.Hub.Config({"),$doc$jscomp$0$$.writeln("showMathMenu: false,"),$doc$jscomp$0$$.writeln('messageStyle: "none",'),
$doc$jscomp$0$$.writeln('jax: ["input/TeX", "input/MathML", "input/AsciiMath", "output/HTML-CSS"],'),$doc$jscomp$0$$.writeln('extensions: ["tex2jax.js", "mml2jax.js", "asciimath2jax.js"],'),$doc$jscomp$0$$.writeln('"HTML-CSS": {'),$doc$jscomp$0$$.writeln("imageFont: null"),$doc$jscomp$0$$.writeln("},"),$doc$jscomp$0$$.writeln("TeX: {"),$doc$jscomp$0$$.writeln('extensions: ["AMSmath.js", "AMSsymbols.js", "noErrors.js", "noUndefined.js"]'),$doc$jscomp$0$$.writeln("},"),$doc$jscomp$0$$.writeln("tex2jax: {"),
$doc$jscomp$0$$.writeln('\tignoreClass: "geDisableMathJax"'),$doc$jscomp$0$$.writeln("},"),$doc$jscomp$0$$.writeln("asciimath2jax: {"),$doc$jscomp$0$$.writeln('\tignoreClass: "geDisableMathJax"'),$doc$jscomp$0$$.writeln("}"),$doc$jscomp$0$$.writeln("});"),$print$$&&($doc$jscomp$0$$.writeln("MathJax.Hub.Queue(function () {"),$doc$jscomp$0$$.writeln("window.print();"),$doc$jscomp$0$$.writeln("});")),$doc$jscomp$0$$.writeln("\x3c/script>"),$doc$jscomp$0$$.writeln('<script type="text/javascript" src="'+
DRAW_MATH_URL+'/MathJax.js">\x3c/script>')),$pv$$.closeDocument(),!$pv$$.mathEnabled&&$print$$&&PrintDialog.printPreview($pv$$))}var $graph$$=$editorUi$$.editor.graph,$div$$=document.createElement("div"),$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("h3");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.width="100%";$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.textAlign="center";$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.marginTop=
"0px";mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,$titleText$$||mxResources.get("print"));$div$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);var $pageCount$$=1,$currentPage$$=1,$cancelBtn$$=document.createElement("div");$cancelBtn$$.style.cssText="border-bottom:1px solid lightGray;padding-bottom:12px;margin-bottom:12px;";var $allPagesRadio$$=document.createElement("input");$allPagesRadio$$.style.cssText="margin-right:8px;margin-bottom:8px;";
$allPagesRadio$$.setAttribute("value","all");$allPagesRadio$$.setAttribute("type","radio");$allPagesRadio$$.setAttribute("name","pages-printdialog");$cancelBtn$$.appendChild($allPagesRadio$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("printAllPages"));$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);mxUtils.br($cancelBtn$$);
var $pagesRadio$$=$allPagesRadio$$.cloneNode(!0);$allPagesRadio$$.setAttribute("checked","checked");$pagesRadio$$.setAttribute("value","range");$cancelBtn$$.appendChild($pagesRadio$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("pages")+":");$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);var $pagesFromInput$$=
document.createElement("input");$pagesFromInput$$.style.cssText="margin:0 8px 0 8px;";$pagesFromInput$$.setAttribute("value","1");$pagesFromInput$$.setAttribute("type","number");$pagesFromInput$$.setAttribute("min","1");$pagesFromInput$$.style.width="50px";$cancelBtn$$.appendChild($pagesFromInput$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("to"));
$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);var $pagesToInput$$=$pagesFromInput$$.cloneNode(!0);$cancelBtn$$.appendChild($pagesToInput$$);mxEvent.addListener($pagesFromInput$$,"focus",function(){$pagesRadio$$.checked=!0});mxEvent.addListener($pagesToInput$$,"focus",function(){$pagesRadio$$.checked=!0});mxEvent.addListener($pagesFromInput$$,"change",$validatePageRange$$);mxEvent.addListener($pagesToInput$$,"change",$validatePageRange$$);if(null!=$editorUi$$.pages&&
($pageCount$$=$editorUi$$.pages.length,null!=$editorUi$$.currentPage))for($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=0;$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$<$editorUi$$.pages.length;$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$++)if($editorUi$$.currentPage==$editorUi$$.pages[$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$]){$currentPage$$=$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$+1;$pagesFromInput$$.value=
$currentPage$$;$pagesToInput$$.value=$currentPage$$;break}$pagesFromInput$$.setAttribute("max",$pageCount$$);$pagesToInput$$.setAttribute("max",$pageCount$$);1<$pageCount$$&&$div$$.appendChild($cancelBtn$$);var $adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$=document.createElement("div");$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.style.marginBottom="10px";var $adjustRadio$$=document.createElement("input");$adjustRadio$$.style.marginRight="8px";$adjustRadio$$.setAttribute("value",
"adjust");$adjustRadio$$.setAttribute("type","radio");$adjustRadio$$.setAttribute("name","printZoom");$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.appendChild($adjustRadio$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("adjustTo"));$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);
var $zoomInput$$=document.createElement("input");$zoomInput$$.style.cssText="margin:0 8px 0 8px;";$zoomInput$$.setAttribute("value","100 %");$zoomInput$$.style.width="50px";$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.appendChild($zoomInput$$);mxEvent.addListener($zoomInput$$,"focus",function(){$adjustRadio$$.checked=!0});$div$$.appendChild($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$);var $cancelBtn$$=$cancelBtn$$.cloneNode(!1),$fitRadio$$=$adjustRadio$$.cloneNode(!0);
$fitRadio$$.setAttribute("value","fit");$adjustRadio$$.setAttribute("checked","checked");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("div");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.cssText="display:inline-block;height:100%;vertical-align:top;padding-top:2px;";$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.appendChild($fitRadio$$);$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);
$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$=document.createElement("table");$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.style.display="inline-block";var $tbody$$=document.createElement("tbody"),$row1$$=document.createElement("tr"),$row2$$=$row1$$.cloneNode(!0),$td1$$=document.createElement("td"),$td2$$=$td1$$.cloneNode(!0),$td3$$=$td1$$.cloneNode(!0),$td4$$=$td1$$.cloneNode(!0),$td5$$=$td1$$.cloneNode(!0),$td6$$=$td1$$.cloneNode(!0);$td1$$.style.textAlign=
"right";$td4$$.style.textAlign="right";mxUtils.write($td1$$,mxResources.get("fitTo"));var $sheetsAcrossInput$$=document.createElement("input");$sheetsAcrossInput$$.style.cssText="margin:0 8px 0 8px;";$sheetsAcrossInput$$.setAttribute("value","1");$sheetsAcrossInput$$.setAttribute("min","1");$sheetsAcrossInput$$.setAttribute("type","number");$sheetsAcrossInput$$.style.width="40px";$td2$$.appendChild($sheetsAcrossInput$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");
mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("fitToSheetsAcross"));$td3$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);mxUtils.write($td4$$,mxResources.get("fitToBy"));var $sheetsDownInput$$=$sheetsAcrossInput$$.cloneNode(!0);$td5$$.appendChild($sheetsDownInput$$);mxEvent.addListener($sheetsAcrossInput$$,"focus",function(){$fitRadio$$.checked=!0});mxEvent.addListener($sheetsDownInput$$,"focus",function(){$fitRadio$$.checked=
!0});$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("fitToSheetsDown"));$td6$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);$row1$$.appendChild($td1$$);$row1$$.appendChild($td2$$);$row1$$.appendChild($td3$$);$row2$$.appendChild($td4$$);$row2$$.appendChild($td5$$);$row2$$.appendChild($td6$$);$tbody$$.appendChild($row1$$);
$tbody$$.appendChild($row2$$);$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.appendChild($tbody$$);$cancelBtn$$.appendChild($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$);$div$$.appendChild($cancelBtn$$);$cancelBtn$$=document.createElement("div");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("div");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.fontWeight="bold";$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.marginBottom=
"12px";mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("paperSize"));$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("div");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.marginBottom="12px";var $accessor$$=PageSetupDialog.addPageFormatPanel($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,
"printdialog",$editorUi$$.editor.graph.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT);$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("span");mxUtils.write($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$,mxResources.get("pageScale"));$cancelBtn$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);var $pageScaleInput$$=
document.createElement("input");$pageScaleInput$$.style.cssText="margin:0 8px 0 8px;";$pageScaleInput$$.setAttribute("value","100 %");$pageScaleInput$$.style.width="60px";$cancelBtn$$.appendChild($pageScaleInput$$);$div$$.appendChild($cancelBtn$$);$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$=document.createElement("div");$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.style.cssText="text-align:right;margin:48px 0 0 0;";$cancelBtn$$=mxUtils.button(mxResources.get("cancel"),
function(){$editorUi$$.hideDialog()});$cancelBtn$$.className="geBtn";$editorUi$$.editor.cancelFirst&&$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.appendChild($cancelBtn$$);$editorUi$$.isOffline()||($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$=mxUtils.button(mxResources.get("help"),function(){$graph$$.openLink("https://desk.draw.io/support/solutions/articles/16000048947")}),$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.className="geBtn",
$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.appendChild($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$));PrintDialog.previewEnabled&&($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$=mxUtils.button(mxResources.get("preview"),function(){$editorUi$$.hideDialog();$preview$$(!1)}),$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.className="geBtn",$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.appendChild($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$));
$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){$editorUi$$.hideDialog();$preview$$(!0)});$adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$.className="geBtn gePrimaryBtn";$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.appendChild($adjustSection_helpBtn$jscomp$6_previewBtn$jscomp$2_printBtn_table$$);$editorUi$$.editor.cancelFirst||$buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$.appendChild($cancelBtn$$);
$div$$.appendChild($buttons$jscomp$12_i$jscomp$58_span$jscomp$5_spanFitRadio_title$$);this.container=$div$$};var $changePageSetupExecute$$=ChangePageSetup.prototype.execute;ChangePageSetup.prototype.execute=function $ChangePageSetup$$execute$(){null==this.page&&(this.page=this.ui.currentPage);this.page!=this.ui.currentPage?null!=this.page.viewState&&(this.ignoreColor||(this.page.viewState.background=this.color),this.ignoreImage||(this.page.viewState.backgroundImage=this.image),null!=this.format&&
(this.page.viewState.pageFormat=this.format),null!=this.mathEnabled&&(this.page.viewState.mathEnabled=this.mathEnabled),null!=this.shadowVisible&&(this.page.viewState.shadowVisible=this.shadowVisible)):($changePageSetupExecute$$.apply(this,arguments),null!=this.mathEnabled&&this.mathEnabled!=this.ui.isMathEnabled()&&(this.ui.setMathEnabled(this.mathEnabled),this.mathEnabled=!this.mathEnabled),null!=this.shadowVisible&&this.shadowVisible!=this.ui.editor.graph.shadowVisible&&(this.ui.editor.graph.setShadowVisible(this.shadowVisible),
this.shadowVisible=!this.shadowVisible))};Editor.prototype.useCanvasForExport=!1;try{var $canvas$jscomp$0$$=document.createElement("canvas"),$img$jscomp$0$$=new Image;$img$jscomp$0$$.onload=function $$img$jscomp$0$$$onload$(){try{$canvas$jscomp$0$$.getContext("2d").drawImage($img$jscomp$0$$,0,0);var $result$$=$canvas$jscomp$0$$.toDataURL("image/png");Editor.prototype.useCanvasForExport=null!=$result$$&&6<$result$$.length}catch($e$$){}};$img$jscomp$0$$.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1px" height="1px" version="1.1"><foreignObject pointer-events="all" width="1" height="1"><div xmlns="http://www.w3.org/1999/xhtml"></div></foreignObject></svg>')))}catch($e$$){}})();
var ErrorDialog=function $ErrorDialog$($editorUi$$,$p2$jscomp$3_retryBtn_title$$,$btns$jscomp$7_message$$,$buttonText_mainBtn$$,$fn$$,$retry$$,$buttonText2$$,$fn2$$,$hide$$,$btn3_buttonText3$$,$fn3$$){$hide$$=null!=$hide$$?$hide$$:!0;var $div$$=document.createElement("div");$div$$.style.textAlign="center";if(null!=$p2$jscomp$3_retryBtn_title$$){var $hd$$=document.createElement("div");$hd$$.style.padding="0px";$hd$$.style.margin="0px";$hd$$.style.fontSize="18px";$hd$$.style.paddingBottom="16px";$hd$$.style.marginBottom=
"10px";$hd$$.style.borderBottom="1px solid #c0c0c0";$hd$$.style.color="gray";$hd$$.style.whiteSpace="nowrap";$hd$$.style.textOverflow="ellipsis";$hd$$.style.overflow="hidden";mxUtils.write($hd$$,$p2$jscomp$3_retryBtn_title$$);$hd$$.setAttribute("title",$p2$jscomp$3_retryBtn_title$$);$div$$.appendChild($hd$$)}$p2$jscomp$3_retryBtn_title$$=document.createElement("div");$p2$jscomp$3_retryBtn_title$$.style.lineHeight="1.2em";$p2$jscomp$3_retryBtn_title$$.style.padding="6px";$p2$jscomp$3_retryBtn_title$$.innerHTML=
$btns$jscomp$7_message$$;$div$$.appendChild($p2$jscomp$3_retryBtn_title$$);$btns$jscomp$7_message$$=document.createElement("div");$btns$jscomp$7_message$$.style.marginTop="12px";$btns$jscomp$7_message$$.style.textAlign="center";null!=$retry$$&&($p2$jscomp$3_retryBtn_title$$=mxUtils.button(mxResources.get("tryAgain"),function(){$editorUi$$.hideDialog();$retry$$()}),$p2$jscomp$3_retryBtn_title$$.className="geBtn",$btns$jscomp$7_message$$.appendChild($p2$jscomp$3_retryBtn_title$$),$btns$jscomp$7_message$$.style.textAlign=
"center");null!=$btn3_buttonText3$$&&($btn3_buttonText3$$=mxUtils.button($btn3_buttonText3$$,function(){null!=$fn3$$&&$fn3$$()}),$btn3_buttonText3$$.className="geBtn",$btns$jscomp$7_message$$.appendChild($btn3_buttonText3$$));var $btn$$=mxUtils.button($buttonText_mainBtn$$,function(){$hide$$&&$editorUi$$.hideDialog();null!=$fn$$&&$fn$$()});$btn$$.className="geBtn";$btns$jscomp$7_message$$.appendChild($btn$$);null!=$buttonText2$$&&($buttonText_mainBtn$$=mxUtils.button($buttonText2$$,function(){$hide$$&&
$editorUi$$.hideDialog();null!=$fn2$$&&$fn2$$()}),$buttonText_mainBtn$$.className="geBtn gePrimaryBtn",$btns$jscomp$7_message$$.appendChild($buttonText_mainBtn$$));this.init=function $this$init$(){$btn$$.focus()};$div$$.appendChild($btns$jscomp$7_message$$);this.container=$div$$};
(function(){var $codec$$=new mxObjectCodec(new ChangePageSetup,["ui","previousColor","previousImage","previousFormat"]);$codec$$.beforeDecode=function $$codec$$$beforeDecode$($dec$$,$node$$,$obj$$){$obj$$.ui=$dec$$.ui;return $node$$};$codec$$.afterDecode=function $$codec$$$afterDecode$($dec$$,$node$$,$obj$$){$obj$$.previousColor=$obj$$.color;$obj$$.previousImage=$obj$$.image;$obj$$.previousFormat=$obj$$.format;null!=$obj$$.foldingEnabled&&($obj$$.foldingEnabled=!$obj$$.foldingEnabled);null!=$obj$$.mathEnabled&&
($obj$$.mathEnabled=!$obj$$.mathEnabled);null!=$obj$$.shadowVisible&&($obj$$.shadowVisible=!$obj$$.shadowVisible);return $obj$$};mxCodecRegistry.register($codec$$)})();(function(){EditorUi.VERSION="@DRAWIO-VERSION@";EditorUi.compactUi="atlas"!=uiTheme;EditorUi.enableLogging="1"!=urlParams.stealth&&/.*\.draw\.io$/.test(window.location.hostname)&&"support.draw.io"!=window.location.hostname;EditorUi.drawHost="https://www.draw.io";EditorUi.lastErrorMessage=null;EditorUi.ignoredAnonymizedChars="\n\t`~!@#$%^&*()_+{}|:\"<>?-=[];'./,\n\t";EditorUi.logError=function $EditorUi$logError$($message$$,$url$$,$linenumber$$,$colno$$,$err$$){if("1"==urlParams.dev)EditorUi.debug("logError",
$message$$,$url$$,$linenumber$$,$colno$$,$err$$);else if(EditorUi.enableLogging)try{if($message$$!=EditorUi.lastErrorMessage&&(null==$message$$||null==$url$$||-1==$message$$.indexOf("Script error")&&-1==$message$$.indexOf("extension"))&&null!=$message$$&&0>$message$$.indexOf("DocumentClosedError")){EditorUi.lastErrorMessage=$message$$;var $severity$$=0<=$message$$.indexOf("NetworkError")||0<=$message$$.indexOf("SecurityError")||0<=$message$$.indexOf("NS_ERROR_FAILURE")||0<=$message$$.indexOf("out of memory")?
"CONFIG":"SEVERE",$logDomain$$=null!=window.DRAWIO_LOG_URL?window.DRAWIO_LOG_URL:"";$err$$=null!=$err$$?$err$$:Error($message$$);(new Image).src=$logDomain$$+"/log?severity="+$severity$$+"&v="+encodeURIComponent(EditorUi.VERSION)+"&msg=clientError:"+encodeURIComponent($message$$)+":url:"+encodeURIComponent(window.location.href)+":lnum:"+encodeURIComponent($linenumber$$)+(null!=$colno$$?":colno:"+encodeURIComponent($colno$$):"")+(null!=$err$$&&null!=$err$$.stack?"&stack="+encodeURIComponent($err$$.stack):
"")}}catch($err$8$$){}};EditorUi.logEvent=function $EditorUi$logEvent$($data$$){if("1"==urlParams.dev)EditorUi.debug("logEvent",$data$$);else if(EditorUi.enableLogging)try{var $logDomain$$=null!=window.DRAWIO_LOG_URL?window.DRAWIO_LOG_URL:"";(new Image).src=$logDomain$$+"/images/1x1.png?v="+encodeURIComponent(EditorUi.VERSION)+(null!=$data$$?"&data="+encodeURIComponent(JSON.stringify($data$$)):"")}catch($e$$){}};EditorUi.sendReport=function $EditorUi$sendReport$($data$$,$maxLength$$){if("1"==urlParams.dev)EditorUi.debug("sendReport",
$data$$);else if(EditorUi.enableLogging)try{$maxLength$$=null!=$maxLength$$?$maxLength$$:5E4,$data$$.length>$maxLength$$&&($data$$=$data$$.substring(0,$maxLength$$)+"\n...[SHORTENED]"),mxUtils.post("/email","version="+encodeURIComponent(EditorUi.VERSION)+"&url="+encodeURIComponent(window.location.href)+"&data="+encodeURIComponent($data$$))}catch($e$$){}};EditorUi.debug=function $EditorUi$debug$(){try{if(null!=window.console&&"1"==urlParams.dev){for(var $args$$=[(new Date).toISOString()],$i$$=0;$i$$<
arguments.length;$i$$++)$args$$.push(arguments[$i$$]);console.log.apply(console,$args$$)}}catch($e$$){}};EditorUi.templateFile=TEMPLATE_PATH+"/index.xml";EditorUi.cacheUrl="1"==urlParams.dev?"/cache":"";EditorUi.enablePlantUml=EditorUi.enableLogging;EditorUi.isElectronApp=null!=window&&null!=window.process&&null!=window.process.versions&&null!=window.process.versions.electron;EditorUi.scratchpadHelpLink="../../../../Documents/htmlhelp/home__view_menu.htm?ms=AAAA&st=MA%3D%3D&sct=MTUwMA%3D%3D&mw=MjQy#ScratchPad";
EditorUi.prototype.emptyDiagramXml='<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/></root></mxGraphModel>';EditorUi.prototype.emptyGraphModelXml='<mxGraphModel><root><mxCell id="0"/></root></mxGraphModel>';EditorUi.prototype.emptyLibraryXml="<mxlibrary>[]</mxlibrary>";EditorUi.prototype.mode=null;EditorUi.prototype.timeout=25E3;EditorUi.prototype.sidebarFooterHeight=38;EditorUi.prototype.defaultCustomShapeStyle="shape=stencil(tZRtTsQgEEBPw1+DJR7AoN6DbWftpAgE0Ortd/jYRGq72R+YNE2YgTePloEJGWblgA18ZuKFDcMj5/Sm8boZq+BgjCX4pTyqk6ZlKROitwusOMXKQDODx5iy4pXxZ5qTHiFHawxB0JrQZH7lCabQ0Fr+XWC1/E8zcsT/gAi+Subo2/3Mh6d/oJb5nU1b5tW7r2knautaa3T+U32o7f7vZwpJkaNDLORJjcu7t59m2jXxqX9un+tt022acsfmoKaQZ+vhhswZtS6Ne/ThQGt0IV0N3Yyv6P3CeT9/tHO0XFI5cAE=);whiteSpace=wrap;html=1;";
EditorUi.prototype.svgBrokenImage=Graph.createSvgImage(10,10,'<rect x="0" y="0" width="10" height="10" stroke="#000" fill="transparent"/><path d="m 0 0 L 10 10 L 0 10 L 10 0" stroke="#000" fill="transparent"/>');EditorUi.prototype.crossOriginImages=!mxClient.IS_IE;EditorUi.prototype.maxBackgroundSize=1600;EditorUi.prototype.maxImageSize=520;EditorUi.prototype.resampleThreshold=1E5;EditorUi.prototype.maxImageBytes=1E6;EditorUi.prototype.maxBackgroundBytes=25E5;EditorUi.prototype.maxTextBytes=5E5;EditorUi.prototype.currentFile=
null;EditorUi.prototype.printPdfExport=!1;EditorUi.prototype.pdfPageExport=!0;EditorUi.prototype.formatEnabled="0"!=urlParams.format;EditorUi.prototype.insertTemplateEnabled=!0;EditorUi.prototype.closableScratchpad=!0;(function(){EditorUi.prototype.useCanvasForExport=!1;EditorUi.prototype.jpgSupported=!1;try{var $cnv$$=document.createElement("canvas");EditorUi.prototype.canvasSupported=!(!$cnv$$.getContext||!$cnv$$.getContext("2d"))}catch($e$$){}try{var $canvas$$=document.createElement("canvas"),
$img$$=new Image;$img$$.onload=function $$img$$$onload$(){try{$canvas$$.getContext("2d").drawImage($img$$,0,0);var $result$$=$canvas$$.toDataURL("image/png");EditorUi.prototype.useCanvasForExport=null!=$result$$&&6<$result$$.length}catch($e$9$$){}};$img$$.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1px" height="1px" version="1.1"><foreignObject pointer-events="all" width="1" height="1"><div xmlns="http://www.w3.org/1999/xhtml"></div></foreignObject></svg>')))}catch($e$10$$){}try{$canvas$$=
document.createElement("canvas");$canvas$$.width=$canvas$$.height=1;var $uri$$=$canvas$$.toDataURL("image/jpeg");EditorUi.prototype.jpgSupported=null!==$uri$$.match("image/jpeg")}catch($e$11$$){}})();EditorUi.prototype.openLink=function $EditorUi$$openLink$($url$$,$target$$,$allowOpener$$){return this.editor.graph.openLink($url$$,$target$$,$allowOpener$$)};EditorUi.prototype.showSplash=function $EditorUi$$showSplash$($force$$){console.log("EditorUi.prototype.showSplash method does not get called. Change my mind.")};
EditorUi.prototype.getLocalData=function $EditorUi$$getLocalData$($key$$,$fn$$){$fn$$(localStorage.getItem($key$$))};EditorUi.prototype.setLocalData=function $EditorUi$$setLocalData$($key$$,$data$$,$fn$$){localStorage.setItem($key$$,$data$$);null!=$fn$$&&$fn$$()};EditorUi.prototype.removeLocalData=function $EditorUi$$removeLocalData$($key$$,$fn$$){localStorage.removeItem($key$$);$fn$$()};EditorUi.prototype.setMathEnabled=function $EditorUi$$setMathEnabled$($value$$){this.editor.graph.mathEnabled=
$value$$;this.editor.updateGraphComponents();this.editor.graph.refresh();this.fireEvent(new mxEventObject("mathEnabledChanged"))};EditorUi.prototype.isMathEnabled=function $EditorUi$$isMathEnabled$($value$$){return this.editor.graph.mathEnabled};EditorUi.prototype.isAppCache=function $EditorUi$$isAppCache$(){return"1"==urlParams.appcache||this.isOfflineApp()};EditorUi.prototype.isOfflineApp=function $EditorUi$$isOfflineApp$(){return"1"==urlParams.offline};EditorUi.prototype.isOffline=function $EditorUi$$isOffline$($ignoreStealth$$){return this.isOfflineApp()||
!navigator.onLine||!$ignoreStealth$$&&"1"==urlParams.stealth};EditorUi.prototype.createSpinner=function $EditorUi$$createSpinner$($x$$,$y$$,$size$$){$size$$=null!=$size$$?$size$$:24;var $spinner$$=new Spinner({lines:12,length:$size$$,width:Math.round($size$$/3),radius:Math.round($size$$/2),rotate:0,color:"dark"==uiTheme?"#c0c0c0":"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,zIndex:2E9}),$oldSpin$$=$spinner$$.spin;$spinner$$.spin=function $$spinner$$$spin$($container$$,$label$$){var $result$jscomp$10_status$$=
!1;this.active||($oldSpin$$.call(this,$container$$),this.active=!0,null!=$label$$&&($result$jscomp$10_status$$=document.createElement("div"),$result$jscomp$10_status$$.style.position="absolute",$result$jscomp$10_status$$.style.whiteSpace="nowrap",$result$jscomp$10_status$$.style.background="#4B4243",$result$jscomp$10_status$$.style.color="white",$result$jscomp$10_status$$.style.fontFamily="Helvetica, Arial",$result$jscomp$10_status$$.style.fontSize="9pt",$result$jscomp$10_status$$.style.padding="6px",
$result$jscomp$10_status$$.style.paddingLeft="10px",$result$jscomp$10_status$$.style.paddingRight="10px",$result$jscomp$10_status$$.style.zIndex=2E9,$result$jscomp$10_status$$.style.left=Math.max(0,$x$$)+"px",$result$jscomp$10_status$$.style.top=Math.max(0,$y$$+70)+"px",mxUtils.setPrefixedStyle($result$jscomp$10_status$$.style,"borderRadius","6px"),mxUtils.setPrefixedStyle($result$jscomp$10_status$$.style,"transform","translate(-50%,-50%)"),"dark"!=uiTheme&&mxUtils.setPrefixedStyle($result$jscomp$10_status$$.style,
"boxShadow","2px 2px 3px 0px #ddd"),"..."!=$label$$.substring($label$$.length-3,$label$$.length)&&"!"!=$label$$.charAt($label$$.length-1)&&($label$$+="..."),$result$jscomp$10_status$$.innerHTML=$label$$,$container$$.appendChild($result$jscomp$10_status$$),$spinner$$.status=$result$jscomp$10_status$$,mxClient.IS_VML&&(null==document.documentMode||8>=document.documentMode)&&($result$jscomp$10_status$$.style.left=Math.round(Math.max(0,$x$$-$result$jscomp$10_status$$.offsetWidth/2))+"px",$result$jscomp$10_status$$.style.top=
Math.round(Math.max(0,$y$$+70-$result$jscomp$10_status$$.offsetHeight/2))+"px")),this.pause=mxUtils.bind(this,function(){var $fn$$=function $$fn$$$(){};this.active&&($fn$$=mxUtils.bind(this,function(){this.spin($container$$,$label$$)}));this.stop();return $fn$$}),$result$jscomp$10_status$$=!0);return $result$jscomp$10_status$$};var $oldStop$$=$spinner$$.stop;$spinner$$.stop=function $$spinner$$$stop$(){$oldStop$$.call(this);this.active=!1;null!=$spinner$$.status&&($spinner$$.status.parentNode.removeChild($spinner$$.status),
$spinner$$.status=null)};$spinner$$.pause=function $$spinner$$$pause$(){return function(){}};return $spinner$$};EditorUi.parsePng=function $EditorUi$parsePng$($f$$,$fn$$,$error$jscomp$52_n$$){function $fread$$($d$$,$count$$){var $start$$=$pos$$;$pos$$+=$count$$;return $d$$.substring($start$$,$pos$$)}function $_freadint$$($bytes$jscomp$1_d$$){$bytes$jscomp$1_d$$=$fread$$($bytes$jscomp$1_d$$,4);return $bytes$jscomp$1_d$$.charCodeAt(3)+($bytes$jscomp$1_d$$.charCodeAt(2)<<8)+($bytes$jscomp$1_d$$.charCodeAt(1)<<
16)+($bytes$jscomp$1_d$$.charCodeAt(0)<<24)}var $pos$$=0;if($fread$$($f$$,8)!=String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10))null!=$error$jscomp$52_n$$&&$error$jscomp$52_n$$();else if($fread$$($f$$,4),"IHDR"!=$fread$$($f$$,4))null!=$error$jscomp$52_n$$&&$error$jscomp$52_n$$();else{$fread$$($f$$,17);do{$error$jscomp$52_n$$=$_freadint$$($f$$);var $type$$=$fread$$($f$$,4);if(null!=$fn$$&&$fn$$($pos$$-8,$type$$,$error$jscomp$52_n$$))break;value=$fread$$($f$$,$error$jscomp$52_n$$);$fread$$($f$$,
4);if("IEND"==$type$$)break}while($error$jscomp$52_n$$)}};EditorUi.prototype.isCompatibleString=function $EditorUi$$isCompatibleString$($data$$){try{var $doc$$=mxUtils.parseXml($data$$),$node$$=this.editor.extractGraphModel($doc$$.documentElement,!0);return null!=$node$$&&0==$node$$.getElementsByTagName("parsererror").length}catch($e$$){}return!1};EditorUi.prototype.isVisioData=function $EditorUi$$isVisioData$($data$$){return 8<$data$$.length&&208==$data$$.charCodeAt(0)&&207==$data$$.charCodeAt(1)&&
17==$data$$.charCodeAt(2)&&224==$data$$.charCodeAt(3)&&161==$data$$.charCodeAt(4)&&177==$data$$.charCodeAt(5)&&26==$data$$.charCodeAt(6)&&225==$data$$.charCodeAt(7)||80==$data$$.charCodeAt(0)&&75==$data$$.charCodeAt(1)&&3==$data$$.charCodeAt(2)&&4==$data$$.charCodeAt(3)||80==$data$$.charCodeAt(0)&&75==$data$$.charCodeAt(1)&&3==$data$$.charCodeAt(2)&&6==$data$$.charCodeAt(3)};EditorUi.prototype.isPngData=function $EditorUi$$isPngData$($data$$){return 8<$data$$.length&&137==$data$$.charCodeAt(0)&&80==
$data$$.charCodeAt(1)&&78==$data$$.charCodeAt(2)&&71==$data$$.charCodeAt(3)&&13==$data$$.charCodeAt(4)&&10==$data$$.charCodeAt(5)&&26==$data$$.charCodeAt(6)&&10==$data$$.charCodeAt(7)};var $editorUiExtractGraphModelFromHtml$$=EditorUi.prototype.extractGraphModelFromHtml;EditorUi.prototype.extractGraphModelFromHtml=function $EditorUi$$extractGraphModelFromHtml$($data$$){var $result$$=$editorUiExtractGraphModelFromHtml$$.apply(this,arguments);if(null==$result$$)try{var $idx$$=$data$$.indexOf("&lt;mxfile ");
if(0<=$idx$$){var $idx2$$=$data$$.lastIndexOf("&lt;/mxfile&gt;");$idx2$$>$idx$$&&($result$$=$data$$.substring($idx$$,$idx2$$+15).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}else var $doc$$=mxUtils.parseXml($data$$),$node$$=this.editor.extractGraphModel($doc$$.documentElement,null!=this.pages||"hidden"==this.diagramContainer.style.visibility),$result$$=null!=$node$$?mxUtils.getXml($node$$):""}catch($e$$){}return $result$$};EditorUi.prototype.validateFileData=
function $EditorUi$$validateFileData$($data$$){if(null!=$data$$&&0<$data$$.length){var $index$$=$data$$.indexOf('<meta charset="utf-8">');0<=$index$$&&($data$$=$data$$.slice(0,$index$$)+'<meta charset="utf-8"/>'+$data$$.slice($index$$+23-1,$data$$.length));$data$$=Graph.zapGremlins($data$$)}return $data$$};EditorUi.prototype.replaceFileData=function $EditorUi$$replaceFileData$($data$jscomp$85_node$$){$data$jscomp$85_node$$=this.validateFileData($data$jscomp$85_node$$);$data$jscomp$85_node$$=null!=
$data$jscomp$85_node$$&&0<$data$jscomp$85_node$$.length?mxUtils.parseXml($data$jscomp$85_node$$).documentElement:null;var $graph$jscomp$24_tmp$$=null!=$data$jscomp$85_node$$?this.editor.extractGraphModel($data$jscomp$85_node$$,!0):null;null!=$graph$jscomp$24_tmp$$&&($data$jscomp$85_node$$=$graph$jscomp$24_tmp$$);if(null!=$data$jscomp$85_node$$){$graph$jscomp$24_tmp$$=this.editor.graph;$graph$jscomp$24_tmp$$.model.beginUpdate();try{var $oldPages$$=null!=this.pages?this.pages.slice():null,$nodes$$=
$data$jscomp$85_node$$.getElementsByTagName("diagram");if("0"!=urlParams.pages||1<$nodes$$.length||1==$nodes$$.length&&$nodes$$[0].hasAttribute("name")){this.fileNode=$data$jscomp$85_node$$;this.pages=null!=this.pages?this.pages:[];for(var $i$$=$nodes$$.length-1;0<=$i$$;$i$$--){var $page$$=this.updatePageRoot(new DiagramPage($nodes$$[$i$$]));null==$page$$.getName()&&$page$$.setName(mxResources.get("pageWithNumber",[$i$$+1]));$graph$jscomp$24_tmp$$.model.execute(new ChangePage(this,$page$$,0==$i$$?
$page$$:null,0))}}else"0"!=urlParams.pages&&null==this.fileNode&&(this.fileNode=$data$jscomp$85_node$$.ownerDocument.createElement("mxfile"),this.currentPage=new DiagramPage($data$jscomp$85_node$$.ownerDocument.createElement("diagram")),this.currentPage.setName(mxResources.get("pageWithNumber",[1])),$graph$jscomp$24_tmp$$.model.execute(new ChangePage(this,this.currentPage,this.currentPage,0))),this.editor.setGraphXml($data$jscomp$85_node$$),null!=this.currentPage&&(this.currentPage.root=this.editor.graph.model.root);
if(null!=$oldPages$$)for($i$$=0;$i$$<$oldPages$$.length;$i$$++)$graph$jscomp$24_tmp$$.model.execute(new ChangePage(this,$oldPages$$[$i$$],null))}finally{$graph$jscomp$24_tmp$$.model.endUpdate()}}};EditorUi.prototype.createFileData=function $EditorUi$$createFileData$($md_node$jscomp$17_xml$$,$graph$$,$file$$,$url$$,$forceXml$$,$forceSvg$$,$forceHtml$$,$embeddedCallback$$,$ignoreSelection$$,$compact$$){if(!$md_node$jscomp$17_xml$$)return"";$graph$$=$graph$$||this.editor.graph;$forceXml$$=$forceXml$$||
!1;$ignoreSelection$$=$ignoreSelection$$?$ignoreSelection$$:!0;var $filemode$$=$file$$&&$file$$.getMode(),$editLink$$,$redirect$$;$file$$&&$filemode$$!==App.MODE_DEVICE&&$filemode$$!==App.MODE_BROWSER?$redirect$$=$editLink$$=$url$$:$editLink$$="_blank";var $data$$=$md_node$jscomp$17_xml$$;if("mxfile"!==$data$$.nodeName.toLowerCase()){var $diagramNode$jscomp$3_text$$=Graph.zapGremlins(mxUtils.getXml($md_node$jscomp$17_xml$$)),$data$$=Graph.compress($diagramNode$jscomp$3_text$$);if(Graph.decompress($data$$)!==
$diagramNode$jscomp$3_text$$)return $diagramNode$jscomp$3_text$$;$diagramNode$jscomp$3_text$$=$md_node$jscomp$17_xml$$.ownerDocument.createElement("diagram");$diagramNode$jscomp$3_text$$.setAttribute("id",Editor.guid());mxUtils.setTextContent($diagramNode$jscomp$3_text$$,$data$$);$data$$=$md_node$jscomp$17_xml$$.ownerDocument.createElement("mxfile");$data$$.appendChild($diagramNode$jscomp$3_text$$)}$data$$=$compact$$?$data$$.cloneNode(!0):$data$$;$data$$.removeAttribute("userAgent");$data$$.removeAttribute("version");
$data$$.removeAttribute("editor");$data$$.removeAttribute("type");$compact$$||($data$$.setAttribute("modified",(new Date).toISOString()),$data$$.setAttribute("host",window.location.hostname),$data$$.setAttribute("agent",navigator.userAgent),$data$$.setAttribute("version",EditorUi.VERSION),$data$$.setAttribute("etag",Editor.guid()),($md_node$jscomp$17_xml$$=$filemode$$||this.mode)&&$data$$.setAttribute("type",$md_node$jscomp$17_xml$$));$md_node$jscomp$17_xml$$=mxUtils.getXml($data$$);$file$$=$file$$&&
$file$$.getTitle();if(!$forceSvg$$&&!$forceXml$$&&($forceHtml$$||/(\.html)$/i.test($file$$)))$md_node$jscomp$17_xml$$=this.getHtml2(mxUtils.getXml($data$$),$graph$$,$file$$,$editLink$$,$redirect$$);else if($forceSvg$$||!$forceXml$$&&/(\.svg)$/i.test($file$$)){if($filemode$$===App.MODE_DEVICE||$filemode$$===App.MODE_BROWSER)$url$$=void 0;$md_node$jscomp$17_xml$$=this.getEmbeddedSvg($md_node$jscomp$17_xml$$,$graph$$,$url$$,null,$embeddedCallback$$,$ignoreSelection$$,$redirect$$)}return $md_node$jscomp$17_xml$$};
EditorUi.prototype.getXmlFileData=function $EditorUi$$getXmlFileData$($ignoreSelection$$,$currentPage$$){$ignoreSelection$$=null!=$ignoreSelection$$&&$ignoreSelection$$||!0;$currentPage$$=null!=$currentPage$$&&$currentPage$$||!1;var $data$jscomp$87_node$$=this.editor.getGraphXml($ignoreSelection$$);if($ignoreSelection$$&&this.fileNode&&this.currentPage)if($data$jscomp$87_node$$=Graph.compressNode($data$jscomp$87_node$$),mxUtils.setTextContent(this.currentPage.node,$data$jscomp$87_node$$),$data$jscomp$87_node$$=
this.fileNode.cloneNode(!1),$currentPage$$)$data$jscomp$87_node$$.appendChild(this.currentPage.node);else for(var $$jscomp$iter$3$$=$jscomp.makeIterator(this.pages||[]),$$jscomp$key$page_page$$=$$jscomp$iter$3$$.next();!$$jscomp$key$page_page$$.done;$$jscomp$key$page_page$$=$$jscomp$iter$3$$.next()){$$jscomp$key$page_page$$=$$jscomp$key$page_page$$.value;if(this.currentPage!==$$jscomp$key$page_page$$&&$$jscomp$key$page_page$$.needsUpdate){var $temp$12$$=(new mxCodec(mxUtils.createXmlDocument())).encode(new mxGraphModel($$jscomp$key$page_page$$.root));
this.editor.graph.saveViewState($$jscomp$key$page_page$$.viewState,$temp$12$$);mxUtils.setTextContent($$jscomp$key$page_page$$.node,Graph.compressNode($temp$12$$));delete $$jscomp$key$page_page$$.needsUpdate}$data$jscomp$87_node$$.appendChild($$jscomp$key$page_page$$.node)}return $data$jscomp$87_node$$};EditorUi.prototype.anonymizeString=function $EditorUi$$anonymizeString$($text$$,$zeros$$){for(var $result$$=[],$i$$=0;$i$$<$text$$.length;$i$$++){var $c$$=$text$$.charAt($i$$);0<=EditorUi.ignoredAnonymizedChars.indexOf($c$$)?
$result$$.push($c$$):isNaN(parseInt($c$$))?$c$$.toLowerCase()!=$c$$?$result$$.push(String.fromCharCode(65+Math.round(25*Math.random()))):$c$$.toUpperCase()!=$c$$?$result$$.push(String.fromCharCode(97+Math.round(25*Math.random()))):/\s/.test($c$$)?$result$$.push(" "):$result$$.push("?"):$result$$.push($zeros$$?"0":Math.round(9*Math.random()))}return $result$$.join("")};EditorUi.prototype.anonymizePatch=function $EditorUi$$anonymizePatch$($patch$$){if(null!=$patch$$[EditorUi.DIFF_INSERT])for(var $anonymizeCellDiffs_i$$=
0;$anonymizeCellDiffs_i$$<$patch$$[EditorUi.DIFF_INSERT].length;$anonymizeCellDiffs_i$$++)try{var $clone$$=mxUtils.parseXml($patch$$[EditorUi.DIFF_INSERT][$anonymizeCellDiffs_i$$].data).documentElement.cloneNode(!1);null!=$clone$$.getAttribute("name")&&$clone$$.setAttribute("name",this.anonymizeString($clone$$.getAttribute("name")));$patch$$[EditorUi.DIFF_INSERT][$anonymizeCellDiffs_i$$].data=mxUtils.getXml($clone$$)}catch($e$$){$patch$$[EditorUi.DIFF_INSERT][$anonymizeCellDiffs_i$$].data=$e$$.message}if(null!=
$patch$$[EditorUi.DIFF_UPDATE]){for(var $pageId$$ in $patch$$[EditorUi.DIFF_UPDATE]){var $diff$$=$patch$$[EditorUi.DIFF_UPDATE][$pageId$$];null!=$diff$$.name&&($diff$$.name=this.anonymizeString($diff$$.name));null!=$diff$$.cells&&($anonymizeCellDiffs_i$$=mxUtils.bind(this,function($key$$){var $cellDiffs$$=$diff$$.cells[$key$$];if(null!=$cellDiffs$$){for(var $cellId$$ in $cellDiffs$$)null!=$cellDiffs$$[$cellId$$].value&&($cellDiffs$$[$cellId$$].value="["+$cellDiffs$$[$cellId$$].value.length+"]"),null!=
$cellDiffs$$[$cellId$$].xmlValue&&($cellDiffs$$[$cellId$$].xmlValue="["+$cellDiffs$$[$cellId$$].xmlValue.length+"]"),null!=$cellDiffs$$[$cellId$$].style&&($cellDiffs$$[$cellId$$].style="["+$cellDiffs$$[$cellId$$].style.length+"]"),0==Object.keys($cellDiffs$$[$cellId$$]).length&&delete $cellDiffs$$[$cellId$$];0==Object.keys($cellDiffs$$).length&&delete $diff$$.cells[$key$$]}}),$anonymizeCellDiffs_i$$(EditorUi.DIFF_INSERT),$anonymizeCellDiffs_i$$(EditorUi.DIFF_UPDATE),0==Object.keys($diff$$.cells).length&&
delete $diff$$.cells);0==Object.keys($diff$$).length&&delete $patch$$[EditorUi.DIFF_UPDATE][$pageId$$]}0==Object.keys($patch$$[EditorUi.DIFF_UPDATE]).length&&delete $patch$$[EditorUi.DIFF_UPDATE]}return $patch$$};EditorUi.prototype.anonymizeAttributes=function $EditorUi$$anonymizeAttributes$($node$$,$zeros$$){if(null!=$node$$.attributes)for(var $i$$=0;$i$$<$node$$.attributes.length;$i$$++)"as"!=$node$$.attributes[$i$$].name&&$node$$.setAttribute($node$$.attributes[$i$$].name,this.anonymizeString($node$$.attributes[$i$$].value,
$zeros$$));if(null!=$node$$.childNodes)for($i$$=0;$i$$<$node$$.childNodes.length;$i$$++)this.anonymizeAttributes($node$$.childNodes[$i$$],$zeros$$)};EditorUi.prototype.anonymizeNode=function $EditorUi$$anonymizeNode$($node$$,$zeros$$){for(var $nodes$$=$node$$.getElementsByTagName("mxCell"),$i$$=0;$i$$<$nodes$$.length;$i$$++)null!=$nodes$$[$i$$].getAttribute("value")&&$nodes$$[$i$$].setAttribute("value","["+$nodes$$[$i$$].getAttribute("value").length+"]"),null!=$nodes$$[$i$$].getAttribute("xmlValue")&&
$nodes$$[$i$$].setAttribute("xmlValue","["+$nodes$$[$i$$].getAttribute("xmlValue").length+"]"),null!=$nodes$$[$i$$].getAttribute("style")&&$nodes$$[$i$$].setAttribute("style","["+$nodes$$[$i$$].getAttribute("style").length+"]"),null!=$nodes$$[$i$$].parentNode&&"root"!=$nodes$$[$i$$].parentNode.nodeName&&null!=$nodes$$[$i$$].parentNode.parentNode&&($nodes$$[$i$$].setAttribute("id",$nodes$$[$i$$].parentNode.getAttribute("id")),$nodes$$[$i$$].parentNode.parentNode.replaceChild($nodes$$[$i$$],$nodes$$[$i$$].parentNode));
return $node$$};EditorUi.prototype.synchronizeCurrentFile=function $EditorUi$$synchronizeCurrentFile$($forceReload$$){var $currentFile$$=this.getCurrentFile();null!=$currentFile$$&&($currentFile$$.savingFile?this.handleError({message:mxResources.get("busy")}):!$forceReload$$&&$currentFile$$.invalidChecksum?$currentFile$$.handleFileError(null,!0):this.spinner.spin(document.body,mxResources.get("updatingDocument"))&&($currentFile$$.clearAutosave(),this.editor.setStatus(""),$forceReload$$?$currentFile$$.reloadFile(mxUtils.bind(this,
function(){$currentFile$$.handleFileSuccess("manual"==DrawioFile.SYNC)}),mxUtils.bind(this,function($err$$){$currentFile$$.handleFileError($err$$,!0)})):$currentFile$$.synchronizeFile(mxUtils.bind(this,function(){$currentFile$$.handleFileSuccess("manual"==DrawioFile.SYNC)}),mxUtils.bind(this,function($err$$){$currentFile$$.handleFileError($err$$,!0)}))))};EditorUi.prototype.getFileData=function $EditorUi$$getFileData$($forceXml$$,$forceSvg$$,$forceHtml$$,$embeddedCallback$$,$ignoreSelection$$,$currentPage$$,
$node$$,$compact$$,$file$$){var $$jscomp$this$$=this,$$jscomp$arguments$$=arguments;$ignoreSelection$$=null!=$ignoreSelection$$&&$ignoreSelection$$||!0;$node$$=$node$$||this.getXmlFileData($ignoreSelection$$,null!=$currentPage$$&&$currentPage$$||!1);$file$$=$file$$||this.getCurrentFile();var $graph$$=this.editor.graph,$page$$=(this.pages||[])[0],$filetitle$jscomp$1_result$$=$file$$&&$file$$.getTitle();if($page$$&&this.currentPage!==$page$$&&($forceSvg$$||!$forceXml$$&&/(\.svg)$/i.test($filetitle$jscomp$1_result$$))){var $graph$$=
this.createTemporaryGraph($graph$$.getStylesheet()),$graphGetGlobalVariable$$=$graph$$.getGlobalVariable;$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"===$name$$?$page$$.getName():"pagenumber"===$name$$?1:$graphGetGlobalVariable$$.apply($$jscomp$this$$,$$jscomp$arguments$$)};document.body.appendChild($graph$$.container);$graph$$.model.setRoot($page$$.root)}$filetitle$jscomp$1_result$$=this.createFileData($node$$,$graph$$,$file$$,window.location.href,$forceXml$$,
$forceSvg$$,$forceHtml$$,$embeddedCallback$$,$ignoreSelection$$,$compact$$);$graph$$!==this.editor.graph&&$graph$$.container.parentNode.removeChild($graph$$.container);return $filetitle$jscomp$1_result$$};EditorUi.prototype.getHtml=function $EditorUi$$getHtml$($node$jscomp$22_text$$,$graph$jscomp$27_s$$,$title$$,$data$jscomp$89_editLink$$,$redirect$$,$ignoreSelection$jscomp$5_x0$$){$ignoreSelection$jscomp$5_x0$$=null!=$ignoreSelection$jscomp$5_x0$$?$ignoreSelection$jscomp$5_x0$$:!0;var $bg$jscomp$8_bounds$$=
null,$js$$=EditorUi.drawHost+"/js/embed-static.min.js";if(null!=$graph$jscomp$27_s$$){var $bg$jscomp$8_bounds$$=$ignoreSelection$jscomp$5_x0$$?$graph$jscomp$27_s$$.getGraphBounds():$graph$jscomp$27_s$$.getBoundingBox($graph$jscomp$27_s$$.getSelectionCells()),$scale$jscomp$5_y0$$=$graph$jscomp$27_s$$.view.scale;$ignoreSelection$jscomp$5_x0$$=Math.floor($bg$jscomp$8_bounds$$.x/$scale$jscomp$5_y0$$-$graph$jscomp$27_s$$.view.translate.x);$scale$jscomp$5_y0$$=Math.floor($bg$jscomp$8_bounds$$.y/$scale$jscomp$5_y0$$-
$graph$jscomp$27_s$$.view.translate.y);$bg$jscomp$8_bounds$$=$graph$jscomp$27_s$$.background;null==$redirect$$&&($graph$jscomp$27_s$$=this.getBasenames().join(";"),0<$graph$jscomp$27_s$$.length&&($js$$=EditorUi.drawHost+"/embed.js?s="+$graph$jscomp$27_s$$));$node$jscomp$22_text$$.setAttribute("x0",$ignoreSelection$jscomp$5_x0$$);$node$jscomp$22_text$$.setAttribute("y0",$scale$jscomp$5_y0$$)}null!=$node$jscomp$22_text$$&&($node$jscomp$22_text$$.setAttribute("pan","1"),$node$jscomp$22_text$$.setAttribute("zoom",
"1"),$node$jscomp$22_text$$.setAttribute("resize","0"),$node$jscomp$22_text$$.setAttribute("fit","0"),$node$jscomp$22_text$$.setAttribute("border","20"),$node$jscomp$22_text$$.setAttribute("links","1"),null!=$data$jscomp$89_editLink$$&&$node$jscomp$22_text$$.setAttribute("edit",$data$jscomp$89_editLink$$));null!=$redirect$$&&($redirect$$=$redirect$$.replace(/&/g,"&amp;"));$node$jscomp$22_text$$=null!=$node$jscomp$22_text$$?Graph.zapGremlins(mxUtils.getXml($node$jscomp$22_text$$)):"";$data$jscomp$89_editLink$$=
Graph.compress($node$jscomp$22_text$$);Graph.decompress($data$jscomp$89_editLink$$)!=$node$jscomp$22_text$$&&($data$jscomp$89_editLink$$=encodeURIComponent($node$jscomp$22_text$$));return(null==$redirect$$?'\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]--\x3e\n':"")+"<!DOCTYPE html>\n<html"+(null!=$redirect$$?' xmlns="http://www.w3.org/1999/xhtml">':">")+"\n<head>\n"+(null==$redirect$$?null!=$title$$?"<title>"+mxUtils.htmlEntities($title$$)+"</title>\n":"":"<title>Draw.io Diagram</title>\n")+
(null!=$redirect$$?'<meta http-equiv="refresh" content="0;URL=\''+$redirect$$+"'\"/>\n":"")+"</head>\n<body"+(null==$redirect$$&&null!=$bg$jscomp$8_bounds$$&&$bg$jscomp$8_bounds$$!=mxConstants.NONE?' style="background-color:'+$bg$jscomp$8_bounds$$+';">':">")+'\n<div class="mxgraph" style="position:relative;overflow:auto;width:100%;">\n<div style="width:1px;height:1px;overflow:hidden;">'+$data$jscomp$89_editLink$$+"</div>\n</div>\n"+(null==$redirect$$?'<script type="text/javascript" src="'+$js$$+'">\x3c/script>':
'<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="'+$redirect$$+'" target="_blank"><img border="0" src="'+EditorUi.drawHost+'/images/drawlogo128.png"/></a>')+"\n</body>\n</html>\n"};EditorUi.prototype.getHtml2=function $EditorUi$$getHtml2$($data$jscomp$90_xml$$,$graph$jscomp$28_js$$,$title$$,$editLink$$,$redirect$$){$graph$jscomp$28_js$$=EditorUi.drawHost+"/js/viewer.min.js";null!=$redirect$$&&($redirect$$=$redirect$$.replace(/&/g,"&amp;"));$data$jscomp$90_xml$$=
{highlight:"#0000ff",nav:this.editor.graph.foldingEnabled,resize:!0,xml:Graph.zapGremlins($data$jscomp$90_xml$$),toolbar:"pages zoom layers lightbox"};null!=this.pages&&null!=this.currentPage&&($data$jscomp$90_xml$$.page=mxUtils.indexOf(this.pages,this.currentPage));return(null==$redirect$$?'\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]--\x3e\n':"")+"<!DOCTYPE html>\n<html"+(null!=$redirect$$?' xmlns="http://www.w3.org/1999/xhtml">':">")+"\n<head>\n"+(null==$redirect$$?
null!=$title$$?"<title>"+mxUtils.htmlEntities($title$$)+"</title>\n":"":"<title>Draw.io Diagram</title>\n")+(null!=$redirect$$?'<meta http-equiv="refresh" content="0;URL=\''+$redirect$$+"'\"/>\n":"")+'<meta charset="utf-8"/>\n</head>\n<body>\n<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="'+mxUtils.htmlEntities(JSON.stringify($data$jscomp$90_xml$$))+'"></div>\n'+(null==$redirect$$?'<script type="text/javascript" src="'+$graph$jscomp$28_js$$+'">\x3c/script>':
'<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="'+$redirect$$+'" target="_blank"><img border="0" src="'+EditorUi.drawHost+'/images/drawlogo128.png"/></a>')+"\n</body>\n</html>\n"};EditorUi.prototype.setFileData=function $EditorUi$$setFileData$($cause_data$jscomp$91_i$jscomp$66_node$$){$cause_data$jscomp$91_i$jscomp$66_node$$=this.validateFileData($cause_data$jscomp$91_i$jscomp$66_node$$);this.pages=this.fileNode=this.currentPage=null;$cause_data$jscomp$91_i$jscomp$66_node$$=
null!=$cause_data$jscomp$91_i$jscomp$66_node$$&&0<$cause_data$jscomp$91_i$jscomp$66_node$$.length?mxUtils.parseXml($cause_data$jscomp$91_i$jscomp$66_node$$).documentElement:null;var $divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$=null!=$cause_data$jscomp$91_i$jscomp$66_node$$?$cause_data$jscomp$91_i$jscomp$66_node$$.getElementsByTagName("parsererror"):null;if(null!=$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$&&0<$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$.length)throw $cause_data$jscomp$91_i$jscomp$66_node$$=
mxResources.get("invalidOrMissingFile"),$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$=$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$[0].getElementsByTagName("div"),0<$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$.length&&($cause_data$jscomp$91_i$jscomp$66_node$$=mxUtils.getTextContent($divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$[0])),Error($cause_data$jscomp$91_i$jscomp$66_node$$);$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$=null!=$cause_data$jscomp$91_i$jscomp$66_node$$?
this.editor.extractGraphModel($cause_data$jscomp$91_i$jscomp$66_node$$,!0):null;null!=$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$&&($cause_data$jscomp$91_i$jscomp$66_node$$=$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$);if(null!=$cause_data$jscomp$91_i$jscomp$66_node$$&&"mxfile"==$cause_data$jscomp$91_i$jscomp$66_node$$.nodeName&&($divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$=$cause_data$jscomp$91_i$jscomp$66_node$$.getElementsByTagName("diagram"),"0"!=urlParams.pages||1<$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$.length||
1==$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$.length&&$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$[0].hasAttribute("name"))){var $selectedPage$$=null;this.fileNode=$cause_data$jscomp$91_i$jscomp$66_node$$;this.pages=[];for($cause_data$jscomp$91_i$jscomp$66_node$$=0;$cause_data$jscomp$91_i$jscomp$66_node$$<$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$.length;$cause_data$jscomp$91_i$jscomp$66_node$$++){null==$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$[$cause_data$jscomp$91_i$jscomp$66_node$$].getAttribute("id")&&
$divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$[$cause_data$jscomp$91_i$jscomp$66_node$$].setAttribute("id",$cause_data$jscomp$91_i$jscomp$66_node$$);var $page$$=new DiagramPage($divs$jscomp$2_errors$jscomp$1_nodes$jscomp$2_tmp$$[$cause_data$jscomp$91_i$jscomp$66_node$$]);null==$page$$.getName()&&$page$$.setName(mxResources.get("pageWithNumber",[$cause_data$jscomp$91_i$jscomp$66_node$$+1]));this.pages.push($page$$);null!=urlParams["page-id"]&&$page$$.getId()==urlParams["page-id"]&&($selectedPage$$=
$page$$)}this.currentPage=null!=$selectedPage$$?$selectedPage$$:this.pages[Math.max(0,Math.min(this.pages.length-1,urlParams.page||0))];$cause_data$jscomp$91_i$jscomp$66_node$$=this.currentPage.node}"0"!=urlParams.pages&&null==this.fileNode&&null!=$cause_data$jscomp$91_i$jscomp$66_node$$&&(this.fileNode=$cause_data$jscomp$91_i$jscomp$66_node$$.ownerDocument.createElement("mxfile"),this.currentPage=new DiagramPage($cause_data$jscomp$91_i$jscomp$66_node$$.ownerDocument.createElement("diagram")),this.currentPage.setName(mxResources.get("pageWithNumber",
[1])),this.pages=[this.currentPage]);this.editor.setGraphXml($cause_data$jscomp$91_i$jscomp$66_node$$);null!=this.currentPage&&(this.currentPage.root=this.editor.graph.model.root)};EditorUi.prototype.getBaseFilename=function $EditorUi$$getBaseFilename$($ignorePageName$$){var $basename_file$$=this.getCurrentFile(),$basename_file$$=null!=$basename_file$$&&null!=$basename_file$$.getTitle()?$basename_file$$.getTitle():this.defaultFilename;if(/(\.xml)$/i.test($basename_file$$)||/(\.html)$/i.test($basename_file$$)||
/(\.svg)$/i.test($basename_file$$)||/(\.png)$/i.test($basename_file$$)||/(\.drawio)$/i.test($basename_file$$))$basename_file$$=$basename_file$$.substring(0,$basename_file$$.lastIndexOf("."));!$ignorePageName$$&&null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&null!=this.currentPage.node.getAttribute("name")&&0<this.currentPage.getName().length&&($basename_file$$=$basename_file$$+"-"+this.currentPage.getName());return $basename_file$$};EditorUi.prototype.downloadFile=function $EditorUi$$downloadFile$($format$$,
$nonCompressed$$,$addShadow$$,$ignoreSelection$$,$currentPage$$,$pageVisible$$,$transparent$$){try{$ignoreSelection$$=null!=$ignoreSelection$$?$ignoreSelection$$:this.editor.graph.isSelectionEmpty();var $basename$$=this.getBaseFilename(!$currentPage$$),$filename$$=$basename$$+"."+$format$$;if("xml"==$format$$){var $data$jscomp$0$$='<?xml version="1.0" encoding="UTF-8"?>\n'+($nonCompressed$$?mxUtils.getXml(this.editor.getGraphXml($ignoreSelection$$)):this.getFileData(!0,null,null,null,$ignoreSelection$$,
$currentPage$$));this.saveData($filename$$,$format$$,$data$jscomp$0$$,"text/xml")}else if("html"==$format$$)$data$jscomp$0$$=this.getHtml2(this.getFileData(!0),this.editor.graph,$basename$$),this.saveData($filename$$,$format$$,$data$jscomp$0$$,"text/html");else if("svg"!=$format$$&&"xmlsvg"!=$format$$||!this.spinner.spin(document.body,mxResources.get("export")))"xmlpng"==$format$$?$filename$$=$basename$$+".png":"jpeg"==$format$$&&($filename$$=$basename$$+".jpg"),this.saveRequest($filename$$,$format$$,
mxUtils.bind(this,function($newTitle$$,$base64$$){try{var $prev$$=this.editor.graph.pageVisible;null!=$pageVisible$$&&(this.editor.graph.pageVisible=$pageVisible$$);var $req$$=this.createDownloadRequest($newTitle$$,$format$$,$ignoreSelection$$,$base64$$,$transparent$$,$currentPage$$);this.editor.graph.pageVisible=$prev$$;return $req$$}catch($e$$){this.handleError($e$$)}}));else{var $svg$jscomp$0$$=null,$saveSvg$$=mxUtils.bind(this,function($data$$){$data$$.length<=MAX_REQUEST_SIZE?this.saveData($filename$$,
"svg",$data$$,"image/svg+xml"):this.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup($svg$jscomp$0$$)}))});if("svg"==$format$$){var $bg$$=this.editor.graph.background;if($transparent$$||$bg$$==mxConstants.NONE)$bg$$=null;var $svgRoot$$=this.editor.graph.getSvg($bg$$,null,null,null,null,$ignoreSelection$$);$addShadow$$&&this.editor.graph.addSvgShadow($svgRoot$$);this.convertImages($svgRoot$$,mxUtils.bind(this,mxUtils.bind(this,
function($svgRoot2$$){this.spinner.stop();$saveSvg$$('<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+mxUtils.getXml($svgRoot2$$))})))}else $filename$$=$basename$$+".svg",$svg$jscomp$0$$=this.getFileData(!1,!0,null,mxUtils.bind(this,function($svg$$){this.spinner.stop();$saveSvg$$($svg$$)}),$ignoreSelection$$)}}catch($e$$){this.handleError($e$$)}};EditorUi.prototype.createDownloadRequest=function $EditorUi$$createDownloadRequest$($filename$$,
$format$$,$data$jscomp$94_ignoreSelection$$,$base64$$,$transparent$$,$bg$jscomp$11_currentPage$jscomp$6_i$$){var $bounds$$=this.editor.graph.getGraphBounds();$data$jscomp$94_ignoreSelection$$=this.getFileData(!0,null,null,null,$data$jscomp$94_ignoreSelection$$,0==$bg$jscomp$11_currentPage$jscomp$6_i$$?!1:"xmlpng"!=$format$$);var $range$$="",$allPages$$="";if($bounds$$.width*$bounds$$.height>MAX_AREA||$data$jscomp$94_ignoreSelection$$.length>MAX_REQUEST_SIZE)throw{message:mxResources.get("drawingTooLarge")};
$bounds$$="0";"pdf"==$format$$&&0==$bg$jscomp$11_currentPage$jscomp$6_i$$&&($allPages$$="&allPages=1");if("xmlpng"==$format$$&&($bounds$$="1",$format$$="png",null!=this.pages&&null!=this.currentPage))for($bg$jscomp$11_currentPage$jscomp$6_i$$=0;$bg$jscomp$11_currentPage$jscomp$6_i$$<this.pages.length;$bg$jscomp$11_currentPage$jscomp$6_i$$++)if(this.pages[$bg$jscomp$11_currentPage$jscomp$6_i$$]==this.currentPage){$range$$="&from="+$bg$jscomp$11_currentPage$jscomp$6_i$$;break}$bg$jscomp$11_currentPage$jscomp$6_i$$=
this.editor.graph.background;"png"==$format$$&&$transparent$$?$bg$jscomp$11_currentPage$jscomp$6_i$$=mxConstants.NONE:$transparent$$||null!=$bg$jscomp$11_currentPage$jscomp$6_i$$&&$bg$jscomp$11_currentPage$jscomp$6_i$$!=mxConstants.NONE||($bg$jscomp$11_currentPage$jscomp$6_i$$="#ffffff");return new mxXmlRequest(EXPORT_URL,"format="+$format$$+$range$$+$allPages$$+"&bg="+(null!=$bg$jscomp$11_currentPage$jscomp$6_i$$?$bg$jscomp$11_currentPage$jscomp$6_i$$:mxConstants.NONE)+"&base64="+$base64$$+"&embedXml="+
$bounds$$+"&xml="+encodeURIComponent($data$jscomp$94_ignoreSelection$$)+(null!=$filename$$?"&filename="+encodeURIComponent($filename$$):""))};EditorUi.prototype.setMode=function $EditorUi$$setMode$($mode$$,$remember$$){this.mode=$mode$$};EditorUi.prototype.loadDescriptor=function $EditorUi$$loadDescriptor$($desc$$,$success$$,$error$$){var $hash$$=window.location.hash,$loadData$$=mxUtils.bind(this,function($data$$){var $realData$$=null!=$desc$$.data?$desc$$.data:"";null!=$data$$&&0<$data$$.length&&
(0<$realData$$.length&&($realData$$+="\n"),$realData$$+=$data$$);$data$$=new LocalFile(this,"csv"!=$desc$$.format&&0<$realData$$.length?$realData$$:this.emptyDiagramXml,null!=urlParams.title?decodeURIComponent(urlParams.title):this.defaultFilename,!0);$data$$.getHash=function $$data$$$getHash$(){return $hash$$};this.fileLoaded($data$$);"csv"==$desc$$.format&&this.importCsv($realData$$,mxUtils.bind(this,function($cells$$){this.editor.undoManager.clear();this.editor.setModified(!1);this.editor.setStatus("")}));
if(null!=$desc$$.update){var $interval$$=null!=$desc$$.interval?parseInt($desc$$.interval):6E4,$currentThread$$=null,$doUpdate$$=mxUtils.bind(this,function(){var $page$$=this.currentPage;mxUtils.post($desc$$.update,"xml="+encodeURIComponent(mxUtils.getXml(this.editor.getGraphXml())),mxUtils.bind(this,function($req$$){$page$$===this.currentPage&&(200<=$req$$.getStatus()&&300>=$req$$.getStatus()?(this.updateDiagram($req$$.getText()),$schedule$$()):this.handleError({message:mxResources.get("error")+
" "+$req$$.getStatus()}))}),mxUtils.bind(this,function($err$$){this.handleError($err$$)}))}),$schedule$$=mxUtils.bind(this,function(){window.clearTimeout($currentThread$$);$currentThread$$=window.setTimeout($doUpdate$$,$interval$$)});this.editor.addListener("pageSelected",mxUtils.bind(this,function(){$schedule$$();$doUpdate$$()}));$schedule$$();$doUpdate$$()}null!=$success$$&&$success$$()});if(null!=$desc$$.url&&0<$desc$$.url.length){var $realUrl$$=$desc$$.url;/^https?:\/\//.test($realUrl$$)&&!this.editor.isCorsEnabledForUrl($realUrl$$)&&
($realUrl$$=PROXY_URL+"?url="+encodeURIComponent($realUrl$$));this.loadUrl($realUrl$$,mxUtils.bind(this,function($data$$){$loadData$$($data$$)}),mxUtils.bind(this,function($err$$){null!=$error$$&&$error$$($err$$)}))}else $loadData$$("")};EditorUi.prototype.updateDiagram=function $EditorUi$$updateDiagram$($node$jscomp$24_xml$$){function $createOverlay$$($desc$$){var $overlay$$=new mxCellOverlay($desc$$.image||$graph$$.warningImage,$desc$$.tooltip,$desc$$.align,$desc$$.valign,$desc$$.offset);$overlay$$.addListener(mxEvent.CLICK,
function($sender$$,$evt$$){$ui$$.alert($desc$$.tooltip)});return $overlay$$}var $doc$$=null,$ui$$=this;if(null!=$node$jscomp$24_xml$$&&0<$node$jscomp$24_xml$$.length&&($doc$$=mxUtils.parseXml($node$jscomp$24_xml$$),$node$jscomp$24_xml$$=null!=$doc$$?$doc$$.documentElement:null,null!=$node$jscomp$24_xml$$&&"updates"==$node$jscomp$24_xml$$.nodeName)){var $graph$$=this.editor.graph,$model$$=$graph$$.getModel();$model$$.beginUpdate();var $fit$$=null;try{for($node$jscomp$24_xml$$=$node$jscomp$24_xml$$.firstChild;null!=
$node$jscomp$24_xml$$;){if("update"==$node$jscomp$24_xml$$.nodeName){var $cell$$=$model$$.getCell($node$jscomp$24_xml$$.getAttribute("id"));if(null!=$cell$$){try{var $value$$=$node$jscomp$24_xml$$.getAttribute("value");if(null!=$value$$){var $valueNode$$=mxUtils.parseXml($value$$).documentElement;if(null!=$valueNode$$)if("1"==$valueNode$$.getAttribute("replace-value"))$model$$.setValue($cell$$,$valueNode$$);else for(var $attrs$$=$valueNode$$.attributes,$j$$=0;$j$$<$attrs$$.length;$j$$++)$graph$$.setAttributeForCell($cell$$,
$attrs$$[$j$$].nodeName,0<$attrs$$[$j$$].nodeValue.length?$attrs$$[$j$$].nodeValue:null)}}catch($e$$){null!=window.console&&console.log("Error in value for "+$cell$$.id+": "+$e$$)}try{var $style$$=$node$jscomp$24_xml$$.getAttribute("style");null!=$style$$&&$graph$$.model.setStyle($cell$$,$style$$)}catch($e$13$$){null!=window.console&&console.log("Error in style for "+$cell$$.id+": "+$e$13$$)}try{var $icon$$=$node$jscomp$24_xml$$.getAttribute("icon");if(null!=$icon$$){var $desc$jscomp$0$$=0<$icon$$.length?
JSON.parse($icon$$):null;null!=$desc$jscomp$0$$&&$desc$jscomp$0$$.append||$graph$$.removeCellOverlays($cell$$);null!=$desc$jscomp$0$$&&$graph$$.addCellOverlay($cell$$,$createOverlay$$($desc$jscomp$0$$))}}catch($e$14$$){null!=window.console&&console.log("Error in icon for "+$cell$$.id+": "+$e$14$$)}try{var $geo$$=$node$jscomp$24_xml$$.getAttribute("geometry");if(null!=$geo$$){var $geo$$=JSON.parse($geo$$),$curr$$=$graph$$.getCellGeometry($cell$$);if(null!=$curr$$){$curr$$=$curr$$.clone();for(key in $geo$$){var $val$$=
parseFloat($geo$$[key]);"dx"==key?$curr$$.x+=$val$$:"dy"==key?$curr$$.y+=$val$$:"dw"==key?$curr$$.width+=$val$$:"dh"==key?$curr$$.height+=$val$$:$curr$$[key]=parseFloat($geo$$[key])}$graph$$.model.setGeometry($cell$$,$curr$$)}}}catch($e$15$$){null!=window.console&&console.log("Error in icon for "+$cell$$.id+": "+$e$15$$)}}}else if("model"==$node$jscomp$24_xml$$.nodeName){for(var $dataNode$$=$node$jscomp$24_xml$$.firstChild;null!=$dataNode$$&&$dataNode$$.nodeType!=mxConstants.NODETYPE_ELEMENT;)$dataNode$$=
$dataNode$$.nextSibling;null!=$dataNode$$&&(new mxCodec($node$jscomp$24_xml$$.firstChild)).decode($dataNode$$,$model$$)}else if("view"==$node$jscomp$24_xml$$.nodeName){if($node$jscomp$24_xml$$.hasAttribute("scale")&&($graph$$.view.scale=parseFloat($node$jscomp$24_xml$$.getAttribute("scale"))),$node$jscomp$24_xml$$.hasAttribute("dx")||$node$jscomp$24_xml$$.hasAttribute("dy"))$graph$$.view.translate=new mxPoint(parseFloat($node$jscomp$24_xml$$.getAttribute("dx")||0),parseFloat($node$jscomp$24_xml$$.getAttribute("dy")||
0))}else"fit"==$node$jscomp$24_xml$$.nodeName&&($fit$$=$node$jscomp$24_xml$$.hasAttribute("max-scale")?parseFloat($node$jscomp$24_xml$$.getAttribute("max-scale")):1);$node$jscomp$24_xml$$=$node$jscomp$24_xml$$.nextSibling}}finally{$model$$.endUpdate()}null!=$fit$$&&this.chromelessResize&&this.chromelessResize(!0,$fit$$)}return $doc$$};EditorUi.prototype.getCopyFilename=function $EditorUi$$getCopyFilename$($file$$,$timestamp$$){var $JSCompiler_temp_const$jscomp$69_title$$=null!=$file$$&&null!=$file$$.getTitle()?
$file$$.getTitle():this.defaultFilename,$extension$$="",$dot$jscomp$3_y$$=$JSCompiler_temp_const$jscomp$69_title$$.lastIndexOf(".");0<=$dot$jscomp$3_y$$&&($extension$$=$JSCompiler_temp_const$jscomp$69_title$$.substring($dot$jscomp$3_y$$),$JSCompiler_temp_const$jscomp$69_title$$=$JSCompiler_temp_const$jscomp$69_title$$.substring(0,$dot$jscomp$3_y$$));if($timestamp$$)var $s$jscomp$inline_95_today$$=new Date,$dot$jscomp$3_y$$=$s$jscomp$inline_95_today$$.getFullYear(),$m$$=$s$jscomp$inline_95_today$$.getMonth()+
1,$d$$=$s$jscomp$inline_95_today$$.getDate(),$h$$=$s$jscomp$inline_95_today$$.getHours(),$mi$$=$s$jscomp$inline_95_today$$.getMinutes(),$s$jscomp$inline_95_today$$=$s$jscomp$inline_95_today$$.getSeconds(),$JSCompiler_temp_const$jscomp$69_title$$=$JSCompiler_temp_const$jscomp$69_title$$+(" "+($dot$jscomp$3_y$$+"-"+$m$$+"-"+$d$$+"-"+$h$$+"-"+$mi$$+"-"+$s$jscomp$inline_95_today$$));return $JSCompiler_temp_const$jscomp$69_title$$=mxResources.get("copyOf",[$JSCompiler_temp_const$jscomp$69_title$$])+$extension$$};
EditorUi.prototype.fileLoaded=function $EditorUi$$fileLoaded$($file$jscomp$0$$,$noDialogs$$){var $$jscomp$this$$=this,$result$$=!1,$oldFile$$=this.getCurrentFile();this.fileLoadedError=null;this.setCurrentFile(null);this.hideDialog();$oldFile$$&&($oldFile$$.removeListener(this.descriptorChangedListener),$oldFile$$.close());this.editor.graph.model.clear();this.editor.undoManager.clear();var $noFile$$=function $$noFile$$$(){$$jscomp$this$$.setGraphEnabled(!1);$oldFile$$&&$$jscomp$this$$.updateDocumentTitle();
$$jscomp$this$$.editor.graph.model.clear();$$jscomp$this$$.editor.undoManager.clear();$$jscomp$this$$.setBackgroundImage(null);!$noDialogs$$&&null!=window.location.hash&&0<window.location.hash.length&&(window.location.hash="");!App.CSET&&$$jscomp$this$$.fname&&($$jscomp$this$$.fnameWrapper.style.display="none",$$jscomp$this$$.fname.innerHTML="",$$jscomp$this$$.fname.setAttribute("title",mxResources.get("rename")));$$jscomp$this$$.editor.setStatus("");$$jscomp$this$$.updateUi();App.CSET?CsetUtils.LoadFileFromCSET($$jscomp$this$$).then(function($file$$){if(!$noDialogs$$&&
$file$$.isEmpty()){var $compact$jscomp$2_dlg$$=$$jscomp$this$$.isOffline(),$width$$=$compact$jscomp$2_dlg$$?350:620,$height$$=$compact$jscomp$2_dlg$$?70:440,$onclose$$=mxUtils.bind($$jscomp$this$$,function($cancel$$){this.hideDialog();$cancel$$||$file$$.save()}),$compact$jscomp$2_dlg$$=new NewDialog($$jscomp$this$$,{compact:$compact$jscomp$2_dlg$$,showName:!1,hideFromTemplateUrl:!0});$$jscomp$this$$.showDialog($compact$jscomp$2_dlg$$.container,$width$$,$height$$,!0,!0,$onclose$$);$compact$jscomp$2_dlg$$.init()}}):
$noDialogs$$||$$jscomp$this$$.showSplash()};if(!$file$jscomp$0$$)return $noFile$$(),$result$$;try{mxClient.IS_SF&&"min"===uiTheme&&(this.diagramContainer.style.visibility="");this.openingFile=!0;this.setCurrentFile($file$jscomp$0$$);$file$jscomp$0$$.addListener("descriptorChanged",this.descriptorChangedListener);$file$jscomp$0$$.addListener("contentChanged",this.descriptorChangedListener);$file$jscomp$0$$.open();delete this.openingFile;var $filemode$$=$file$jscomp$0$$.getMode();this.setGraphEnabled(!0);
this.setMode($filemode$$);this.editor.graph.model.prefix=Editor.guid()+"-";this.editor.undoManager.clear();this.descriptorChanged();this.updateUi();$file$jscomp$0$$.isEditable()?$file$jscomp$0$$.isModified()?($file$jscomp$0$$.addUnsavedStatus(),null!=$file$jscomp$0$$.backupPatch&&$file$jscomp$0$$.patch([$file$jscomp$0$$.backupPatch])):this.editor.setStatus(""):this.editor.setStatus('<span class="geStatusAlert" style="margin-left:8px;">'+mxUtils.htmlEntities(mxResources.get("readOnly"))+"</span>");
!this.editor.isChromelessView()||this.editor.editable?(this.editor.graph.selectUnlockedLayer(),this.showLayersDialog(),this.restoreLibraries(),window.self!==window.top&&window.focus()):this.editor.graph.isLightboxView()&&this.lightboxFit();this.chromelessResize&&this.chromelessResize();this.editor.fireEvent(new mxEventObject("fileLoaded"));$result$$=!0;!this.isOffline()&&$filemode$$&&EditorUi.logEvent({category:$filemode$$.toUpperCase()+"-OPEN-FILE-"+$file$jscomp$0$$.getHash(),action:"size_"+$file$jscomp$0$$.getSize(),
label:"autosave_"+(this.editor.autosave?"on":"off")});if(this.editor.editable&&$filemode$$&&this.mode===$filemode$$&&$filemode$$!==App.MODE_DEVICE)try{this.addRecent({id:$file$jscomp$0$$.getHash(),title:$file$jscomp$0$$.getTitle(),mode:$filemode$$})}catch($e$$){}try{mxSettings.setOpenCounter(mxSettings.getOpenCounter()+1),mxSettings.save()}catch($e$16$$){}}catch($e$19$$){this.fileLoadedError=$e$19$$;window.console&&console.log("error in fileLoaded:",$file$jscomp$0$$,$e$19$$);if(EditorUi.enableLogging&&
!this.isOffline())try{(new Image).src=(null!=window.DRAWIO_LOG_URL?window.DRAWIO_LOG_URL:"")+"/log?v="+encodeURIComponent(EditorUi.VERSION)+"&msg=errorInFileLoaded:url:"+encodeURIComponent(window.location.href)+($e$19$$&&$e$19$$.message?":err:"+encodeURIComponent($e$19$$.message):"")+($e$19$$&&$e$19$$.stack?"&stack="+encodeURIComponent($e$19$$.stack):"")}catch($e$17$$){}$filemode$$=mxUtils.bind(this,function(){urlParams.url&&this.spinner.spin(document.body,mxResources.get("reconnecting"))?window.location.search=
this.getSearch(["url"]):$oldFile$$?this.fileLoaded($oldFile$$):$noFile$$()});$noDialogs$$?$filemode$$():this.handleError($e$19$$,mxResources.get("errorLoadingFile"),$filemode$$,!0)}return $result$$};EditorUi.prototype.getHashValueForPages=function $EditorUi$$getHashValueForPages$($pages$$,$details$$){var $hash$$=0,$model$$=new mxGraphModel,$codec$$=new mxCodec;null!=$details$$&&($details$$.byteCount=0,$details$$.attrCount=0,$details$$.eltCount=0,$details$$.nodeCount=0);for(var $i$$=0;$i$$<$pages$$.length;$i$$++){this.updatePageRoot($pages$$[$i$$]);
var $diagram$$=$pages$$[$i$$].node.cloneNode(!1);$diagram$$.removeAttribute("name");$model$$.root=$pages$$[$i$$].root;var $xmlNode$$=$codec$$.encode($model$$);this.editor.graph.saveViewState($pages$$[$i$$].viewState,$xmlNode$$,!0);$xmlNode$$.removeAttribute("pageWidth");$xmlNode$$.removeAttribute("pageHeight");$diagram$$.appendChild($xmlNode$$);null!=$details$$&&($details$$.eltCount+=$diagram$$.getElementsByTagName("*").length,$details$$.nodeCount+=$diagram$$.getElementsByTagName("mxCell").length);
$hash$$=($hash$$<<5)-$hash$$+this.hashValue($diagram$$,function($obj$$,$key$$,$value$$,$isXml$$){return!$isXml$$||"mxGeometry"!=$obj$$.nodeName&&"mxPoint"!=$obj$$.nodeName||"x"!=$key$$&&"y"!=$key$$&&"width"!=$key$$&&"height"!=$key$$?$isXml$$&&"mxCell"==$obj$$.nodeName&&"previous"==$key$$?null:$value$$:Math.round($value$$)},$details$$)<<0}return $hash$$};EditorUi.prototype.hashValue=function $EditorUi$$hashValue$($obj$jscomp$28_str$$,$replacer_temp$$,$details$$){var $hash$$=0;if(null!=$obj$jscomp$28_str$$&&
"object"===typeof $obj$jscomp$28_str$$&&"number"===typeof $obj$jscomp$28_str$$.nodeType&&"string"===typeof $obj$jscomp$28_str$$.nodeName&&"function"===typeof $obj$jscomp$28_str$$.getAttribute){null!=$obj$jscomp$28_str$$.nodeName&&($hash$$^=this.hashValue($obj$jscomp$28_str$$.nodeName,$replacer_temp$$,$details$$));if(null!=$obj$jscomp$28_str$$.attributes){null!=$details$$&&($details$$.attrCount+=$obj$jscomp$28_str$$.attributes.length);for(var $i$$=0;$i$$<$obj$jscomp$28_str$$.attributes.length;$i$$++){var $key$$=
$obj$jscomp$28_str$$.attributes[$i$$].name,$value$$=null!=$replacer_temp$$?$replacer_temp$$($obj$jscomp$28_str$$,$key$$,$obj$jscomp$28_str$$.attributes[$i$$].value,!0):$obj$jscomp$28_str$$.attributes[$i$$].value;null!=$value$$&&($hash$$^=this.hashValue($key$$,$replacer_temp$$,$details$$)+this.hashValue($value$$,$replacer_temp$$,$details$$))}}if(null!=$obj$jscomp$28_str$$.childNodes)for($i$$=0;$i$$<$obj$jscomp$28_str$$.childNodes.length;$i$$++)$hash$$=($hash$$<<5)-$hash$$+this.hashValue($obj$jscomp$28_str$$.childNodes[$i$$],
$replacer_temp$$,$details$$)<<0}else if(null!=$obj$jscomp$28_str$$&&"function"!==typeof $obj$jscomp$28_str$$){$obj$jscomp$28_str$$=String($obj$jscomp$28_str$$);$replacer_temp$$=0;null!=$details$$&&($details$$.byteCount+=$obj$jscomp$28_str$$.length);for($i$$=0;$i$$<$obj$jscomp$28_str$$.length;$i$$++)$replacer_temp$$=($replacer_temp$$<<5)-$replacer_temp$$+$obj$jscomp$28_str$$.charCodeAt($i$$)<<0;$hash$$^=$replacer_temp$$}return $hash$$};EditorUi.prototype.descriptorChanged=function $EditorUi$$descriptorChanged$(){};
EditorUi.prototype.restoreLibraries=function $EditorUi$$restoreLibraries$(){};EditorUi.prototype.saveLibrary=function $EditorUi$$saveLibrary$($name$$,$images$$,$file$$,$mode$$,$noSpin$$,$noReload$$,$fn$$){};EditorUi.prototype.isScratchpadEnabled=function $EditorUi$$isScratchpadEnabled$(){return isLocalStorage||mxClient.IS_CHROMEAPP};EditorUi.prototype.toggleScratchpad=function $EditorUi$$toggleScratchpad$(){this.isScratchpadEnabled()&&(null==this.scratchpad?this.getLocalData(".scratchpad",mxUtils.bind(this,
function($xml$$){null==$xml$$&&($xml$$=this.emptyLibraryXml);this.loadLibrary(new StorageLibrary(this,$xml$$,".scratchpad"))})):this.closeLibrary(this.scratchpad))};EditorUi.prototype.createLibraryDataFromImages=function $EditorUi$$createLibraryDataFromImages$($images$$){var $doc$$=mxUtils.createXmlDocument(),$library$$=$doc$$.createElement("mxlibrary");mxUtils.setTextContent($library$$,JSON.stringify($images$$));$doc$$.appendChild($library$$);return mxUtils.getXml($doc$$)};EditorUi.prototype.closeLibrary=
function $EditorUi$$closeLibrary$($file$$){null!=$file$$&&(this.removeLibrarySidebar($file$$.getHash()),$file$$.constructor!=LocalLibrary&&mxSettings.removeCustomLibrary($file$$.getHash()),".scratchpad"==$file$$.title&&(this.scratchpad=null))};EditorUi.prototype.removeLibrarySidebar=function $EditorUi$$removeLibrarySidebar$($id$$){var $elts$$=this.sidebar.palettes[$id$$];if(null!=$elts$$){for(var $i$$=0;$i$$<$elts$$.length;$i$$++)$elts$$[$i$$].parentNode.removeChild($elts$$[$i$$]);delete this.sidebar.palettes[$id$$]}};
EditorUi.prototype.repositionLibrary=function $EditorUi$$repositionLibrary$($nextChild$$){var $c$$=this.sidebar.container;if(null==$nextChild$$){var $content$jscomp$3_elts$$=this.sidebar.palettes["L.scratchpad"];null==$content$jscomp$3_elts$$&&($content$jscomp$3_elts$$=this.sidebar.palettes.search);null!=$content$jscomp$3_elts$$&&($nextChild$$=$content$jscomp$3_elts$$[$content$jscomp$3_elts$$.length-1].nextSibling)}$nextChild$$=null!=$nextChild$$?$nextChild$$:$c$$.firstChild.nextSibling.nextSibling;
var $content$jscomp$3_elts$$=$c$$.lastChild,$title$$=$content$jscomp$3_elts$$.previousSibling;$c$$.insertBefore($content$jscomp$3_elts$$,$nextChild$$);$c$$.insertBefore($title$$,$content$jscomp$3_elts$$)};EditorUi.prototype.loadLibrary=function $EditorUi$$loadLibrary$($file$$){var $doc$$=mxUtils.parseXml($file$$.getData());if("mxlibrary"==$doc$$.documentElement.nodeName){var $images$$=JSON.parse(mxUtils.getTextContent($doc$$.documentElement));this.libraryLoaded($file$$,$images$$,$doc$$.documentElement.getAttribute("title"))}else throw{message:mxResources.get("notALibraryFile")};
};EditorUi.prototype.getLibraryStorageHint=function $EditorUi$$getLibraryStorageHint$($file$$){return""};EditorUi.prototype.libraryLoaded=function $EditorUi$$libraryLoaded$($file$jscomp$0$$,$images$$,$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$){if(null!=this.sidebar){$file$jscomp$0$$.constructor!=LocalLibrary&&mxSettings.addCustomLibrary($file$jscomp$0$$.getHash());".scratchpad"==$file$jscomp$0$$.title&&(this.scratchpad=$file$jscomp$0$$);var $elts$$=this.sidebar.palettes[$file$jscomp$0$$.getHash()],
$elts$$=null!=$elts$$?$elts$$[$elts$$.length-1].nextSibling:null;this.removeLibrarySidebar($file$jscomp$0$$.getHash());var $dropTarget$$=null,$addImages$$=mxUtils.bind(this,function($imgs$$,$content$$){0==$imgs$$.length&&$file$jscomp$0$$.isEditable()?(null==$dropTarget$$&&($dropTarget$$=document.createElement("div"),$dropTarget$$.className="geDropTarget",mxUtils.write($dropTarget$$,mxResources.get("dragElementsHere"))),$content$$.appendChild($dropTarget$$)):this.addLibraryEntries($imgs$$,$content$$)});
if(null!=this.sidebar&&null!=$images$$)for(var $i$jscomp$0$$=0;$i$jscomp$0$$<$images$$.length;$i$jscomp$0$$++)mxUtils.bind(this,function($img$$){var $data$$=$img$$.data;null!=$data$$&&null!=$img$$.title?this.sidebar.addEntry($img$$.title,mxUtils.bind(this,function(){$data$$=this.convertDataUri($data$$);var $s$$="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";"fixed"==$img$$.aspect&&($s$$+="aspect=fixed;");return this.sidebar.createVertexTemplate($s$$+"image="+$data$$,$img$$.w,
$img$$.h,"",$img$$.title||"",!1,!1,!0)})):null!=$img$$.xml&&null!=$img$$.title&&this.sidebar.addEntry($img$$.title,mxUtils.bind(this,function(){var $cells$$=this.stringToCells(Graph.decompress($img$$.xml));return this.sidebar.createVertexTemplateFromCells($cells$$,$img$$.w,$img$$.h,$img$$.title||"",!0,!1,!0)}))})($images$$[$i$jscomp$0$$]);$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$=null!=$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$&&0<$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$.length?
$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$:$file$jscomp$0$$.getTitle();var $contentDiv$$=this.sidebar.addPalette($file$jscomp$0$$.getHash(),$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$,!0,mxUtils.bind(this,function($content$$){$addImages$$($images$$,$content$$)}));this.repositionLibrary($elts$$);var $title$jscomp$0$$=$contentDiv$$.parentNode.previousSibling;$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$=$title$jscomp$0$$.getAttribute("title");null!=$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$&&
0<$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$.length&&".scratchpad"!=$file$jscomp$0$$.title&&$title$jscomp$0$$.setAttribute("title",this.getLibraryStorageHint($file$jscomp$0$$)+"\n"+$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$);var $buttons$$=document.createElement("div");$buttons$$.style.position="absolute";$buttons$$.style.right="0px";$buttons$$.style.top="0px";$buttons$$.style.padding="8px";mxClient.IS_QUIRKS||8==document.documentMode||($buttons$$.style.backgroundColor="inherit");
$title$jscomp$0$$.style.position="relative";var $btn$$=document.createElement("img");$btn$$.setAttribute("src",Dialog.prototype.closeImage);$btn$$.setAttribute("title",mxResources.get("close"));$btn$$.setAttribute("valign","absmiddle");$btn$$.setAttribute("border","0");$btn$$.style.margin="0 3px";var $saveBtn$$=null;if(".scratchpad"!=$file$jscomp$0$$.title||this.closableScratchpad)$buttons$$.appendChild($btn$$),mxEvent.addListener($btn$$,"click",mxUtils.bind(this,function($evt$$){if(!mxEvent.isConsumed($evt$$)){var $fn$$=
mxUtils.bind(this,function(){this.closeLibrary($file$jscomp$0$$)});null!=$saveBtn$$?this.confirm(mxResources.get("allChangesLost"),null,$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$fn$$();mxEvent.consume($evt$$)}}));if($file$jscomp$0$$.isEditable()){var $graph$$=this.editor.graph,$spinBtn$$=null,$editLibrary$$=mxUtils.bind(this,function($evt$$){this.showLibraryDialog($file$jscomp$0$$.getTitle(),$contentDiv$$,$images$$,$file$jscomp$0$$,$file$jscomp$0$$.getMode());mxEvent.consume($evt$$)}),
$saveLibrary$$=mxUtils.bind(this,function($evt$jscomp$0$$){$file$jscomp$0$$.setModified(!0);$file$jscomp$0$$.isAutosave()?(null!=$spinBtn$$&&null!=$spinBtn$$.parentNode&&$spinBtn$$.parentNode.removeChild($spinBtn$$),$spinBtn$$=$btn$$.cloneNode(!1),$spinBtn$$.setAttribute("src",Editor.spinImage),$spinBtn$$.setAttribute("title",mxResources.get("saving")),$spinBtn$$.style.cursor="default",$spinBtn$$.style.marginRight="2px",$spinBtn$$.style.marginTop="-2px",$buttons$$.insertBefore($spinBtn$$,$buttons$$.firstChild),
$title$jscomp$0$$.style.paddingRight=18*$buttons$$.childNodes.length+"px",this.saveLibrary($file$jscomp$0$$.getTitle(),$images$$,$file$jscomp$0$$,$file$jscomp$0$$.getMode(),!0,!0,function(){null!=$spinBtn$$&&null!=$spinBtn$$.parentNode&&($spinBtn$$.parentNode.removeChild($spinBtn$$),$title$jscomp$0$$.style.paddingRight=18*$buttons$$.childNodes.length+"px")})):null==$saveBtn$$&&($saveBtn$$=$btn$$.cloneNode(!1),$saveBtn$$.setAttribute("src",IMAGE_PATH+"/download.png"),$saveBtn$$.setAttribute("title",
mxResources.get("save")),$buttons$$.insertBefore($saveBtn$$,$buttons$$.firstChild),mxEvent.addListener($saveBtn$$,"click",mxUtils.bind(this,function($evt$$){this.saveLibrary($file$jscomp$0$$.getTitle(),$images$$,$file$jscomp$0$$,$file$jscomp$0$$.getMode(),$file$jscomp$0$$.constructor==LocalLibrary,!0,function(){null==$saveBtn$$||$file$jscomp$0$$.isModified()||($title$jscomp$0$$.style.paddingRight=18*$buttons$$.childNodes.length+"px",$saveBtn$$.parentNode.removeChild($saveBtn$$),$saveBtn$$=null)});
mxEvent.consume($evt$$)})),$title$jscomp$0$$.style.paddingRight=18*$buttons$$.childNodes.length+"px")}),$addCells$$=mxUtils.bind(this,function($cells$jscomp$15_entry$$,$bounds$$,$evt$$,$title$$){$cells$jscomp$15_entry$$=$graph$$.cloneCells(mxUtils.sortCells($graph$$.model.getTopmostCells($cells$jscomp$15_entry$$)));for(var $i$$=0;$i$$<$cells$jscomp$15_entry$$.length;$i$$++){var $geo$$=$graph$$.getCellGeometry($cells$jscomp$15_entry$$[$i$$]);null!=$geo$$&&$geo$$.translate(-$bounds$$.x,-$bounds$$.y)}$contentDiv$$.appendChild(this.sidebar.createVertexTemplateFromCells($cells$jscomp$15_entry$$,
$bounds$$.width,$bounds$$.height,$title$$||"",!0,!1,!1));$cells$jscomp$15_entry$$={xml:Graph.compress(mxUtils.getXml(this.editor.graph.encodeCells($cells$jscomp$15_entry$$))),w:$bounds$$.width,h:$bounds$$.height};null!=$title$$&&($cells$jscomp$15_entry$$.title=$title$$);$images$$.push($cells$jscomp$15_entry$$);$saveLibrary$$($evt$$);null!=$dropTarget$$&&null!=$dropTarget$$.parentNode&&0<$images$$.length&&($dropTarget$$.parentNode.removeChild($dropTarget$$),$dropTarget$$=null)}),$addSelection$$=mxUtils.bind(this,
function($evt$$){if($graph$$.isSelectionEmpty())$graph$$.getRubberband().isActive()?($graph$$.getRubberband().execute($evt$$),$graph$$.getRubberband().reset()):this.showError(mxResources.get("error"),mxResources.get("nothingIsSelected"),mxResources.get("ok"));else{var $cells$$=$graph$$.getSelectionCells(),$bounds$$=$graph$$.view.getBounds($cells$$),$s$$=$graph$$.view.scale;$bounds$$.x/=$s$$;$bounds$$.y/=$s$$;$bounds$$.width/=$s$$;$bounds$$.height/=$s$$;$bounds$$.x-=$graph$$.view.translate.x;$bounds$$.y-=
$graph$$.view.translate.y;$addCells$$($cells$$,$bounds$$)}mxEvent.consume($evt$$)});mxEvent.addGestureListeners($contentDiv$$,function(){},mxUtils.bind(this,function($evt$$){$graph$$.isMouseDown&&null!=$graph$$.panningManager&&null!=$graph$$.graphHandler.shape&&($graph$$.graphHandler.shape.node.style.visibility="hidden",$contentDiv$$.style.backgroundColor="#f1f3f4",$contentDiv$$.style.cursor="copy",$graph$$.panningManager.stop(),$graph$$.autoScroll=!1,null!=$graph$$.graphHandler.guide&&$graph$$.graphHandler.guide.setVisible(!1),
null!=$graph$$.graphHandler.hint&&($graph$$.graphHandler.hint.style.visibility="hidden"),mxEvent.consume($evt$$))}),mxUtils.bind(this,function($evt$$){$graph$$.isMouseDown&&null!=$graph$$.panningManager&&null!=$graph$$.graphHandler&&($contentDiv$$.style.backgroundColor="",$contentDiv$$.style.cursor="default",this.sidebar.showTooltips=!0,$graph$$.panningManager.stop(),$graph$$.graphHandler.reset(),$graph$$.isMouseDown=!1,$graph$$.autoScroll=!0,$addSelection$$($evt$$),mxEvent.consume($evt$$))}));mxEvent.addListener($contentDiv$$,
"mouseleave",mxUtils.bind(this,function($evt$$){$graph$$.isMouseDown&&null!=$graph$$.graphHandler.shape&&($graph$$.graphHandler.shape.node.style.visibility="visible",$contentDiv$$.style.backgroundColor="",$contentDiv$$.style.cursor="",$graph$$.autoScroll=!0,null!=$graph$$.graphHandler.guide&&$graph$$.graphHandler.guide.setVisible(!0),null!=$graph$$.graphHandler.hint&&($graph$$.graphHandler.hint.style.visibility="visible"))}));Graph.fileSupport&&(mxEvent.addListener($contentDiv$$,"dragover",mxUtils.bind(this,
function($evt$$){$contentDiv$$.style.backgroundColor="#f1f3f4";$evt$$.dataTransfer.dropEffect="copy";$contentDiv$$.style.cursor="copy";this.sidebar.hideTooltip();$evt$$.stopPropagation();$evt$$.preventDefault()})),mxEvent.addListener($contentDiv$$,"drop",mxUtils.bind(this,function($evt$$){$contentDiv$$.style.cursor="";$contentDiv$$.style.backgroundColor="";0<$evt$$.dataTransfer.files.length&&this.importFiles($evt$$.dataTransfer.files,0,0,this.maxImageSize,mxUtils.bind(this,function($cells$jscomp$17_data$jscomp$98_style$$,
$mimeType$$,$x$$,$y$$,$w$$,$h$$,$img$$,$doneFn$$,$file$$){if(null!=$cells$jscomp$17_data$jscomp$98_style$$&&"image/"==$mimeType$$.substring(0,6))$cells$jscomp$17_data$jscomp$98_style$$="shape=image;verticalLabelPosition=bottom;verticalAlign=top;aspect=fixed;image="+this.convertDataUri($cells$jscomp$17_data$jscomp$98_style$$),$cells$jscomp$17_data$jscomp$98_style$$=[new mxCell("",new mxGeometry(0,0,$w$$,$h$$),$cells$jscomp$17_data$jscomp$98_style$$)],$cells$jscomp$17_data$jscomp$98_style$$[0].vertex=
!0,$addCells$$($cells$jscomp$17_data$jscomp$98_style$$,new mxRectangle(0,0,$w$$,$h$$),$evt$$,mxEvent.isAltDown($evt$$)?null:$img$$.substring(0,$img$$.lastIndexOf(".")).replace(/_/g," ")),null!=$dropTarget$$&&null!=$dropTarget$$.parentNode&&0<$images$$.length&&($dropTarget$$.parentNode.removeChild($dropTarget$$),$dropTarget$$=null);else{var $done$$=!1,$doImport$$=mxUtils.bind(this,function($theData$$,$theMimeType$$){if(null!=$theData$$&&"text/xml"==$theMimeType$$){var $doc$jscomp$14_i$$=mxUtils.parseXml($theData$$);
if("mxlibrary"==$doc$jscomp$14_i$$.documentElement.nodeName)try{var $temp$$=JSON.parse(mxUtils.getTextContent($doc$jscomp$14_i$$.documentElement));$addImages$$($temp$$,$contentDiv$$);$images$$=$images$$.concat($temp$$);$saveLibrary$$($evt$$);this.spinner.stop();$done$$=!0}catch($e$$){}else if("mxfile"==$doc$jscomp$14_i$$.documentElement.nodeName)try{for(var $pages$$=$doc$jscomp$14_i$$.documentElement.getElementsByTagName("diagram"),$doc$jscomp$14_i$$=0;$doc$jscomp$14_i$$<$pages$$.length;$doc$jscomp$14_i$$++){var $temp$$=
mxUtils.getTextContent($pages$$[$doc$jscomp$14_i$$]),$cells$$=this.stringToCells(Graph.decompress($temp$$)),$size$$=this.editor.graph.getBoundingBoxFromGeometry($cells$$);$addCells$$($cells$$,new mxRectangle(0,0,$size$$.width,$size$$.height),$evt$$)}$done$$=!0}catch($e$20$$){null!=window.console&&console.log("error in drop handler:",$e$20$$)}}$done$$||(this.spinner.stop(),this.handleError({message:mxResources.get("errorLoadingFile")}));null!=$dropTarget$$&&null!=$dropTarget$$.parentNode&&0<$images$$.length&&
($dropTarget$$.parentNode.removeChild($dropTarget$$),$dropTarget$$=null)});null!=$file$$&&null!=$img$$&&(/(\.v(dx|sdx?))($|\?)/i.test($img$$)||/(\.vs(x|sx?))($|\?)/i.test($img$$))?this.importVisio($file$$,function($xml$$){$doImport$$($xml$$,"text/xml")},null,$img$$):!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat($cells$jscomp$17_data$jscomp$98_style$$,$img$$)&&null!=$file$$?this.parseFile($file$$,mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&(this.spinner.stop(),
200<=$xhr$$.status&&299>=$xhr$$.status?$doImport$$($xhr$$.responseText,"text/xml"):this.handleError({message:mxResources.get(413==$xhr$$.status?"drawingTooLarge":"invalidOrMissingFile")},mxResources.get("errorLoadingFile")))})):$doImport$$($cells$jscomp$17_data$jscomp$98_style$$,$mimeType$$)}}));$evt$$.stopPropagation();$evt$$.preventDefault()})),mxEvent.addListener($contentDiv$$,"dragleave",function($evt$$){$contentDiv$$.style.cursor="";$contentDiv$$.style.backgroundColor="";$evt$$.stopPropagation();
$evt$$.preventDefault()}));$btn$$=$btn$$.cloneNode(!1);$btn$$.setAttribute("src",Editor.editImage);$btn$$.setAttribute("title",mxResources.get("edit"));$buttons$$.insertBefore($btn$$,$buttons$$.firstChild);mxEvent.addListener($btn$$,"click",$editLibrary$$);mxEvent.addListener($contentDiv$$,"dblclick",function($evt$$){mxEvent.getSource($evt$$)==$contentDiv$$&&$editLibrary$$($evt$$)});$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$=$btn$$.cloneNode(!1);$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$.setAttribute("src",
Editor.plusImage);$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$.setAttribute("title",mxResources.get("add"));$buttons$$.insertBefore($btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$,$buttons$$.firstChild);mxEvent.addListener($btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$,"click",$addSelection$$);this.isOffline()||".scratchpad"!=$file$jscomp$0$$.title||null==EditorUi.scratchpadHelpLink||($btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$=document.createElement("span"),$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$.setAttribute("title",
mxResources.get("help")),$btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$.style.cssText="color:#a3a3a3;text-decoration:none;margin-right:2px;",mxUtils.write($btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$,"?"),mxEvent.addGestureListeners($btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$,mxUtils.bind(this,function($evt$$){this.openLink(EditorUi.scratchpadHelpLink);mxEvent.consume($evt$$)})),$buttons$$.insertBefore($btn2$jscomp$1_link$jscomp$3_optionalTitle_tip_tmp$$,$buttons$$.firstChild))}$title$jscomp$0$$.appendChild($buttons$$);
$title$jscomp$0$$.style.paddingRight=18*$buttons$$.childNodes.length+"px"}};EditorUi.prototype.addLibraryEntries=function $EditorUi$$addLibraryEntries$($imgs$$,$content$$){for(var $i$$=0;$i$$<$imgs$$.length;$i$$++){var $img$$=$imgs$$[$i$$],$cells$jscomp$19_data$$=$img$$.data;if(null!=$cells$jscomp$19_data$$){var $cells$jscomp$19_data$$=this.convertDataUri($cells$jscomp$19_data$$),$s$$="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";"fixed"==$img$$.aspect&&($s$$+="aspect=fixed;");
$content$$.appendChild(this.sidebar.createVertexTemplate($s$$+"image="+$cells$jscomp$19_data$$,$img$$.w,$img$$.h,"",$img$$.title||"",!1,!1,!0))}else null!=$img$$.xml&&($cells$jscomp$19_data$$=this.stringToCells(Graph.decompress($img$$.xml)),0<$cells$jscomp$19_data$$.length&&$content$$.appendChild(this.sidebar.createVertexTemplateFromCells($cells$jscomp$19_data$$,$img$$.w,$img$$.h,$img$$.title||"",!0,!1,!0)))}};EditorUi.prototype.getResource=function $EditorUi$$getResource$($obj$$){return null!=$obj$$?
$obj$$[mxLanguage]||$obj$$.main:null};EditorUi.prototype.footerHeight=0;"1"==urlParams.offline||EditorUi.isElectronApp||("1"==urlParams.savesidebar&&(Sidebar.prototype.thumbWidth=64,Sidebar.prototype.thumbHeight=64),EditorUi.prototype.createFooter=function $EditorUi$$createFooter$(){return document.getElementById("geFooter")});EditorUi.initTheme=function $EditorUi$initTheme$(){"atlas"==uiTheme?(mxClient.link("stylesheet",STYLE_PATH+"/atlas.css"),"undefined"!==typeof Toolbar&&(Toolbar.prototype.unselectedBackground=
mxClient.IS_QUIRKS?"none":"linear-gradient(rgb(255, 255, 255) 0px, rgb(242, 242, 242) 100%)",Toolbar.prototype.selectedBackground="rgb(242, 242, 242)"),Editor.prototype.initialTopSpacing=3,EditorUi.prototype.menubarHeight=41,EditorUi.prototype.toolbarHeight=38):"dark"==uiTheme&&(mxClient.link("stylesheet",STYLE_PATH+"/dark.css"),Dialog.backdropColor="#2a2a2a",Graph.prototype.defaultThemeName="darkTheme",Graph.prototype.defaultPageBackgroundColor="#2a2a2a",Graph.prototype.defaultPageBorderColor="#505759",
Format.prototype.inactiveTabBackgroundColor="black",BaseFormatPanel.prototype.buttonBackgroundColor="#2a2a2a",Sidebar.prototype.dragPreviewBorder="1px dashed #cccccc",mxGraphHandler.prototype.previewColor="#cccccc",StyleFormatPanel.prototype.defaultStrokeColor="#cccccc",mxClient.IS_SVG&&(Editor.helpImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////9Du/pqAAAAFXRSTlMAT30qCJRBboyDZyCgRzUUdF46MJlgXETgAAAAeklEQVQY022O2w4DIQhEQUURda/9/28tUO2+7CQS5sgQ4F1RapX78YUwRqQjTU8ILqQfKerTKTvACJ4nLX3krt+8aS82oI8aQC4KavRgtvEW/mDvsICgA03PSGRr79MqX1YPNIxzjyqtw8ZnnRo4t5a5undtJYRywau+ds4Cyza3E6YAAAAASUVORK5CYII=",
Editor.checkmarkImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAARVBMVEUAAACZmZkICAgEBASNjY2Dg4MYGBiTk5N5eXl1dXVmZmZQUFBCQkI3NzceHh4MDAykpKSJiYl+fn5sbGxaWlo/Pz8SEhK96uPlAAAAAXRSTlMAQObYZgAAAE5JREFUGNPFzTcSgDAQQ1HJGUfy/Y9K7V1qeOUfzQifCQZai1XHaz11LFysbDbzgDSSWMZiETz3+b8yNUc/MMsktxuC8XQBSncdLwz+8gCCggGXzBcozAAAAABJRU5ErkJggg=="))};EditorUi.initTheme();EditorUi.prototype.hideFooter=function $EditorUi$$hideFooter$(){var $footer$$=document.getElementById("geFooter");null!=$footer$$&&
(this.footerHeight=0,$footer$$.style.display="none",this.refresh())};EditorUi.prototype.showFooter=function $EditorUi$$showFooter$($height$$){var $footer$$=document.getElementById("geFooter");null!=$footer$$&&(this.footerHeight=$height$$,$footer$$.style.display="inline",this.refresh())};EditorUi.prototype.showImageDialog=function $EditorUi$$showImageDialog$($dlg$jscomp$9_title$$,$value$$,$fn$$,$ignoreExisting$$,$convertDataUri$$){$dlg$jscomp$9_title$$=new ImageDialog(this,$dlg$jscomp$9_title$$,$value$$,
$fn$$,$ignoreExisting$$,$convertDataUri$$);this.showDialog($dlg$jscomp$9_title$$.container,Graph.fileSupport?440:360,Graph.fileSupport?200:90,!0,!0);$dlg$jscomp$9_title$$.init()};EditorUi.prototype.showBackgroundImageDialog=function $EditorUi$$showBackgroundImageDialog$($apply$$){$apply$$=null!=$apply$$?$apply$$:mxUtils.bind(this,function($change$jscomp$3_image$$){$change$jscomp$3_image$$=new ChangePageSetup(this,null,$change$jscomp$3_image$$);$change$jscomp$3_image$$.ignoreColor=!0;this.editor.graph.model.execute($change$jscomp$3_image$$)});
var $dlg$$=new BackgroundImageDialog(this,mxUtils.bind(this,function($image$$){$apply$$($image$$)}));this.showDialog($dlg$$.container,360,200,!0,!0);$dlg$$.init()};EditorUi.prototype.showLibraryDialog=function $EditorUi$$showLibraryDialog$($dlg$jscomp$11_name$$,$sidebar$$,$images$$,$file$$,$mode$$){$dlg$jscomp$11_name$$=new LibraryDialog(this,$dlg$jscomp$11_name$$,$sidebar$$,$images$$,$file$$,$mode$$);this.showDialog($dlg$jscomp$11_name$$.container,640,440,!0,!1,mxUtils.bind(this,function($cancel$$){$cancel$$&&
null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()}));$dlg$jscomp$11_name$$.init()};var $editorUiCreateFormat$$=EditorUi.prototype.createFormat;EditorUi.prototype.createFormat=function $EditorUi$$createFormat$($container$$){var $format$$=$editorUiCreateFormat$$.apply(this,arguments);this.editor.graph.addListener("viewStateChanged",mxUtils.bind(this,function($evt$$){this.editor.graph.isSelectionEmpty()&&$format$$.refresh()}));return $format$$};EditorUi.prototype.createSidebarFooterContainer=
function $EditorUi$$createSidebarFooterContainer$(){var $div$$=this.createDiv("geSidebarContainer geSidebarFooter");$div$$.style.position="absolute";$div$$.style.overflow="hidden";var $elt2$$=document.createElement("a");$elt2$$.className="geTitle";$elt2$$.style.color="#188038";$elt2$$.style.height="100%";$elt2$$.style.paddingTop="9px";$elt2$$.innerHTML='<span style="font-size:18px;margin-right:5px;">+</span>';mxUtils.write($elt2$$,mxResources.get("moreShapes")+"...");mxEvent.addListener($elt2$$,mxClient.IS_POINTER?
"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()}));mxEvent.addListener($elt2$$,"click",mxUtils.bind(this,function($evt$$){this.actions.get("shapes").funct();mxEvent.consume($evt$$)}));$div$$.appendChild($elt2$$);$div$$.className+=" display-none ";return $div$$};EditorUi.prototype.handleError=function $EditorUi$$handleError$($resp$$,$title$$,$fn$$,$invokeFnOnClose$$,$notFoundMessage$$){var $resume$$=this.spinner&&this.spinner.pause?this.spinner.pause():function(){},
$e$$=$resp$$&&$resp$$.error?$resp$$.error:$resp$$;if($e$$||$title$$){var $msg$$=mxUtils.htmlEntities(mxResources.get("unknownError")),$btn$21$$=mxResources.get("ok"),$retry$$=null;$title$$=$title$$||mxResources.get("error");if($e$$)if(console.error("EditorUi.prototype.handleError: ",$e$$),$e$$.retry&&($btn$21$$=mxResources.get("cancel"),$retry$$=function $$retry$$$(){$resume$$();$e$$.retry()}),404===$e$$.code||404===$e$$.status||403===$e$$.code){var $msg$$=403===$e$$.code?null!=$e$$.message?mxUtils.htmlEntities($e$$.message):
mxUtils.htmlEntities(mxResources.get("accessDenied")):$notFoundMessage$$||mxUtils.htmlEntities(mxResources.get("fileNotFoundOrDenied")+(this.drive&&this.drive.user?" ("+this.drive.user.displayName+", "+this.drive.user.email+")":"")),$id$$=window.location.hash;if($id$$&&("#G"===$id$$.substring(0,2)||"#Uhttps%3A%2F%2Fdrive.google.com%2Fuc%3Fid%3D"===$id$$.substring(0,45))&&($resp$$&&$resp$$.error&&($resp$$.error.errors&&$resp$$.error.errors[0]&&"fileAccess"===$resp$$.error.errors[0].reason||$resp$$.error.data&&
$resp$$.error.data[0]&&"fileAccess"===$resp$$.error.data[0].reason)||404==$e$$.code||404==$e$$.status)){$id$$="#U"===$id$$.substring(0,2)?$id$$.substring(45,$id$$.lastIndexOf("%26ex")):$id$$.substring(2);this.showError($title$$,$msg$$,mxResources.get("openInNewWindow"),mxUtils.bind(this,function(){this.editor.graph.openLink("https://drive.google.com/open?id="+$id$$);this.handleError($resp$$,$title$$,$fn$$,$invokeFnOnClose$$,$notFoundMessage$$)}),$retry$$,mxResources.get("changeUser"),mxUtils.bind(this,
function(){this.spinner.spin(document.body,mxResources.get("loading"))&&(this.drive.clearUserId(),gapi.auth.signOut(),window.location.reload())}),mxResources.get("cancel"),mxUtils.bind(this,function(){window.location.hash=""}),480,150);return}}else $e$$.message?$msg$$=mxUtils.htmlEntities($e$$.message):$e$$.response&&$e$$.response.error?$msg$$=mxUtils.htmlEntities($e$$.response.error):window.App&&($e$$.code===App.ERROR_TIMEOUT?$msg$$=mxUtils.htmlEntities(mxResources.get("timeout")):$e$$.code==App.ERROR_BUSY&&
($msg$$=mxUtils.htmlEntities(mxResources.get("busy"))));this.showError($title$$,$msg$$,$btn$21$$,$fn$$,$retry$$,null,null,null,null,null,null,null,$invokeFnOnClose$$?$fn$$:null)}else $fn$$&&$fn$$()};EditorUi.prototype.showError=function $EditorUi$$showError$($dlg$jscomp$12_title$$,$msg$$,$btn$$,$fn$$,$retry$$,$btn2$$,$fn2$$,$btn3$$,$fn3$$,$w$$,$h$$,$hide$$,$onClose$$){var $height$$=$msg$$&&120<$msg$$.length?180:150;$dlg$jscomp$12_title$$=new ErrorDialog(this,$dlg$jscomp$12_title$$,$msg$$,$btn$$||
mxResources.get("ok"),$fn$$,$retry$$,$btn2$$,$fn2$$,$hide$$,$btn3$$,$fn3$$);this.showDialog($dlg$jscomp$12_title$$.container,$w$$||340,$h$$||$height$$,!0,!1,$onClose$$);$dlg$jscomp$12_title$$.init()};EditorUi.prototype.alert=function $EditorUi$$alert$($msg$$,$fn$$){var $dlg$$=new ErrorDialog(this,null,$msg$$,mxResources.get("ok"),$fn$$);this.showDialog($dlg$$.container,340,100,!0,!1);$dlg$$.init()};EditorUi.prototype.confirm=function $EditorUi$$confirm$($dlg$jscomp$14_msg$$,$okFn$$,$cancelFn$$,$okLabel$$,
$cancelLabel$$,$closable$$){var $resume$$=null!=this.spinner&&null!=this.spinner.pause?this.spinner.pause():function(){};$dlg$jscomp$14_msg$$=new ConfirmDialog(this,$dlg$jscomp$14_msg$$,function(){$resume$$();null!=$okFn$$&&$okFn$$()},function(){$resume$$();null!=$cancelFn$$&&$cancelFn$$()},$okLabel$$,$cancelLabel$$);this.showDialog($dlg$jscomp$14_msg$$.container,340,90,!0,$closable$$);$dlg$jscomp$14_msg$$.init()};EditorUi.prototype.setCurrentFile=function $EditorUi$$setCurrentFile$($file$$){$file$$&&
($file$$.opened=(new Date).getTime());this.currentFile=$file$$};EditorUi.prototype.getCurrentFile=function $EditorUi$$getCurrentFile$(){return this.currentFile};EditorUi.prototype.isExportToCanvas=function $EditorUi$$isExportToCanvas$(){return mxClient.IS_CHROMEAPP||!this.editor.graph.mathEnabled&&this.useCanvasForExport};EditorUi.prototype.createSvgDataUri=function $EditorUi$$createSvgDataUri$($svg$$){return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent($svg$$)))};EditorUi.prototype.createImageDataUri=
function $EditorUi$$createImageDataUri$($canvas$$,$xml$$,$format$$){var $data$$=$canvas$$.toDataURL("image/"+$format$$);if(6>=$data$$.length||$data$$==$canvas$$.cloneNode(!1).toDataURL("image/"+$format$$))throw{message:"Invalid image"};null!=$xml$$&&($data$$=this.writeGraphModelToPng($data$$,"zTXt","mxGraphModel",atob(Graph.compress($xml$$))));return $data$$};EditorUi.prototype.saveCanvas=function $EditorUi$$saveCanvas$($canvas$jscomp$8_data$$,$xml$$,$format$$){var $ext$$="jpeg"==$format$$?"jpg":
$format$$,$filename$$=this.getBaseFilename()+"."+$ext$$;$canvas$jscomp$8_data$$=this.createImageDataUri($canvas$jscomp$8_data$$,$xml$$,$format$$);this.saveData($filename$$,$ext$$,$canvas$jscomp$8_data$$.substring($canvas$jscomp$8_data$$.lastIndexOf(",")+1),"image/"+$format$$,!0)};EditorUi.prototype.isLocalFileSave=function $EditorUi$$isLocalFileSave$(){return"remote"!=urlParams.save&&(mxClient.IS_IE||"undefined"!==typeof window.Blob&&"undefined"!==typeof window.URL)&&9!=document.documentMode&&8!=
document.documentMode&&7!=document.documentMode&&!mxClient.IS_QUIRKS||this.isOfflineApp()||mxClient.IS_IOS};EditorUi.prototype.showTextDialog=function $EditorUi$$showTextDialog$($title$$,$text$$){var $dlg$$=new TextareaDialog(this,$title$$,$text$$,null,null,mxResources.get("close"));$dlg$$.textarea.style.width="600px";$dlg$$.textarea.style.height="380px";this.showDialog($dlg$$.container,620,460,!0,!0);$dlg$$.init();document.execCommand("selectall",!1,null)};EditorUi.prototype.doSaveLocalFile=function $EditorUi$$doSaveLocalFile$($blob$jscomp$7_data$$,
$filename$$,$mimeType$jscomp$13_win$$,$base64Encoded$$,$format$$){if(window.Blob&&navigator.msSaveOrOpenBlob)$blob$jscomp$7_data$$=$base64Encoded$$?this.base64ToBlob($blob$jscomp$7_data$$,$mimeType$jscomp$13_win$$):new Blob([$blob$jscomp$7_data$$],{type:$mimeType$jscomp$13_win$$}),navigator.msSaveOrOpenBlob($blob$jscomp$7_data$$,$filename$$);else if(mxClient.IS_IE)$mimeType$jscomp$13_win$$=window.open("about:blank","_blank"),null==$mimeType$jscomp$13_win$$?mxUtils.popup($blob$jscomp$7_data$$,!0):
($mimeType$jscomp$13_win$$.document.write($blob$jscomp$7_data$$),$mimeType$jscomp$13_win$$.document.close(),$mimeType$jscomp$13_win$$.document.execCommand("SaveAs",!0,$filename$$),$mimeType$jscomp$13_win$$.close());else{var $a$$=document.createElement("a"),$useDownload$$=!mxClient.IS_SF&&0>navigator.userAgent.indexOf("PaleMoon/")&&"undefined"!==typeof $a$$.download;if(mxClient.IS_GC)var $raw$$=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),$useDownload$$=65==($raw$$?parseInt($raw$$[2],10):
!1)?!1:$useDownload$$;if($useDownload$$||this.isOffline()){$a$$.href=URL.createObjectURL($base64Encoded$$?this.base64ToBlob($blob$jscomp$7_data$$,$mimeType$jscomp$13_win$$):new Blob([$blob$jscomp$7_data$$],{type:$mimeType$jscomp$13_win$$}));$useDownload$$?$a$$.download=$filename$$:$a$$.setAttribute("target","_blank");document.body.appendChild($a$$);try{window.setTimeout(function(){URL.revokeObjectURL($a$$.href)},0),$a$$.click(),$a$$.parentNode.removeChild($a$$)}catch($e$$){}}else this.createEchoRequest($blob$jscomp$7_data$$,
$filename$$,$mimeType$jscomp$13_win$$,$base64Encoded$$,$format$$).simulate(document,"_blank")}};EditorUi.prototype.createEchoRequest=function $EditorUi$$createEchoRequest$($data$jscomp$103_param$$,$filename$$,$mimeType$$,$base64Encoded$$,$format$$,$base64Response$$){$data$jscomp$103_param$$="xml="+encodeURIComponent($data$jscomp$103_param$$);return new mxXmlRequest(SAVE_URL,$data$jscomp$103_param$$+(null!=$mimeType$$?"&mime="+$mimeType$$:"")+(null!=$format$$?"&format="+$format$$:"")+(null!=$base64Response$$?
"&base64="+$base64Response$$:"")+(null!=$filename$$?"&filename="+encodeURIComponent($filename$$):"")+($base64Encoded$$?"&binary=1":""))};EditorUi.prototype.base64ToBlob=function $EditorUi$$base64ToBlob$($base64Data$$,$contentType$$){$contentType$$=$contentType$$||"";for(var $byteCharacters$$=atob($base64Data$$),$bytesLength$$=$byteCharacters$$.length,$slicesCount$$=Math.ceil($bytesLength$$/1024),$byteArrays$$=Array($slicesCount$$),$sliceIndex$$=0;$sliceIndex$$<$slicesCount$$;++$sliceIndex$$){for(var $begin$jscomp$3_offset$$=
1024*$sliceIndex$$,$end$$=Math.min($begin$jscomp$3_offset$$+1024,$bytesLength$$),$bytes$$=Array($end$$-$begin$jscomp$3_offset$$),$i$$=0;$begin$jscomp$3_offset$$<$end$$;++$i$$,++$begin$jscomp$3_offset$$)$bytes$$[$i$$]=$byteCharacters$$[$begin$jscomp$3_offset$$].charCodeAt(0);$byteArrays$$[$sliceIndex$$]=new Uint8Array($bytes$$)}return new Blob($byteArrays$$,{type:$contentType$$})};EditorUi.prototype.saveLocalFile=function $EditorUi$$saveLocalFile$($data$$,$dlg$jscomp$16_filename$$,$mimeType$$,$base64Encoded$$,
$count$jscomp$14_format$$,$allowBrowser$$,$allowTab$$){$allowBrowser$$=null!=$allowBrowser$$?$allowBrowser$$:!1;$allowTab$$=null!=$allowTab$$?$allowTab$$:"vsdx"!=$count$jscomp$14_format$$&&(!mxClient.IS_IOS||!navigator.standalone);$count$jscomp$14_format$$=this.getServiceCount($allowBrowser$$);$dlg$jscomp$16_filename$$=new CreateDialog(this,$dlg$jscomp$16_filename$$,mxUtils.bind(this,function($newTitle$$,$mode$$){try{if("_blank"==$mode$$)if(null==$mimeType$$||"image/"!=$mimeType$$.substring(0,6)||
"image/svg"==$mimeType$$.substring(0,9)&&!mxClient.IS_SVG){var $win$$=window.open("about:blank");null==$win$$?mxUtils.popup($data$$,!0):($win$$.document.write(mxUtils.htmlEntities($data$$,!1)),$win$$.document.close())}else this.openInNewWindow($data$$,$mimeType$$,$base64Encoded$$);else $mode$$==App.MODE_DEVICE||"download"==$mode$$?this.doSaveLocalFile($data$$,$newTitle$$,$mimeType$$,$base64Encoded$$):null!=$newTitle$$&&0<$newTitle$$.length&&this.pickFolder($mode$$,mxUtils.bind(this,function($folderId$$){try{this.exportFile($data$$,
$newTitle$$,$mimeType$$,$base64Encoded$$,$mode$$,$folderId$$)}catch($e$$){this.handleError($e$$)}}))}catch($e$$){this.handleError($e$$)}}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),!1,$allowBrowser$$,$allowTab$$,null,1<$count$jscomp$14_format$$,4<$count$jscomp$14_format$$&&(!$allowBrowser$$||6>$count$jscomp$14_format$$)?3:4,$data$$,$mimeType$$,$base64Encoded$$);this.showDialog($dlg$jscomp$16_filename$$.container,420,1==$count$jscomp$14_format$$?
160:4<$count$jscomp$14_format$$?390:270,!0,!0);$dlg$jscomp$16_filename$$.init()};EditorUi.prototype.openInNewWindow=function $EditorUi$$openInNewWindow$($data$$,$mimeType$$,$base64Encoded$$){if(mxClient.IS_GC||mxClient.IS_EDGE||11==document.documentMode||10==document.documentMode){var $win$$=window.open("about:blank");null==$win$$||null==$win$$.document?mxUtils.popup($data$$,!0):("image/svg+xml"==$mimeType$$?$win$$.document.write("<html>"+$data$$+"</html>"):$win$$.document.write('<html><img src="data:'+
$mimeType$$+($base64Encoded$$?";base64,"+$data$$:";charset=utf8,"+encodeURIComponent($data$$))+'"/></html>'),$win$$.document.close())}else $win$$=window.open("data:"+$mimeType$$+($base64Encoded$$?";base64,"+$data$$:";charset=utf8,"+encodeURIComponent($data$$))),null!=$win$$&&null!=$win$$.document||mxUtils.popup($data$$,!0)};var $editoUiAddChromelessToolbarItems$$=EditorUi.prototype.addChromelessToolbarItems;EditorUi.prototype.addChromelessToolbarItems=function $EditorUi$$addChromelessToolbarItems$($addButton$$){if(this.isExportToCanvas()){this.exportDialog=
null;var $exportButton$$=$addButton$$(mxUtils.bind(this,function($evt$$){var $clickHandler$$=mxUtils.bind(this,function(){mxEvent.removeListener(this.editor.graph.container,"click",$clickHandler$$);null!=this.exportDialog&&(this.exportDialog.parentNode.removeChild(this.exportDialog),this.exportDialog=null)});if(null!=this.exportDialog)$clickHandler$$.apply(this);else{this.exportDialog=document.createElement("div");var $r$jscomp$3_style$$=$exportButton$$.getBoundingClientRect();mxUtils.setPrefixedStyle(this.exportDialog.style,
"borderRadius","5px");this.exportDialog.style.position="fixed";this.exportDialog.style.textAlign="center";this.exportDialog.style.fontFamily="Helvetica,Arial";this.exportDialog.style.backgroundColor="#000000";this.exportDialog.style.width="50px";this.exportDialog.style.height="50px";this.exportDialog.style.padding="4px 2px 4px 2px";this.exportDialog.style.color="#ffffff";mxUtils.setOpacity(this.exportDialog,70);this.exportDialog.style.left=$r$jscomp$3_style$$.left+"px";this.exportDialog.style.bottom=
parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px";$r$jscomp$3_style$$=mxUtils.getCurrentStyle(this.editor.graph.container);this.exportDialog.style.zIndex=$r$jscomp$3_style$$.zIndex;var $spinner$$=new Spinner({lines:8,length:6,width:5,radius:6,rotate:0,color:"#fff",speed:1.5,trail:60,shadow:!1,hwaccel:!1,top:"28px",zIndex:2E9});$spinner$$.spin(this.exportDialog);this.exportToCanvas(mxUtils.bind(this,function($canvas$jscomp$9_img$$){$spinner$$.stop();this.exportDialog.style.width=
"auto";this.exportDialog.style.height="auto";this.exportDialog.style.padding="10px";var $data$$=this.createImageDataUri($canvas$jscomp$9_img$$,null,"png");$canvas$jscomp$9_img$$=document.createElement("img");$canvas$jscomp$9_img$$.style.maxWidth="140px";$canvas$jscomp$9_img$$.style.maxHeight="140px";$canvas$jscomp$9_img$$.style.cursor="pointer";$canvas$jscomp$9_img$$.style.backgroundColor="white";$canvas$jscomp$9_img$$.setAttribute("title",mxResources.get("openInNewWindow"));$canvas$jscomp$9_img$$.setAttribute("border",
"0");$canvas$jscomp$9_img$$.setAttribute("src",$data$$);this.exportDialog.appendChild($canvas$jscomp$9_img$$);mxEvent.addListener($canvas$jscomp$9_img$$,"click",mxUtils.bind(this,function(){this.openInNewWindow($data$$.substring($data$$.indexOf(",")+1),"image/png",!0);$clickHandler$$.apply(this,arguments)}))}),null,this.thumbImageCache,null,mxUtils.bind(this,function($e$$){this.spinner.stop();this.handleError($e$$)}));mxEvent.addListener(this.editor.graph.container,"click",$clickHandler$$);document.body.appendChild(this.exportDialog)}mxEvent.consume($evt$$)}),
Editor.cameraLargeImage,mxResources.get("export"))}$editoUiAddChromelessToolbarItems$$.apply(this,arguments)};EditorUi.prototype.saveData=function $EditorUi$$saveData$($filename$$,$format$$,$data$$,$mime$$,$base64Encoded$$){this.isLocalFileSave()?this.saveLocalFile($data$$,$filename$$,$mime$$,$base64Encoded$$,$format$$):this.saveRequest($filename$$,$format$$,mxUtils.bind(this,function($newTitle$$,$base64$$){return this.createEchoRequest($data$$,$newTitle$$,$mime$$,$base64Encoded$$,$format$$,$base64$$)}),
$data$$,$base64Encoded$$,$mime$$)};EditorUi.prototype.saveRequest=function $EditorUi$$saveRequest$($dlg$jscomp$17_filename$$,$format$$,$fn$$,$data$$,$base64Encoded$$,$mimeType$$,$allowTab$$){$allowTab$$=null!=$allowTab$$?$allowTab$$:!mxClient.IS_IOS||!navigator.standalone;var $count$$=this.getServiceCount(!1);$dlg$jscomp$17_filename$$=new CreateDialog(this,$dlg$jscomp$17_filename$$,mxUtils.bind(this,function($newTitle$$,$mode$$){if("_blank"==$mode$$||null!=$newTitle$$&&0<$newTitle$$.length){var $xhr$$=
$fn$$("_blank"==$mode$$?null:$newTitle$$,$mode$$==App.MODE_DEVICE||"download"==$mode$$||null==$mode$$||"_blank"==$mode$$?"0":"1");null!=$xhr$$&&($mode$$==App.MODE_DEVICE||"download"==$mode$$||"_blank"==$mode$$?$xhr$$.simulate(document,"_blank"):this.pickFolder($mode$$,mxUtils.bind(this,function($folderId$$){$mimeType$$=null!=$mimeType$$?$mimeType$$:"pdf"==$format$$?"application/pdf":"image/"+$format$$;if(null!=$data$$)try{this.exportFile($data$$,$newTitle$$,$mimeType$$,!0,$mode$$,$folderId$$)}catch($e$$){this.handleError($e$$)}else this.spinner.spin(document.body,
mxResources.get("saving"))&&$xhr$$.send(mxUtils.bind(this,function(){this.spinner.stop();if(200<=$xhr$$.getStatus()&&299>=$xhr$$.getStatus())try{this.exportFile($xhr$$.getText(),$newTitle$$,$mimeType$$,!0,$mode$$,$folderId$$)}catch($e$22$$){this.handleError($e$22$$)}else this.handleError({message:mxResources.get("errorSavingFile")})}),function($resp$$){this.spinner.stop();this.handleError($resp$$)})})))}}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),
!1,!1,$allowTab$$,null,1<$count$$,4<$count$$?3:4,$data$$,$mimeType$$,$base64Encoded$$);this.showDialog($dlg$jscomp$17_filename$$.container,380,1==$count$$?160:4<$count$$?390:270,!0,!0);$dlg$jscomp$17_filename$$.init()};EditorUi.prototype.getEditBlankXml=function $EditorUi$$getEditBlankXml$(){return this.getFileData(!0)};EditorUi.prototype.exportFile=function $EditorUi$$exportFile$($data$$,$filename$$,$mimeType$$,$base64Encoded$$,$mode$$,$folderId$$){};EditorUi.prototype.pickFolder=function $EditorUi$$pickFolder$($mode$$,
$fn$$,$enabled$$){$fn$$(null)};EditorUi.prototype.exportSvg=function $EditorUi$$exportSvg$($scale$$,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,$noCrop$$,$currentPage$$,$linkTarget$$){if(this.spinner.spin(document.body,mxResources.get("export"))){var $bg$$=this.editor.graph.isSelectionEmpty();$ignoreSelection$$=null!=$ignoreSelection$$?$ignoreSelection$$:$bg$$;$bg$$=$transparentBackground$$?null:this.editor.graph.background;$bg$$==mxConstants.NONE&&
($bg$$=null);null==$bg$$&&0==$transparentBackground$$&&($bg$$="#ffffff");var $svgRoot$jscomp$0$$=this.editor.graph.getSvg($bg$$,$scale$$,$border$$,$noCrop$$,null,$ignoreSelection$$,null,null,"blank"==$linkTarget$$?"_blank":"self"==$linkTarget$$?"_top":null);$addShadow$$&&this.editor.graph.addSvgShadow($svgRoot$jscomp$0$$);var $filename$$=this.getBaseFilename()+".svg",$doSave$$=mxUtils.bind(this,function($svgRoot$$){this.spinner.stop();$editable$$&&$svgRoot$$.setAttribute("content",this.getFileData(!0,
null,null,null,$ignoreSelection$$,$currentPage$$));if(null!=this.editor.fontCss){var $style$jscomp$8_svgDoc$$=$svgRoot$$.ownerDocument,$style$jscomp$8_svgDoc$$=null!=$style$jscomp$8_svgDoc$$.createElementNS?$style$jscomp$8_svgDoc$$.createElementNS(mxConstants.NS_SVG,"style"):$style$jscomp$8_svgDoc$$.createElement("style");$style$jscomp$8_svgDoc$$.setAttribute("type","text/css");mxUtils.setTextContent($style$jscomp$8_svgDoc$$,this.editor.fontCss);$svgRoot$$.getElementsByTagName("defs")[0].appendChild($style$jscomp$8_svgDoc$$)}var $svg$$=
'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+mxUtils.getXml($svgRoot$$);this.isLocalFileSave()||$svg$$.length<=MAX_REQUEST_SIZE?this.saveData($filename$$,"svg",$svg$$,"image/svg+xml"):this.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup($svg$$)}))});this.convertMath(this.editor.graph,$svgRoot$jscomp$0$$,!1,mxUtils.bind(this,function(){$embedImages$$?(null==this.thumbImageCache&&
(this.thumbImageCache={}),this.convertImages($svgRoot$jscomp$0$$,$doSave$$,this.thumbImageCache)):$doSave$$($svgRoot$jscomp$0$$)}))}};EditorUi.prototype.addRadiobox=function $EditorUi$$addRadiobox$($div$$,$radioGroupName$$,$label$$,$checked$$,$disabled$$,$disableNewline$$,$visible$$){return this.addCheckbox($div$$,$label$$,$checked$$,$disabled$$,$disableNewline$$,$visible$$,!0,$radioGroupName$$)};EditorUi.prototype.addCheckbox=function $EditorUi$$addCheckbox$($div$$,$label$$,$checked$$,$disabled$$,
$disableNewline$$,$visible$$,$asRadio_id$$,$radioGroupName$$){$visible$$=null!=$visible$$?$visible$$:!0;var $cb$$=document.createElement("input");$cb$$.style.marginRight="8px";$cb$$.style.marginTop="16px";$cb$$.setAttribute("type",$asRadio_id$$?"radio":"checkbox");$asRadio_id$$="geCheckbox-"+Editor.guid();$cb$$.id=$asRadio_id$$;null!=$radioGroupName$$&&$cb$$.setAttribute("name",$radioGroupName$$);$checked$$&&($cb$$.setAttribute("checked","checked"),$cb$$.defaultChecked=!0);$disabled$$&&$cb$$.setAttribute("disabled",
"disabled");$visible$$&&($div$$.appendChild($cb$$),$checked$$=document.createElement("label"),mxUtils.write($checked$$,$label$$),$checked$$.setAttribute("for",$asRadio_id$$),$div$$.appendChild($checked$$),$disableNewline$$||mxUtils.br($div$$));return $cb$$};EditorUi.prototype.addEditButton=function $EditorUi$$addEditButton$($div$$,$lightbox$$){var $edit$$=this.addCheckbox($div$$,mxResources.get("edit")+":",!0,null,!0);$edit$$.style.marginLeft="24px";var $blankOption_customOption_file$$=this.getCurrentFile(),
$editUrl$$="";null!=$blankOption_customOption_file$$&&$blankOption_customOption_file$$.getMode()!=App.MODE_DEVICE&&$blankOption_customOption_file$$.getMode()!=App.MODE_BROWSER&&($editUrl$$=window.location.href);var $editSelect$$=document.createElement("select");$editSelect$$.style.width="120px";$editSelect$$.style.marginLeft="8px";$editSelect$$.style.marginRight="10px";$editSelect$$.className="geBtn";$blankOption_customOption_file$$=document.createElement("option");$blankOption_customOption_file$$.setAttribute("value",
"blank");mxUtils.write($blankOption_customOption_file$$,mxResources.get("makeCopy"));$editSelect$$.appendChild($blankOption_customOption_file$$);$blankOption_customOption_file$$=document.createElement("option");$blankOption_customOption_file$$.setAttribute("value","custom");mxUtils.write($blankOption_customOption_file$$,mxResources.get("custom")+"...");$editSelect$$.appendChild($blankOption_customOption_file$$);$div$$.appendChild($editSelect$$);mxEvent.addListener($editSelect$$,"change",mxUtils.bind(this,
function(){if("custom"==$editSelect$$.value){var $dlg2$$=new FilenameDialog(this,$editUrl$$,mxResources.get("ok"),function($value$$){null!=$value$$?$editUrl$$=$value$$:$editSelect$$.value="blank"},mxResources.get("url"),null,null,null,null,function(){$editSelect$$.value="blank"});this.showDialog($dlg2$$.container,300,80,!0,!1);$dlg2$$.init()}}));mxEvent.addListener($edit$$,"change",mxUtils.bind(this,function(){$edit$$.checked&&(null==$lightbox$$||$lightbox$$.checked)?$editSelect$$.removeAttribute("disabled"):
$editSelect$$.setAttribute("disabled","disabled")}));mxUtils.br($div$$);return{getLink:function(){return $edit$$.checked?"blank"===$editSelect$$.value?"_blank":$editUrl$$:null},getEditInput:function(){return $edit$$},getEditSelect:function(){return $editSelect$$}}};EditorUi.prototype.addLinkSection=function $EditorUi$$addLinkSection$($div$$,$showFrameOption$$){function $updateLinkColor$$(){$linkButton$$.innerHTML='<div style="width:100%;height:100%;box-sizing:border-box;'+(null!=$linkColor$$&&$linkColor$$!=
mxConstants.NONE?"border:1px solid black;background-color:"+$linkColor$$:"background-position:center center;background-repeat:no-repeat;background-image:url('"+Dialog.prototype.closeImage+"')")+';"></div>'}mxUtils.write($div$$,mxResources.get("links")+":");var $linkSelect$$=document.createElement("select");$linkSelect$$.style.width="100px";$linkSelect$$.style.marginLeft="8px";$linkSelect$$.style.marginRight="10px";$linkSelect$$.className="geBtn";var $autoOption_blankOption$$=document.createElement("option");
$autoOption_blankOption$$.setAttribute("value","auto");mxUtils.write($autoOption_blankOption$$,mxResources.get("automatic"));$linkSelect$$.appendChild($autoOption_blankOption$$);$autoOption_blankOption$$=document.createElement("option");$autoOption_blankOption$$.setAttribute("value","blank");mxUtils.write($autoOption_blankOption$$,mxResources.get("openInNewWindow"));$linkSelect$$.appendChild($autoOption_blankOption$$);$autoOption_blankOption$$=document.createElement("option");$autoOption_blankOption$$.setAttribute("value",
"self");mxUtils.write($autoOption_blankOption$$,mxResources.get("openInThisWindow"));$linkSelect$$.appendChild($autoOption_blankOption$$);$showFrameOption$$&&($autoOption_blankOption$$=document.createElement("option"),$autoOption_blankOption$$.setAttribute("value","frame"),mxUtils.write($autoOption_blankOption$$,mxResources.get("openInThisWindow")+" ("+mxResources.get("iframe")+")"),$linkSelect$$.appendChild($autoOption_blankOption$$));$div$$.appendChild($linkSelect$$);mxUtils.write($div$$,mxResources.get("borderColor")+
":");var $linkColor$$="#0000ff",$linkButton$$=null,$linkButton$$=mxUtils.button("",mxUtils.bind(this,function($evt$$){this.pickColor($linkColor$$||"none",function($color$$){$linkColor$$=$color$$;$updateLinkColor$$()});mxEvent.consume($evt$$)}));$updateLinkColor$$();$linkButton$$.style.padding=mxClient.IS_FF?"4px 2px 4px 2px":"4px";$linkButton$$.style.marginLeft="4px";$linkButton$$.style.height="22px";$linkButton$$.style.width="22px";$linkButton$$.style.position="relative";$linkButton$$.style.top=
mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE?"6px":"1px";$linkButton$$.className="geColorBtn";$div$$.appendChild($linkButton$$);mxUtils.br($div$$);return{getColor:function(){return $linkColor$$},getTarget:function(){return $linkSelect$$.value},focus:function(){$linkSelect$$.focus()}}};EditorUi.prototype.createLink=function $EditorUi$$createLink$($addTitle_linkTarget$$,$linkColor$$,$allPages$jscomp$1_data$$,$lightbox$$,$editLink$$,$layers$$,$url$$,$ignoreFile$$){var $file$$=this.getCurrentFile(),
$params$$=[];$lightbox$$&&($params$$.push("lightbox=1"),"auto"!=$addTitle_linkTarget$$&&$params$$.push("target="+$addTitle_linkTarget$$),null!=$linkColor$$&&$linkColor$$!=mxConstants.NONE&&$params$$.push("highlight="+("#"==$linkColor$$.charAt(0)?$linkColor$$.substring(1):$linkColor$$)),null!=$editLink$$&&0<$editLink$$.length&&$params$$.push("edit="+encodeURIComponent($editLink$$)),$layers$$&&$params$$.push("layers=1"),this.editor.graph.foldingEnabled&&$params$$.push("nav=1"));$allPages$jscomp$1_data$$&&
null!=this.currentPage&&null!=this.pages&&this.currentPage!=this.pages[0]&&$params$$.push("page-id="+this.currentPage.getId());$addTitle_linkTarget$$=!0;null!=$url$$?$allPages$jscomp$1_data$$="#U"+encodeURIComponent($url$$):($file$$=this.getCurrentFile(),$ignoreFile$$||null==$file$$||$file$$.constructor!=window.DriveFile?$allPages$jscomp$1_data$$="#R"+encodeURIComponent($allPages$jscomp$1_data$$?this.getFileData(!0,null,null,null,null,null,null,!0):Graph.compress(mxUtils.getXml(this.editor.getGraphXml()))):
($allPages$jscomp$1_data$$="#"+$file$$.getHash(),$addTitle_linkTarget$$=!1));$addTitle_linkTarget$$&&null!=$file$$&&null!=$file$$.getTitle()&&$file$$.getTitle()!=this.defaultFilename&&$params$$.push("title="+encodeURIComponent($file$$.getTitle()));return(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||!/.*\.draw\.io$/.test(window.location.hostname)?EditorUi.drawHost:"https://"+window.location.host+"/")+(0<$params$$.length?"?"+$params$$.join("&"):"")+$allPages$jscomp$1_data$$};EditorUi.prototype.createHtml=
function $EditorUi$$createHtml$($fetchParam_publicUrl$$,$value$$,$initialZoom_tb$$,$linkTarget$$,$linkColor$$,$fit$$,$allPages$$,$layers$$,$lightbox$$,$editLink$$,$fn$$){this.getBasenames();var $data$$={};""!=$linkColor$$&&$linkColor$$!=mxConstants.NONE&&($data$$.highlight=$linkColor$$);"auto"!==$linkTarget$$&&($data$$.target=$linkTarget$$);$lightbox$$||($data$$.lightbox=!1);$data$$.nav=this.editor.graph.foldingEnabled;$initialZoom_tb$$=parseInt($initialZoom_tb$$);isNaN($initialZoom_tb$$)||100==$initialZoom_tb$$||
($data$$.zoom=$initialZoom_tb$$/100);$initialZoom_tb$$=[];$allPages$$&&($initialZoom_tb$$.push("pages"),$data$$.resize=!0,null!=this.pages&&null!=this.currentPage&&($data$$.page=mxUtils.indexOf(this.pages,this.currentPage)));$value$$&&($initialZoom_tb$$.push("zoom"),$data$$.resize=!0);$layers$$&&$initialZoom_tb$$.push("layers");0<$initialZoom_tb$$.length&&($lightbox$$&&$initialZoom_tb$$.push("lightbox"),$data$$.toolbar=$initialZoom_tb$$.join(" "));null!=$editLink$$&&0<$editLink$$.length&&($data$$.edit=
$editLink$$);null!=$fetchParam_publicUrl$$?$data$$.url=$fetchParam_publicUrl$$:$data$$.xml=this.getFileData(!0,null,null,null,null,!$allPages$$);$value$$='<div class="mxgraph" style="'+($fit$$?"max-width:100%;":"")+(""!=$initialZoom_tb$$?"border:1px solid transparent;":"")+'" data-mxgraph="'+mxUtils.htmlEntities(JSON.stringify($data$$))+'"></div>';$fetchParam_publicUrl$$=null!=$fetchParam_publicUrl$$?"&fetch="+encodeURIComponent($fetchParam_publicUrl$$):"";$fn$$($value$$,'<script type="text/javascript" src="'+
(0<$fetchParam_publicUrl$$.length?("1"==urlParams.dev?"https://test.draw.io/embed2.js?dev=1":EditorUi.drawHost+"/embed2.js?")+$fetchParam_publicUrl$$:"1"==urlParams.dev?"https://test.draw.io/js/viewer.min.js":window.VIEWER_URL?window.VIEWER_URL:EditorUi.drawHost+"/js/viewer.min.js")+'">\x3c/script>')};EditorUi.prototype.showHtmlDialog=function $EditorUi$$showHtmlDialog$($btnLabel$jscomp$2_dlg$$,$helpLink$$,$publicUrl$$,$fn$$){var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";
var $copyRadio_hd$$=document.createElement("h3");mxUtils.write($copyRadio_hd$$,mxResources.get("html"));$copyRadio_hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:12px";$div$$.appendChild($copyRadio_hd$$);var $hasPages_radioSection$$=document.createElement("div");$hasPages_radioSection$$.style.cssText="border-bottom:1px solid lightGray;padding-bottom:8px;margin-bottom:12px;";var $publicUrlRadio$$=document.createElement("input");$publicUrlRadio$$.style.cssText="margin-right:8px;margin-top:8px;margin-bottom:8px;";
$publicUrlRadio$$.setAttribute("value","url");$publicUrlRadio$$.setAttribute("type","radio");$publicUrlRadio$$.setAttribute("name","type-embedhtmldialog");$copyRadio_hd$$=$publicUrlRadio$$.cloneNode(!0);$copyRadio_hd$$.setAttribute("value","copy");$hasPages_radioSection$$.appendChild($copyRadio_hd$$);var $span$$=document.createElement("span");mxUtils.write($span$$,mxResources.get("includeCopyOfMyDiagram"));$hasPages_radioSection$$.appendChild($span$$);mxUtils.br($hasPages_radioSection$$);$hasPages_radioSection$$.appendChild($publicUrlRadio$$);
$span$$=document.createElement("span");mxUtils.write($span$$,mxResources.get("publicDiagramUrl"));$hasPages_radioSection$$.appendChild($span$$);var $file$$=this.getCurrentFile();null==$publicUrl$$&&null!=$file$$&&$file$$.constructor==window.DriveFile&&($span$$=document.createElement("a"),$span$$.style.paddingLeft="12px",$span$$.style.color="gray",$span$$.setAttribute("href","javascript:void(0);"),mxUtils.write($span$$,mxResources.get("share")),$hasPages_radioSection$$.appendChild($span$$),mxEvent.addListener($span$$,
"click",mxUtils.bind(this,function(){this.hideDialog();this.drive.showPermissions($file$$.getId())})));$copyRadio_hd$$.setAttribute("checked","checked");null==$publicUrl$$&&$publicUrlRadio$$.setAttribute("disabled","disabled");$div$$.appendChild($hasPages_radioSection$$);var $linkSection$$=this.addLinkSection($div$$),$zoom$$=this.addCheckbox($div$$,mxResources.get("zoom"),!0,null,!0);mxUtils.write($div$$,":");var $zoomInput$$=document.createElement("input");$zoomInput$$.setAttribute("type","text");
$zoomInput$$.style.marginRight="16px";$zoomInput$$.style.width="60px";$zoomInput$$.style.marginLeft="4px";$zoomInput$$.style.marginRight="12px";$zoomInput$$.value="100%";$div$$.appendChild($zoomInput$$);var $fit$$=this.addCheckbox($div$$,mxResources.get("fit"),!0),$hasPages_radioSection$$=null!=this.pages&&1<this.pages.length,$allPages$$=$allPages$$=this.addCheckbox($div$$,mxResources.get("allPages"),$hasPages_radioSection$$,!$hasPages_radioSection$$),$layers$$=this.addCheckbox($div$$,mxResources.get("layers"),
!0),$lightbox$$=this.addCheckbox($div$$,mxResources.get("lightbox"),!0),$editSection$$=this.addEditButton($div$$,$lightbox$$),$edit$$=$editSection$$.getEditInput();$edit$$.style.marginBottom="16px";mxEvent.addListener($lightbox$$,"change",function(){$lightbox$$.checked?$edit$$.removeAttribute("disabled"):$edit$$.setAttribute("disabled","disabled");$edit$$.checked&&$lightbox$$.checked?$editSection$$.getEditSelect().removeAttribute("disabled"):$editSection$$.getEditSelect().setAttribute("disabled",
"disabled")});$btnLabel$jscomp$2_dlg$$=new CustomDialog(this,$div$$,mxUtils.bind(this,function(){$fn$$($publicUrlRadio$$.checked?$publicUrl$$:null,$zoom$$.checked,$zoomInput$$.value,$linkSection$$.getTarget(),$linkSection$$.getColor(),$fit$$.checked,$allPages$$.checked,$layers$$.checked,$lightbox$$.checked,$editSection$$.getLink())}),null,$btnLabel$jscomp$2_dlg$$,$helpLink$$);this.showDialog($btnLabel$jscomp$2_dlg$$.container,340,384,!0,!0);$copyRadio_hd$$.focus()};EditorUi.prototype.showPublishLinkDialog=
function $EditorUi$$showPublishLinkDialog$($dy$jscomp$5_title$$,$dlg$$,$hasPages$jscomp$1_width$$,$height$$,$fn$$,$showFrameOption$$){var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";var $hd$jscomp$7_helpLink$$=document.createElement("h3");mxUtils.write($hd$jscomp$7_helpLink$$,$dy$jscomp$5_title$$||mxResources.get("link"));$hd$jscomp$7_helpLink$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:12px";$div$$.appendChild($hd$jscomp$7_helpLink$$);var $file$$=
this.getCurrentFile(),$hd$jscomp$7_helpLink$$="https://desk.draw.io/support/solutions/articles/16000051941";$dy$jscomp$5_title$$=0;if(null!=$file$$&&$file$$.constructor==window.DriveFile&&!$dlg$$){$dy$jscomp$5_title$$=80;var $hd$jscomp$7_helpLink$$="https://desk.draw.io/support/solutions/articles/16000039384",$hintSection$$=document.createElement("div");$hintSection$$.style.cssText="border-bottom:1px solid lightGray;padding-bottom:14px;padding-top:6px;margin-bottom:14px;text-align:center;";var $shareBtn_testLink$jscomp$1_text$$=
document.createElement("div");$shareBtn_testLink$jscomp$1_text$$.style.whiteSpace="normal";mxUtils.write($shareBtn_testLink$jscomp$1_text$$,mxResources.get("linkAccountRequired"));$hintSection$$.appendChild($shareBtn_testLink$jscomp$1_text$$);$shareBtn_testLink$jscomp$1_text$$=mxUtils.button(mxResources.get("share"),mxUtils.bind(this,function(){this.drive.showPermissions($file$$.getId())}));$shareBtn_testLink$jscomp$1_text$$.style.marginTop="12px";$shareBtn_testLink$jscomp$1_text$$.className="geBtn";
$hintSection$$.appendChild($shareBtn_testLink$jscomp$1_text$$);$div$$.appendChild($hintSection$$);$shareBtn_testLink$jscomp$1_text$$=document.createElement("a");$shareBtn_testLink$jscomp$1_text$$.style.paddingLeft="12px";$shareBtn_testLink$jscomp$1_text$$.style.color="gray";$shareBtn_testLink$jscomp$1_text$$.style.fontSize="11px";$shareBtn_testLink$jscomp$1_text$$.setAttribute("href","javascript:void(0);");mxUtils.write($shareBtn_testLink$jscomp$1_text$$,mxResources.get("check"));$hintSection$$.appendChild($shareBtn_testLink$jscomp$1_text$$);
mxEvent.addListener($shareBtn_testLink$jscomp$1_text$$,"click",mxUtils.bind(this,function(){this.spinner.spin(document.body,mxResources.get("loading"))&&this.getPublicUrl(this.getCurrentFile(),mxUtils.bind(this,function($dlg$jscomp$20_url$$){this.spinner.stop();$dlg$jscomp$20_url$$=new ErrorDialog(this,null,mxResources.get(null!=$dlg$jscomp$20_url$$?"diagramIsPublic":"diagramIsNotPublic"),mxResources.get("ok"));this.showDialog($dlg$jscomp$20_url$$.container,300,80,!0,!1);$dlg$jscomp$20_url$$.init()}))}))}var $widthInput$$=
null,$heightInput$$=null;if(null!=$hasPages$jscomp$1_width$$||null!=$height$$)$dy$jscomp$5_title$$+=30,mxUtils.write($div$$,mxResources.get("width")+":"),$widthInput$$=document.createElement("input"),$widthInput$$.setAttribute("type","text"),$widthInput$$.style.marginRight="16px",$widthInput$$.style.width="50px",$widthInput$$.style.marginLeft="6px",$widthInput$$.style.marginRight="16px",$widthInput$$.style.marginBottom="10px",$widthInput$$.value="100%",$div$$.appendChild($widthInput$$),mxUtils.write($div$$,
mxResources.get("height")+":"),$heightInput$$=document.createElement("input"),$heightInput$$.setAttribute("type","text"),$heightInput$$.style.width="50px",$heightInput$$.style.marginLeft="6px",$heightInput$$.style.marginBottom="10px",$heightInput$$.value=$height$$+"px",$div$$.appendChild($heightInput$$),mxUtils.br($div$$);var $linkSection$$=this.addLinkSection($div$$,$showFrameOption$$);$hasPages$jscomp$1_width$$=null!=this.pages&&1<this.pages.length;var $allPages$$=null;if(null==$file$$||$file$$.constructor!=
window.DriveFile||$dlg$$)$allPages$$=this.addCheckbox($div$$,mxResources.get("allPages"),$hasPages$jscomp$1_width$$,!$hasPages$jscomp$1_width$$);var $lightbox$$=this.addCheckbox($div$$,mxResources.get("lightbox"),!0),$editSection$$=this.addEditButton($div$$,$lightbox$$),$edit$$=$editSection$$.getEditInput(),$layers$$=this.addCheckbox($div$$,mxResources.get("layers"),!0);$layers$$.style.marginLeft=$edit$$.style.marginLeft;$layers$$.style.marginBottom="16px";$layers$$.style.marginTop="8px";mxEvent.addListener($lightbox$$,
"change",function(){$lightbox$$.checked?($layers$$.removeAttribute("disabled"),$edit$$.removeAttribute("disabled")):($layers$$.setAttribute("disabled","disabled"),$edit$$.setAttribute("disabled","disabled"));$edit$$.checked&&$lightbox$$.checked?$editSection$$.getEditSelect().removeAttribute("disabled"):$editSection$$.getEditSelect().setAttribute("disabled","disabled")});$dlg$$=new CustomDialog(this,$div$$,mxUtils.bind(this,function(){$fn$$($linkSection$$.getTarget(),$linkSection$$.getColor(),null==
$allPages$$?!0:$allPages$$.checked,$lightbox$$.checked,$editSection$$.getLink(),$layers$$.checked,null!=$widthInput$$?$widthInput$$.value:null,null!=$heightInput$$?$heightInput$$.value:null)}),null,mxResources.get("create"),$hd$jscomp$7_helpLink$$);this.showDialog($dlg$$.container,340,254+$dy$jscomp$5_title$$,!0,!0);null!=$widthInput$$?($widthInput$$.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$widthInput$$.select():document.execCommand("selectAll",!1,null)):
$linkSection$$.focus()};EditorUi.prototype.showRemoteExportDialog=function $EditorUi$$showRemoteExportDialog$($btnLabel$jscomp$3_dlg$$,$helpLink$$,$callback$$,$hideInclude$$){var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";var $graph$jscomp$33_hd$$=document.createElement("h3");mxUtils.write($graph$jscomp$33_hd$$,mxResources.get("image"));$graph$jscomp$33_hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px";$div$$.appendChild($graph$jscomp$33_hd$$);
var $selection$$=this.addCheckbox($div$$,mxResources.get("selectionOnly"),!1,this.editor.graph.isSelectionEmpty()),$include$$=$hideInclude$$?null:this.addCheckbox($div$$,mxResources.get("includeCopyOfMyDiagram"),!0),$graph$jscomp$33_hd$$=this.editor.graph,$transparent$$=$hideInclude$$?null:this.addCheckbox($div$$,mxResources.get("transparentBackground"),$graph$jscomp$33_hd$$.background==mxConstants.NONE||null==$graph$jscomp$33_hd$$.background);null!=$transparent$$&&($transparent$$.style.marginBottom=
"16px");$btnLabel$jscomp$3_dlg$$=new CustomDialog(this,$div$$,mxUtils.bind(this,function(){$callback$$(!$selection$$.checked,null!=$include$$?$include$$.checked:!1,null!=$transparent$$?$transparent$$.checked:!1)}),null,$btnLabel$jscomp$3_dlg$$,$helpLink$$);this.showDialog($btnLabel$jscomp$3_dlg$$.container,300,$hideInclude$$?100:186,!0,!0)};EditorUi.prototype.showExportDialog=function $EditorUi$$showExportDialog$($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$,$embedOption$$,
$btnLabel$jscomp$4_dlg$$,$helpLink$$,$callback$$,$cropOption$$,$defaultInclude$$,$format$$){$defaultInclude$$=null!=$defaultInclude$$?$defaultInclude$$:!0;var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";var $graph$$=this.editor.graph,$height$$="jpeg"==$format$$?196:300,$hd$$=document.createElement("h3");mxUtils.write($hd$$,$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$);$hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:10px";
$div$$.appendChild($hd$$);mxUtils.write($div$$,mxResources.get("zoom")+":");var $zoomInput$$=document.createElement("input");$zoomInput$$.setAttribute("type","text");$zoomInput$$.style.marginRight="16px";$zoomInput$$.style.width="60px";$zoomInput$$.style.marginLeft="4px";$zoomInput$$.style.marginRight="12px";$zoomInput$$.value=this.lastExportZoom||"100%";$div$$.appendChild($zoomInput$$);mxUtils.write($div$$,mxResources.get("borderWidth")+":");var $borderInput$$=document.createElement("input");$borderInput$$.setAttribute("type",
"text");$borderInput$$.style.marginRight="16px";$borderInput$$.style.width="60px";$borderInput$$.style.marginLeft="4px";$borderInput$$.value=this.lastExportBorder||"0";$div$$.appendChild($borderInput$$);mxUtils.br($div$$);var $transparent$$=this.addCheckbox($div$$,mxResources.get("transparentBackground"),!1,null,null,"jpeg"!=$format$$),$selection$$=this.addCheckbox($div$$,mxResources.get("selectionOnly"),!1,$graph$$.isSelectionEmpty()),$cb6$$=document.createElement("input");$cb6$$.style.marginTop=
"16px";$cb6$$.style.marginRight="8px";$cb6$$.style.marginLeft="24px";$cb6$$.setAttribute("disabled","disabled");$cb6$$.setAttribute("type","checkbox");$cropOption$$&&($div$$.appendChild($cb6$$),mxUtils.write($div$$,mxResources.get("crop")),mxUtils.br($div$$),$height$$+=26,mxEvent.addListener($selection$$,"change",function(){$selection$$.checked?$cb6$$.removeAttribute("disabled"):$cb6$$.setAttribute("disabled","disabled")}));$graph$$.isSelectionEmpty()||($cb6$$.setAttribute("checked","checked"),$cb6$$.defaultChecked=
!0);var $shadow$$=this.addCheckbox($div$$,mxResources.get("shadow"),$graph$$.shadowVisible),$cb5$$=document.createElement("input");$cb5$$.style.marginTop="16px";$cb5$$.style.marginRight="8px";$cb5$$.setAttribute("type","checkbox");!this.isOffline()&&this.canvasSupported||$cb5$$.setAttribute("disabled","disabled");$embedOption$$&&($div$$.appendChild($cb5$$),mxUtils.write($div$$,mxResources.get("embedImages")),mxUtils.br($div$$),$height$$+=26);var $include$$=this.addCheckbox($div$$,mxResources.get("includeCopyOfMyDiagram"),
$defaultInclude$$,null,null,"jpeg"!=$format$$),$hasPages$$=null!=this.pages&&1<this.pages.length,$allPages$$=this.addCheckbox($div$$,$hasPages$$?mxResources.get("allPages"):"",$hasPages$$,!$hasPages$$,null,"jpeg"!=$format$$);$allPages$$.style.marginLeft="24px";$allPages$$.style.marginBottom="16px";$hasPages$$||($allPages$$.style.display="none");mxEvent.addListener($include$$,"change",function(){$include$$.checked&&$hasPages$$?$allPages$$.removeAttribute("disabled"):$allPages$$.setAttribute("disabled",
"disabled")});$defaultInclude$$&&$hasPages$$||$allPages$$.setAttribute("disabled","disabled");var $linkSelect$$=document.createElement("select");$linkSelect$$.style.maxWidth="260px";$linkSelect$$.style.marginLeft="8px";$linkSelect$$.style.marginRight="10px";$linkSelect$$.className="geBtn";$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$=document.createElement("option");$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$.setAttribute("value","auto");mxUtils.write($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$,
mxResources.get("automatic"));$linkSelect$$.appendChild($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$);$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$=document.createElement("option");$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$.setAttribute("value","blank");mxUtils.write($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$,mxResources.get("openInNewWindow"));$linkSelect$$.appendChild($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$);
$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$=document.createElement("option");$autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$.setAttribute("value","self");mxUtils.write($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$,mxResources.get("openInThisWindow"));$linkSelect$$.appendChild($autoOption$jscomp$1_blankOption$jscomp$2_selfOption$jscomp$1_title$$);"svg"==$format$$&&(mxUtils.write($div$$,mxResources.get("links")+":"),$div$$.appendChild($linkSelect$$),
mxUtils.br($div$$),mxUtils.br($div$$),$height$$+=26);$btnLabel$jscomp$4_dlg$$=new CustomDialog(this,$div$$,mxUtils.bind(this,function(){this.lastExportBorder=$borderInput$$.value;this.lastExportZoom=$zoomInput$$.value;$callback$$($zoomInput$$.value,$transparent$$.checked,!$selection$$.checked,$shadow$$.checked,$include$$.checked,$cb5$$.checked,$borderInput$$.value,$cb6$$.checked,!$allPages$$.checked,$linkSelect$$.value)}),null,$btnLabel$jscomp$4_dlg$$,$helpLink$$);this.showDialog($btnLabel$jscomp$4_dlg$$.container,
340,$height$$,!0,!0);$zoomInput$$.focus();mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?$zoomInput$$.select():document.execCommand("selectAll",!1,null)};EditorUi.prototype.showEmbedImageDialog=function $EditorUi$$showEmbedImageDialog$($fn$$,$dlg$jscomp$23_title$$,$imageLabel$$,$shadowEnabled$$,$helpLink$$){var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";var $graph$$=this.editor.graph;if(null!=$dlg$jscomp$23_title$$){var $hd$$=document.createElement("h3");
mxUtils.write($hd$$,$dlg$jscomp$23_title$$);$hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px";$div$$.appendChild($hd$$)}var $fit$$=this.addCheckbox($div$$,mxResources.get("fit"),!0),$shadow$$=this.addCheckbox($div$$,mxResources.get("shadow"),$graph$$.shadowVisible&&$shadowEnabled$$,!$shadowEnabled$$),$image$$=this.addCheckbox($div$$,$imageLabel$$),$lightbox$$=this.addCheckbox($div$$,mxResources.get("lightbox"),!0),$editSection$$=this.addEditButton($div$$,$lightbox$$),
$edit$$=$editSection$$.getEditInput(),$hasLayers$$=1<$graph$$.model.getChildCount($graph$$.model.getRoot()),$layers$$=this.addCheckbox($div$$,mxResources.get("layers"),$hasLayers$$,!$hasLayers$$);$layers$$.style.marginLeft=$edit$$.style.marginLeft;$layers$$.style.marginBottom="12px";$layers$$.style.marginTop="8px";mxEvent.addListener($lightbox$$,"change",function(){$lightbox$$.checked?($hasLayers$$&&$layers$$.removeAttribute("disabled"),$edit$$.removeAttribute("disabled")):($layers$$.setAttribute("disabled",
"disabled"),$edit$$.setAttribute("disabled","disabled"));$edit$$.checked&&$lightbox$$.checked?$editSection$$.getEditSelect().removeAttribute("disabled"):$editSection$$.getEditSelect().setAttribute("disabled","disabled")});$dlg$jscomp$23_title$$=new CustomDialog(this,$div$$,mxUtils.bind(this,function(){$fn$$($fit$$.checked,$shadow$$.checked,$image$$.checked,$lightbox$$.checked,$editSection$$.getLink(),$layers$$.checked)}),null,mxResources.get("embed"),$helpLink$$);this.showDialog($dlg$jscomp$23_title$$.container,
280,280,!0,!0)};EditorUi.prototype.createEmbedImage=function $EditorUi$$createEmbedImage$($fit$$,$data$jscomp$112_shadow$$,$retina$$,$lightbox$$,$edit$$,$layers$$,$fn$$,$err$$){function $doUpdate$$($dataUri$$){var $onclick$$=" ",$css$$="";$lightbox$$&&($onclick$$=" onclick=\"(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('"+
EditorUi.drawHost+"/?client=1&lightbox=1"+($edit$$?"&edit=_blank":"")+($layers$$?"&layers=1":"")+"');}})(this);\"",$css$$+="cursor:pointer;");$fit$$&&($css$$+="max-width:100%;");var $atts$$="";$retina$$&&($atts$$=' width="'+Math.round($bounds$$.width)+'" height="'+Math.round($bounds$$.height)+'"');$fn$$('<img src="'+$dataUri$$+'"'+$atts$$+(""!=$css$$?' style="'+$css$$+'"':"")+$onclick$$+"/>")}var $bounds$$=this.editor.graph.getGraphBounds();if(this.isExportToCanvas())this.exportToCanvas(mxUtils.bind(this,
function($canvas$jscomp$10_data$$){var $xml$$=$lightbox$$?this.getFileData(!0):null;$canvas$jscomp$10_data$$=this.createImageDataUri($canvas$jscomp$10_data$$,$xml$$,"png");$doUpdate$$($canvas$jscomp$10_data$$)}),null,null,null,mxUtils.bind(this,function($e$$){$err$$({message:mxResources.get("unknownError")})}),null,!0,$retina$$?2:1,null,$data$jscomp$112_shadow$$);else if($data$jscomp$112_shadow$$=this.getFileData(!0),$bounds$$.width*$bounds$$.height<=MAX_AREA&&$data$jscomp$112_shadow$$.length<=MAX_REQUEST_SIZE){var $size$$=
"";$retina$$&&($size$$="&w="+Math.round(2*$bounds$$.width)+"&h="+Math.round(2*$bounds$$.height));var $req$$=new mxXmlRequest(EXPORT_URL,"format=png&base64=1&embedXml="+($lightbox$$?"1":"0")+$size$$+"&xml="+encodeURIComponent($data$jscomp$112_shadow$$));$req$$.send(mxUtils.bind(this,function(){200<=$req$$.getStatus()&&299>=$req$$.getStatus()?$doUpdate$$("data:image/png;base64,"+$req$$.getText()):$err$$({message:mxResources.get("unknownError")})}))}else $err$$({message:mxResources.get("drawingTooLarge")})};
EditorUi.prototype.createEmbedSvg=function $EditorUi$$createEmbedSvg$($fit$jscomp$5_w$$,$h$jscomp$27_shadow$$,$image$$,$lightbox$$,$edit$$,$layers$$,$fn$$){var $svgRoot$jscomp$0$$=this.editor.graph.getSvg(),$links$$=$svgRoot$jscomp$0$$.getElementsByTagName("a");if(null!=$links$$)for(var $i$$=0;$i$$<$links$$.length;$i$$++){var $href$$=$links$$[$i$$].getAttribute("href");null!=$href$$&&"#"==$href$$.charAt(0)&&"_blank"==$links$$[$i$$].getAttribute("target")&&$links$$[$i$$].removeAttribute("target")}$lightbox$$&&
$svgRoot$jscomp$0$$.setAttribute("content",this.getFileData(!0));$h$jscomp$27_shadow$$&&this.editor.graph.addSvgShadow($svgRoot$jscomp$0$$);if($image$$){var $onclick$$=" ",$css$$="";$lightbox$$&&($onclick$$="onclick=\"(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('"+
EditorUi.drawHost+"/?client=1&lightbox=1"+($edit$$?"&edit=_blank":"")+($layers$$?"&layers=1":"")+"');}})(this);\"",$css$$+="cursor:pointer;");$fit$jscomp$5_w$$&&($css$$+="max-width:100%;");this.convertImages($svgRoot$jscomp$0$$,mxUtils.bind(this,function($svgRoot$$){$fn$$('<img src="'+this.createSvgDataUri(mxUtils.getXml($svgRoot$$))+'"'+(""!=$css$$?' style="'+$css$$+'"':"")+$onclick$$+"/>")}))}else $css$$="",$lightbox$$&&($svgRoot$jscomp$0$$.setAttribute("onclick","(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&&src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&&!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('"+
EditorUi.drawHost+"/?client=1&lightbox=1"+($edit$$?"&edit=_blank":"")+($layers$$?"&layers=1":"")+"');}}})(this);"),$css$$+="cursor:pointer;"),$fit$jscomp$5_w$$&&($fit$jscomp$5_w$$=parseInt($svgRoot$jscomp$0$$.getAttribute("width")),$h$jscomp$27_shadow$$=parseInt($svgRoot$jscomp$0$$.getAttribute("height")),$svgRoot$jscomp$0$$.setAttribute("viewBox","-0.5 -0.5 "+$fit$jscomp$5_w$$+" "+$h$jscomp$27_shadow$$),$css$$+="max-width:100%;max-height:"+$h$jscomp$27_shadow$$+"px;",$svgRoot$jscomp$0$$.removeAttribute("height")),
""!=$css$$&&$svgRoot$jscomp$0$$.setAttribute("style",$css$$),$fn$$(mxUtils.getXml($svgRoot$jscomp$0$$))};EditorUi.prototype.timeSince=function $EditorUi$$timeSince$($date$$){$date$$=Math.floor((new Date-$date$$)/1E3);var $interval$$=Math.floor($date$$/31536E3);if(1<$interval$$)return $interval$$+" "+mxResources.get("years");$interval$$=Math.floor($date$$/2592E3);if(1<$interval$$)return $interval$$+" "+mxResources.get("months");$interval$$=Math.floor($date$$/86400);if(1<$interval$$)return $interval$$+
" "+mxResources.get("days");$interval$$=Math.floor($date$$/3600);if(1<$interval$$)return $interval$$+" "+mxResources.get("hours");$interval$$=Math.floor($date$$/60);return 1<$interval$$?$interval$$+" "+mxResources.get("minutes"):1==$interval$$?$interval$$+" "+mxResources.get("minute"):null};EditorUi.prototype.convertMath=function $EditorUi$$convertMath$($graph$$,$svgRoot$$,$fixPosition$$,$callback$$){$graph$$.mathEnabled&&"undefined"!==typeof MathJax&&"undefined"!==typeof MathJax.Hub?(Editor.MathJaxRender($svgRoot$$),
window.setTimeout(mxUtils.bind(this,function(){MathJax.Hub.Queue(mxUtils.bind(this,function(){$callback$$()}))}),0)):$callback$$()};EditorUi.prototype.decodeNodeIntoGraph=function $EditorUi$$decodeNodeIntoGraph$($node$$,$graph$$){if(null!=$node$$){var $diagramNode$$=null;if("diagram"==$node$$.nodeName)$diagramNode$$=$node$$;else if("mxfile"==$node$$.nodeName){var $diagrams$jscomp$4_prev$jscomp$4_tmp$$=$node$$.getElementsByTagName("diagram");if(0<$diagrams$jscomp$4_prev$jscomp$4_tmp$$.length){var $diagramNode$$=
$diagrams$jscomp$4_prev$jscomp$4_tmp$$[0],$graphGetGlobalVariable$$=$graph$$.getGlobalVariable;$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"==$name$$?$diagramNode$$.getAttribute("name")||mxResources.get("pageWithNumber",[1]):"pagenumber"==$name$$?1:$graphGetGlobalVariable$$.apply(this,arguments)}}}null!=$diagramNode$$&&($diagrams$jscomp$4_prev$jscomp$4_tmp$$=Graph.decompress(mxUtils.getTextContent($diagramNode$$)),null!=$diagrams$jscomp$4_prev$jscomp$4_tmp$$&&
0<$diagrams$jscomp$4_prev$jscomp$4_tmp$$.length&&($node$$=mxUtils.parseXml($diagrams$jscomp$4_prev$jscomp$4_tmp$$).documentElement))}$diagrams$jscomp$4_prev$jscomp$4_tmp$$=this.editor.graph;try{this.editor.graph=$graph$$,this.editor.setGraphXml($node$$)}catch($e$$){}finally{this.editor.graph=$diagrams$jscomp$4_prev$jscomp$4_tmp$$}return $node$$};EditorUi.prototype.getEmbeddedPng=function $EditorUi$$getEmbeddedPng$($success$$,$error$$,$optionalData$$){try{var $graph$$=this.editor.graph,$diagramData$$=
null;if(null!=$optionalData$$&&0<$optionalData$$.length)$graph$$=this.createTemporaryGraph(this.editor.graph.getStylesheet()),document.body.appendChild($graph$$.container),this.decodeNodeIntoGraph(this.editor.extractGraphModel(mxUtils.parseXml($optionalData$$).documentElement,!0),$graph$$),$diagramData$$=$optionalData$$;else if(null!=this.pages&&this.currentPage!=this.pages[0]){var $graph$$=this.createTemporaryGraph($graph$$.getStylesheet()),$graphGetGlobalVariable$$=$graph$$.getGlobalVariable,$page$$=
this.pages[0];$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"==$name$$?$page$$.getName():"pagenumber"==$name$$?1:$graphGetGlobalVariable$$.apply(this,arguments)};document.body.appendChild($graph$$.container);$graph$$.model.setRoot($page$$.root)}this.exportToCanvas(mxUtils.bind(this,function($canvas$$){try{null==$diagramData$$&&($diagramData$$=this.getFileData(!0));var $data$$=$canvas$$.toDataURL("image/png"),$data$$=this.writeGraphModelToPng($data$$,"zTXt","mxGraphModel",
atob(Graph.compress($diagramData$$)));$success$$($data$$.substring($data$$.lastIndexOf(",")+1));$graph$$!=this.editor.graph&&$graph$$.container.parentNode.removeChild($graph$$.container)}catch($e$$){null!=$error$$&&$error$$($e$$)}}),null,null,null,mxUtils.bind(this,function($e$$){null!=$error$$&&$error$$($e$$)}),null,null,null,null,$graph$$.shadowVisible,null,$graph$$)}catch($e$$){null!=$error$$&&$error$$($e$$)}};EditorUi.prototype.getEmbeddedSvg=function $EditorUi$$getEmbeddedSvg$($xml$$,$graph$$,
$url$$,$noHeader$$,$callback$$,$ignoreSelection$jscomp$10_svgRoot$$,$bg$jscomp$13_redirect$$){$bg$jscomp$13_redirect$$=$graph$$.background;$bg$jscomp$13_redirect$$==mxConstants.NONE&&($bg$jscomp$13_redirect$$=null);$ignoreSelection$jscomp$10_svgRoot$$=$graph$$.getSvg($bg$jscomp$13_redirect$$,null,null,null,null,$ignoreSelection$jscomp$10_svgRoot$$);$graph$$.shadowVisible&&$graph$$.addSvgShadow($ignoreSelection$jscomp$10_svgRoot$$);null!=$xml$$&&$ignoreSelection$jscomp$10_svgRoot$$.setAttribute("content",
$xml$$);null!=$url$$&&$ignoreSelection$jscomp$10_svgRoot$$.setAttribute("resource",$url$$);if(null!=$callback$$)this.convertImages($ignoreSelection$jscomp$10_svgRoot$$,mxUtils.bind(this,function($svgRoot$$){$callback$$(($noHeader$$?"":'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')+mxUtils.getXml($svgRoot$$))}));else return($noHeader$$?"":'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')+
mxUtils.getXml($ignoreSelection$jscomp$10_svgRoot$$)};EditorUi.prototype.exportImage=function $EditorUi$$exportImage$($scale$$,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$border$$,$noCrop$$,$currentPage$$,$format$$){$format$$=null!=$format$$?$format$$:"png";if(this.spinner.spin(document.body,mxResources.get("exporting"))){var $selectionEmpty$$=this.editor.graph.isSelectionEmpty();$ignoreSelection$$=null!=$ignoreSelection$$?$ignoreSelection$$:$selectionEmpty$$;null==this.thumbImageCache&&
(this.thumbImageCache={});try{this.exportToCanvas(mxUtils.bind(this,function($canvas$$){this.spinner.stop();try{this.saveCanvas($canvas$$,$editable$$?this.getFileData(!0,null,null,null,$ignoreSelection$$,$currentPage$$):null,$format$$)}catch($e$$){"Invalid image"==$e$$.message?this.downloadFile($format$$):this.handleError($e$$)}}),null,this.thumbImageCache,null,mxUtils.bind(this,function($e$$){this.spinner.stop();this.handleError($e$$)}),null,$ignoreSelection$$,$scale$$||1,$transparentBackground$$,
$addShadow$$,null,null,$border$$,$noCrop$$)}catch($e$$){this.spinner.stop(),this.handleError($e$$)}}};EditorUi.prototype.loadFonts=function $EditorUi$$loadFonts$($then$$){if(null!=this.editor.fontCss&&null==this.editor.resolvedFontCss){var $trimString$$=function $$trimString$$$($str$$){return $str$$.replace(RegExp("^[\\s\"']+","g"),"").replace(RegExp("[\\s\"']+$","g"),"")},$parts$$=this.editor.fontCss.split("url("),$waiting$$=0,$fonts$$={},$finish$$=mxUtils.bind(this,function(){if(0==$waiting$$){for(var $result$$=
[$parts$$[0]],$j$$=1;$j$$<$parts$$.length;$j$$++){var $idx$$=$parts$$[$j$$].indexOf(")");$result$$.push('url("');$result$$.push($fonts$$[$trimString$$($parts$$[$j$$].substring(0,$idx$$))]);$result$$.push('"'+$parts$$[$j$$].substring($idx$$))}this.editor.resolvedFontCss=$result$$.join("");$then$$()}});if(0<$parts$$.length)for(var $i$$=1;$i$$<$parts$$.length;$i$$++){var $idx$jscomp$0$$=$parts$$[$i$$].indexOf(")"),$format$$=null,$fmtIdx$$=$parts$$[$i$$].indexOf("format(",$idx$jscomp$0$$);0<$fmtIdx$$&&
($format$$=$trimString$$($parts$$[$i$$].substring($fmtIdx$$+7,$parts$$[$i$$].indexOf(")",$fmtIdx$$))));mxUtils.bind(this,function($url$$){if(null==$fonts$$[$url$$]){$fonts$$[$url$$]=$url$$;$waiting$$++;var $mime$$="application/x-font-ttf";if("svg"==$format$$||/(\.svg)($|\?)/i.test($url$$))$mime$$="image/svg+xml";else if("otf"==$format$$||"embedded-opentype"==$format$$||/(\.otf)($|\?)/i.test($url$$))$mime$$="application/x-font-opentype";else if("woff"==$format$$||/(\.woff)($|\?)/i.test($url$$))$mime$$=
"application/font-woff";else if("woff2"==$format$$||/(\.woff2)($|\?)/i.test($url$$))$mime$$="application/font-woff2";else if("eot"==$format$$||/(\.eot)($|\?)/i.test($url$$))$mime$$="application/vnd.ms-fontobject";else if("sfnt"==$format$$||/(\.sfnt)($|\?)/i.test($url$$))$mime$$="application/font-sfnt";var $realUrl$$=$url$$;/^https?:\/\//.test($realUrl$$)&&!this.editor.isCorsEnabledForUrl($realUrl$$)&&($realUrl$$=PROXY_URL+"?url="+encodeURIComponent($url$$));this.loadUrl($realUrl$$,mxUtils.bind(this,
function($uri$$){$fonts$$[$url$$]=$uri$$;$waiting$$--;$finish$$()}),mxUtils.bind(this,function($err$$){$waiting$$--;$finish$$()}),!0,null,"data:"+$mime$$+";charset=utf-8;base64,")}})($trimString$$($parts$$[$i$$].substring(0,$idx$jscomp$0$$)),$format$$)}}else $then$$()};EditorUi.prototype.exportToCanvas=function $EditorUi$$exportToCanvas$($callback$$,$width$$,$imageCache$$,$background$$,$error$$,$limitHeight$$,$ignoreSelection$$,$scale$$,$transparentBackground$$,$addShadow$$,$converter$$,$graph$$,
$border$$,$noCrop$$){$limitHeight$$=null!=$limitHeight$$?$limitHeight$$:!0;$graph$$=null!=$graph$$?$graph$$:this.editor.graph;$border$$=null!=$border$$?$border$$:0;var $bg$$=$transparentBackground$$?null:$graph$$.background;$bg$$==mxConstants.NONE&&($bg$$=null);null==$bg$$&&($bg$$=$background$$);null==$bg$$&&0==$transparentBackground$$&&($bg$$="#ffffff");this.convertImages($graph$$.getSvg($bg$$,null,null,$noCrop$$,null,null!=$ignoreSelection$$?$ignoreSelection$$:!0,null,null,null,$addShadow$$),mxUtils.bind(this,
function($svgRoot$$){var $img$$=new Image;$img$$.onload=mxUtils.bind(this,function(){try{var $canvas$$=document.createElement("canvas"),$w$$=parseInt($svgRoot$$.getAttribute("width")),$h$$=parseInt($svgRoot$$.getAttribute("height"));$scale$$=null!=$scale$$?$scale$$:1;null!=$width$$&&($scale$$=$limitHeight$$?Math.min(1,Math.min(3*$width$$/(4*$h$$),$width$$/$w$$)):$width$$/$w$$);$w$$=Math.ceil($scale$$*$w$$)+2*$border$$;$h$$=Math.ceil($scale$$*$h$$)+2*$border$$;$canvas$$.setAttribute("width",$w$$);
$canvas$$.setAttribute("height",$h$$);var $ctx$$=$canvas$$.getContext("2d");null!=$bg$$&&($ctx$$.beginPath(),$ctx$$.rect(0,0,$w$$,$h$$),$ctx$$.fillStyle=$bg$$,$ctx$$.fill());$ctx$$.scale($scale$$,$scale$$);mxClient.IS_SF?window.setTimeout(function(){$ctx$$.drawImage($img$$,$border$$/$scale$$,$border$$/$scale$$);$callback$$($canvas$$)},0):($ctx$$.drawImage($img$$,$border$$/$scale$$,$border$$/$scale$$),$callback$$($canvas$$))}catch($e$$){null!=$error$$&&$error$$($e$$)}});$img$$.onerror=function $$img$$$onerror$($e$$){null!=
$error$$&&$error$$($e$$)};try{$addShadow$$&&this.editor.graph.addSvgShadow($svgRoot$$);var $done$$=mxUtils.bind(this,function(){if(null!=this.editor.resolvedFontCss){var $st$$=document.createElement("style");$st$$.setAttribute("type","text/css");$st$$.innerHTML=this.editor.resolvedFontCss;$svgRoot$$.getElementsByTagName("defs")[0].appendChild($st$$)}this.convertMath($graph$$,$svgRoot$$,!0,mxUtils.bind(this,function(){$img$$.src=this.createSvgDataUri(mxUtils.getXml($svgRoot$$))}))});this.loadFonts($done$$)}catch($e$$){null!=
$error$$&&$error$$($e$$)}}),$imageCache$$,$converter$$)};EditorUi.prototype.createImageUrlConverter=function $EditorUi$$createImageUrlConverter$(){var $converter$$=new mxUrlConverter;$converter$$.updateBaseUrl();var $convert$$=$converter$$.convert,$self$$=this;$converter$$.convert=function $$converter$$$convert$($src$$){if(null!=$src$$){var $remote$$="http://"==$src$$.substring(0,7)||"https://"==$src$$.substring(0,8);$remote$$&&!navigator.onLine?$src$$=$self$$.svgBrokenImage.src:!$remote$$||$src$$.substring(0,
$converter$$.baseUrl.length)==$converter$$.baseUrl||$self$$.crossOriginImages&&$self$$.editor.isCorsEnabledForUrl($src$$)?"chrome-extension://"!=$src$$.substring(0,19)&&($src$$=$convert$$.apply(this,arguments)):$src$$=PROXY_URL+"?url="+encodeURIComponent($src$$)}return $src$$};return $converter$$};EditorUi.prototype.convertImages=function $EditorUi$$convertImages$($svgRoot$$,$callback$$,$convertImages$jscomp$1_imageCache$$,$converter$$){null==$converter$$&&($converter$$=this.createImageUrlConverter());
var $counter$$=0,$cache$$=$convertImages$jscomp$1_imageCache$$||{};$convertImages$jscomp$1_imageCache$$=mxUtils.bind(this,function($tagName$$,$srcAttr$$){for(var $images$$=$svgRoot$$.getElementsByTagName($tagName$$),$i$$=0;$i$$<$images$$.length;$i$$++)mxUtils.bind(this,function($img$$){var $src$$=$converter$$.convert($img$$.getAttribute($srcAttr$$));if(null!=$src$$&&"data:"!=$src$$.substring(0,5)){var $tmp$$=$cache$$[$src$$];null==$tmp$$?($counter$$++,this.convertImageToDataUri($src$$,function($uri$$){null!=
$uri$$&&($cache$$[$src$$]=$uri$$,$img$$.setAttribute($srcAttr$$,$uri$$));$counter$$--;0==$counter$$&&$callback$$($svgRoot$$)})):$img$$.setAttribute($srcAttr$$,$tmp$$)}else null!=$src$$&&$img$$.setAttribute($srcAttr$$,$src$$)})($images$$[$i$$])});$convertImages$jscomp$1_imageCache$$("image","xlink:href");$convertImages$jscomp$1_imageCache$$("img","src");0==$counter$$&&$callback$$($svgRoot$$)};EditorUi.prototype.loadUrl=function $EditorUi$$loadUrl$($url$$,$success$$,$error$$,$forceBinary$$,$retry$$,
$dataUriPrefix$$,$noBinary$$){try{var $binary$$=!$noBinary$$&&($forceBinary$$||/(\.png)($|\?)/i.test($url$$)||/(\.jpe?g)($|\?)/i.test($url$$)||/(\.gif)($|\?)/i.test($url$$));$retry$$=null!=$retry$$?$retry$$:!0;var $fn$$=mxUtils.bind(this,function(){mxUtils.get($url$$,mxUtils.bind(this,function($bin$jscomp$1_req$$){if(200<=$bin$jscomp$1_req$$.getStatus()&&299>=$bin$jscomp$1_req$$.getStatus()){if(null!=$success$$){var $data$jscomp$115_tmp$$=$bin$jscomp$1_req$$.getText();if($binary$$){if((9==document.documentMode||
10==document.documentMode)&&"undefined"!==typeof window.mxUtilsBinaryToArray){$bin$jscomp$1_req$$=mxUtilsBinaryToArray($bin$jscomp$1_req$$.request.responseBody).toArray();for(var $data$jscomp$115_tmp$$=Array($bin$jscomp$1_req$$.length),$i$$=0;$i$$<$bin$jscomp$1_req$$.length;$i$$++)$data$jscomp$115_tmp$$[$i$$]=String.fromCharCode($bin$jscomp$1_req$$[$i$$]);$data$jscomp$115_tmp$$=$data$jscomp$115_tmp$$.join("")}$dataUriPrefix$$=null!=$dataUriPrefix$$?$dataUriPrefix$$:"data:image/png;base64,";$data$jscomp$115_tmp$$=
$dataUriPrefix$$+this.base64Encode($data$jscomp$115_tmp$$)}$success$$($data$jscomp$115_tmp$$)}}else null!=$error$$&&$error$$({message:mxResources.get("error")+" "+$bin$jscomp$1_req$$.getStatus()},$bin$jscomp$1_req$$)}),function($req$$){null!=$error$$&&$error$$({message:mxResources.get("error")+" "+$req$$.getStatus()})},$binary$$,this.timeout,function(){$retry$$&&null!=$error$$&&$error$$({code:App.ERROR_TIMEOUT,retry:$fn$$})})});$fn$$()}catch($e$$){null!=$error$$&&$error$$($e$$)}};EditorUi.prototype.isCorsEnabledForUrl=
function $EditorUi$$isCorsEnabledForUrl$($url$$){return this.editor.isCorsEnabledForUrl($url$$)};EditorUi.prototype.convertImageToDataUri=function $EditorUi$$convertImageToDataUri$($url$$,$callback$$){if(/(\.svg)$/i.test($url$$))mxUtils.get($url$$,mxUtils.bind(this,function($req$$){$callback$$(this.createSvgDataUri($req$$.getText()))}),function(){$callback$$(this.svgBrokenImage.src)});else{var $img$$=new Image,$self$$=this;this.crossOriginImages&&($img$$.crossOrigin="anonymous");$img$$.onload=function $$img$$$onload$(){var $canvas$$=
document.createElement("canvas"),$ctx$$=$canvas$$.getContext("2d");$canvas$$.height=$img$$.height;$canvas$$.width=$img$$.width;$ctx$$.drawImage($img$$,0,0);try{$callback$$($canvas$$.toDataURL())}catch($e$$){$callback$$($self$$.svgBrokenImage.src)}};$img$$.onerror=function $$img$$$onerror$(){$callback$$($self$$.svgBrokenImage.src)};$img$$.src=$url$$}};EditorUi.prototype.importXml=function $EditorUi$$importXml$($i$jscomp$80_i0$jscomp$1_xml$$,$dx$$,$dy$$,$crop$$,$noErrorHandling$$){$dx$$=$dx$$||0;$dy$$=
$dy$$||0;var $cells$$=[];try{var $graph$$=this.editor.graph;if($i$jscomp$80_i0$jscomp$1_xml$$){$graph$$.model.beginUpdate();try{var $pages$$=this.pages||[],$doc$$=mxUtils.parseXml($i$jscomp$80_i0$jscomp$1_xml$$),$node$$=this.editor.extractGraphModel($doc$$.documentElement,$pages$$.length);if($node$$&&"mxfile"===$node$$.nodeName&&$pages$$.length){var $diagrams$$=$node$$.getElementsByTagName("diagram");if(1===$diagrams$$.length)$node$$=mxUtils.parseXml(Graph.decompress(mxUtils.getTextContent($diagrams$$[0]))).documentElement;
else if(1<$diagrams$$.length)for($i$jscomp$80_i0$jscomp$1_xml$$=0,1===$pages$$.length&&this.isDiagramEmpty()&&($node$$=mxUtils.parseXml(Graph.decompress(mxUtils.getTextContent($diagrams$$[0]))).documentElement,$crop$$=!1,$i$jscomp$80_i0$jscomp$1_xml$$=1);$i$jscomp$80_i0$jscomp$1_xml$$<$diagrams$$.length;$i$jscomp$80_i0$jscomp$1_xml$$++){$diagrams$$[$i$jscomp$80_i0$jscomp$1_xml$$].removeAttribute("id");var $page$$=this.updatePageRoot(new DiagramPage($diagrams$$[$i$jscomp$80_i0$jscomp$1_xml$$])),$index$23$$=
$pages$$.length;$page$$.getName()||$page$$.setName(mxResources.get("pageWithNumber",[$index$23$$+1]));$graph$$.model.execute(new ChangePage(this,$page$$,$page$$,$index$23$$,!0))}}$node$$&&"mxGraphModel"===$node$$.nodeName&&($cells$$=$graph$$.importGraphModel($node$$,$dx$$,$dy$$,$crop$$))}finally{$graph$$.model.endUpdate()}}}catch($e$$){if($noErrorHandling$$)throw $e$$;this.handleError($e$$)}return $cells$$};EditorUi.prototype.isRemoteVisioFormat=function $EditorUi$$isRemoteVisioFormat$($filename$$){return/(\.v(sd|dx))($|\?)/i.test($filename$$)||
/(\.vs(s|x))($|\?)/i.test($filename$$)};EditorUi.prototype.importVisio=function $EditorUi$$importVisio$($file$$,$done$$,$onerror$$,$filename$$){$filename$$=null!=$filename$$?$filename$$:$file$$.name;$onerror$$=null!=$onerror$$?$onerror$$:mxUtils.bind(this,function($e$$){this.handleError($e$$)});var $delayed$$=mxUtils.bind(this,function(){this.loadingExtensions=!1;if(this.doImportVisio)if(this.isRemoteVisioFormat($filename$$)&&null!=VSD_CONVERT_URL){var $formData$$=new FormData;$formData$$.append("file1",
$file$$,$filename$$);var $xhr$$=new XMLHttpRequest;$xhr$$.open("POST",VSD_CONVERT_URL);$xhr$$.responseType="blob";$xhr$$.onreadystatechange=mxUtils.bind(this,function(){if(4==$xhr$$.readyState)if(200<=$xhr$$.status&&299>=$xhr$$.status)try{$xhr$$.response.name=$filename$$,this.doImportVisio($xhr$$.response,$done$$,$onerror$$)}catch($e$$){$onerror$$($e$$)}else $onerror$$({})});$xhr$$.send($formData$$)}else try{this.doImportVisio($file$$,$done$$,$onerror$$)}catch($e$$){$onerror$$($e$$)}else this.spinner.stop(),
this.handleError({message:mxResources.get("serviceUnavailableOrBlocked")})});this.doImportVisio||this.loadingExtensions||this.isOffline(!0)?$delayed$$():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",$delayed$$))};EditorUi.prototype.importGraphML=function $EditorUi$$importGraphML$($xmlData$$,$done$$,$onerror$$){$onerror$$=null!=$onerror$$?$onerror$$:mxUtils.bind(this,function($e$$){this.handleError($e$$)});var $delayed$$=mxUtils.bind(this,function(){this.loadingExtensions=!1;if(this.doImportGraphML)try{this.doImportGraphML($xmlData$$,
$done$$,$onerror$$)}catch($e$$){$onerror$$($e$$)}else this.spinner.stop(),this.handleError({message:mxResources.get("serviceUnavailableOrBlocked")})});this.doImportGraphML||this.loadingExtensions||this.isOffline(!0)?$delayed$$():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",$delayed$$))};EditorUi.prototype.exportVisio=function $EditorUi$$exportVisio$(){var $delayed$$=mxUtils.bind(this,function(){this.loadingExtensions=!1;if("undefined"!==typeof VsdxExport)try{(new VsdxExport(this)).exportCurrentDiagrams()||
this.handleError({message:mxResources.get("unknownError")})}catch($e$$){this.handleError($e$$)}else this.spinner.stop(),this.handleError({message:mxResources.get("serviceUnavailableOrBlocked")})});"undefined"!==typeof VsdxExport||this.loadingExtensions||this.isOffline(!0)?$delayed$$():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",$delayed$$))};EditorUi.prototype.convertLucidChart=function $EditorUi$$convertLucidChart$($data$$,$success$$,$error$$){var $delayed$$=mxUtils.bind(this,function(){this.loadingExtensions=
!1;if("undefined"!==typeof window.LucidImporter)try{$success$$(LucidImporter.importState(JSON.parse($data$$)))}catch($e$$){$error$$($e$$)}else $error$$({message:mxResources.get("serviceUnavailableOrBlocked")})});"undefined"!==typeof window.LucidImporter||this.loadingExtensions||this.isOffline(!0)?window.setTimeout($delayed$$,0):(this.loadingExtensions=!0,"1"==urlParams.dev?mxscript("js/diagramly/Extensions.js",$delayed$$):mxscript("js/extensions.min.js",$delayed$$))};EditorUi.prototype.insertAsPreText=
function $EditorUi$$insertAsPreText$($text$$,$x$$,$y$$){var $graph$$=this.editor.graph,$cell$$=null;$graph$$.getModel().beginUpdate();try{$cell$$=$graph$$.insertVertex(null,null,"<pre>"+$text$$+"</pre>",$x$$,$y$$,1,1,"text;html=1;align=center;verticalAlign=middle;"),$graph$$.updateCellSize($cell$$,!0)}finally{$graph$$.getModel().endUpdate()}return $cell$$};EditorUi.prototype.insertTextAt=function $EditorUi$$insertTextAt$($text$$,$dx$$,$dy$$,$html$$,$asImage_cell$$,$crop$$,$resizeImages$$){$crop$$=
null!=$crop$$?$crop$$:!0;$resizeImages$$=null!=$resizeImages$$?$resizeImages$$:!0;if(null!=$text$$)if(Graph.fileSupport&&!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat($text$$))this.parseFile(new Blob([$text$$.replace(/\s+/g," ")],{type:"application/octet-stream"}),mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&200<=$xhr$$.status&&299>=$xhr$$.status&&this.editor.graph.setSelectionCells(this.insertTextAt($xhr$$.responseText,$dx$$,$dy$$,!0))}));else if("data:"==$text$$.substring(0,
5)||!this.isOffline()&&($asImage_cell$$||/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test($text$$))){var $graph$$=this.editor.graph;if("data:image/png;base64,"==$text$$.substring(0,22)){var $xml$jscomp$0$$=this.extractGraphModelFromPng($text$$),$result$$=this.importXml($xml$jscomp$0$$,$dx$$,$dy$$,$crop$$,!0);if(0<$result$$.length)return $result$$}if("data:image/svg+xml;"==$text$$.substring(0,19))try{if($xml$jscomp$0$$=null,"data:image/svg+xml;base64,"==$text$$.substring(0,26)?($xml$jscomp$0$$=$text$$.substring($text$$.indexOf(",")+
1),$xml$jscomp$0$$=window.atob&&!mxClient.IS_SF?atob($xml$jscomp$0$$):Base64.decode($xml$jscomp$0$$,!0)):$xml$jscomp$0$$=decodeURIComponent($text$$.substring($text$$.indexOf(",")+1)),$result$$=this.importXml($xml$jscomp$0$$,$dx$$,$dy$$,$crop$$,!0),0<$result$$.length)return $result$$}catch($e$$){}this.loadImage($text$$,mxUtils.bind(this,function($h$jscomp$29_img$$){if("data:"==$text$$.substring(0,5))this.resizeImage($h$jscomp$29_img$$,$text$$,mxUtils.bind(this,function($data2$$,$w2$$,$h2$$){$graph$$.setSelectionCell($graph$$.insertVertex(null,
null,"",$graph$$.snap($dx$$),$graph$$.snap($dy$$),$w2$$,$h2$$,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+this.convertDataUri($data2$$)+";"))}),$resizeImages$$,this.maxImageSize);else{var $s$$=Math.min(1,Math.min(this.maxImageSize/$h$jscomp$29_img$$.width,this.maxImageSize/$h$jscomp$29_img$$.height)),$w$$=Math.round($h$jscomp$29_img$$.width*$s$$);$h$jscomp$29_img$$=Math.round($h$jscomp$29_img$$.height*$s$$);$graph$$.setSelectionCell($graph$$.insertVertex(null,
null,"",$graph$$.snap($dx$$),$graph$$.snap($dy$$),$w$$,$h$jscomp$29_img$$,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+$text$$+";"))}}),mxUtils.bind(this,function(){var $cell$$=null;$graph$$.getModel().beginUpdate();try{$cell$$=$graph$$.insertVertex($graph$$.getDefaultParent(),null,$text$$,$graph$$.snap($dx$$),$graph$$.snap($dy$$),1,1,"text;"+($html$$?"html=1;":"")),$graph$$.updateCellSize($cell$$),$graph$$.fireEvent(new mxEventObject("textInserted",
"cells",[$cell$$]))}finally{$graph$$.getModel().endUpdate()}$graph$$.setSelectionCell($cell$$)}))}else{$text$$=Graph.zapGremlins(mxUtils.trim($text$$));if(this.isCompatibleString($text$$))return this.importXml($text$$,$dx$$,$dy$$,$crop$$);if(0<$text$$.length)if(this.isLucidChartData($text$$))this.convertLucidChart($text$$,mxUtils.bind(this,function($xml$$){this.editor.graph.setSelectionCells(this.importXml($xml$$,$dx$$,$dy$$,$crop$$))}),mxUtils.bind(this,function($e$$){this.handleError($e$$)}));else{$graph$$=
this.editor.graph;$asImage_cell$$=null;$graph$$.getModel().beginUpdate();try{$asImage_cell$$=$graph$$.insertVertex($graph$$.getDefaultParent(),null,"",$graph$$.snap($dx$$),$graph$$.snap($dy$$),1,1,"text;"+($html$$?"html=1;":"")),$graph$$.fireEvent(new mxEventObject("textInserted","cells",[$asImage_cell$$])),"<"==$text$$.charAt(0)&&$text$$.indexOf(">")==$text$$.length-1&&($text$$=mxUtils.htmlEntities($text$$)),$text$$.length>this.maxTextBytes&&($text$$=$text$$.substring(0,this.maxTextBytes)+"..."),
$asImage_cell$$.value=$text$$,$graph$$.updateCellSize($asImage_cell$$),/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/i.test($asImage_cell$$.value)&&$graph$$.setLinkForCell($asImage_cell$$,$asImage_cell$$.value),$asImage_cell$$.geometry.width+=$graph$$.gridSize,$asImage_cell$$.geometry.height+=$graph$$.gridSize}finally{$graph$$.getModel().endUpdate()}return[$asImage_cell$$]}}return[]};
EditorUi.prototype.formatFileSize=function $EditorUi$$formatFileSize$($size$$){var $i$$=-1;do $size$$/=1024,$i$$++;while(1024<$size$$);return Math.max($size$$,.1).toFixed(1)+" kB; MB; GB; TB;PB;EB;ZB;YB".split(";")[$i$$]};EditorUi.prototype.convertDataUri=function $EditorUi$$convertDataUri$($uri$$){if("data:"==$uri$$.substring(0,5)){var $semi$$=$uri$$.indexOf(";");0<$semi$$&&($uri$$=$uri$$.substring(0,$semi$$)+$uri$$.substring($uri$$.indexOf(",",$semi$$+1)))}return $uri$$};EditorUi.prototype.isRemoteFileFormat=
function $EditorUi$$isRemoteFileFormat$($data$$,$filename$$){return/(\"contentType\":\s*\"application\/gliffy\+json\")/.test($data$$)};EditorUi.prototype.isLucidChartData=function $EditorUi$$isLucidChartData$($data$$){return null!=$data$$&&'{"state":"{\\"Properties\\":'==$data$$.substring(0,26)};EditorUi.prototype.importLocalFile=function $EditorUi$$importLocalFile$($device$$,$noSplash$$){if($device$$&&Graph.fileSupport&&(!mxClient.IS_IE&&!mxClient.IS_IE11||0>navigator.appVersion.indexOf("Windows NT 6.1"))){if(null==
this.importFileInputElt){var $input$$=document.createElement("input");$input$$.setAttribute("type","file");$input$$.setAttribute("accept",".csetd");mxEvent.addListener($input$$,"change",mxUtils.bind(this,function(){null!=$input$$.files&&CsetUtils.importFilesCSETD($input$$.files,this.editor);$input$$.value=""}));$input$$.style.display="none";document.body.appendChild($input$$);this.importFileInputElt=$input$$}this.importFileInputElt.click()}else{window.openNew=!1;window.openKey="import";if(!$noSplash$$){var $prevValue$$=
Editor.useLocalStorage;Editor.useLocalStorage=!$device$$}window.openFile=new OpenFile(mxUtils.bind(this,function($cancel$$){this.hideDialog($cancel$$)}));window.openFile.setConsumer(mxUtils.bind(this,function($xml$jscomp$0$$,$filename$$){if(null!=$filename$$&&Graph.fileSupport&&/(\.v(dx|sdx?))($|\?)/i.test($filename$$)){var $file$$=new Blob([$xml$jscomp$0$$],{type:"application/octet-stream"});this.importVisio($file$$,mxUtils.bind(this,function($xml$$){this.importXml($xml$$,0,0,!0)}),null,$filename$$)}else this.editor.graph.setSelectionCells(this.importXml($xml$jscomp$0$$,
0,0,!0))}));this.showDialog((new OpenDialog(this)).container,360,220,!0,!0,function(){window.openFile=null});if(!$noSplash$$){var $dlg$$=this.dialog,$dlgClose$$=$dlg$$.close;this.dialog.close=mxUtils.bind(this,function($cancel$$){Editor.useLocalStorage=$prevValue$$;$dlgClose$$.apply($dlg$$,arguments);$cancel$$&&null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()})}}};EditorUi.prototype.importFile=function $EditorUi$$importFile$($data$$,$mimeType$jscomp$19_semi$jscomp$1_xml$$,$dx$$,
$dy$$,$w$$,$h$$,$filename$$,$done$$,$containsModel_file$$,$crop$$,$ignoreEmbeddedXml$$){$crop$$=null!=$crop$$?$crop$$:!0;var $async$$=!1,$cells$jscomp$21_graph$$=null,$handleResult$$=mxUtils.bind(this,function($xml$$){var $importedCells$$=null;null!=$xml$$&&"<mxlibrary"==$xml$$.substring(0,10)?this.loadLibrary(new LocalLibrary(this,$xml$$,$filename$$)):$importedCells$$=this.importXml($xml$$,$dx$$,$dy$$,$crop$$);null!=$done$$&&$done$$($importedCells$$)});"image"==$mimeType$jscomp$19_semi$jscomp$1_xml$$.substring(0,
5)?($containsModel_file$$=!1,"image/png"==$mimeType$jscomp$19_semi$jscomp$1_xml$$.substring(0,9)&&($mimeType$jscomp$19_semi$jscomp$1_xml$$=$ignoreEmbeddedXml$$?null:this.extractGraphModelFromPng($data$$),null!=$mimeType$jscomp$19_semi$jscomp$1_xml$$&&0<$mimeType$jscomp$19_semi$jscomp$1_xml$$.length&&($cells$jscomp$21_graph$$=this.importXml($mimeType$jscomp$19_semi$jscomp$1_xml$$,$dx$$,$dy$$,$crop$$),$containsModel_file$$=!0)),$containsModel_file$$||($cells$jscomp$21_graph$$=this.editor.graph,$mimeType$jscomp$19_semi$jscomp$1_xml$$=
$data$$.indexOf(";"),0<$mimeType$jscomp$19_semi$jscomp$1_xml$$&&($data$$=$data$$.substring(0,$mimeType$jscomp$19_semi$jscomp$1_xml$$)+$data$$.substring($data$$.indexOf(",",$mimeType$jscomp$19_semi$jscomp$1_xml$$+1))),$crop$$&&$cells$jscomp$21_graph$$.isGridEnabled()&&($dx$$=$cells$jscomp$21_graph$$.snap($dx$$),$dy$$=$cells$jscomp$21_graph$$.snap($dy$$)),$cells$jscomp$21_graph$$=[$cells$jscomp$21_graph$$.insertVertex(null,null,"",$dx$$,$dy$$,$w$$,$h$$,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+
$data$$+";")])):/(\.*<graphml )/.test($data$$)?($async$$=!0,this.importGraphML($data$$,$handleResult$$)):null!=$containsModel_file$$&&null!=$filename$$&&(/(\.v(dx|sdx?))($|\?)/i.test($filename$$)||/(\.vs(x|sx?))($|\?)/i.test($filename$$))?($async$$=!0,this.importVisio($containsModel_file$$,$handleResult$$)):!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat($data$$,$filename$$)?($async$$=!0,this.parseFile(null!=$containsModel_file$$?$containsModel_file$$:new Blob([$data$$],{type:"application/octet-stream"}),
mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&(200<=$xhr$$.status&&299>=$xhr$$.status?$handleResult$$($xhr$$.responseText):null!=$done$$&&$done$$(null))}),$filename$$)):/(\.v(sd|dx))($|\?)/i.test($filename$$)||/(\.vs(s|x))($|\?)/i.test($filename$$)||($cells$jscomp$21_graph$$=this.insertTextAt(this.validateFileData($data$$),$dx$$,$dy$$,!0,null,$crop$$));$async$$||null==$done$$||$done$$($cells$jscomp$21_graph$$);return $cells$jscomp$21_graph$$};EditorUi.prototype.base64Encode=function $EditorUi$$base64Encode$($str$$){for(var $out$$=
"",$i$$=0,$len$$=$str$$.length,$c1$$,$c2$$,$c3$$;$i$$<$len$$;){$c1$$=$str$$.charCodeAt($i$$++)&255;if($i$$==$len$$){$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c1$$>>2);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c1$$&3)<<4);$out$$+="==";break}$c2$$=$str$$.charCodeAt($i$$++);if($i$$==$len$$){$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c1$$>>2);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c1$$&
3)<<4|($c2$$&240)>>4);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c2$$&15)<<2);$out$$+="=";break}$c3$$=$str$$.charCodeAt($i$$++);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c1$$>>2);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c1$$&3)<<4|($c2$$&240)>>4);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(($c2$$&15)<<2|($c3$$&192)>>6);$out$$+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($c3$$&
63)}return $out$$};EditorUi.prototype.importFiles=function $EditorUi$$importFiles$($files$$,$x$jscomp$0$$,$y$jscomp$0$$,$maxSize$$,$fn$$,$resultFn$$,$filterFn$$,$barrierFn$$,$resizeDialog$$,$maxBytes$$,$resampleThreshold$$,$ignoreEmbeddedXml$$){$x$jscomp$0$$=null!=$x$jscomp$0$$?$x$jscomp$0$$:0;$y$jscomp$0$$=null!=$y$jscomp$0$$?$y$jscomp$0$$:0;$maxSize$$=null!=$maxSize$$?$maxSize$$:this.maxImageSize;$maxBytes$$=null!=$maxBytes$$?$maxBytes$$:this.maxImageBytes;var $crop$$=null!=$x$jscomp$0$$&&null!=
$y$jscomp$0$$,$resizeImages$$=!0,$largeImages_tmp$$=!1;if(!mxClient.IS_CHROMEAPP&&null!=$files$$)for(var $thresh$$=$resampleThreshold$$||this.resampleThreshold,$i$jscomp$0$$=0;$i$jscomp$0$$<$files$$.length;$i$jscomp$0$$++)if("image/"==$files$$[$i$jscomp$0$$].type.substring(0,6)&&$files$$[$i$jscomp$0$$].size>$thresh$$){$largeImages_tmp$$=!0;break}var $doImportFiles$$=mxUtils.bind(this,function(){var $graph$$=this.editor.graph,$gs$$=$graph$$.gridSize;$fn$$=null!=$fn$$?$fn$$:mxUtils.bind(this,function($data$$,
$mimeType$$,$x$$,$y$$,$w$$,$h$$,$filename$$,$done$$,$file$$){return null!=$data$$&&"<mxlibrary"==$data$$.substring(0,10)?(this.spinner.stop(),this.loadLibrary(new LocalLibrary(this,$data$$,$filename$$)),null):this.importFile($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$,$filename$$,$done$$,$file$$,$crop$$,$ignoreEmbeddedXml$$)});$resultFn$$=null!=$resultFn$$?$resultFn$$:mxUtils.bind(this,function($cells$$){$graph$$.setSelectionCells($cells$$)});if(this.spinner.spin(document.body,mxResources.get("loading")))for(var $count$$=
$files$$.length,$remain$$=$count$$,$queue$$=[],$barrier$$=mxUtils.bind(this,function($index$$,$fnc$$){$queue$$[$index$$]=$fnc$$;if(0==--$remain$$){this.spinner.stop();if(null!=$barrierFn$$)$barrierFn$$($queue$$);else{var $cells$$=[];$graph$$.getModel().beginUpdate();try{for(var $j$$=0;$j$$<$queue$$.length;$j$$++){var $tmp$$=$queue$$[$j$$]();null!=$tmp$$&&($cells$$=$cells$$.concat($tmp$$))}}finally{$graph$$.getModel().endUpdate()}}$resultFn$$($cells$$)}}),$i$$=0;$i$$<$count$$;$i$$++)mxUtils.bind(this,
function($index$$){var $file$$=$files$$[$index$$];if(null!=$file$$){var $reader$$=new FileReader;$reader$$.onload=mxUtils.bind(this,function($e$$){if(null==$filterFn$$||$filterFn$$($file$$))if("image/"==$file$$.type.substring(0,6))if("image/svg"==$file$$.type.substring(0,9)){var $data$$=$e$$.target.result,$comma$$=$data$$.indexOf(","),$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$=decodeURIComponent(escape(atob($data$$.substring($comma$$+1)))),$root$$=mxUtils.parseXml($containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$),
$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$=$root$$.getElementsByTagName("svg");if(0<$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$.length){var $containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$=$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$[0],$cont$$=$ignoreEmbeddedXml$$?null:$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$.getAttribute("content");null!=$cont$$&&"<"!=$cont$$.charAt(0)&&"%"!=$cont$$.charAt(0)&&
($cont$$=unescape(window.atob?atob($cont$$):Base64.decode($cont$$,!0)));null!=$cont$$&&"%"==$cont$$.charAt(0)&&($cont$$=decodeURIComponent($cont$$));null==$cont$$||"<mxfile "!==$cont$$.substring(0,8)&&"<mxGraphModel "!==$cont$$.substring(0,14)?$barrier$$($index$$,mxUtils.bind(this,function(){try{if($data$$.substring(0,$comma$$+1),null!=$root$$){var $svgs$$=$root$$.getElementsByTagName("svg");if(0<$svgs$$.length){var $svgRoot$$=$svgs$$[0],$w$$=parseFloat($svgRoot$$.getAttribute("width")),$h$$=parseFloat($svgRoot$$.getAttribute("height")),
$vb$$=$svgRoot$$.getAttribute("viewBox");if(null==$vb$$||0==$vb$$.length)$svgRoot$$.setAttribute("viewBox","0 0 "+$w$$+" "+$h$$);else if(isNaN($w$$)||isNaN($h$$)){var $tokens$$=$vb$$.split(" ");3<$tokens$$.length&&($w$$=parseFloat($tokens$$[2]),$h$$=parseFloat($tokens$$[3]))}$data$$=this.createSvgDataUri(mxUtils.getXml($svgRoot$$));var $s$$=Math.min(1,Math.min($maxSize$$/Math.max(1,$w$$)),$maxSize$$/Math.max(1,$h$$)),$cells$$=$fn$$($data$$,$file$$.type,$x$jscomp$0$$+$index$$*$gs$$,$y$jscomp$0$$+$index$$*
$gs$$,Math.max(1,Math.round($w$$*$s$$)),Math.max(1,Math.round($h$$*$s$$)),$file$$.name);if(isNaN($w$$)||isNaN($h$$)){var $img$$=new Image;$img$$.onload=mxUtils.bind(this,function(){$w$$=Math.max(1,$img$$.width);$h$$=Math.max(1,$img$$.height);$cells$$[0].geometry.width=$w$$;$cells$$[0].geometry.height=$h$$;$svgRoot$$.setAttribute("viewBox","0 0 "+$w$$+" "+$h$$);$data$$=this.createSvgDataUri(mxUtils.getXml($svgRoot$$));var $semi$$=$data$$.indexOf(";");0<$semi$$&&($data$$=$data$$.substring(0,$semi$$)+
$data$$.substring($data$$.indexOf(",",$semi$$+1)));$graph$$.setCellStyles("image",$data$$,[$cells$$[0]])});$img$$.src=this.createSvgDataUri(mxUtils.getXml($svgRoot$$))}return $cells$$}}}catch($e$24$$){}return null})):$barrier$$($index$$,mxUtils.bind(this,function(){return $fn$$($cont$$,"text/xml",$x$jscomp$0$$+$index$$*$gs$$,$y$jscomp$0$$+$index$$*$gs$$,0,0,$file$$.name)}))}else $barrier$$($index$$,mxUtils.bind(this,function(){return null}))}else{$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$=
!1;if("image/png"==$file$$.type){var $xml$$=$ignoreEmbeddedXml$$?null:this.extractGraphModelFromPng($e$$.target.result);if(null!=$xml$$&&0<$xml$$.length){var $img$jscomp$0$$=new Image;$img$jscomp$0$$.src=$e$$.target.result;$barrier$$($index$$,mxUtils.bind(this,function(){return $fn$$($xml$$,"text/xml",$x$jscomp$0$$+$index$$*$gs$$,$y$jscomp$0$$+$index$$*$gs$$,$img$jscomp$0$$.width,$img$jscomp$0$$.height,$file$$.name)}));$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$=!0}}$containsModel$jscomp$1_svgRoot$jscomp$15_svgText$jscomp$1_svgs$$||
(mxClient.IS_CHROMEAPP?(this.spinner.stop(),this.showError(mxResources.get("error"),mxResources.get("dragAndDropNotSupported"),mxResources.get("cancel"),mxUtils.bind(this,function(){}),null,mxResources.get("ok"),mxUtils.bind(this,function(){this.actions.get("import").funct()}))):this.loadImage($e$$.target.result,mxUtils.bind(this,function($img$$){this.resizeImage($img$$,$e$$.target.result,mxUtils.bind(this,function($data2$$,$w2$$,$h2$$){$barrier$$($index$$,mxUtils.bind(this,function(){if(null!=$data2$$&&
$data2$$.length<$maxBytes$$){var $s$$=$resizeImages$$&&this.isResampleImage($e$$.target.result,$resampleThreshold$$)?Math.min(1,Math.min($maxSize$$/$w2$$,$maxSize$$/$h2$$)):1;return $fn$$($data2$$,$file$$.type,$x$jscomp$0$$+$index$$*$gs$$,$y$jscomp$0$$+$index$$*$gs$$,Math.round($w2$$*$s$$),Math.round($h2$$*$s$$),$file$$.name)}this.handleError({message:mxResources.get("imageTooBig")});return null}))}),$resizeImages$$,$maxSize$$,$resampleThreshold$$)}),mxUtils.bind(this,function(){this.handleError({message:mxResources.get("invalidOrMissingFile")})})))}else $fn$$($e$$.target.result,
$file$$.type,$x$jscomp$0$$+$index$$*$gs$$,$y$jscomp$0$$+$index$$*$gs$$,240,160,$file$$.name,function($cells$$){$barrier$$($index$$,function(){return $cells$$})})});/(\.v(dx|sdx?))($|\?)/i.test($file$$.name)||/(\.vs(x|sx?))($|\?)/i.test($file$$.name)?$fn$$(null,$file$$.type,$x$jscomp$0$$+$index$$*$gs$$,$y$jscomp$0$$+$index$$*$gs$$,240,160,$file$$.name,function($cells$$){$barrier$$($index$$,function(){return $cells$$})},$file$$):"image"==$file$$.type.substring(0,5)?$reader$$.readAsDataURL($file$$):
$reader$$.readAsText($file$$)}})($i$$)});if($largeImages_tmp$$){$largeImages_tmp$$=[];for($i$jscomp$0$$=0;$i$jscomp$0$$<$files$$.length;$i$jscomp$0$$++)$largeImages_tmp$$.push($files$$[$i$jscomp$0$$]);$files$$=$largeImages_tmp$$;this.confirmImageResize(function($doResize$$){$resizeImages$$=$doResize$$;$doImportFiles$$()},$resizeDialog$$)}else $doImportFiles$$()};EditorUi.prototype.confirmImageResize=function $EditorUi$$confirmImageResize$($fn$$,$force$$){$force$$=null!=$force$$?$force$$:!1;var $resume$$=
null!=this.spinner&&null!=this.spinner.pause?this.spinner.pause():function(){},$resizeImages$$=isLocalStorage||mxClient.IS_CHROMEAPP?mxSettings.getResizeImages():null,$wrapper$$=function $$wrapper$$$($remember$$,$resize$$){if($remember$$||$force$$)mxSettings.setResizeImages($remember$$?$resize$$:null),mxSettings.save();$resume$$();$fn$$($resize$$)};null==$resizeImages$$||$force$$?this.showDialog((new ConfirmDialog(this,mxResources.get("resizeLargeImages"),function($remember$$){$wrapper$$($remember$$,
!0)},function($remember$$){$wrapper$$($remember$$,!1)},mxResources.get("resize"),mxResources.get("actualSize"),'<img style="margin-top:8px;" src="'+Editor.loResImage+'"/>','<img style="margin-top:8px;" src="'+Editor.hiResImage+'"/>',isLocalStorage||mxClient.IS_CHROMEAPP)).container,340,isLocalStorage||mxClient.IS_CHROMEAPP?220:200,!0,!0):$wrapper$$(!1,$resizeImages$$)};EditorUi.prototype.parseFile=function $EditorUi$$parseFile$($file$$,$fn$$,$filename$$){$filename$$=null!=$filename$$?$filename$$:
$file$$.name;var $formData$$=new FormData;$formData$$.append("format","xml");$formData$$.append("upfile",$file$$,$filename$$);var $xhr$$=new XMLHttpRequest;$xhr$$.open("POST",OPEN_URL);$xhr$$.onreadystatechange=function $$xhr$$$onreadystatechange$(){$fn$$($xhr$$)};$xhr$$.send($formData$$)};EditorUi.prototype.isResampleImage=function $EditorUi$$isResampleImage$($data$$,$thresh$$){$thresh$$=null!=$thresh$$?$thresh$$:this.resampleThreshold;return $data$$.length>$thresh$$};EditorUi.prototype.resizeImage=
function $EditorUi$$resizeImage$($img$$,$data$$,$fn$$,$enabled$$,$maxSize$$,$thresh$$){$maxSize$$=null!=$maxSize$$?$maxSize$$:this.maxImageSize;var $w$$=Math.max(1,$img$$.width),$h$$=Math.max(1,$img$$.height);if($enabled$$&&this.isResampleImage($data$$,$thresh$$))try{var $factor$$=Math.max($w$$/$maxSize$$,$h$$/$maxSize$$);if(1<$factor$$){var $w2$$=Math.round($w$$/$factor$$),$h2$$=Math.round($h$$/$factor$$),$canvas$$=document.createElement("canvas");$canvas$$.width=$w2$$;$canvas$$.height=$h2$$;$canvas$$.getContext("2d").drawImage($img$$,
0,0,$w2$$,$h2$$);var $tmp$$=$canvas$$.toDataURL();if($tmp$$.length<$data$$.length){var $canvas2$$=document.createElement("canvas");$canvas2$$.width=$w2$$;$canvas2$$.height=$h2$$;var $tmp2$$=$canvas2$$.toDataURL();$tmp$$!==$tmp2$$&&($data$$=$tmp$$,$w$$=$w2$$,$h$$=$h2$$)}}}catch($e$$){}$fn$$($data$$,$w$$,$h$$)};EditorUi.prototype.crcTable=[];for(var $n$jscomp$0$$=0;256>$n$jscomp$0$$;$n$jscomp$0$$++)for(var $c$$=$n$jscomp$0$$,$k$$=0;8>$k$$;$k$$++)$c$$=1==($c$$&1)?3988292384^$c$$>>>1:$c$$>>>1,EditorUi.prototype.crcTable[$n$jscomp$0$$]=
$c$$;EditorUi.prototype.updateCRC=function $EditorUi$$updateCRC$($c$jscomp$3_crc$$,$data$$,$off$$,$len$$){for(var $n$$=0;$n$$<$len$$;$n$$++)$c$jscomp$3_crc$$=EditorUi.prototype.crcTable[($c$jscomp$3_crc$$^$data$$.charCodeAt($off$$+$n$$))&255]^$c$jscomp$3_crc$$>>>8;return $c$jscomp$3_crc$$};EditorUi.prototype.crc32=function $EditorUi$$crc32$($str$$){this.crcTable=this.crcTable||this.createCrcTable();for(var $crc$$=-1,$i$$=0;$i$$<$str$$.length;$i$$++)$crc$$=$crc$$>>>8^this.crcTable[($crc$$^$str$$.charCodeAt($i$$))&
255];return($crc$$^-1)>>>0};EditorUi.prototype.writeGraphModelToPng=function $EditorUi$$writeGraphModelToPng$($base64$jscomp$5_data$jscomp$125_f$$,$type$$,$chunkData$jscomp$1_key$$,$crc$jscomp$3_value$$,$error$jscomp$58_result$$){function $fread$$($d$$,$count$$){var $start$$=$pos$$;$pos$$+=$count$$;return $d$$.substring($start$$,$pos$$)}function $_freadint$$($bytes$jscomp$3_d$$){$bytes$jscomp$3_d$$=$fread$$($bytes$jscomp$3_d$$,4);return $bytes$jscomp$3_d$$.charCodeAt(3)+($bytes$jscomp$3_d$$.charCodeAt(2)<<
8)+($bytes$jscomp$3_d$$.charCodeAt(1)<<16)+($bytes$jscomp$3_d$$.charCodeAt(0)<<24)}function $writeInt$$($num$$){return String.fromCharCode($num$$>>24&255,$num$$>>16&255,$num$$>>8&255,$num$$&255)}$base64$jscomp$5_data$jscomp$125_f$$=$base64$jscomp$5_data$jscomp$125_f$$.substring($base64$jscomp$5_data$jscomp$125_f$$.indexOf(",")+1);$base64$jscomp$5_data$jscomp$125_f$$=window.atob?atob($base64$jscomp$5_data$jscomp$125_f$$):Base64.decode($base64$jscomp$5_data$jscomp$125_f$$,!0);var $pos$$=0;if($fread$$($base64$jscomp$5_data$jscomp$125_f$$,
8)!=String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10))null!=$error$jscomp$58_result$$&&$error$jscomp$58_result$$();else if($fread$$($base64$jscomp$5_data$jscomp$125_f$$,4),"IHDR"!=$fread$$($base64$jscomp$5_data$jscomp$125_f$$,4))null!=$error$jscomp$58_result$$&&$error$jscomp$58_result$$();else{$fread$$($base64$jscomp$5_data$jscomp$125_f$$,17);$error$jscomp$58_result$$=$base64$jscomp$5_data$jscomp$125_f$$.substring(0,$pos$$);do{var $n$$=$_freadint$$($base64$jscomp$5_data$jscomp$125_f$$);
if("IDAT"==$fread$$($base64$jscomp$5_data$jscomp$125_f$$,4)){$error$jscomp$58_result$$=$base64$jscomp$5_data$jscomp$125_f$$.substring(0,$pos$$-8);$chunkData$jscomp$1_key$$=$chunkData$jscomp$1_key$$+String.fromCharCode(0)+("zTXt"==$type$$?String.fromCharCode(0):"")+$crc$jscomp$3_value$$;$crc$jscomp$3_value$$=4294967295;$crc$jscomp$3_value$$=this.updateCRC($crc$jscomp$3_value$$,$type$$,0,4);$crc$jscomp$3_value$$=this.updateCRC($crc$jscomp$3_value$$,$chunkData$jscomp$1_key$$,0,$chunkData$jscomp$1_key$$.length);
$error$jscomp$58_result$$+=$writeInt$$($chunkData$jscomp$1_key$$.length)+$type$$+$chunkData$jscomp$1_key$$+$writeInt$$($crc$jscomp$3_value$$^4294967295);$error$jscomp$58_result$$+=$base64$jscomp$5_data$jscomp$125_f$$.substring($pos$$-8,$base64$jscomp$5_data$jscomp$125_f$$.length);break}$error$jscomp$58_result$$+=$base64$jscomp$5_data$jscomp$125_f$$.substring($pos$$-8,$pos$$-4+$n$$);$fread$$($base64$jscomp$5_data$jscomp$125_f$$,$n$$);$fread$$($base64$jscomp$5_data$jscomp$125_f$$,4)}while($n$$);return"data:image/png;base64,"+
(window.btoa?btoa($error$jscomp$58_result$$):Base64.encode($error$jscomp$58_result$$,!0))}};EditorUi.prototype.extractGraphModelFromPng=function $EditorUi$$extractGraphModelFromPng$($data$$){var $result$$=null;try{var $base64$$=$data$$.substring($data$$.indexOf(",")+1),$binary$$=window.atob&&!mxClient.IS_SF?atob($base64$$):Base64.decode($base64$$,!0);EditorUi.parsePng($binary$$,mxUtils.bind(this,function($pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$,$type$$,$idx$jscomp$6_length$$){$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$=
$binary$$.substring($pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$+8,$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$+8+$idx$jscomp$6_length$$);"zTXt"==$type$$?($idx$jscomp$6_length$$=$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$.indexOf(String.fromCharCode(0)),"mxGraphModel"==$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$.substring(0,$idx$jscomp$6_length$$)&&($pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$=Graph.bytesToString(pako.inflateRaw($pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$.substring($idx$jscomp$6_length$$+
2))).replace(/\+/g," "),null!=$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$&&0<$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$.length&&($result$$=$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$))):"tEXt"==$type$$&&($pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$=$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$.split(String.fromCharCode(0)),1<$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$.length&&"mxGraphModel"==$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$[0]&&
($result$$=$pos$jscomp$4_vals$jscomp$3_value$jscomp$86_xmlData$$[1]));if(null!=$result$$||"IDAT"==$type$$)return!0}))}catch($e$$){}null!=$result$$&&"%"==$result$$.charAt(0)&&($result$$=decodeURIComponent($result$$));null!=$result$$&&"%"==$result$$.charAt(0)&&($result$$=decodeURIComponent($result$$));return $result$$};EditorUi.prototype.loadImage=function $EditorUi$$loadImage$($uri$$,$onload$$,$onerror$$){try{var $img$$=new Image;$img$$.onload=function $$img$$$onload$(){$onload$$($img$$)};null!=$onerror$$&&
($img$$.onerror=$onerror$$);$img$$.src=$uri$$}catch($e$$){if(null!=$onerror$$)$onerror$$($e$$);else throw $e$$;}};var $editorUiInit$$=EditorUi.prototype.init;EditorUi.prototype.init=function $EditorUi$$init$(){mxStencilRegistry.allowEval=mxStencilRegistry.allowEval&&!this.isOfflineApp();"undefined"!==typeof window.mxSettings&&(this.formatWidth=mxSettings.getFormatWidth());var $ui$$=this,$graph$jscomp$0$$=this.editor.graph;$graph$jscomp$0$$.getLinkTitle=function $$graph$jscomp$0$$$getLinkTitle$($href$$){return $ui$$.getLinkTitle($href$$)};
$graph$jscomp$0$$.customLinkClicked=function $$graph$jscomp$0$$$customLinkClicked$($link$$){var $done$$=!1;try{$ui$$.handleCustomLink($link$$),$done$$=!0}catch($e$$){$ui$$.handleError($e$$)}return $done$$};var $clearDefaultStyle$$=this.clearDefaultStyle;this.clearDefaultStyle=function $this$clearDefaultStyle$(){$clearDefaultStyle$$.apply(this,arguments)};this.isOffline()||"undefined"===typeof window.EditDataDialog||(EditDataDialog.placeholderHelpLink="https://desk.draw.io/support/solutions/articles/16000051979");
var $editorGetEditBlankUrl$$=$ui$$.editor.getEditBlankUrl;this.editor.getEditBlankUrl=function $this$editor$getEditBlankUrl$($params$$){$params$$=null!=$params$$?$params$$:"";if(null!=$ui$$.pages&&null!=$ui$$.currentPage)for(var $i$$=0;$i$$<$ui$$.pages.length;$i$$++)if($ui$$.pages[$i$$]==$ui$$.currentPage){0<$i$$&&($params$$+=(0<$params$$.length?"&":"?")+"page="+$i$$);break}"1"==urlParams.dev&&($params$$+=(0<$params$$.length?"&":"?")+"dev=1&drawdev=1");return $editorGetEditBlankUrl$$.apply(this,arguments)};
var $graphAddClickHandler$$=$graph$jscomp$0$$.addClickHandler;$graph$jscomp$0$$.addClickHandler=function $$graph$jscomp$0$$$addClickHandler$($highlight$$,$beforeClick$$,$onClick$$){var $tmp$$=$beforeClick$$;$beforeClick$$=function $$beforeClick$$$($evt$$,$href$$){if(null==$href$$){var $source$$=mxEvent.getSource($evt$$);"a"==$source$$.nodeName.toLowerCase()&&($href$$=$source$$.getAttribute("href"))}null!=$href$$&&$graph$jscomp$0$$.isCustomLink($href$$)&&(mxEvent.isTouchEvent($evt$$)||!mxEvent.isPopupTrigger($evt$$))&&
$graph$jscomp$0$$.customLinkClicked($href$$)&&mxEvent.consume($evt$$);null!=$tmp$$&&$tmp$$($evt$$,$href$$)};$graphAddClickHandler$$.call(this,$highlight$$,$beforeClick$$,$onClick$$)};$editorUiInit$$.apply(this,arguments);mxClient.IS_SVG&&this.editor.graph.addSvgShadow($graph$jscomp$0$$.view.canvas.ownerSVGElement,null,!0);$ui$$.actions.get("print").funct=function $$ui$$$actions$get$funct$(){$ui$$.showDialog((new PrintDialog($ui$$)).container,360,null!=$ui$$.pages&&1<$ui$$.pages.length?420:360,!0,
!0)};this.defaultFilename=mxResources.get("untitledDiagram");var $graphGetGlobalVariable$$=$graph$jscomp$0$$.getGlobalVariable;$graph$jscomp$0$$.getGlobalVariable=function $$graph$jscomp$0$$$getGlobalVariable$($name$$){return"page"==$name$$&&null!=$ui$$.currentPage?$ui$$.currentPage.getName():"pagenumber"==$name$$?null!=$ui$$.currentPage&&null!=$ui$$.pages?mxUtils.indexOf($ui$$.pages,$ui$$.currentPage)+1:1:$graphGetGlobalVariable$$.apply(this,arguments)};var $graphLabelLinkClicked$$=$graph$jscomp$0$$.labelLinkClicked;
$graph$jscomp$0$$.labelLinkClicked=function $$graph$jscomp$0$$$labelLinkClicked$($state$$,$elt$$,$evt$$){var $href$$=$elt$$.getAttribute("href");if(null==$href$$||!$graph$jscomp$0$$.isCustomLink($href$$)||!mxEvent.isTouchEvent($evt$$)&&mxEvent.isPopupTrigger($evt$$))$graphLabelLinkClicked$$.apply(this,arguments);else{if(!$graph$jscomp$0$$.isEnabled()||null!=$state$$&&$graph$jscomp$0$$.isCellLocked($state$$.cell))$graph$jscomp$0$$.customLinkClicked($href$$),$graph$jscomp$0$$.getRubberband().reset();
mxEvent.consume($evt$$)}};this.editor.getOrCreateFilename=function $this$editor$getOrCreateFilename$(){var $filename$$=$ui$$.defaultFilename,$file$$=$ui$$.getCurrentFile();null!=$file$$&&($filename$$=null!=$file$$.getTitle()?$file$$.getTitle():$filename$$);return $filename$$};var $footer$$=this.actions.get("print");$footer$$.setEnabled(!mxClient.IS_IOS||!navigator.standalone);$footer$$.visible=$footer$$.isEnabled();if(!this.editor.chromeless||this.editor.editable){var $clearInput$$=function $$clearInput$$$(){window.setTimeout(function(){$textInput$$.innerHTML=
"&nbsp;";$textInput$$.focus();document.execCommand("selectAll",!1,null)},0)};this.keyHandler.bindAction(70,!0,"find");this.keyHandler.bindAction(67,!0,"copyStyle",!0);this.keyHandler.bindAction(86,!0,"pasteStyle",!0);this.keyHandler.bindAction(77,!0,"editGeometry",!0);this.keyHandler.bindAction(88,!0,"insertText",!0);this.keyHandler.bindAction(75,!0,"insertRectangle");this.keyHandler.bindAction(75,!0,"insertEllipse",!0);mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||(this.altShiftActions[83]="synchronize");
mxClient.IS_IE||$graph$jscomp$0$$.container.addEventListener("paste",mxUtils.bind(this,function($evt$$){var $graph$$=this.editor.graph;if(!mxEvent.isConsumed($evt$$))try{for(var $data$jscomp$0$$=$evt$$.clipboardData||$evt$$.originalEvent.clipboardData,$containsText$$=!1,$i$jscomp$0$$=0;$i$jscomp$0$$<$data$jscomp$0$$.types.length;$i$jscomp$0$$++)if("text/"===$data$jscomp$0$$.types[$i$jscomp$0$$].substring(0,5)){$containsText$$=!0;break}if(!$containsText$$){var $items$$=$data$jscomp$0$$.items;for(index in $items$$){var $item$$=
$items$$[index];if("file"===$item$$.kind){if($graph$$.isEditing())this.importFiles([$item$$.getAsFile()],0,0,this.maxImageSize,function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$){$graph$$.insertImage($data$$,$w$$,$h$$)},function(){},function($file$$){return"image/"==$file$$.type.substring(0,6)},function($queue$$){for(var $i$$=0;$i$$<$queue$$.length;$i$$++)$queue$$[$i$$]()});else{var $pt$$=this.editor.graph.getInsertPoint();this.importFiles([$item$$.getAsFile()],$pt$$.x,$pt$$.y,this.maxImageSize);mxEvent.consume($evt$$)}break}}}}catch($e$$){}}),
!1);var $textInput$$=document.createElement("div");$textInput$$.style.position="absolute";$textInput$$.style.whiteSpace="nowrap";$textInput$$.style.overflow="hidden";$textInput$$.style.display="block";$textInput$$.contentEditable=!0;mxUtils.setOpacity($textInput$$,0);$textInput$$.style.width="1px";$textInput$$.style.height="1px";$textInput$$.innerHTML="&nbsp;";var $restoreFocus$$=!1;this.keyHandler.bindControlKey(88,null);this.keyHandler.bindControlKey(67,null);this.keyHandler.bindControlKey(86,null);
mxEvent.addListener(document,"keydown",mxUtils.bind(this,function($evt$$){var $source$$=mxEvent.getSource($evt$$);null==$graph$jscomp$0$$.container||!$graph$jscomp$0$$.isEnabled()||$graph$jscomp$0$$.isMouseDown||$graph$jscomp$0$$.isEditing()||null!=this.dialog||"INPUT"==$source$$.nodeName||"TEXTAREA"==$source$$.nodeName||!(224==$evt$$.keyCode||!mxClient.IS_MAC&&17==$evt$$.keyCode||mxClient.IS_MAC&&91==$evt$$.keyCode)||$restoreFocus$$||($textInput$$.style.left=$graph$jscomp$0$$.container.scrollLeft+
10+"px",$textInput$$.style.top=$graph$jscomp$0$$.container.scrollTop+10+"px",$graph$jscomp$0$$.container.appendChild($textInput$$),$restoreFocus$$=!0,mxClient.IS_QUIRKS?window.setTimeout(function(){$textInput$$.focus();document.execCommand("selectAll",!1,null)},0):($textInput$$.focus(),document.execCommand("selectAll",!1,null)))}));mxEvent.addListener(document,"keyup",mxUtils.bind(this,function($evt$$){var $keyCode$$=$evt$$.keyCode;window.setTimeout(mxUtils.bind(this,function(){!$restoreFocus$$||
224!=$keyCode$$&&17!=$keyCode$$&&91!=$keyCode$$||($restoreFocus$$=!1,$graph$jscomp$0$$.isEditing()||null!=this.dialog||null==$graph$jscomp$0$$.container||$graph$jscomp$0$$.container.focus(),$textInput$$.parentNode.removeChild($textInput$$),null==this.dialog&&mxUtils.clearSelection())}),0)}));mxEvent.addListener($textInput$$,"copy",mxUtils.bind(this,function($evt$$){if($graph$jscomp$0$$.isEnabled())try{mxClipboard.copy($graph$jscomp$0$$),this.copyCells($textInput$$),$clearInput$$()}catch($e$$){this.handleError($e$$)}}));
mxEvent.addListener($textInput$$,"cut",mxUtils.bind(this,function($evt$$){if($graph$jscomp$0$$.isEnabled())try{mxClipboard.copy($graph$jscomp$0$$),this.copyCells($textInput$$,!0),$clearInput$$()}catch($e$$){this.handleError($e$$)}}));mxEvent.addListener($textInput$$,"paste",mxUtils.bind(this,function($evt$$){$graph$jscomp$0$$.isEnabled()&&!$graph$jscomp$0$$.isCellLocked($graph$jscomp$0$$.getDefaultParent())&&($textInput$$.innerHTML="&nbsp;",$textInput$$.focus(),window.setTimeout(mxUtils.bind(this,
function(){this.pasteCells($evt$$,$textInput$$);$textInput$$.innerHTML="&nbsp;"}),0))}),!0);var $isSelectionAllowed2$$=this.isSelectionAllowed;this.isSelectionAllowed=function $this$isSelectionAllowed$($evt$$){return mxEvent.getSource($evt$$)==$textInput$$?!0:$isSelectionAllowed2$$.apply(this,arguments)}}this.spinner=this.createSpinner(document.body.clientWidth/2-2,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0)/2,24);Graph.fileSupport&&this.editor.graph.addListener(mxEvent.EDITING_STARTED,
mxUtils.bind(this,function($evt$jscomp$0$$){var $graph$$=this.editor.graph,$textElt$$=$graph$$.cellEditor.text2,$dropElt$$=null;null!=$textElt$$&&(mxEvent.addListener($textElt$$,"dragleave",function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);$evt$$.stopPropagation();$evt$$.preventDefault()}),mxEvent.addListener($textElt$$,"dragover",mxUtils.bind(this,function($evt$$){null==$dropElt$$&&(!mxClient.IS_IE||10<document.documentMode)&&($dropElt$$=this.highlightElement($textElt$$));
$evt$$.stopPropagation();$evt$$.preventDefault()})),mxEvent.addListener($textElt$$,"drop",mxUtils.bind(this,function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);if(0<$evt$$.dataTransfer.files.length)this.importFiles($evt$$.dataTransfer.files,0,0,this.maxImageSize,function($data$$,$mimeType$$,$x$$,$y$$,$w$$,$h$$){$graph$$.insertImage($data$$,$w$$,$h$$)},function(){},function($file$$){return"image/"==$file$$.type.substring(0,6)},function($queue$$){for(var $i$$=
0;$i$$<$queue$$.length;$i$$++)$queue$$[$i$$]()},mxEvent.isControlDown($evt$$));else if(0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/uri-list")){var $uri$$=$evt$$.dataTransfer.getData("text/uri-list");/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test($uri$$)?this.loadImage(decodeURIComponent($uri$$),mxUtils.bind(this,function($h$jscomp$36_img$$){var $w$$=Math.max(1,$h$jscomp$36_img$$.width);$h$jscomp$36_img$$=Math.max(1,$h$jscomp$36_img$$.height);var $maxSize$jscomp$5_s$$=this.maxImageSize,$maxSize$jscomp$5_s$$=
Math.min(1,Math.min($maxSize$jscomp$5_s$$/Math.max(1,$w$$)),$maxSize$jscomp$5_s$$/Math.max(1,$h$jscomp$36_img$$));$graph$$.insertImage(decodeURIComponent($uri$$),$w$$*$maxSize$jscomp$5_s$$,$h$jscomp$36_img$$*$maxSize$jscomp$5_s$$)})):document.execCommand("insertHTML",!1,$evt$$.dataTransfer.getData("text/plain"))}else 0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/html")?document.execCommand("insertHTML",!1,$evt$$.dataTransfer.getData("text/html")):0<=mxUtils.indexOf($evt$$.dataTransfer.types,
"text/plain")&&document.execCommand("insertHTML",!1,$evt$$.dataTransfer.getData("text/plain"));$evt$$.stopPropagation();$evt$$.preventDefault()})))}));if("1"==urlParams.ruler&&"undefined"!==typeof mxRuler){$footer$$=document.createElement("div");$footer$$.style.position="absolute";$footer$$.style.top="95px";$footer$$.style.left="250px";$footer$$.style.width="2000px";$footer$$.style.height="30px";$footer$$.style.background="whiteSmoke";document.body.appendChild($footer$$);var $vRulerDiv$$=document.createElement("div");
$vRulerDiv$$.style.position="absolute";$vRulerDiv$$.style.top="125px";$vRulerDiv$$.style.left="220px";$vRulerDiv$$.style.width="30px";$vRulerDiv$$.style.height="1000px";$vRulerDiv$$.style.background="whiteSmoke";document.body.appendChild($vRulerDiv$$);var $square$$=document.createElement("div");$square$$.style.position="absolute";$square$$.style.top="95px";$square$$.style.left="220px";$square$$.style.width="30px";$square$$.style.height="30px";$square$$.style.background="whiteSmoke";document.body.appendChild($square$$);
this.vRuler=new mxRuler(this.editor.graph,$vRulerDiv$$,!0);this.hRuler=new mxRuler(this.editor.graph,$footer$$,!1)}if("1"==urlParams.styledev){$footer$$=document.getElementById("geFooter");null!=$footer$$&&(this.styleInput=document.createElement("input"),this.styleInput.setAttribute("type","text"),this.styleInput.style.position="absolute",this.styleInput.style.top="14px",this.styleInput.style.left="2px",this.styleInput.style.width="98%",this.styleInput.style.visibility="hidden",this.styleInput.style.opacity=
"0.9",mxEvent.addListener(this.styleInput,"change",mxUtils.bind(this,function(){this.editor.graph.getModel().setStyle(this.editor.graph.getSelectionCell(),this.styleInput.value)})),$footer$$.appendChild(this.styleInput),this.editor.graph.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function($sender$$,$evt$$){if(0<this.editor.graph.getSelectionCount()){var $cell$jscomp$15_style$$=this.editor.graph.getSelectionCell(),$cell$jscomp$15_style$$=this.editor.graph.getModel().getStyle($cell$jscomp$15_style$$);
this.styleInput.value=$cell$jscomp$15_style$$||"";this.styleInput.style.visibility="visible"}else this.styleInput.style.visibility="hidden"})));var $isSelectionAllowed$$=this.isSelectionAllowed;this.isSelectionAllowed=function $this$isSelectionAllowed$($evt$$){return mxEvent.getSource($evt$$)==this.styleInput?!0:$isSelectionAllowed$$.apply(this,arguments)}}$footer$$=document.getElementById("geInfo");null!=$footer$$&&$footer$$.parentNode.removeChild($footer$$);if(Graph.fileSupport&&(!this.editor.chromeless||
this.editor.editable)){var $dropElt$jscomp$0$$=null;mxEvent.addListener($graph$jscomp$0$$.container,"dragleave",function($evt$$){$graph$jscomp$0$$.isEnabled()&&(null!=$dropElt$jscomp$0$$&&($dropElt$jscomp$0$$.parentNode.removeChild($dropElt$jscomp$0$$),$dropElt$jscomp$0$$=null),$evt$$.stopPropagation(),$evt$$.preventDefault())});mxEvent.addListener($graph$jscomp$0$$.container,"dragover",mxUtils.bind(this,function($evt$$){null==$dropElt$jscomp$0$$&&(!mxClient.IS_IE||10<document.documentMode)&&($dropElt$jscomp$0$$=
this.highlightElement($graph$jscomp$0$$.container));null!=this.sidebar&&this.sidebar.hideTooltip();$evt$$.stopPropagation();$evt$$.preventDefault()}));mxEvent.addListener($graph$jscomp$0$$.container,"drop",mxUtils.bind(this,function($evt$$){null!=$dropElt$jscomp$0$$&&($dropElt$jscomp$0$$.parentNode.removeChild($dropElt$jscomp$0$$),$dropElt$jscomp$0$$=null);if($graph$jscomp$0$$.isEnabled()){var $a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$=mxUtils.convertPoint($graph$jscomp$0$$.container,mxEvent.getClientX($evt$$),
mxEvent.getClientY($evt$$)),$imgs$$=$graph$jscomp$0$$.view.translate,$scale$$=$graph$jscomp$0$$.view.scale,$x$$=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$.x/$scale$$-$imgs$$.x,$y$$=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$.y/$scale$$-$imgs$$.y;mxEvent.isAltDown($evt$$)&&($y$$=$x$$=0);if(0<$evt$$.dataTransfer.files.length)this.importFiles($evt$$.dataTransfer.files,$x$$,$y$$,this.maxImageSize,null,null,null,null,mxEvent.isControlDown($evt$$),null,null,mxEvent.isShiftDown($evt$$));else{var $uri$$=
0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/uri-list")?$evt$$.dataTransfer.getData("text/uri-list"):null,$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$=this.extractGraphModelFromEvent($evt$$,null!=this.pages);if(null!=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$)$graph$jscomp$0$$.setSelectionCells(this.importXml($a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$,$x$$,$y$$,!0));else if(0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/html")){var $html$$=$evt$$.dataTransfer.getData("text/html"),
$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$=document.createElement("div");$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$.innerHTML=$html$$;var $asImage$$=null,$imgs$$=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$.getElementsByTagName("img");null!=$imgs$$&&1==$imgs$$.length?($html$$=$imgs$$[0].getAttribute("src"),/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test($html$$)||($asImage$$=!0)):($a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$.getElementsByTagName("a"),
null!=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$&&1==$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$.length&&($html$$=$a$jscomp$2_data$jscomp$130_div$jscomp$47_pt$$[0].getAttribute("href")));var $resizeImages$$=!0,$doInsert$$=mxUtils.bind(this,function(){$graph$jscomp$0$$.setSelectionCells(this.insertTextAt($html$$,$x$$,$y$$,!0,$asImage$$,null,$resizeImages$$))});$asImage$$&&$html$$.length>this.resampleThreshold?this.confirmImageResize(function($doResize$$){$resizeImages$$=$doResize$$;$doInsert$$()},
mxEvent.isControlDown($evt$$)):$doInsert$$()}else null!=$uri$$&&/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test($uri$$)?this.loadImage(decodeURIComponent($uri$$),mxUtils.bind(this,function($h$jscomp$37_img$$){var $w$$=Math.max(1,$h$jscomp$37_img$$.width);$h$jscomp$37_img$$=Math.max(1,$h$jscomp$37_img$$.height);var $maxSize$jscomp$6_s$$=this.maxImageSize,$maxSize$jscomp$6_s$$=Math.min(1,Math.min($maxSize$jscomp$6_s$$/Math.max(1,$w$$)),$maxSize$jscomp$6_s$$/Math.max(1,$h$jscomp$37_img$$));$graph$jscomp$0$$.setSelectionCell($graph$jscomp$0$$.insertVertex(null,
null,"",$x$$,$y$$,$w$$*$maxSize$jscomp$6_s$$,$h$jscomp$37_img$$*$maxSize$jscomp$6_s$$,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+$uri$$+";"))}),mxUtils.bind(this,function($img$$){$graph$jscomp$0$$.setSelectionCells(this.insertTextAt($uri$$,$x$$,$y$$,!0))})):0<=mxUtils.indexOf($evt$$.dataTransfer.types,"text/plain")&&$graph$jscomp$0$$.setSelectionCells(this.insertTextAt($evt$$.dataTransfer.getData("text/plain"),$x$$,$y$$,
!0))}}$evt$$.stopPropagation();$evt$$.preventDefault()}),!1)}this.initPages();this.editUpdateListener=mxUtils.bind(this,function($sender$$,$evt$$){var $edit$$=$evt$$.getProperty("edit");null!=$edit$$&&this.updateEditReferences($edit$$)});this.editor.undoManager.addListener(mxEvent.BEFORE_UNDO,this.editUpdateListener);this.editor.undoManager.addListener(mxEvent.BEFORE_REDO,this.editUpdateListener);"1"==urlParams.embed&&this.initializeEmbedMode();this.installSettings()};EditorUi.prototype.getLinkTitle=
function $EditorUi$$getLinkTitle$($href$$){var $page$jscomp$9_title$$=Graph.prototype.getLinkTitle.apply(this,arguments);if("data:page/id,"==$href$$.substring(0,13)){var $comma$$=$href$$.indexOf(",");0<$comma$$&&($page$jscomp$9_title$$=this.getPageById($href$$.substring($comma$$+1)),$page$jscomp$9_title$$=null!=$page$jscomp$9_title$$?$page$jscomp$9_title$$.getName():mxResources.get("pageNotFound"))}else"data:"==$href$$.substring(0,5)&&($page$jscomp$9_title$$=mxResources.get("action"));return $page$jscomp$9_title$$};
EditorUi.prototype.handleCustomLink=function $EditorUi$$handleCustomLink$($href$jscomp$7_page$$){if("data:page/id,"==$href$jscomp$7_page$$.substring(0,13)){var $comma$$=$href$jscomp$7_page$$.indexOf(",");if($href$jscomp$7_page$$=this.getPageById($href$jscomp$7_page$$.substring($comma$$+1)))this.selectPage($href$jscomp$7_page$$);else throw Error(mxResources.get("pageNotFound")||"Page not found");}else this.editor.graph.handleCustomLink($href$jscomp$7_page$$)};EditorUi.prototype.isSettingsEnabled=function $EditorUi$$isSettingsEnabled$(){return"undefined"!==
typeof window.mxSettings&&(isLocalStorage||mxClient.IS_CHROMEAPP)};EditorUi.prototype.installSettings=function $EditorUi$$installSettings$(){if(this.isSettingsEnabled()){ColorDialog.recentColors=mxSettings.getRecentColors();this.fireEvent(new mxEventObject("styleChanged","keys",[],"values",[],"cells",[]));this.editor.graph.connectionHandler.setCreateTarget(mxSettings.isCreateTarget());this.fireEvent(new mxEventObject("copyConnectChanged"));this.addListener("copyConnectChanged",mxUtils.bind(this,function($sender$$,
$evt$$){mxSettings.setCreateTarget(this.editor.graph.connectionHandler.isCreateTarget());mxSettings.save()}));this.editor.graph.pageFormat=mxSettings.getPageFormat();this.addListener("pageFormatChanged",mxUtils.bind(this,function($sender$$,$evt$$){mxSettings.setPageFormat(this.editor.graph.pageFormat);mxSettings.save()}));this.editor.graph.view.gridColor=mxSettings.getGridColor();this.addListener("gridColorChanged",mxUtils.bind(this,function($sender$$,$evt$$){mxSettings.setGridColor(this.editor.graph.view.gridColor);
mxSettings.save()}));if(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)this.editor.addListener("autosaveChanged",mxUtils.bind(this,function($sender$$,$evt$$){mxSettings.setAutosave(this.editor.autosave);mxSettings.save()})),this.editor.autosave=mxSettings.getAutosave();null!=this.sidebar&&this.sidebar.showPalette("search",mxSettings.settings.search);this.editor.chromeless&&!this.editor.editable||null==this.sidebar||!(mxSettings.settings.isNew||8>=parseInt(mxSettings.settings.version||0))||(this.toggleScratchpad(),
mxSettings.save());this.addListener("formatWidthChanged",function(){mxSettings.setFormatWidth(this.formatWidth);mxSettings.save()})}};EditorUi.prototype.copyCells=function $EditorUi$$copyCells$($elt$$,$removeCells$$){var $graph$$=this.editor.graph;if($graph$$.isSelectionEmpty())$elt$$.innerHTML="";else{var $cells$$=mxUtils.sortCells($graph$$.model.getTopmostCells($graph$$.getSelectionCells())),$xml$$=mxUtils.getXml(this.editor.graph.encodeCells($cells$$));mxUtils.setTextContent($elt$$,encodeURIComponent($xml$$));
$removeCells$$?($graph$$.removeCells($cells$$,!1),$graph$$.lastPasteXml=null):($graph$$.lastPasteXml=$xml$$,$graph$$.pasteCounter=0);$elt$$.focus();document.execCommand("selectAll",!1,null)}};EditorUi.prototype.pasteCells=function $EditorUi$$pasteCells$($evt$$,$elt$$){if(!mxEvent.isConsumed($evt$$)){var $dx$$=$elt$$.getElementsByTagName("span");if(null!=$dx$$&&0<$dx$$.length&&"application/vnd.lucid.chart.objects"===$dx$$[0].getAttribute("data-lucid-type")){var $content$jscomp$7_graph$$=$dx$$[0].getAttribute("data-lucid-content");
null!=$content$jscomp$7_graph$$&&0<$content$jscomp$7_graph$$.length&&(this.convertLucidChart($content$jscomp$7_graph$$,mxUtils.bind(this,function($xml$$){var $graph$$=this.editor.graph;$graph$$.setSelectionCells(this.importXml($xml$$,0,0));$graph$$.scrollCellToVisible($graph$$.getSelectionCell())}),mxUtils.bind(this,function($e$$){this.handleError($e$$)})),mxEvent.consume($evt$$))}else{var $content$jscomp$7_graph$$=this.editor.graph,$xml$jscomp$0$$=mxUtils.trim(mxClient.IS_QUIRKS||8==document.documentMode?
mxUtils.getTextContent($elt$$):$elt$$.textContent),$compat_pt$$=!1;try{var $idx$$=$xml$jscomp$0$$.lastIndexOf("%3E");0<=$idx$$&&$idx$$<$xml$jscomp$0$$.length-3&&($xml$jscomp$0$$=$xml$jscomp$0$$.substring(0,$idx$$+3))}catch($e$$){}try{var $dx$$=$elt$$.getElementsByTagName("span"),$tmp$$=null!=$dx$$&&0<$dx$$.length?mxUtils.trim(decodeURIComponent($dx$$[0].textContent)):decodeURIComponent($xml$jscomp$0$$);this.isCompatibleString($tmp$$)&&($compat_pt$$=!0,$xml$jscomp$0$$=$tmp$$)}catch($e$25$$){}$content$jscomp$7_graph$$.lastPasteXml==
$xml$jscomp$0$$?$content$jscomp$7_graph$$.pasteCounter++:($content$jscomp$7_graph$$.lastPasteXml=$xml$jscomp$0$$,$content$jscomp$7_graph$$.pasteCounter=0);$dx$$=$content$jscomp$7_graph$$.pasteCounter*$content$jscomp$7_graph$$.gridSize;if(null!=$xml$jscomp$0$$&&0<$xml$jscomp$0$$.length&&($compat_pt$$||this.isCompatibleString($xml$jscomp$0$$)?$content$jscomp$7_graph$$.setSelectionCells(this.importXml($xml$jscomp$0$$,$dx$$,$dx$$)):($compat_pt$$=$content$jscomp$7_graph$$.getInsertPoint(),$content$jscomp$7_graph$$.isMouseInsertPoint()&&
($dx$$=0,$content$jscomp$7_graph$$.lastPasteXml==$xml$jscomp$0$$&&0<$content$jscomp$7_graph$$.pasteCounter&&$content$jscomp$7_graph$$.pasteCounter--),$content$jscomp$7_graph$$.setSelectionCells(this.insertTextAt($xml$jscomp$0$$,$compat_pt$$.x+$dx$$,$compat_pt$$.y+$dx$$,!0))),!$content$jscomp$7_graph$$.isSelectionEmpty())){$content$jscomp$7_graph$$.scrollCellToVisible($content$jscomp$7_graph$$.getSelectionCell());null!=this.hoverIcons&&this.hoverIcons.update($content$jscomp$7_graph$$.view.getState($content$jscomp$7_graph$$.getSelectionCell()));
try{mxEvent.consume($evt$$)}catch($e$26$$){}}}}};EditorUi.prototype.addFileDropHandler=function $EditorUi$$addFileDropHandler$($elts$$){if(Graph.fileSupport)for(var $dropElt$$=null,$i$$=0;$i$$<$elts$$.length;$i$$++)mxEvent.addListener($elts$$[$i$$],"dragleave",function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);$evt$$.stopPropagation();$evt$$.preventDefault()}),mxEvent.addListener($elts$$[$i$$],"dragover",mxUtils.bind(this,function($evt$$){(this.editor.graph.isEnabled()||
"1"!=urlParams.embed)&&null==$dropElt$$&&(!mxClient.IS_IE||10<document.documentMode&&12>document.documentMode)&&($dropElt$$=this.highlightElement());$evt$$.stopPropagation();$evt$$.preventDefault()})),mxEvent.addListener($elts$$[$i$$],"drop",mxUtils.bind(this,function($evt$$){null!=$dropElt$$&&($dropElt$$.parentNode.removeChild($dropElt$$),$dropElt$$=null);if(this.editor.graph.isEnabled()||"1"!=urlParams.embed)if(0<$evt$$.dataTransfer.files.length)this.hideDialog(),"1"==urlParams.embed?this.importFiles($evt$$.dataTransfer.files,
0,0,this.maxImageSize,null,null,null,null,!mxEvent.isControlDown($evt$$)&&!mxEvent.isShiftDown($evt$$)):this.openFiles($evt$$.dataTransfer.files,!0);else{var $data$jscomp$131_xml$$=this.extractGraphModelFromEvent($evt$$);if(null==$data$jscomp$131_xml$$){var $div$jscomp$48_imgs$$=null!=$evt$$.dataTransfer?$evt$$.dataTransfer:$evt$$.clipboardData;null!=$div$jscomp$48_imgs$$&&(10==document.documentMode||11==document.documentMode?$data$jscomp$131_xml$$=$div$jscomp$48_imgs$$.getData("Text"):($data$jscomp$131_xml$$=
null,$data$jscomp$131_xml$$=0<=mxUtils.indexOf($div$jscomp$48_imgs$$.types,"text/uri-list")?$evt$$.dataTransfer.getData("text/uri-list"):0<=mxUtils.indexOf($div$jscomp$48_imgs$$.types,"text/html")?$div$jscomp$48_imgs$$.getData("text/html"):null,null!=$data$jscomp$131_xml$$&&0<$data$jscomp$131_xml$$.length?($div$jscomp$48_imgs$$=document.createElement("div"),$div$jscomp$48_imgs$$.innerHTML=$data$jscomp$131_xml$$,$div$jscomp$48_imgs$$=$div$jscomp$48_imgs$$.getElementsByTagName("img"),0<$div$jscomp$48_imgs$$.length&&
($data$jscomp$131_xml$$=$div$jscomp$48_imgs$$[0].getAttribute("src"))):0<=mxUtils.indexOf($div$jscomp$48_imgs$$.types,"text/plain")&&($data$jscomp$131_xml$$=$div$jscomp$48_imgs$$.getData("text/plain"))),null!=$data$jscomp$131_xml$$&&("data:image/png;base64,"==$data$jscomp$131_xml$$.substring(0,22)?($data$jscomp$131_xml$$=this.extractGraphModelFromPng($data$jscomp$131_xml$$),null!=$data$jscomp$131_xml$$&&0<$data$jscomp$131_xml$$.length&&this.openLocalFile($data$jscomp$131_xml$$,null,!0)):!this.isOffline()&&
this.isRemoteFileFormat($data$jscomp$131_xml$$)?(new mxXmlRequest(OPEN_URL,"format=xml&data="+encodeURIComponent($data$jscomp$131_xml$$))).send(mxUtils.bind(this,function($req$$){200<=$req$$.getStatus()&&299>=$req$$.getStatus()&&this.openLocalFile($req$$.getText(),null,!0)})):/^https?:\/\//.test($data$jscomp$131_xml$$)&&(null==this.getCurrentFile()?window.location.hash="#U"+encodeURIComponent($data$jscomp$131_xml$$):window.openWindow((mxClient.IS_CHROMEAPP?EditorUi.drawHost+"/":"https://"+location.host+
"/")+window.location.search+"#U"+encodeURIComponent($data$jscomp$131_xml$$)))))}else this.openLocalFile($data$jscomp$131_xml$$,null,!0)}$evt$$.stopPropagation();$evt$$.preventDefault()}))};EditorUi.prototype.highlightElement=function $EditorUi$$highlightElement$($elt$$){var $x$$=0,$y$$=0,$w$$,$b$jscomp$2_h$$;if(null==$elt$$){$b$jscomp$2_h$$=document.body;var $d$jscomp$7_hl$$=document.documentElement;$w$$=($b$jscomp$2_h$$.clientWidth||$d$jscomp$7_hl$$.clientWidth)-3;$b$jscomp$2_h$$=Math.max($b$jscomp$2_h$$.clientHeight||
0,$d$jscomp$7_hl$$.clientHeight)-3}else $x$$=$elt$$.offsetTop,$y$$=$elt$$.offsetLeft,$w$$=$elt$$.clientWidth,$b$jscomp$2_h$$=$elt$$.clientHeight;$d$jscomp$7_hl$$=document.createElement("div");$d$jscomp$7_hl$$.style.zIndex=mxPopupMenu.prototype.zIndex+2;$d$jscomp$7_hl$$.style.border="3px dotted rgb(254, 137, 12)";$d$jscomp$7_hl$$.style.pointerEvents="none";$d$jscomp$7_hl$$.style.position="absolute";$d$jscomp$7_hl$$.style.top=$x$$+"px";$d$jscomp$7_hl$$.style.left=$y$$+"px";$d$jscomp$7_hl$$.style.width=
Math.max(0,$w$$-3)+"px";$d$jscomp$7_hl$$.style.height=Math.max(0,$b$jscomp$2_h$$-3)+"px";null!=$elt$$&&$elt$$.parentNode==this.editor.graph.container?this.editor.graph.container.appendChild($d$jscomp$7_hl$$):document.body.appendChild($d$jscomp$7_hl$$);return $d$jscomp$7_hl$$};EditorUi.prototype.stringToCells=function $EditorUi$$stringToCells$($cells$jscomp$28_doc$jscomp$16_xml$$){$cells$jscomp$28_doc$jscomp$16_xml$$=mxUtils.parseXml($cells$jscomp$28_doc$jscomp$16_xml$$);var $node$jscomp$27_parent$$=
this.editor.extractGraphModel($cells$jscomp$28_doc$jscomp$16_xml$$.documentElement);$cells$jscomp$28_doc$jscomp$16_xml$$=[];if(null!=$node$jscomp$27_parent$$){var $codec$jscomp$4_j$$=new mxCodec($node$jscomp$27_parent$$.ownerDocument),$model$$=new mxGraphModel;$codec$jscomp$4_j$$.decode($node$jscomp$27_parent$$,$model$$);$node$jscomp$27_parent$$=$model$$.getChildAt($model$$.getRoot(),0);for($codec$jscomp$4_j$$=0;$codec$jscomp$4_j$$<$model$$.getChildCount($node$jscomp$27_parent$$);$codec$jscomp$4_j$$++)$cells$jscomp$28_doc$jscomp$16_xml$$.push($model$$.getChildAt($node$jscomp$27_parent$$,
$codec$jscomp$4_j$$))}return $cells$jscomp$28_doc$jscomp$16_xml$$};EditorUi.prototype.openFiles=function $EditorUi$$openFiles$($files$$,$temp$$){if(this.spinner.spin(document.body,mxResources.get("loading")))for(var $i$$=0;$i$$<$files$$.length;$i$$++)mxUtils.bind(this,function($file$$){var $reader$$=new FileReader;$reader$$.onload=mxUtils.bind(this,function($e$jscomp$0$$){try{var $data$$=$e$jscomp$0$$.target.result,$name$$=$file$$.name;if(null!=$name$$&&0<$name$$.length){!this.useCanvasForExport&&
/(\.png)$/i.test($name$$)&&($name$$=$name$$.substring(0,$name$$.length-4)+".drawio");var $handleResult$$=mxUtils.bind(this,function($xml$$){$name$$=0<=$name$$.lastIndexOf(".")?$name$$.substring(0,$name$$.lastIndexOf("."))+".drawio":$name$$+".drawio";if("<mxlibrary"==$xml$$.substring(0,10)){null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.openLocalFile(this.emptyDiagramXml,this.defaultFilename,$temp$$);try{this.loadLibrary(new LocalLibrary(this,$xml$$,$name$$))}catch($e$27$$){this.handleError($e$27$$,
mxResources.get("errorLoadingFile"))}}else this.openLocalFile($xml$$,$name$$,$temp$$)});if(/(\.v(dx|sdx?))($|\?)/i.test($name$$)||/(\.vs(x|sx?))($|\?)/i.test($name$$))this.importVisio($file$$,mxUtils.bind(this,function($xml$$){this.spinner.stop();$handleResult$$($xml$$)}));else if(/(\.*<graphml )/.test($data$$))this.importGraphML($data$$,mxUtils.bind(this,function($xml$$){this.spinner.stop();$handleResult$$($xml$$)}));else if(Graph.fileSupport&&!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat($data$$,
$name$$))this.parseFile($file$$,mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&(this.spinner.stop(),200<=$xhr$$.status&&299>=$xhr$$.status?$handleResult$$($xhr$$.responseText):this.handleError({message:mxResources.get(413==$xhr$$.status?"drawingTooLarge":"invalidOrMissingFile")},mxResources.get("errorLoadingFile")))}));else if(this.isLucidChartData($data$$))/(\.json)$/i.test($name$$)&&($name$$=$name$$.substring(0,$name$$.length-5)+".drawio"),this.convertLucidChart($data$$,mxUtils.bind(this,
function($xml$$){this.spinner.stop();this.openLocalFile($xml$$,$name$$,$temp$$)}),mxUtils.bind(this,function($e$$){this.spinner.stop();this.handleError($e$$)}));else if("<mxlibrary"==$e$jscomp$0$$.target.result.substring(0,10)){this.spinner.stop();null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.openLocalFile(this.emptyDiagramXml,this.defaultFilename,$temp$$);try{this.loadLibrary(new LocalLibrary(this,$e$jscomp$0$$.target.result,$file$$.name))}catch($e$28$$){this.handleError($e$28$$,mxResources.get("errorLoadingFile"))}}else"image/png"==
$file$$.type.substring(0,9)&&($data$$=this.extractGraphModelFromPng($data$$)),this.spinner.stop(),this.openLocalFile($data$$,$name$$,$temp$$)}}catch($e$29$$){this.handleError($e$29$$)}});$reader$$.onerror=mxUtils.bind(this,function($e$$){this.spinner.stop();this.handleError($e$$);window.openFile=null});"image"===$file$$.type.substring(0,5)&&"image/svg"!==$file$$.type.substring(0,9)?$reader$$.readAsDataURL($file$$):$reader$$.readAsText($file$$)})($files$$[$i$$])};EditorUi.prototype.openLocalFile=function $EditorUi$$openLocalFile$($data$$,
$name$$,$temp$$){var $currentFile$$=this.getCurrentFile(),$fn$$=mxUtils.bind(this,function(){window.openFile=null;if(null==$name$$&&null!=this.getCurrentFile()&&this.isDiagramEmpty()){var $doc$$=mxUtils.parseXml($data$$);null!=$doc$$&&(this.editor.setGraphXml($doc$$.documentElement),this.editor.graph.selectAll())}else this.fileLoaded(new LocalFile(this,$data$$,$name$$||this.defaultFilename,$temp$$))});if(null!=$data$$&&0<$data$$.length)null==$currentFile$$||!$currentFile$$.isModified()&&(mxClient.IS_CHROMEAPP||
EditorUi.isElectronApp)?$fn$$():(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)&&null!=$currentFile$$&&$currentFile$$.isModified()?this.confirm(mxResources.get("allChangesLost"),null,$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):(window.openFile=new OpenFile(function(){window.openFile=null}),window.openFile.setData($data$$,$name$$),window.openWindow(this.getUrl(),null,mxUtils.bind(this,function(){null!=$currentFile$$&&$currentFile$$.isModified()?this.confirm(mxResources.get("allChangesLost"),
null,$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$fn$$()})));else throw Error(mxResources.get("notADiagramFile"));};EditorUi.prototype.getBasenames=function $EditorUi$$getBasenames$(){var $basenames$$={};if(null!=this.pages)for(var $i$jscomp$92_result$$=0;$i$jscomp$92_result$$<this.pages.length;$i$jscomp$92_result$$++)this.updatePageRoot(this.pages[$i$jscomp$92_result$$]),this.addBasenamesForCell(this.pages[$i$jscomp$92_result$$].root,$basenames$$);else this.addBasenamesForCell(this.editor.graph.model.getRoot(),
$basenames$$);var $i$jscomp$92_result$$=[],$key$$;for($key$$ in $basenames$$)$i$jscomp$92_result$$.push($key$$);return $i$jscomp$92_result$$};EditorUi.prototype.addBasenamesForCell=function $EditorUi$$addBasenamesForCell$($cell$$,$basenames$$){function $addName$$($name$$){if(null!=$name$$){var $dot$$=$name$$.lastIndexOf(".");0<$dot$$&&($name$$=$name$$.substring($dot$$+1,$name$$.length));null==$basenames$$[$name$$]&&($basenames$$[$name$$]=!0)}}var $graph$$=this.editor.graph,$childCount$jscomp$1_style$$=
$graph$$.getCellStyle($cell$$);$addName$$(mxStencilRegistry.getBasenameForStencil($childCount$jscomp$1_style$$[mxConstants.STYLE_SHAPE]));$graph$$.model.isEdge($cell$$)&&($addName$$(mxMarker.getPackageForType($childCount$jscomp$1_style$$[mxConstants.STYLE_STARTARROW])),$addName$$(mxMarker.getPackageForType($childCount$jscomp$1_style$$[mxConstants.STYLE_ENDARROW])));for(var $childCount$jscomp$1_style$$=$graph$$.model.getChildCount($cell$$),$i$$=0;$i$$<$childCount$jscomp$1_style$$;$i$$++)this.addBasenamesForCell($graph$$.model.getChildAt($cell$$,
$i$$),$basenames$$)};EditorUi.prototype.setGraphEnabled=function $EditorUi$$setGraphEnabled$($enabled$$){this.diagramContainer.style.visibility=$enabled$$?"":"hidden";this.formatContainer.style.visibility=$enabled$$?"":"hidden";this.sidebarFooterContainer.style.display=$enabled$$?"":"none";this.sidebarContainer.style.display=$enabled$$?"":"none";this.hsplit.style.display=$enabled$$?"":"none";this.editor.graph.setEnabled($enabled$$);null!=this.tabContainer&&(this.tabContainer.style.visibility=$enabled$$?
"":"hidden");$enabled$$||(null!=this.actions.outlineWindow&&this.actions.outlineWindow.window.setVisible(!1),null!=this.actions.layersWindow&&this.actions.layersWindow.window.setVisible(!1),null!=this.menus.tagsWindow&&this.menus.tagsWindow.window.setVisible(!1),null!=this.menus.findWindow&&this.menus.findWindow.window.setVisible(!1))};EditorUi.prototype.initializeEmbedMode=function $EditorUi$$initializeEmbedMode$(){this.setGraphEnabled(!1);(window.opener||window.parent)!=window&&("1"!=urlParams.spin||
this.spinner.spin(document.body,mxResources.get("loading")))&&this.installMessageHandler(mxUtils.bind(this,function($xml$$,$evt$$,$modified$$){this.spinner.stop();this.addEmbedButtons();this.setGraphEnabled(!0);null!=$xml$$&&0<$xml$$.length?(this.setFileData($xml$$),this.editor.isChromelessView()?this.editor.graph.isLightboxView()&&this.lightboxFit():this.showLayersDialog(),this.chromelessResize&&this.chromelessResize()):(this.editor.graph.model.clear(),this.editor.fireEvent(new mxEventObject("resetGraphView")));
this.editor.undoManager.clear();this.editor.modified=null!=$modified$$?$modified$$:!1;this.updateUi();window.self!==window.top&&window.focus();null!=this.format&&this.format.refresh()}))};EditorUi.prototype.showLayersDialog=function $EditorUi$$showLayersDialog$(){1<this.editor.graph.getModel().getChildCount(this.editor.graph.getModel().getRoot())&&(null==this.actions.layersWindow?this.actions.get("layers").funct():this.actions.layersWindow.window.setVisible(!0))};EditorUi.prototype.getPublicUrl=function $EditorUi$$getPublicUrl$($file$$,
$fn$$){null!=$file$$?$file$$.getPublicUrl($fn$$):$fn$$(null)};EditorUi.prototype.createLoadMessage=function $EditorUi$$createLoadMessage$($eventName$$){var $graph$$=this.editor.graph;return{event:$eventName$$,pageVisible:$graph$$.pageVisible,translate:$graph$$.view.translate,bounds:$graph$$.getGraphBounds(),currentPage:this.getSelectedPageIndex(),scale:$graph$$.view.scale,page:$graph$$.view.getBackgroundPageBounds()}};EditorUi.prototype.installMessageHandler=function $EditorUi$$installMessageHandler$($fn$$){var $lastData$$=
null,$autosave$$=!1,$ignoreChange$$=!1,$changeListener$$=null,$msg$jscomp$0$$=mxUtils.bind(this,function($sender$$,$eventObject$$){this.editor.modified&&"0"!==urlParams.modified?urlParams.modified&&this.editor.setStatus(mxUtils.htmlEntities(mxResources.get(urlParams.modified))):this.editor.setStatus("")});this.editor.graph.model.addListener(mxEvent.CHANGE,$msg$jscomp$0$$);mxEvent.addListener(window,"message",mxUtils.bind(this,function($evt$jscomp$0$$){if($evt$jscomp$0$$.source===(window.opener||window.parent)){var $data$jscomp$1$$=
$evt$jscomp$0$$.data,$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=mxUtils.bind(this,function($data$$){if($data$$&&"function"===typeof $data$$.charAt&&"<"!==$data$$.charAt(0))try{"data:image/png;base64,"===$data$$.substring(0,22)?$data$$=this.extractGraphModelFromPng($data$$):"data:image/svg+xml;base64,"===$data$$.substring(0,26)?$data$$=atob($data$$.substring(26)):"data:image/svg+xml;utf8,"===$data$$.substring(0,
24)&&($data$$=$data$$.substring(24)),$data$$&&("%"===$data$$.charAt(0)?$data$$=decodeURIComponent($data$$):"<"!==$data$$.charAt(0)&&($data$$=Graph.decompress($data$$)))}catch($e$$){}return $data$$});if("json"===urlParams.proto){try{$data$jscomp$1$$=JSON.parse($data$jscomp$1$$)}catch($e$$){$data$jscomp$1$$=null}if(!$data$jscomp$1$$)return;switch($data$jscomp$1$$.action){case "dialog":this.showError($data$jscomp$1$$.titleKey?mxResources.get($data$jscomp$1$$.titleKey):$data$jscomp$1$$.title,$data$jscomp$1$$.messageKey?
mxResources.get($data$jscomp$1$$.messageKey):$data$jscomp$1$$.message,$data$jscomp$1$$.buttonKey?mxResources.get($data$jscomp$1$$.buttonKey):$data$jscomp$1$$.button);null!=$data$jscomp$1$$.modified&&(this.editor.modified=$data$jscomp$1$$.modified);return;case "prompt":this.spinner.stop();$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=new FilenameDialog(this,$data$jscomp$1$$.defaultValue||"",$data$jscomp$1$$.okKey?
mxResources.get($data$jscomp$1$$.okKey):null,function($value$$){$value$$&&$parent$$.postMessage(JSON.stringify({event:"prompt",value:$value$$,message:$data$jscomp$1$$}),"*")},$data$jscomp$1$$.titleKey?mxResources.get($data$jscomp$1$$.titleKey):$data$jscomp$1$$.title);this.showDialog($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$.container,300,80,!0,!1);$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$.init();
return;case "draft":$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$($data$jscomp$1$$.xml);this.spinner.stop();$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=
new DraftDialog(this,mxResources.get("draftFound",[$data$jscomp$1$$.name||this.defaultFilename]),$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$,mxUtils.bind(this,function(){this.hideDialog();$parent$$.postMessage(JSON.stringify({event:"draft",result:"edit",message:$data$jscomp$1$$}),"*")}),mxUtils.bind(this,function(){this.hideDialog();$parent$$.postMessage(JSON.stringify({event:"draft",result:"discard",
message:$data$jscomp$1$$}),"*")}),$data$jscomp$1$$.editKey?mxResources.get($data$jscomp$1$$.editKey):null,$data$jscomp$1$$.discardKey?mxResources.get($data$jscomp$1$$.discardKey):null,$data$jscomp$1$$.ignore?mxUtils.bind(this,function(){this.hideDialog();$parent$$.postMessage(JSON.stringify({event:"draft",result:"ignore",message:$data$jscomp$1$$}),"*")}):null);this.showDialog($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$.container,
640,480,!0,!1,mxUtils.bind(this,function($cancel$$){$cancel$$&&this.actions.get("exit").funct()}));try{$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$.init()}catch($e$31$$){$parent$$.postMessage(JSON.stringify({event:"draft",error:$e$31$$.toString(),message:$data$jscomp$1$$}),"*")}return;case "template":this.spinner.stop();var $allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=
1===$data$jscomp$1$$.enableRecent,$enableSearchDocs_tmp$36$$=1===$data$jscomp$1$$.enableSearch,$enableCustomTemp$$=1===$data$jscomp$1$$.enableCustomTemp,$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=new NewDialog(this,{compact:!1,showName:!App.CSET&&!!$data$jscomp$1$$.callback,hideFromTemplateUrl:App.CSET,callback:mxUtils.bind(this,function($xml$$,$name$$){$xml$$=$xml$$||this.emptyDiagramXml;$data$jscomp$1$$.callback?
$parent$$.postMessage(JSON.stringify({event:"template",xml:$xml$$,blank:$xml$$===this.emptyDiagramXml,name:$name$$}),"*"):($fn$$($xml$$,$evt$jscomp$0$$,$xml$$!=this.emptyDiagramXml),this.editor.modified||this.editor.setStatus(""))}),recentDocsCallback:$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$?mxUtils.bind(this,function($recentReadyCallback$$){this.remoteInvoke("getRecentDiagrams",null,null,$recentReadyCallback$$,
function(){$recentReadyCallback$$(null,"Network Error!")})}):null,searchDocsCallback:$enableSearchDocs_tmp$36$$?mxUtils.bind(this,function($searchStr$$,$searchReadyCallback$$){this.remoteInvoke("searchDiagrams",[$searchStr$$],null,$searchReadyCallback$$,function(){$searchReadyCallback$$(null,"Network Error!")})}):null,openExtDocCallback:mxUtils.bind(this,function($url$$,$info$$,$name$$){$parent$$.postMessage(JSON.stringify({event:"template",docUrl:$url$$,info:$info$$,name:$name$$}),"*")}),customTempCallback:$enableCustomTemp$$?
mxUtils.bind(this,function($customTempCallback$$){this.remoteInvoke("getCustomTemplates",null,null,$customTempCallback$$,function(){$customTempCallback$$({},0)})}):null});this.showDialog($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$.container,620,440,!0,!1,mxUtils.bind(this,function($cancel$jscomp$5_file$$){$cancel$jscomp$5_file$$&&this.actions.get("exit").funct();App.CSET&&($cancel$jscomp$5_file$$=
this.getCurrentFile())&&$cancel$jscomp$5_file$$.save()}));$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$.init();return;case "textContent":$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=this.getDiagramTextContent();$parent$$.postMessage(JSON.stringify({event:"textContent",data:$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$,
message:$data$jscomp$1$$}),"*");return;case "status":$data$jscomp$1$$.messageKey?this.editor.setStatus(mxUtils.htmlEntities(mxResources.get($data$jscomp$1$$.messageKey))):$data$jscomp$1$$.message&&this.editor.setStatus(mxUtils.htmlEntities($data$jscomp$1$$.message));$data$jscomp$1$$.modified&&(this.editor.modified=$data$jscomp$1$$.modified);return;case "spinner":$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=
$data$jscomp$1$$.messageKey?mxResources.get($data$jscomp$1$$.messageKey):$data$jscomp$1$$.message;this.spinner.spin(document.body,$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$);return;case "export":if("png"===$data$jscomp$1$$.format||"xmlpng"===$data$jscomp$1$$.format){if(!$data$jscomp$1$$.spin&&!$data$jscomp$1$$.spinKey||this.spinner.spin(document.body,$data$jscomp$1$$.spinKey?mxResources.get($data$jscomp$1$$.spinKey):
$data$jscomp$1$$.spin)){var $xml$jscomp$0$$=$data$jscomp$1$$.xml?$data$jscomp$1$$.xml:this.getFileData(!0);this.editor.graph.setEnabled(!1);var $graph$$=this.editor.graph,$postDataBack$$=mxUtils.bind(this,function($uri$$){this.editor.graph.setEnabled(!0);this.spinner.stop();var $msg$$=this.createLoadMessage("export");$msg$$.format=$data$jscomp$1$$.format;$msg$$.message=$data$jscomp$1$$;$msg$$.data=$uri$$;$msg$$.xml=encodeURIComponent($xml$jscomp$0$$);$parent$$.postMessage(JSON.stringify($msg$$),"*")}),
$processUri$$=mxUtils.bind(this,function($uri$$){$uri$$=$uri$$||Editor.blankImage;"xmlpng"===$data$jscomp$1$$.format&&($uri$$=this.writeGraphModelToPng($uri$$,"zTXt","mxGraphModel",atob(Graph.compress($xml$jscomp$0$$))));$graph$$!==this.editor.graph&&$graph$$.container.parentNode.removeChild($graph$$.container);$postDataBack$$($uri$$)});if(this.isExportToCanvas()){if(this.pages&&this.currentPage!==this.pages[0]){var $graph$$=this.createTemporaryGraph($graph$$.getStylesheet()),$page$$=this.pages[0],
$graphGetGlobalVariable$$=$graph$$.getGlobalVariable;$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"===$name$$?$page$$.getName():"pagenumber"===$name$$?1:$graphGetGlobalVariable$$.apply(this,arguments)};document.body.appendChild($graph$$.container);$graph$$.model.setRoot($page$$.root)}this.exportToCanvas(mxUtils.bind(this,function($canvas$$){$processUri$$($canvas$$.toDataURL("image/png"))}),null,null,null,mxUtils.bind(this,function(){$processUri$$(null)}),null,
null,null,null,null,null,$graph$$)}else(new mxXmlRequest(EXPORT_URL,"format=png&embedXml="+("xmlpng"===$data$jscomp$1$$.format?"1":"0")+"&base64=1&xml="+encodeURIComponent(encodeURIComponent($xml$jscomp$0$$)))).send(mxUtils.bind(this,function($req$$){200<=$req$$.getStatus()&&299>=$req$$.getStatus()?$postDataBack$$("data:image/png;base64,"+$req$$.getText()):$processUri$$(null)}),mxUtils.bind(this,function(){$processUri$$(null)}))}}else{$data$jscomp$1$$.xml&&this.setFileData($data$jscomp$1$$.xml);var $msg$34$$=
this.createLoadMessage("export");if("html2"===$data$jscomp$1$$.format||"html"===$data$jscomp$1$$.format&&("0"!==urlParams.pages||this.pages&&this.pages.length))$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=this.getXmlFileData(),$msg$34$$.xml=mxUtils.getXml($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$),
$msg$34$$.data=this.getFileData(null,null,!0,null,null,null,$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$),$msg$34$$.format=$data$jscomp$1$$.format;else if("html"===$data$jscomp$1$$.format)$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=this.editor.getGraphXml(),$msg$34$$.data=this.getHtml($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$,
this.editor.graph),$msg$34$$.xml=mxUtils.getXml($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$),$msg$34$$.format=$data$jscomp$1$$.format;else{mxSvgCanvas2D.prototype.foAltText=null;$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=this.editor.graph.background;$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$===
mxConstants.NONE&&($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$=null);$msg$34$$.xml=this.getFileData(!0);$msg$34$$.format="svg";if($data$jscomp$1$$.embedImages||!$data$jscomp$1$$.embedImages){if(!$data$jscomp$1$$.spin&&!$data$jscomp$1$$.spinKey||this.spinner.spin(document.body,$data$jscomp$1$$.spinKey?mxResources.get($data$jscomp$1$$.spinKey):$data$jscomp$1$$.spin))this.editor.graph.setEnabled(!1),
"xmlsvg"===$data$jscomp$1$$.format?this.getEmbeddedSvg($msg$34$$.xml,this.editor.graph,null,!0,mxUtils.bind(this,function($svg$$){this.editor.graph.setEnabled(!0);this.spinner.stop();$msg$34$$.data=this.createSvgDataUri($svg$$);$parent$$.postMessage(JSON.stringify($msg$34$$),"*")})):this.convertImages(this.editor.graph.getSvg($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$),mxUtils.bind(this,function($svgRoot$$){this.editor.graph.setEnabled(!0);
this.spinner.stop();$msg$34$$.data=this.createSvgDataUri(mxUtils.getXml($svgRoot$$));$parent$$.postMessage(JSON.stringify($msg$34$$),"*")}));return}$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$="xmlsvg"===$data$jscomp$1$$.format?this.getEmbeddedSvg(this.getFileData(!0),this.editor.graph,null,!0):mxUtils.getXml(this.editor.graph.getSvg($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$));
$msg$34$$.data=this.createSvgDataUri($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$)}$parent$$.postMessage(JSON.stringify($msg$34$$),"*")}return;case "load":$autosave$$=1===$data$jscomp$1$$.autosave;this.hideDialog();$data$jscomp$1$$.modified&&!urlParams.modified&&(urlParams.modified=$data$jscomp$1$$.modified);$data$jscomp$1$$.saveAndExit&&!urlParams.saveAndExit&&(urlParams.saveAndExit=$data$jscomp$1$$.saveAndExit);
$data$jscomp$1$$.title&&this.buttonContainer&&($enableSearchDocs_tmp$36$$=document.createElement("span"),mxUtils.write($enableSearchDocs_tmp$36$$,$data$jscomp$1$$.title),"atlas"===uiTheme?(this.buttonContainer.style.paddingRight="12px",this.buttonContainer.style.paddingTop="6px",this.buttonContainer.style.right="25px"):"min"!==uiTheme&&(this.buttonContainer.style.paddingRight="38px",this.buttonContainer.style.paddingTop="6px"),this.embedFilenameSpan&&this.embedFilenameSpan.parentNode.removeChild(this.embedFilenameSpan),
this.buttonContainer.appendChild($enableSearchDocs_tmp$36$$),this.embedFilenameSpan=$enableSearchDocs_tmp$36$$);$data$jscomp$1$$=$data$jscomp$1$$.xmlpng?this.extractGraphModelFromPng($data$jscomp$1$$.xmlpng):$data$jscomp$1$$.xml;break;case "remoteInvokeReady":this.handleRemoteInvokeReady($parent$$);return;case "remoteInvoke":this.handleRemoteInvoke($data$jscomp$1$$);return;case "remoteInvokeResponse":this.handleRemoteInvokeResponse($data$jscomp$1$$);return;default:$parent$$.postMessage(JSON.stringify({error:"unknownMessage",
data:JSON.stringify($data$jscomp$1$$)}),"*");return}}var $doLoad$$=mxUtils.bind(this,function($data$jscomp$0$$,$evt$$){$ignoreChange$$=!0;try{$fn$$($data$jscomp$0$$,$evt$$)}catch($e$37$$){this.handleError($e$37$$)}$ignoreChange$$=!1;urlParams.modified&&this.editor.setStatus("");var $getData$$=mxUtils.bind(this,function(){return"0"!==urlParams.pages||this.pages&&this.pages.length?this.getFileData(!0):mxUtils.getXml(this.editor.getGraphXml())});$lastData$$=$getData$$();$autosave$$&&!$changeListener$$&&
($changeListener$$=mxUtils.bind(this,function(){var $data$$=$getData$$();if($data$$!==$lastData$$&&!$ignoreChange$$){var $msg$38$$=this.createLoadMessage("autosave");$msg$38$$.xml=$data$$;$data$$=JSON.stringify($msg$38$$);(window.opener||window.parent).postMessage($data$$,"*")}$lastData$$=$data$$}),this.editor.graph.model.addListener(mxEvent.CHANGE,$changeListener$$),this.editor.graph.addListener("gridSizeChanged",$changeListener$$),this.editor.graph.addListener("shadowVisibleChanged",$changeListener$$),
this.addListener("pageFormatChanged",$changeListener$$),this.addListener("pageScaleChanged",$changeListener$$),this.addListener("backgroundColorChanged",$changeListener$$),this.addListener("backgroundImageChanged",$changeListener$$),this.addListener("foldingEnabledChanged",$changeListener$$),this.addListener("mathEnabledChanged",$changeListener$$),this.addListener("gridEnabledChanged",$changeListener$$),this.addListener("guidesEnabledChanged",$changeListener$$),this.addListener("pageViewChanged",
$changeListener$$));"1"!==urlParams.returnbounds&&"json"!==urlParams.proto||$parent$$.postMessage(JSON.stringify(this.createLoadMessage("load")),"*")});$data$jscomp$1$$&&"function"===typeof $data$jscomp$1$$.substring?"data:application/vnd.visio;base64,"===$data$jscomp$1$$.substring(0,34)?($allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$="0M8R4KGxGuE"===$data$jscomp$1$$.substring(34,45)?"raw.vsd":"raw.vsdx",
this.importVisio(this.base64ToBlob($data$jscomp$1$$.substring($data$jscomp$1$$.indexOf(",")+1)),function($xml$$){$doLoad$$($xml$$,$evt$jscomp$0$$)},mxUtils.bind(this,function($e$$){this.handleError($e$$)}),$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$)):!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat($data$jscomp$1$$,"")?this.parseFile(new Blob([$data$jscomp$1$$],{type:"application/octet-stream"}),
mxUtils.bind(this,function($xhr$$){4===$xhr$$.readyState&&200<=$xhr$$.status&&299>=$xhr$$.status&&"<mxGraphModel"===$xhr$$.responseText.substring(0,13)&&$doLoad$$($xhr$$.responseText,$evt$jscomp$0$$)}),""):this.isLucidChartData($data$jscomp$1$$)?this.convertLucidChart($data$jscomp$1$$,mxUtils.bind(this,function($xml$$){$doLoad$$($xml$$)}),mxUtils.bind(this,function($e$$){this.handleError($e$$)})):($data$jscomp$1$$=$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$($data$jscomp$1$$),
$doLoad$$($data$jscomp$1$$,$evt$jscomp$0$$)):($data$jscomp$1$$=$allPagesTxt_bg$jscomp$15_dlg$30_dlg$32_dlg$jscomp$25_enableRecentDocs_extractDiagramXml_filename$jscomp$22_msg$33_node$jscomp$28_svg$jscomp$9_tmp$$($data$jscomp$1$$),$doLoad$$($data$jscomp$1$$,$evt$jscomp$0$$))}}));var $parent$$=window.opener||window.parent,$msg$jscomp$0$$="json"===urlParams.proto?JSON.stringify({event:"init"}):urlParams.ready||"ready";$parent$$.postMessage($msg$jscomp$0$$,"*")};EditorUi.prototype.addEmbedButtons=function $EditorUi$$addEmbedButtons$(){if(null!=
this.menubar){var $div$$=document.createElement("div");$div$$.style.display="inline-block";$div$$.style.position="absolute";$div$$.style.paddingTop="atlas"==uiTheme?"2px":"3px";$div$$.style.paddingLeft="8px";$div$$.style.paddingBottom="2px";var $button$$=document.createElement("button");$button$$.className="geBigButton";$button$$.style.fontSize="12px";$button$$.style.padding="4px 6px 4px 6px";$button$$.style.borderRadius="3px";"1"==urlParams.noSaveBtn?(mxUtils.write($button$$,mxResources.get("saveAndExit")),
$button$$.setAttribute("title",mxResources.get("saveAndExit")),mxEvent.addListener($button$$,"click",mxUtils.bind(this,function(){this.actions.get("saveAndExit").funct()})),$div$$.appendChild($button$$)):(mxUtils.write($button$$,mxResources.get("save")),$button$$.setAttribute("title",mxResources.get("save")+" ("+Editor.ctrlKey+"+S)"),mxEvent.addListener($button$$,"click",mxUtils.bind(this,function(){this.actions.get("save").funct()})),$div$$.appendChild($button$$),"1"==urlParams.saveAndExit&&($button$$=
document.createElement("a"),mxUtils.write($button$$,mxResources.get("saveAndExit")),$button$$.setAttribute("title",mxResources.get("saveAndExit")),$button$$.style.fontSize="12px",$button$$.style.marginLeft="6px",$button$$.style.padding="4px",$button$$.style.cursor="pointer",mxEvent.addListener($button$$,"click",mxUtils.bind(this,function(){this.actions.get("saveAndExit").funct()})),$div$$.appendChild($button$$)));$button$$=document.createElement("a");mxUtils.write($button$$,mxResources.get("exit"));
$button$$.setAttribute("title",mxResources.get("exit"));$button$$.style.fontSize="12px";$button$$.style.marginLeft="6px";$button$$.style.marginRight="20px";$button$$.style.padding="4px";$button$$.style.cursor="pointer";mxEvent.addListener($button$$,"click",mxUtils.bind(this,function(){this.actions.get("exit").funct()}));$div$$.appendChild($button$$);this.toolbar.container.appendChild($div$$);this.toolbar.staticElements.push($div$$);$div$$.style.right="atlas"!=uiTheme?"52px":"42px"}};EditorUi.prototype.showImportCsvDialog=
function $EditorUi$$showImportCsvDialog$(){null==this.importCsvDialog&&(this.importCsvDialog=new TextareaDialog(this,mxResources.get("csv")+":",Editor.defaultCsvValue,mxUtils.bind(this,function($newValue$$){this.importCsv($newValue$$)}),null,null,620,430,null,!0,!0,mxResources.get("import")));this.showDialog(this.importCsvDialog.container,640,520,!0,!0);this.importCsvDialog.init()};EditorUi.prototype.executeLayoutList=function $EditorUi$$executeLayoutList$($layoutList$$,$done$$){for(var $graph$$=
this.editor.graph,$cells$$=$graph$$.getSelectionCells(),$i$$=0;$i$$<$layoutList$$.length;$i$$++){var $layout$$=new window[$layoutList$$[$i$$].layout]($graph$$);if(null!=$layoutList$$[$i$$].config)for(var $key$$ in $layoutList$$[$i$$].config)$layout$$[$key$$]=$layoutList$$[$i$$].config[$key$$];this.executeLayout(function(){$layout$$.execute($graph$$.getDefaultParent(),0==$cells$$.length?null:$cells$$)},$i$$==$layoutList$$.length-1,$done$$)}};EditorUi.prototype.importCsv=function $EditorUi$$importCsv$($text$$,
$done$$){try{var $lines$$=$text$$.split("\n"),$cells$$=[],$dups$$={};if(0<$lines$$.length){var $lookups$$={},$style$$=null,$parentstyle$$=null,$exists_identity$$=null,$parent$$=null,$namespace$$="",$width$$="auto",$height$$="auto",$left$$=null,$top$$=null,$edgespacing$$=40,$nodespacing$$=40,$levelspacing$$=100,$padding$$=0,$graph$$=this.editor.graph;$graph$$.getGraphBounds();for(var $afterInsert$$=function $$afterInsert$$$(){null!=$done$$?$done$$($select$$):($graph$$.setSelectionCells($select$$),
$graph$$.scrollCellToVisible($graph$$.getSelectionCell()))},$pt$jscomp$6_y$$=$graph$$.getFreeInsertPoint(),$x0$$=$pt$jscomp$6_y$$.x,$y0$$=$pt$jscomp$6_y$$.y,$pt$jscomp$6_y$$=$y0$$,$label$jscomp$0$$=null,$layout$$="auto",$parent$$=null,$edges$$=[],$link$$=null,$ignore$$=null,$index$$=0;$index$$<$lines$$.length&&"#"==$lines$$[$index$$].charAt(0);){$text$$=$lines$$[$index$$];for($index$$++;$index$$<$lines$$.length&&"\\"==$text$$.charAt($text$$.length-1)&&"#"==$lines$$[$index$$].charAt(0);)$text$$=$text$$.substring(0,
$text$$.length-1)+mxUtils.trim($lines$$[$index$$].substring(1)),$index$$++;if("#"!=$text$$.charAt(1)){var $identityIndex_idx$$=$text$$.indexOf(":");if(0<$identityIndex_idx$$){var $key$$=mxUtils.trim($text$$.substring(1,$identityIndex_idx$$)),$value$$=mxUtils.trim($text$$.substring($identityIndex_idx$$+1));"label"==$key$$?$label$jscomp$0$$=$graph$$.sanitizeHtml($value$$):"style"==$key$$?$style$$=$value$$:"parentstyle"==$key$$?$parentstyle$$=$value$$:"identity"==$key$$&&0<$value$$.length&&"-"!=$value$$?
$exists_identity$$=$value$$:"parent"==$key$$&&0<$value$$.length&&"-"!=$value$$?$parent$$=$value$$:"namespace"==$key$$&&0<$value$$.length&&"-"!=$value$$?$namespace$$=$value$$:"width"==$key$$?$width$$=$value$$:"height"==$key$$?$height$$=$value$$:"left"==$key$$&&0<$value$$.length?$left$$=$value$$:"top"==$key$$&&0<$value$$.length?$top$$=$value$$:"ignore"==$key$$?$ignore$$=$value$$.split(","):"connect"==$key$$?$edges$$.push(JSON.parse($value$$)):"link"==$key$$?$link$$=$value$$:"padding"==$key$$?$padding$$=
parseFloat($value$$):"edgespacing"==$key$$?$edgespacing$$=parseFloat($value$$):"nodespacing"==$key$$?$nodespacing$$=parseFloat($value$$):"levelspacing"==$key$$?$levelspacing$$=parseFloat($value$$):"layout"==$key$$&&($layout$$=$value$$)}}}if(null==$lines$$[$index$$])throw Error(mxResources.get("invalidOrMissingFile"));var $keys$$=this.editor.csvToArray($lines$$[$index$$]),$key$$=$identityIndex_idx$$=null;if(null!=$exists_identity$$||null!=$parent$$)for(var $i$jscomp$0$$=0;$i$jscomp$0$$<$keys$$.length;$i$jscomp$0$$++)$exists_identity$$==
$keys$$[$i$jscomp$0$$]&&($identityIndex_idx$$=$i$jscomp$0$$),$parent$$==$keys$$[$i$jscomp$0$$]&&($key$$=$i$jscomp$0$$);null==$label$jscomp$0$$&&($label$jscomp$0$$="%"+$keys$$[0]+"%");if(null!=$edges$$)for(var $e$$=0;$e$$<$edges$$.length;$e$$++)null==$lookups$$[$edges$$[$e$$].to]&&($lookups$$[$edges$$[$e$$].to]={});$graph$$.model.beginUpdate();try{for($i$jscomp$0$$=$index$$+1;$i$jscomp$0$$<$lines$$.length;$i$jscomp$0$$++){var $values$$=this.editor.csvToArray($lines$$[$i$jscomp$0$$]);if(null==$values$$){var $short$$=
40<$lines$$[$i$jscomp$0$$].length?$lines$$[$i$jscomp$0$$].substring(0,40)+"...":$lines$$[$i$jscomp$0$$];throw Error($i$jscomp$0$$+" ("+$short$$+") "+mxResources.get("containsValidationErrors"));}if($values$$.length==$keys$$.length){var $cell$$=null,$id$$=null!=$identityIndex_idx$$?$namespace$$+$values$$[$identityIndex_idx$$]:null;null!=$id$$&&($cell$$=$graph$$.model.getCell($id$$));var $exists_identity$$=null!=$cell$$,$newCell$$=new mxCell($label$jscomp$0$$,new mxGeometry($x0$$,$pt$jscomp$6_y$$,0,
0),$style$$||"whiteSpace=wrap;html=1;");$newCell$$.vertex=!0;$newCell$$.id=$id$$;for(var $j$jscomp$0$$=0;$j$jscomp$0$$<$values$$.length;$j$jscomp$0$$++)$graph$$.setAttributeForCell($newCell$$,$keys$$[$j$jscomp$0$$],$values$$[$j$jscomp$0$$]);$graph$$.setAttributeForCell($newCell$$,"placeholders","1");$newCell$$.style=$graph$$.replacePlaceholders($newCell$$,$newCell$$.style);$exists_identity$$&&($graph$$.model.setGeometry($cell$$,$newCell$$.geometry),$graph$$.model.setStyle($cell$$,$newCell$$.style),
0>mxUtils.indexOf($cells$$,$cell$$)&&$cells$$.push($cell$$));$cell$$=$newCell$$;if(!$exists_identity$$)for($e$$=0;$e$$<$edges$$.length;$e$$++)$lookups$$[$edges$$[$e$$].to][$cell$$.getAttribute($edges$$[$e$$].to)]=$cell$$;null!=$link$$&&"link"!=$link$$&&($graph$$.setLinkForCell($cell$$,$cell$$.getAttribute($link$$)),$graph$$.setAttributeForCell($cell$$,$link$$,null));$graph$$.fireEvent(new mxEventObject("cellsInserted","cells",[$cell$$]));var $size$$=this.editor.graph.getPreferredSizeForCell($cell$$);
$cell$$.vertex&&(null!=$left$$&&null!=$cell$$.getAttribute($left$$)&&($cell$$.geometry.x=$x0$$+parseFloat($cell$$.getAttribute($left$$))),null!=$top$$&&null!=$cell$$.getAttribute($top$$)&&($cell$$.geometry.y=$y0$$+parseFloat($cell$$.getAttribute($top$$))),"@"==$width$$.charAt(0)&&null!=$cell$$.getAttribute($width$$.substring(1))?$cell$$.geometry.width=parseFloat($cell$$.getAttribute($width$$.substring(1))):$cell$$.geometry.width="auto"==$width$$?$size$$.width+$padding$$:parseFloat($width$$),"@"==
$height$$.charAt(0)&&null!=$cell$$.getAttribute($height$$.substring(1))?$cell$$.geometry.height=parseFloat($cell$$.getAttribute($height$$.substring(1))):$cell$$.geometry.height="auto"==$height$$?$size$$.height+$padding$$:parseFloat($height$$),$pt$jscomp$6_y$$+=$cell$$.geometry.height+$nodespacing$$);$exists_identity$$?(null==$dups$$[$id$$]&&($dups$$[$id$$]=[]),$dups$$[$id$$].push($cell$$)):($parent$$=null!=$key$$?$graph$$.model.getCell($namespace$$+$values$$[$key$$]):null,null!=$parent$$?($parent$$.style=
$graph$$.replacePlaceholders($parent$$,$parentstyle$$),$graph$$.addCell($cell$$,$parent$$)):$cells$$.push($graph$$.addCell($cell$$)))}}for(var $roots$$=$cells$$.slice(),$select$$=$cells$$.slice(),$e$$=0;$e$$<$edges$$.length;$e$$++)for(var $edge$jscomp$0$$=$edges$$[$e$$],$i$jscomp$0$$=0;$i$jscomp$0$$<$cells$$.length;$i$jscomp$0$$++){var $cell$$=$cells$$[$i$jscomp$0$$],$insertEdge$$=mxUtils.bind(this,function($realCell$$,$dataCell$$,$edge$$){var $refs_tmp$$=$dataCell$$.getAttribute($edge$$.from);if(null!=
$refs_tmp$$){$graph$$.setAttributeForCell($dataCell$$,$edge$$.from,null);for(var $refs_tmp$$=$refs_tmp$$.split(","),$j$$=0;$j$$<$refs_tmp$$.length;$j$$++){var $ref$$=$lookups$$[$edge$$.to][$refs_tmp$$[$j$$]];if(null!=$ref$$){var $label$$=$edge$$.label;null!=$edge$$.fromlabel&&($label$$=($dataCell$$.getAttribute($edge$$.fromlabel)||"")+($label$$||""));null!=$edge$$.tolabel&&($label$$=($label$$||"")+($ref$$.getAttribute($edge$$.tolabel)||""));$select$$.push($graph$$.insertEdge(null,null,$label$$||"",
$edge$$.invert?$ref$$:$realCell$$,$edge$$.invert?$realCell$$:$ref$$,$edge$$.style||$graph$$.createCurrentEdgeStyle()));mxUtils.remove($edge$$.invert?$realCell$$:$ref$$,$roots$$)}}}});$insertEdge$$($cell$$,$cell$$,$edge$jscomp$0$$);if(null!=$dups$$[$cell$$.id])for($j$jscomp$0$$=0;$j$jscomp$0$$<$dups$$[$cell$$.id].length;$j$jscomp$0$$++)$insertEdge$$($cell$$,$dups$$[$cell$$.id][$j$jscomp$0$$],$edge$jscomp$0$$)}if(null!=$ignore$$)for($i$jscomp$0$$=0;$i$jscomp$0$$<$cells$$.length;$i$jscomp$0$$++)for($cell$$=
$cells$$[$i$jscomp$0$$],$j$jscomp$0$$=0;$j$jscomp$0$$<$ignore$$.length;$j$jscomp$0$$++)$graph$$.setAttributeForCell($cell$$,mxUtils.trim($ignore$$[$j$jscomp$0$$]),null);if(0<$cells$$.length){var $edgeLayout$$=new mxParallelEdgeLayout($graph$$);$edgeLayout$$.spacing=$edgespacing$$;var $postProcess$$=function $$postProcess$$$(){0<$edgeLayout$$.spacing&&$edgeLayout$$.execute($graph$$.getDefaultParent());for(var $i$$=0;$i$$<$cells$$.length;$i$$++){var $geo$$=$graph$$.getCellGeometry($cells$$[$i$$]);$geo$$.x=
Math.round($graph$$.snap($geo$$.x));$geo$$.y=Math.round($graph$$.snap($geo$$.y));"auto"==$width$$&&($geo$$.width=Math.round($graph$$.snap($geo$$.width)));"auto"==$height$$&&($geo$$.height=Math.round($graph$$.snap($geo$$.height)))}};if("["==$layout$$.charAt(0)){var $temp$$=$afterInsert$$;$graph$$.view.validate();this.executeLayoutList(JSON.parse($layout$$),function(){$postProcess$$();$temp$$()});$afterInsert$$=null}else if("circle"==$layout$$){var $circleLayout$$=new mxCircleLayout($graph$$);$circleLayout$$.resetEdges=
!1;var $circleLayoutIsVertexIgnored$$=$circleLayout$$.isVertexIgnored;$circleLayout$$.isVertexIgnored=function $$circleLayout$$$isVertexIgnored$($vertex$$){return $circleLayoutIsVertexIgnored$$.apply(this,arguments)||0>mxUtils.indexOf($cells$$,$vertex$$)};this.executeLayout(function(){$circleLayout$$.execute($graph$$.getDefaultParent());$postProcess$$()},!0,$afterInsert$$);$afterInsert$$=null}else if("horizontaltree"==$layout$$||"verticaltree"==$layout$$||"auto"==$layout$$&&$select$$.length==2*$cells$$.length-
1&&1==$roots$$.length){$graph$$.view.validate();var $treeLayout$$=new mxCompactTreeLayout($graph$$,"horizontaltree"==$layout$$);$treeLayout$$.levelDistance=$nodespacing$$;$treeLayout$$.edgeRouting=!1;$treeLayout$$.resetEdges=!1;this.executeLayout(function(){$treeLayout$$.execute($graph$$.getDefaultParent(),0<$roots$$.length?$roots$$[0]:null)},!0,$afterInsert$$);$afterInsert$$=null}else if("horizontalflow"==$layout$$||"verticalflow"==$layout$$||"auto"==$layout$$&&1==$roots$$.length){$graph$$.view.validate();
var $flowLayout$$=new mxHierarchicalLayout($graph$$,"horizontalflow"==$layout$$?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH);$flowLayout$$.intraCellSpacing=$nodespacing$$;$flowLayout$$.parallelEdgeSpacing=$edgespacing$$;$flowLayout$$.interRankCellSpacing=$levelspacing$$;$flowLayout$$.disableEdgeStyle=!1;this.executeLayout(function(){$flowLayout$$.execute($graph$$.getDefaultParent(),$select$$);$graph$$.moveCells($select$$,$x0$$,$y0$$)},!0,$afterInsert$$);$afterInsert$$=null}else if("organic"==
$layout$$||"auto"==$layout$$&&$select$$.length>$cells$$.length){$graph$$.view.validate();var $organicLayout$$=new mxFastOrganicLayout($graph$$);$organicLayout$$.forceConstant=3*$nodespacing$$;$organicLayout$$.resetEdges=!1;var $organicLayoutIsVertexIgnored$$=$organicLayout$$.isVertexIgnored;$organicLayout$$.isVertexIgnored=function $$organicLayout$$$isVertexIgnored$($vertex$$){return $organicLayoutIsVertexIgnored$$.apply(this,arguments)||0>mxUtils.indexOf($cells$$,$vertex$$)};$edgeLayout$$=new mxParallelEdgeLayout($graph$$);
$edgeLayout$$.spacing=$edgespacing$$;this.executeLayout(function(){$organicLayout$$.execute($graph$$.getDefaultParent());$postProcess$$()},!0,$afterInsert$$);$afterInsert$$=null}}this.hideDialog()}finally{$graph$$.model.endUpdate()}null!=$afterInsert$$&&$afterInsert$$()}}catch($e$40$$){this.handleError($e$40$$)}};EditorUi.prototype.getSearch=function $EditorUi$$getSearch$($exclude$$){var $result$$="";if("1"!=urlParams.offline&&"1"!=urlParams.demo&&null!=$exclude$$&&0<window.location.search.length){var $amp$$=
"?",$key$$;for($key$$ in urlParams)0>mxUtils.indexOf($exclude$$,$key$$)&&null!=urlParams[$key$$]&&($result$$+=$amp$$+$key$$+"="+urlParams[$key$$],$amp$$="&")}else $result$$=window.location.search;return $result$$};EditorUi.prototype.getUrl=function $EditorUi$$getUrl$($href$$){$href$$=null!=$href$$?$href$$:window.location.pathname;var $parms$$=0<$href$$.indexOf("?")?1:0;if("1"==urlParams.offline)$href$$+=window.location.search;else{var $ignored$$="tmp libs clibs state fileId code share notitle data url embed client create title splash".split(" "),
$key$$;for($key$$ in urlParams)0>mxUtils.indexOf($ignored$$,$key$$)&&($href$$=0==$parms$$?$href$$+"?":$href$$+"&",null!=urlParams[$key$$]&&($href$$+=$key$$+"="+urlParams[$key$$],$parms$$++))}return $href$$};EditorUi.prototype.showLinkDialog=function $EditorUi$$showLinkDialog$($dlg$jscomp$26_value$$,$btnLabel$$,$fn$$){$dlg$jscomp$26_value$$=new LinkDialog(this,$dlg$jscomp$26_value$$,$btnLabel$$,$fn$$,!0);this.showDialog($dlg$jscomp$26_value$$.container,480,130,!0,!0);$dlg$jscomp$26_value$$.init()};
var $editorUiCreateOutline$$=EditorUi.prototype.createOutline;EditorUi.prototype.createOutline=function $EditorUi$$createOutline$($wnd$$){var $outline$$=$editorUiCreateOutline$$.apply(this,arguments),$graph$jscomp$0$$=this.editor.graph,$outlineGetSourceGraphBounds$$=$outline$$.getSourceGraphBounds;$outline$$.getSourceGraphBounds=function $$outline$$$getSourceGraphBounds$(){if(mxUtils.hasScrollbars($graph$jscomp$0$$.container)&&$graph$jscomp$0$$.pageVisible&&null!=this.source.minimumGraphSize){var $pb$$=
this.source.getPagePadding(),$s$$=this.source.view.scale;return new mxRectangle(0,0,Math.ceil(this.source.minimumGraphSize.width-2*$pb$$.x/$s$$),Math.ceil(this.source.minimumGraphSize.height-2*$pb$$.y/$s$$))}return $outlineGetSourceGraphBounds$$.apply(this,arguments)};var $outlineGetSourceContainerSize$$=$outline$$.getSourceContainerSize;$outline$$.getSourceContainerSize=function $$outline$$$getSourceContainerSize$(){if(mxUtils.hasScrollbars($graph$jscomp$0$$.container)&&null!=this.source.minimumGraphSize){var $pad$$=
this.source.getPagePadding(),$s$$=this.source.view.scale;return new mxRectangle(0,0,Math.ceil(this.source.minimumGraphSize.width*$s$$-2*$pad$$.x),Math.ceil(this.source.minimumGraphSize.height*$s$$-2*$pad$$.y))}return $outlineGetSourceContainerSize$$.apply(this,arguments)};$outline$$.getOutlineOffset=function $$outline$$$getOutlineOffset$($scale$$){if(mxUtils.hasScrollbars($graph$jscomp$0$$.container)&&null!=this.source.minimumGraphSize){var $pb$$=this.source.getPagePadding();return new mxPoint(Math.round(Math.max(0,
($outline$$.outline.container.clientWidth/$scale$$-(this.source.minimumGraphSize.width-2*$pb$$.x))/2)-$pb$$.x),Math.round(Math.max(0,($outline$$.outline.container.clientHeight/$scale$$-(this.source.minimumGraphSize.height-2*$pb$$.y))/2)-$pb$$.y-5/$scale$$))}return new mxPoint(8/$scale$$,8/$scale$$)};var $outlineInit$$=$outline$$.init;$outline$$.init=function $$outline$$$init$(){$outlineInit$$.apply(this,arguments);$outline$$.outline.view.getBackgroundPageBounds=function $$outline$$$outline$view$getBackgroundPageBounds$(){var $layout$$=
$graph$jscomp$0$$.getPageLayout(),$page$$=$graph$jscomp$0$$.getPageSize();return new mxRectangle(this.scale*(this.translate.x+$layout$$.x*$page$$.width),this.scale*(this.translate.y+$layout$$.y*$page$$.height),this.scale*$layout$$.width*$page$$.width,this.scale*$layout$$.height*$page$$.height)};$outline$$.outline.view.validateBackgroundPage()};this.editor.addListener("pageSelected",function($sender$$,$evt$$){var $change$$=$evt$$.getProperty("change"),$graph$$=$outline$$.source,$g$$=$outline$$.outline;
$g$$.pageScale=$graph$$.pageScale;$g$$.pageFormat=$graph$$.pageFormat;$g$$.background=$graph$$.background;$g$$.pageVisible=$graph$$.pageVisible;$g$$.background=$graph$$.background;var $current$$=mxUtils.getCurrentStyle($graph$$.container);$g$$.container.style.backgroundColor=$current$$.backgroundColor;null!=$graph$$.view.backgroundPageShape&&null!=$g$$.view.backgroundPageShape&&($g$$.view.backgroundPageShape.fill=$graph$$.view.backgroundPageShape.fill);$outline$$.outline.view.clear($change$$.previousPage.root,
!0);$outline$$.outline.view.validate()});return $outline$$};EditorUi.prototype.getServiceCount=function $EditorUi$$getServiceCount$($allowBrowser$$,$splash$$){var $serviceCount$$=0;null==this.drive&&"function"!==typeof window.DriveClient||$serviceCount$$++;$splash$$||null==this.dropbox&&"function"!==typeof window.DropboxClient||$serviceCount$$++;null==this.oneDrive&&"function"!==typeof window.OneDriveClient||$serviceCount$$++;$splash$$||null==this.gitHub||$serviceCount$$++;$splash$$||null==this.trello&&
"function"!==typeof window.TrelloClient||$serviceCount$$++;$serviceCount$$++;return $serviceCount$$};EditorUi.prototype.updateUi=function $EditorUi$$updateUi$(){this.updateButtonContainer();this.updateActionStates();var $editable$jscomp$2_file$$=this.getCurrentFile(),$active$jscomp$1_updateStatus$$=null!=$editable$jscomp$2_file$$||"1"==urlParams.embed&&this.editor.graph.isEnabled();this.menus.get("viewPanels").setEnabled($active$jscomp$1_updateStatus$$);this.menus.get("viewZoom").setEnabled($active$jscomp$1_updateStatus$$);
var $libsEnabled_restricted$$=("1"!=urlParams.embed||!this.editor.graph.isEnabled())&&(null==$editable$jscomp$2_file$$||$editable$jscomp$2_file$$.isRestricted());this.actions.get("makeCopy").setEnabled(!$libsEnabled_restricted$$);this.actions.get("print").setEnabled(!$libsEnabled_restricted$$);App.CSET&&this.menus.get("exportAs").setEnabled(!$libsEnabled_restricted$$);this.actions.get("makeCopy").visible=!1;this.actions.get("rename").visible=!1;this.actions.get("save").visible=!1;this.menus.get("embed").setEnabled(!$libsEnabled_restricted$$);
$libsEnabled_restricted$$="1"!=urlParams.embed||this.editor.graph.isEnabled();this.menus.get("extras").setEnabled($libsEnabled_restricted$$);App.CSET&&Editor.enableCustomLibraries&&(this.menus.get("openLibraryFrom").setEnabled($libsEnabled_restricted$$),this.menus.get("newLibrary").setEnabled($libsEnabled_restricted$$));$editable$jscomp$2_file$$="1"==urlParams.embed&&this.editor.graph.isEnabled()||null!=$editable$jscomp$2_file$$&&$editable$jscomp$2_file$$.isEditable();this.actions.get("image").setEnabled($active$jscomp$1_updateStatus$$);
this.actions.get("zoomIn").setEnabled($active$jscomp$1_updateStatus$$);this.actions.get("zoomOut").setEnabled($active$jscomp$1_updateStatus$$);this.actions.get("resetView").setEnabled($active$jscomp$1_updateStatus$$);this.actions.get("undo").setEnabled(this.canUndo()&&$editable$jscomp$2_file$$);this.actions.get("redo").setEnabled(this.canRedo()&&$editable$jscomp$2_file$$);this.menus.get("edit").setEnabled($active$jscomp$1_updateStatus$$);this.menus.get("view").setEnabled($active$jscomp$1_updateStatus$$);
App.CSET&&this.menus.get("importFrom").setEnabled($editable$jscomp$2_file$$);this.menus.get("arrange").setEnabled($editable$jscomp$2_file$$);null!=this.toolbar&&(null!=this.toolbar.edgeShapeMenu&&this.toolbar.edgeShapeMenu.setEnabled($editable$jscomp$2_file$$),null!=this.toolbar.edgeStyleMenu&&this.toolbar.edgeStyleMenu.setEnabled($editable$jscomp$2_file$$));if(this.isAppCache()){var $appCache$$=applicationCache;if(null!=$appCache$$&&null==this.offlineStatus){this.offlineStatus=document.createElement("div");
this.offlineStatus.className="geItem";this.offlineStatus.style.position="absolute";this.offlineStatus.style.fontSize="8pt";this.offlineStatus.style.top="2px";this.offlineStatus.style.right="12px";this.offlineStatus.style.color="#666";this.offlineStatus.style.margin="4px";this.offlineStatus.style.padding="2px";this.offlineStatus.style.verticalAlign="middle";this.offlineStatus.innerHTML="";this.menubarContainer.appendChild(this.offlineStatus);mxEvent.addListener(this.offlineStatus,"click",mxUtils.bind(this,
function(){var $img$$=this.offlineStatus.getElementsByTagName("img");null!=$img$$&&0<$img$$.length&&this.alert($img$$[0].getAttribute("title"))}));var $appCache$$=window.applicationCache,$lastStatus$$=null,$active$jscomp$1_updateStatus$$=mxUtils.bind(this,function(){var $newStatus$$=$appCache$$.status,$html$$;$newStatus$$==$appCache$$.CHECKING&&($newStatus$$=$appCache$$.DOWNLOADING);switch($newStatus$$){case $appCache$$.UNCACHED:$html$$="";break;case $appCache$$.IDLE:$html$$="min"==uiTheme?"":'<img title="draw.io is up to date." border="0" src="'+
IMAGE_PATH+'/checkmark.gif"/>';break;case $appCache$$.DOWNLOADING:$html$$='<img title="Downloading new version..." border="0" src="'+IMAGE_PATH+'/spin.gif"/>';break;case $appCache$$.UPDATEREADY:$html$$='<img title="'+mxUtils.htmlEntities(mxResources.get("restartForChangeRequired"))+'" border="0" src="'+IMAGE_PATH+'/download.png"/>';break;case $appCache$$.OBSOLETE:$html$$='<img title="Obsolete" border="0" src="'+IMAGE_PATH+'/clear.gif"/>';break;default:$html$$='<img title="Unknown" border="0" src="'+
IMAGE_PATH+'/clear.gif"/>'}$newStatus$$!=$lastStatus$$&&(this.offlineStatus.innerHTML=$html$$,$lastStatus$$=$newStatus$$)});mxEvent.addListener($appCache$$,"checking",$active$jscomp$1_updateStatus$$);mxEvent.addListener($appCache$$,"noupdate",$active$jscomp$1_updateStatus$$);mxEvent.addListener($appCache$$,"downloading",$active$jscomp$1_updateStatus$$);mxEvent.addListener($appCache$$,"progress",$active$jscomp$1_updateStatus$$);mxEvent.addListener($appCache$$,"cached",$active$jscomp$1_updateStatus$$);
mxEvent.addListener($appCache$$,"updateready",$active$jscomp$1_updateStatus$$);mxEvent.addListener($appCache$$,"obsolete",$active$jscomp$1_updateStatus$$);mxEvent.addListener($appCache$$,"error",$active$jscomp$1_updateStatus$$);$active$jscomp$1_updateStatus$$()}}else this.updateUserElement()};EditorUi.prototype.updateButtonContainer=function $EditorUi$$updateButtonContainer$(){};EditorUi.prototype.updateUserElement=function $EditorUi$$updateUserElement$(){};EditorUi.prototype.isDiagramActive=function $EditorUi$$isDiagramActive$(){var $file$$=
this.getCurrentFile();return null!=$file$$&&$file$$.isEditable()||"1"==urlParams.embed&&this.editor.graph.isEnabled()};var $editorUiUpdateActionStates$$=EditorUi.prototype.updateActionStates;EditorUi.prototype.updateActionStates=function $EditorUi$$updateActionStates$(){$editorUiUpdateActionStates$$.apply(this,arguments);var $graph$jscomp$59_state$$=this.editor.graph,$active$$=this.isDiagramActive(),$file$$=this.getCurrentFile();this.actions.get("pageSetup").setEnabled($active$$);this.actions.get("autosave").setEnabled($file$$&&
$file$$.isEditable()&&$file$$.isAutosaveOptional());this.actions.get("guides").setEnabled($active$$);this.actions.get("shadowVisible").setEnabled($active$$);this.actions.get("connectionArrows").setEnabled($active$$);this.actions.get("connectionPoints").setEnabled($active$$);this.actions.get("copyStyle").setEnabled($active$$&&!$graph$jscomp$59_state$$.isSelectionEmpty());this.actions.get("pasteStyle").setEnabled($active$$&&!$graph$jscomp$59_state$$.isSelectionEmpty());this.actions.get("editGeometry").setEnabled($graph$jscomp$59_state$$.getModel().isVertex($graph$jscomp$59_state$$.getSelectionCell()));
this.actions.get("createShape").setEnabled($active$$);this.actions.get("createRevision").setEnabled($active$$);this.actions.get("moveToFolder").setEnabled(!!$file$$);this.actions.get("makeCopy").setEnabled($file$$&&!$file$$.isRestricted());this.actions.get("editDiagram").setEnabled($active$$&&$file$$&&!$file$$.isRestricted());this.actions.get("publishLink").setEnabled($file$$&&!$file$$.isRestricted());App.CSET||this.actions.get("tags").setEnabled("hidden"!=this.diagramContainer.style.visibility);
this.actions.get("find").setEnabled("hidden"!=this.diagramContainer.style.visibility);this.actions.get("layers").setEnabled("hidden"!=this.diagramContainer.style.visibility);this.actions.get("outline").setEnabled("hidden"!=this.diagramContainer.style.visibility);this.actions.get("rename").setEnabled($file$$&&$file$$.isRenamable()||"1"==urlParams.embed);this.actions.get("close").setEnabled(!!$file$$);this.menus.get("publish").setEnabled($file$$&&!$file$$.isRestricted());$graph$jscomp$59_state$$=$graph$jscomp$59_state$$.view.getState($graph$jscomp$59_state$$.getSelectionCell());
this.actions.get("editShape").setEnabled($active$$&&$graph$jscomp$59_state$$&&$graph$jscomp$59_state$$.shape&&$graph$jscomp$59_state$$.shape.stencil);App.CSET||(this.actions.get("rename").visible=!1,this.actions.get("makeCopy").visible=!1)};var $editoUiDestroy$$=EditorUi.prototype.destroy;EditorUi.prototype.destroy=function $EditorUi$$destroy$(){this.editUpdateListener&&(this.editor.undoManager.removeListener(this.editUpdateListener),this.editUpdateListener=null);null!=this.exportDialog&&(this.exportDialog.parentNode.removeChild(this.exportDialog),
this.exportDialog=null);$editoUiDestroy$$.apply(this,arguments)};null!=window.ExportDialog&&(ExportDialog.showXmlOption=!1,ExportDialog.showGifOption=!1,ExportDialog.exportFile=function $ExportDialog$exportFile$($editorUi$$,$name$$,$format$$,$bg$$,$s$$,$b$$){var $graph$$=$editorUi$$.editor.graph;if("xml"==$format$$)$editorUi$$.hideDialog(),$editorUi$$.saveData($name$$,"xml",mxUtils.getXml($editorUi$$.editor.getGraphXml()),"text/xml");else if("svg"==$format$$)$editorUi$$.hideDialog(),$editorUi$$.saveData($name$$,
"svg",mxUtils.getXml($graph$$.getSvg($bg$$,$s$$,$b$$)),"image/svg+xml");else{var $data$$=$editorUi$$.getFileData(!0,null,null,null,null,!0),$bounds$$=$graph$$.getGraphBounds(),$w$$=Math.floor($bounds$$.width*$s$$/$graph$$.view.scale),$h$$=Math.floor($bounds$$.height*$s$$/$graph$$.view.scale);$data$$.length<=MAX_REQUEST_SIZE&&$w$$*$h$$<MAX_AREA?($editorUi$$.hideDialog(),"png"!=$format$$&&"jpg"!=$format$$&&"jpeg"!=$format$$||!$editorUi$$.isExportToCanvas()?$editorUi$$.saveRequest($name$$,$format$$,
function($newTitle$$,$base64$$){return new mxXmlRequest(EXPORT_URL,"format="+$format$$+"&base64="+($base64$$||"0")+(null!=$newTitle$$?"&filename="+encodeURIComponent($newTitle$$):"")+"&bg="+(null!=$bg$$?$bg$$:"none")+"&w="+$w$$+"&h="+$h$$+"&border="+$b$$+"&xml="+encodeURIComponent($data$$))}):"png"==$format$$?$editorUi$$.exportImage($s$$,null==$bg$$||"none"==$bg$$,!0,!1,!1,$b$$,!0,!1):$editorUi$$.exportImage($s$$,!1,!0,!1,!1,$b$$,!0,!1,"jpeg")):mxUtils.alert(mxResources.get("drawingTooLarge"))}});
EditorUi.prototype.updateEditReferences=function $EditorUi$$updateEditReferences$($edit$$){for(var $i$$=0;$i$$<$edit$$.changes.length;$i$$++){var $change$$=$edit$$.changes[$i$$];if(null!=$change$$&&$change$$.constructor==mxChildChange&&null!=$change$$.child){var $child$$=$change$$.child;if(null!=$child$$.source&&null!=$child$$.source.id){var $modelSource$$=this.getFutureCellForEdit($change$$.model,$edit$$,$child$$.source.id);$modelSource$$!=$child$$.source&&($child$$.source=$modelSource$$)}null!=
$child$$.target&&null!=$child$$.target.id&&($change$$=this.getFutureCellForEdit($change$$.model,$edit$$,$child$$.target.id),$change$$!=$child$$.target&&($child$$.target=$change$$))}}};EditorUi.prototype.getFutureCellForEdit=function $EditorUi$$getFutureCellForEdit$($model$$,$edit$$,$id$$){var $result$$=$model$$.getCell($id$$);if(null==$result$$)for(var $i$$=$edit$$.changes.length-1;0<=$i$$;$i$$--){var $change$$=$edit$$.changes[$i$$];if($change$$.constructor==mxChildChange&&null!=$change$$.child&&
$change$$.child.id==$id$$){$model$$.contains($change$$.previous)&&($result$$=$change$$.child);break}}return $result$$};EditorUi.prototype.getDiagramTextContent=function $EditorUi$$getDiagramTextContent$(){this.editor.graph.setEnabled(!1);var $graph$$=this.editor.graph,$allPagesTxt$$="";if(null!=this.pages)for(var $i$$=0;$i$$<this.pages.length;$i$$++){var $pageGraph$$=$graph$$;this.currentPage!=this.pages[$i$$]&&($pageGraph$$=this.createTemporaryGraph($graph$$.getStylesheet()),$pageGraph$$.model.setRoot(this.pages[$i$$].root));
$allPagesTxt$$+=this.pages[$i$$].getName()+" "+$pageGraph$$.getIndexableText()+" "}else $allPagesTxt$$=$graph$$.getIndexableText();this.editor.graph.setEnabled(!0);return $allPagesTxt$$};EditorUi.prototype.showRemotelyStoredLibrary=function $EditorUi$$showRemotelyStoredLibrary$($j$jscomp$14_title$$){var $selectedLibs$$={},$div$jscomp$50_dlg$$=document.createElement("div");$div$jscomp$50_dlg$$.style.whiteSpace="nowrap";var $hd$$=document.createElement("h3");mxUtils.write($hd$$,mxUtils.htmlEntities($j$jscomp$14_title$$));
$hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:12px";$div$jscomp$50_dlg$$.appendChild($hd$$);var $libsSection$$=document.createElement("div");$libsSection$$.style.cssText="border:1px solid lightGray;overflow: auto;height:300px";$libsSection$$.innerHTML='<img src="/images/spin.gif">';var $loadedLibs$$={};try{var $custLibs$$=mxSettings.getCustomLibraries();for($j$jscomp$14_title$$=0;$j$jscomp$14_title$$<$custLibs$$.length;$j$jscomp$14_title$$++){var $l$$=$custLibs$$[$j$jscomp$14_title$$];
if("R"==$l$$.substring(0,1)){var $libDesc$$=JSON.parse(decodeURIComponent($l$$.substring(1)));$loadedLibs$$[$libDesc$$[0]]={id:$libDesc$$[0],title:$libDesc$$[1],downloadUrl:$libDesc$$[2]}}}}catch($e$$){}this.remoteInvoke("getCustomLibraries",null,null,function($libsList$$){$libsSection$$.innerHTML="";if(0==$libsList$$.length)$libsSection$$.innerHTML='<div style="text-align:center;padding-top:20px;color:gray;">'+mxUtils.htmlEntities(mxResources.get("noLibraries"))+"</div>";else for(var $i$$=0;$i$$<
$libsList$$.length;$i$$++){var $lib$$=$libsList$$[$i$$];$loadedLibs$$[$lib$$.id]&&($selectedLibs$$[$lib$$.id]=$lib$$);var $libCheck$$=this.addCheckbox($libsSection$$,$lib$$.title,$loadedLibs$$[$lib$$.id]);(function($lib2$$,$check$$){mxEvent.addListener($check$$,"change",function(){this.checked?$selectedLibs$$[$lib2$$.id]=$lib2$$:delete $selectedLibs$$[$lib2$$.id]})})($lib$$,$libCheck$$)}},function(){this.handleError(null,mxResources.get("errorLoadingFile"))});$div$jscomp$50_dlg$$.appendChild($libsSection$$);
$div$jscomp$50_dlg$$=new CustomDialog(this,$div$jscomp$50_dlg$$,mxUtils.bind(this,function(){this.spinner.spin(document.body,mxResources.get("loading"));var $pendingLibs$$=0,$id$$;for($id$$ in $selectedLibs$$)null==$loadedLibs$$[$id$$]&&($pendingLibs$$++,mxUtils.bind(this,function($lib$$){this.remoteInvoke("getFileContent",[$lib$$.downloadUrl],null,mxUtils.bind(this,function($libContent$$){$pendingLibs$$--;0==$pendingLibs$$&&this.spinner.stop();try{this.loadLibrary(new RemoteLibrary(this,$libContent$$,
$lib$$))}catch($e$41$$){this.handleError($e$41$$,mxResources.get("errorLoadingFile"))}}),mxUtils.bind(this,function(){$pendingLibs$$--;0==$pendingLibs$$&&this.spinner.stop();this.handleError(null,mxResources.get("errorLoadingFile"))}))})($selectedLibs$$[$id$$]));for($id$$ in $loadedLibs$$)$selectedLibs$$[$id$$]||this.closeLibrary(new RemoteLibrary(this,null,$loadedLibs$$[$id$$]));0==$pendingLibs$$&&this.spinner.stop()}),null,null,"https://desk.draw.io/support/solutions/articles/16000092763");this.showDialog($div$jscomp$50_dlg$$.container,
340,375,!0,!0)};EditorUi.prototype.remoteInvokableFns={getDiagramTextContent:{isAsync:!1}};EditorUi.prototype.remoteInvokeCallbacks=[];EditorUi.prototype.remoteInvokeQueue=[];EditorUi.prototype.handleRemoteInvokeReady=function $EditorUi$$handleRemoteInvokeReady$($remoteWin$$){this.remoteWin=$remoteWin$$;for(var $i$$=0;$i$$<this.remoteInvokeQueue.length;$i$$++)$remoteWin$$.postMessage(this.remoteInvokeQueue[$i$$],"*");this.remoteInvokeQueue=[]};EditorUi.prototype.handleRemoteInvokeResponse=function $EditorUi$$handleRemoteInvokeResponse$($msg$$){var $msgMarkers$$=
$msg$$.msgMarkers,$callback$$=this.remoteInvokeCallbacks[$msgMarkers$$.callbackId];$msg$$.error?$callback$$.error&&$callback$$.error($msg$$.error.errResp):$callback$$.callback&&$callback$$.callback.apply(this,$msg$$.resp);this.remoteInvokeCallbacks[$msgMarkers$$.callbackId]=null};EditorUi.prototype.remoteInvoke=function $EditorUi$$remoteInvoke$($msg$$,$remoteFnArgs$$,$msgMarkers$$,$callback$$,$error$$){$msgMarkers$$=$msgMarkers$$||{};$msgMarkers$$.callbackId=this.remoteInvokeCallbacks.length;this.remoteInvokeCallbacks.push({callback:$callback$$,
error:$error$$});$msg$$=JSON.stringify({event:"remoteInvoke",FunctionName:$msg$$,functionArgs:$remoteFnArgs$$,msgMarkers:$msgMarkers$$});null!=this.remoteWin?this.remoteWin.postMessage($msg$$,"*"):this.remoteInvokeQueue.push($msg$$)};EditorUi.prototype.handleRemoteInvoke=function $EditorUi$$handleRemoteInvoke$($msg$$){var $sendResponse$$=mxUtils.bind(this,function($resp$$,$error$$){var $respMsg$$={event:"remoteInvokeResponse",msgMarkers:$msg$$.msgMarkers};null!=$error$$?$respMsg$$.error={errResp:$error$$}:
null!=$resp$$&&($respMsg$$.resp=$resp$$);this.remoteWin.postMessage(JSON.stringify($respMsg$$),"*")});try{var $FunctionName$$=$msg$$.FunctionName,$functionInfo$$=this.remoteInvokableFns[$FunctionName$$];if(null!=$functionInfo$$&&"function"===typeof this[$FunctionName$$]){var $functionArgs$$=$msg$$.functionArgs;Array.isArray($functionArgs$$)||($functionArgs$$=[]);if($functionInfo$$.isAsync)$functionArgs$$.push(function(){$sendResponse$$(Array.prototype.slice.apply(arguments))}),$functionArgs$$.push(function($err$$){$sendResponse$$(null,
$err$$||"Unkown Error")}),this[$FunctionName$$].apply(this,$functionArgs$$);else{var $resp$jscomp$0$$=this[$FunctionName$$].apply(this,$functionArgs$$);$sendResponse$$([$resp$jscomp$0$$])}}else $sendResponse$$(null,"Invalid Call: "+$FunctionName$$+" is not found.")}catch($e$$){$sendResponse$$(null,"Invalid Call: An error occured, "+$e$$.message)}};EditorUi.prototype.commentsSupported=function $EditorUi$$commentsSupported$(){var $file$$=this.getCurrentFile();return null!=$file$$?$file$$.commentsSupported():
!1};EditorUi.prototype.commentsRefreshNeeded=function $EditorUi$$commentsRefreshNeeded$(){var $file$$=this.getCurrentFile();return null!=$file$$?$file$$.commentsRefreshNeeded():!0};EditorUi.prototype.commentsSaveNeeded=function $EditorUi$$commentsSaveNeeded$(){var $file$$=this.getCurrentFile();return null!=$file$$?$file$$.commentsSaveNeeded():!1};EditorUi.prototype.getComments=function $EditorUi$$getComments$($success$$,$error$$){var $file$$=this.getCurrentFile();null!=$file$$?$file$$.getComments($success$$,
$error$$):$success$$([])};EditorUi.prototype.addComment=function $EditorUi$$addComment$($comment$$,$success$$,$error$$){var $file$$=this.getCurrentFile();null!=$file$$?$file$$.addComment($comment$$,$success$$,$error$$):$success$$(Date.now())};EditorUi.prototype.canReplyToReplies=function $EditorUi$$canReplyToReplies$(){var $file$$=this.getCurrentFile();return null!=$file$$?$file$$.canReplyToReplies():!0};EditorUi.prototype.canComment=function $EditorUi$$canComment$(){var $file$$=this.getCurrentFile();
return null!=$file$$?$file$$.canComment():!0};EditorUi.prototype.newComment=function $EditorUi$$newComment$($content$$,$user$$){var $file$$=this.getCurrentFile();return null!=$file$$?$file$$.newComment($content$$,$user$$):new DrawioComment(this,null,$content$$,Date.now(),Date.now(),!1,$user$$)};EditorUi.prototype.isRevisionHistorySupported=function $EditorUi$$isRevisionHistorySupported$(){var $file$$=this.getCurrentFile();return null!=$file$$&&$file$$.isRevisionHistorySupported()};EditorUi.prototype.getRevisions=
function $EditorUi$$getRevisions$($success$$,$error$$){var $file$$=this.getCurrentFile();null!=$file$$&&$file$$.getRevisions?$file$$.getRevisions($success$$,$error$$):$error$$({message:mxResources.get("unknownError")})};EditorUi.prototype.isRevisionHistoryEnabled=function $EditorUi$$isRevisionHistoryEnabled$(){var $file$$=this.getCurrentFile();return null!=$file$$&&($file$$.constructor==DriveFile&&$file$$.isEditable()||$file$$.constructor==DropboxFile)}})();
var CommentsWindow=function $CommentsWindow$($editorUi$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$,$saveCallback$$){function $updateNoComments$$(){for(var $divs$$=$listDiv$$.getElementsByTagName("div"),$visibleCount$$=0,$i$$=0;$i$$<$divs$$.length;$i$$++)"none"!=$divs$$[$i$$].style.display&&$divs$$[$i$$].parentNode==$listDiv$$&&$visibleCount$$++;$noComments$$.style.display=0==$visibleCount$$?"block":"none"}function $editComment$$($comment$$,$cdiv$$,$saveCallback$$,$deleteOnCancel$$){function $reset$$(){$cdiv$$.removeChild($textArea$$);
$cdiv$$.removeChild($btnDiv$$);$actionsDiv$$.style.display="block";$commentTxt$$.style.display="block"}$curEdited$$={div:$cdiv$$,comment:$comment$$,saveCallback:$saveCallback$$,deleteOnCancel:$deleteOnCancel$$};var $commentTxt$$=$cdiv$$.querySelector(".geCommentTxt"),$actionsDiv$$=$cdiv$$.querySelector(".geCommentActionsList"),$textArea$$=document.createElement("textarea");$textArea$$.className="geCommentEditTxtArea";$textArea$$.style.minHeight=$commentTxt$$.offsetHeight+"px";$textArea$$.value=$comment$$.content;
$cdiv$$.insertBefore($textArea$$,$commentTxt$$);var $btnDiv$$=document.createElement("div");$btnDiv$$.className="geCommentEditBtns";var $cancelBtn$$=mxUtils.button(mxResources.get("cancel"),function(){$deleteOnCancel$$?($cdiv$$.parentNode.removeChild($cdiv$$),$updateNoComments$$()):$reset$$();$curEdited$$=null});$cancelBtn$$.className="geCommentEditBtn";$btnDiv$$.appendChild($cancelBtn$$);var $saveBtn$$=mxUtils.button(mxResources.get("save"),function(){$commentTxt$$.innerHTML="";$comment$$.content=
$textArea$$.value;mxUtils.write($commentTxt$$,$comment$$.content);$reset$$();$saveCallback$$($comment$$);$curEdited$$=null});mxEvent.addListener($textArea$$,"keydown",mxUtils.bind(this,function($evt$$){mxEvent.isConsumed($evt$$)||((mxEvent.isControlDown($evt$$)||mxClient.IS_MAC&&mxEvent.isMetaDown($evt$$))&&13==$evt$$.keyCode?($saveBtn$$.click(),mxEvent.consume($evt$$)):27==$evt$$.keyCode&&($cancelBtn$$.click(),mxEvent.consume($evt$$)))}));$saveBtn$$.focus();$saveBtn$$.className="geCommentEditBtn gePrimaryBtn";
$btnDiv$$.appendChild($saveBtn$$);$cdiv$$.insertBefore($btnDiv$$,$commentTxt$$);$actionsDiv$$.style.display="none";$commentTxt$$.style.display="none";$textArea$$.focus()}function $writeCommentDate$$($comment$$,$dateDiv$$){$dateDiv$$.innerHTML="";var $str$$=$editorUi$$.timeSince(new Date($comment$$.modifiedDate));null==$str$$&&($str$$=mxResources.get("lessThanAMinute"));mxUtils.write($dateDiv$$,mxResources.get("timeAgo",[$str$$],"{1} ago"))}function $showBusy$$($commentDiv$$){var $busyImg$$=document.createElement("img");
$busyImg$$.className="geCommentBusyImg";$busyImg$$.src="/images/spin.gif";$commentDiv$$.appendChild($busyImg$$);$commentDiv$$.busyImg=$busyImg$$}function $showError$$($commentDiv$$){$commentDiv$$.style.border="1px solid red";$commentDiv$$.removeChild($commentDiv$$.busyImg)}function $showDone$$($commentDiv$$){$commentDiv$$.style.border="";$commentDiv$$.removeChild($commentDiv$$.busyImg)}function $addComment$$($comment$jscomp$0$$,$parentArr$$,$i$jscomp$103_parent$$,$level$$,$origContent_showResolved$$){function $addAction$$($name$$,
$evtHandler$$,$hide$$){var $action$$=document.createElement("li");$action$$.className="geCommentAction";var $actionLnk$$=document.createElement("a");$actionLnk$$.className="geCommentActionLnk";mxUtils.write($actionLnk$$,$name$$);$action$$.appendChild($actionLnk$$);mxEvent.addListener($actionLnk$$,"click",function($evt$$){$evtHandler$$($evt$$,$comment$jscomp$0$$);$evt$$.preventDefault();mxEvent.consume($evt$$)});$actionsList$$.appendChild($action$$);$hide$$&&($action$$.style.display="none")}function $collectReplies$$(){function $collectReplies$$($comment$$){$replies$$.push($pdiv$$);
if(null!=$comment$$.replies)for(var $i$$=0;$i$$<$comment$$.replies.length;$i$$++)$pdiv$$=$pdiv$$.nextSibling,$collectReplies$$($comment$$.replies[$i$$])}var $replies$$=[],$pdiv$$=$cdiv$$;$collectReplies$$($comment$jscomp$0$$);return{pdiv:$pdiv$$,replies:$replies$$}}function $addReply$$($initContent$$,$editIt$$,$saveCallback$$,$doResolve$$,$doReopen$$){function $doAddReply$$(){$showBusy$$($replyComment$$);$comment$jscomp$0$$.addReply($newReply$$,function($id$$){$newReply$$.id=$id$$;$comment$jscomp$0$$.replies.push($newReply$$);
$showDone$$($replyComment$$);$saveCallback$$&&$saveCallback$$()},function($err$$){$doEdit$$();$showError$$($replyComment$$);$editorUi$$.handleError($err$$,null,null,null,mxUtils.htmlEntities(mxResources.get("objectNotFound")))},$doResolve$$,$doReopen$$)}function $doEdit$$(){$editComment$$($newReply$$,$replyComment$$,function($newReply$$){$doAddReply$$()},!0)}var $pdiv$$=$collectReplies$$().pdiv,$newReply$$=$editorUi$$.newComment($initContent$$,$editorUi$$.getCurrentUser());$newReply$$.pCommentId=
$comment$jscomp$0$$.id;null==$comment$jscomp$0$$.replies&&($comment$jscomp$0$$.replies=[]);var $replyComment$$=$addComment$$($newReply$$,$comment$jscomp$0$$.replies,$pdiv$$,$level$$+1);$editIt$$?$doEdit$$():$doAddReply$$()}if($origContent_showResolved$$||!$comment$jscomp$0$$.isResolved){$noComments$$.style.display="none";var $cdiv$$=document.createElement("div");$cdiv$$.className="geCommentContainer";$cdiv$$.setAttribute("data-commentId",$comment$jscomp$0$$.id);$cdiv$$.style.marginLeft=20*$level$$+
5+"px";$comment$jscomp$0$$.isResolved&&"dark"!=uiTheme&&($cdiv$$.style.backgroundColor="ghostWhite");var $actionsDiv$$=document.createElement("div");$actionsDiv$$.className="geCommentHeader";var $headerTxt_user$$=document.createElement("img");$headerTxt_user$$.className="geCommentUserImg";$headerTxt_user$$.src=$comment$jscomp$0$$.user.pictureUrl||Editor.userImage;$actionsDiv$$.appendChild($headerTxt_user$$);$headerTxt_user$$=document.createElement("div");$headerTxt_user$$.className="geCommentHeaderTxt";
$actionsDiv$$.appendChild($headerTxt_user$$);var $dateDiv$$=document.createElement("div");$dateDiv$$.className="geCommentUsername";mxUtils.write($dateDiv$$,$comment$jscomp$0$$.user.displayName||"");$headerTxt_user$$.appendChild($dateDiv$$);$dateDiv$$=document.createElement("div");$dateDiv$$.className="geCommentDate";$dateDiv$$.setAttribute("data-commentId",$comment$jscomp$0$$.id);$writeCommentDate$$($comment$jscomp$0$$,$dateDiv$$);$headerTxt_user$$.appendChild($dateDiv$$);$cdiv$$.appendChild($actionsDiv$$);
$actionsDiv$$=document.createElement("div");$actionsDiv$$.className="geCommentTxt";mxUtils.write($actionsDiv$$,$comment$jscomp$0$$.content||"");$cdiv$$.appendChild($actionsDiv$$);$actionsDiv$$=document.createElement("div");$actionsDiv$$.className="geCommentActions";var $actionsList$$=document.createElement("ul");$actionsList$$.className="geCommentActionsList";$actionsDiv$$.appendChild($actionsList$$);$readOnly$$||0!=$level$$&&!$canReplyToReplies$$||$addAction$$(mxResources.get("reply"),function(){$addReply$$("",
!0)},$comment$jscomp$0$$.isResolved);$headerTxt_user$$=$editorUi$$.getCurrentUser();null==$headerTxt_user$$||$headerTxt_user$$.id!=$comment$jscomp$0$$.user.id||$readOnly$$||($addAction$$(mxResources.get("edit"),function(){function $doEditComment$$(){$editComment$$($comment$jscomp$0$$,$cdiv$$,function(){$showBusy$$($cdiv$$);$comment$jscomp$0$$.editComment($comment$jscomp$0$$.content,function(){$showDone$$($cdiv$$)},function($err$$){$showError$$($cdiv$$);$doEditComment$$();$editorUi$$.handleError($err$$,
null,null,null,mxUtils.htmlEntities(mxResources.get("objectNotFound")))})})}$doEditComment$$()},$comment$jscomp$0$$.isResolved),$addAction$$(mxResources.get("delete"),function(){$editorUi$$.confirm(mxResources.get("areYouSure"),function(){$showBusy$$($cdiv$$);$comment$jscomp$0$$.deleteComment(function(){for(var $replies$$=$collectReplies$$($comment$jscomp$0$$).replies,$i$$=0;$i$$<$replies$$.length;$i$$++)$listDiv$$.removeChild($replies$$[$i$$]);for($i$$=0;$i$$<$parentArr$$.length;$i$$++)if($parentArr$$[$i$$]==
$comment$jscomp$0$$){$parentArr$$.splice($i$$,1);break}$noComments$$.style.display=0==$listDiv$$.getElementsByTagName("div").length?"block":"none"},function($err$$){$showError$$($cdiv$$);$editorUi$$.handleError($err$$,null,null,null,mxUtils.htmlEntities(mxResources.get("objectNotFound")))})})},$comment$jscomp$0$$.isResolved));$readOnly$$||0!=$level$$||$addAction$$($comment$jscomp$0$$.isResolved?mxResources.get("reopen"):mxResources.get("resolve"),function($evt$$){function $doToggle$$(){var $resolveActionLnk$$=
$evt$$.target;$resolveActionLnk$$.innerHTML="";$comment$jscomp$0$$.isResolved=!$comment$jscomp$0$$.isResolved;mxUtils.write($resolveActionLnk$$,$comment$jscomp$0$$.isResolved?mxResources.get("reopen"):mxResources.get("resolve"));for(var $actionsDisplay$$=$comment$jscomp$0$$.isResolved?"none":"",$replies$$=$collectReplies$$($comment$jscomp$0$$).replies,$color$$="dark"==uiTheme?"transparent":$comment$jscomp$0$$.isResolved?"ghostWhite":"white",$i$$=0;$i$$<$replies$$.length;$i$$++){$replies$$[$i$$].style.backgroundColor=
$color$$;for(var $forOpenActions$$=$replies$$[$i$$].querySelectorAll(".geCommentAction"),$j$$=0;$j$$<$forOpenActions$$.length;$j$$++)$forOpenActions$$[$j$$]!=$resolveActionLnk$$.parentNode&&($forOpenActions$$[$j$$].style.display=$actionsDisplay$$);$resolvedChecked$$||($replies$$[$i$$].style.display="none")}$updateNoComments$$()}$comment$jscomp$0$$.isResolved?$addReply$$(mxResources.get("reOpened")+": ",!0,$doToggle$$,!1,!0):$addReply$$(mxResources.get("markedAsResolved"),!1,$doToggle$$,!0)});$cdiv$$.appendChild($actionsDiv$$);
null!=$i$jscomp$103_parent$$?$listDiv$$.insertBefore($cdiv$$,$i$jscomp$103_parent$$.nextSibling):$listDiv$$.appendChild($cdiv$$);for($i$jscomp$103_parent$$=0;null!=$comment$jscomp$0$$.replies&&$i$jscomp$103_parent$$<$comment$jscomp$0$$.replies.length;$i$jscomp$103_parent$$++)$actionsDiv$$=$comment$jscomp$0$$.replies[$i$jscomp$103_parent$$],$actionsDiv$$.isResolved=$comment$jscomp$0$$.isResolved,$addComment$$($actionsDiv$$,$comment$jscomp$0$$.replies,null,$level$$+1,$origContent_showResolved$$);null!=
$curEdited$$&&($curEdited$$.comment.id==$comment$jscomp$0$$.id?($origContent_showResolved$$=$comment$jscomp$0$$.content,$comment$jscomp$0$$.content=$curEdited$$.comment.content,$editComment$$($comment$jscomp$0$$,$cdiv$$,$curEdited$$.saveCallback,$curEdited$$.deleteOnCancel),$comment$jscomp$0$$.content=$origContent_showResolved$$):null==$curEdited$$.comment.id&&$curEdited$$.comment.pCommentId==$comment$jscomp$0$$.id&&($listDiv$$.appendChild($curEdited$$.div),$editComment$$($curEdited$$.comment,$curEdited$$.div,
$curEdited$$.saveCallback,$curEdited$$.deleteOnCancel)));return $cdiv$$}}var $readOnly$$=!$editorUi$$.canComment(),$canReplyToReplies$$=$editorUi$$.canReplyToReplies(),$curEdited$$=null,$div$jscomp$0$$=document.createElement("div");$div$jscomp$0$$.className="geCommentsWin";$div$jscomp$0$$.style.background="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor;var $link$$=EditorUi.compactUi?"26px":"30px",$listDiv$$=document.createElement("div");$listDiv$$.className="geCommentsList";$listDiv$$.style.backgroundColor=
"white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor;$listDiv$$.style.bottom=parseInt($link$$)+7+"px";$div$jscomp$0$$.appendChild($listDiv$$);var $noComments$$=document.createElement("span");$noComments$$.style.cssText="display:none;padding-top:10px;text-align:center;";mxUtils.write($noComments$$,mxResources.get("noCommentsFound"));var $ldiv_refreshCommentsTime$$=document.createElement("div");$ldiv_refreshCommentsTime$$.className="geToolbarContainer geCommentsToolbar";$ldiv_refreshCommentsTime$$.style.height=
$link$$;$ldiv_refreshCommentsTime$$.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px";$ldiv_refreshCommentsTime$$.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor;mxClient.IS_QUIRKS&&($ldiv_refreshCommentsTime$$.style.filter="none");$link$$=document.createElement("a");$link$$.className="geButton";mxClient.IS_QUIRKS&&($link$$.style.filter="none");if(!$readOnly$$){var $addLink_refreshLink_resolvedLink$$=$link$$.cloneNode();$addLink_refreshLink_resolvedLink$$.innerHTML=
'<div class="geSprite geSprite-plus" style="display:inline-block;"></div>';$addLink_refreshLink_resolvedLink$$.setAttribute("title",mxResources.get("create")+"...");mxEvent.addListener($addLink_refreshLink_resolvedLink$$,"click",function($evt$$){function $doAddComment$$(){$editComment$$($newComment$$,$newCommentDiv$$,function($newComment$$){$showBusy$$($newCommentDiv$$);$editorUi$$.addComment($newComment$$,function($id$$){$newComment$$.id=$id$$;$comments$$.push($newComment$$);$showDone$$($newCommentDiv$$)},
function($err$$){$showError$$($newCommentDiv$$);$doAddComment$$();$editorUi$$.handleError($err$$,null,null,null,mxUtils.htmlEntities(mxResources.get("objectNotFound")))})},!0)}var $newComment$$=$editorUi$$.newComment("",$editorUi$$.getCurrentUser()),$newCommentDiv$$=$addComment$$($newComment$$,$comments$$,null,0);$doAddComment$$();$evt$$.preventDefault();mxEvent.consume($evt$$)});$ldiv_refreshCommentsTime$$.appendChild($addLink_refreshLink_resolvedLink$$)}$addLink_refreshLink_resolvedLink$$=$link$$.cloneNode();
$addLink_refreshLink_resolvedLink$$.innerHTML='<img src="/images/check.png" style="width: 16px; padding: 2px;">';$addLink_refreshLink_resolvedLink$$.setAttribute("title",mxResources.get("showResolved"));var $resolvedChecked$$=!1;"dark"==uiTheme&&($addLink_refreshLink_resolvedLink$$.style.filter="invert(100%)");mxEvent.addListener($addLink_refreshLink_resolvedLink$$,"click",function($evt$$){this.className=($resolvedChecked$$=!$resolvedChecked$$)?"geButton geCheckedBtn":"geButton";$refresh$$();$evt$$.preventDefault();
mxEvent.consume($evt$$)});$ldiv_refreshCommentsTime$$.appendChild($addLink_refreshLink_resolvedLink$$);$editorUi$$.commentsRefreshNeeded()&&($addLink_refreshLink_resolvedLink$$=$link$$.cloneNode(),$addLink_refreshLink_resolvedLink$$.innerHTML='<img src="/images/update16.png" style="width: 16px; padding: 2px;">',$addLink_refreshLink_resolvedLink$$.setAttribute("title",mxResources.get("refresh")),"dark"==uiTheme&&($addLink_refreshLink_resolvedLink$$.style.filter="invert(100%)"),mxEvent.addListener($addLink_refreshLink_resolvedLink$$,
"click",function($evt$$){$refresh$$();$evt$$.preventDefault();mxEvent.consume($evt$$)}),$ldiv_refreshCommentsTime$$.appendChild($addLink_refreshLink_resolvedLink$$));$editorUi$$.commentsSaveNeeded()&&($link$$=$link$$.cloneNode(),$link$$.innerHTML='<img src="/images/save.png" style="width: 20px; padding: 2px;">',$link$$.setAttribute("title",mxResources.get("save")),"dark"==uiTheme&&($link$$.style.filter="invert(100%)"),mxEvent.addListener($link$$,"click",function($evt$$){$saveCallback$$();$evt$$.preventDefault();
mxEvent.consume($evt$$)}),$ldiv_refreshCommentsTime$$.appendChild($link$$));$div$jscomp$0$$.appendChild($ldiv_refreshCommentsTime$$);var $comments$$=[],$refresh$$=mxUtils.bind(this,function(){if(null!=$curEdited$$){$curEdited$$.div=$curEdited$$.div.cloneNode(!0);var $commentEditTxt$$=$curEdited$$.div.querySelector(".geCommentEditTxtArea"),$commentEditBtns$$=$curEdited$$.div.querySelector(".geCommentEditBtns");$curEdited$$.comment.content=$commentEditTxt$$.value;$commentEditTxt$$.parentNode.removeChild($commentEditTxt$$);
$commentEditBtns$$.parentNode.removeChild($commentEditBtns$$)}$listDiv$$.innerHTML='<div style="padding-top:10px;text-align:center;"><img src="/images/spin.gif" valign="middle"> '+mxUtils.htmlEntities(mxResources.get("loading"))+"...</div>";$canReplyToReplies$$=$editorUi$$.canReplyToReplies();$editorUi$$.commentsSupported()?$editorUi$$.getComments(function($i$jscomp$107_list$$){function $sortReplies$$($replies$$){if(null!=$replies$$){$replies$$.sort(function($r1$$,$r2$$){return new Date($r1$$.modifiedDate)-
new Date($r2$$.modifiedDate)});for(var $i$$=0;$i$$<$replies$$.length;$i$$++)$sortReplies$$($replies$$[$i$$].replies)}}$i$jscomp$107_list$$.sort(function($c1$$,$c2$$){return new Date($c1$$.modifiedDate)-new Date($c2$$.modifiedDate)});$listDiv$$.innerHTML="";$listDiv$$.appendChild($noComments$$);$noComments$$.style.display="block";$comments$$=$i$jscomp$107_list$$;for($i$jscomp$107_list$$=0;$i$jscomp$107_list$$<$comments$$.length;$i$jscomp$107_list$$++)$sortReplies$$($comments$$[$i$jscomp$107_list$$].replies),
$addComment$$($comments$$[$i$jscomp$107_list$$],$comments$$,null,0,$resolvedChecked$$);null!=$curEdited$$&&null==$curEdited$$.comment.id&&null==$curEdited$$.comment.pCommentId&&($listDiv$$.appendChild($curEdited$$.div),$editComment$$($curEdited$$.comment,$curEdited$$.div,$curEdited$$.saveCallback,$curEdited$$.deleteOnCancel))},function(){$listDiv$$.innerHTML=mxUtils.htmlEntities(mxResources.get("error"))}):$listDiv$$.innerHTML=mxUtils.htmlEntities(mxResources.get("error"))});$refresh$$();this.refreshComments=
$refresh$$;$ldiv_refreshCommentsTime$$=mxUtils.bind(this,function(){function $processComment$$($comment$$){var $div$jscomp$53_i$$=$modDateDivsMap$$[$comment$$.id];if(null!=$div$jscomp$53_i$$)for($writeCommentDate$$($comment$$,$div$jscomp$53_i$$),$div$jscomp$53_i$$=0;null!=$comment$$.replies&&$div$jscomp$53_i$$<$comment$$.replies.length;$div$jscomp$53_i$$++)$processComment$$($comment$$.replies[$div$jscomp$53_i$$])}if(this.window.isVisible()){for(var $modDateDivs$$=$listDiv$$.querySelectorAll(".geCommentDate"),
$modDateDivsMap$$={},$i$$=0;$i$$<$modDateDivs$$.length;$i$$++){var $div$$=$modDateDivs$$[$i$$];$modDateDivsMap$$[$div$$.getAttribute("data-commentId")]=$div$$}for($i$$=0;$i$$<$comments$$.length;$i$$++)$processComment$$($comments$$[$i$$])}});setInterval($ldiv_refreshCommentsTime$$,6E4);this.refreshCommentsTime=$ldiv_refreshCommentsTime$$;this.window=new mxWindow(mxResources.get("comments"),$div$jscomp$0$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$,!0,!0);this.window.minimumSize=new mxRectangle(0,0,300,
200);this.window.destroyOnClose=!1;this.window.setMaximizable(!1);this.window.setResizable(!0);this.window.setClosable(!0);this.window.setVisible(!0);this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()}));this.window.setLocation=function $this$window$setLocation$($x$$,$y$$){var $ih$$=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;$x$$=Math.max(0,Math.min($x$$,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-
this.table.clientWidth));$y$$=Math.max(0,Math.min($y$$,$ih$$-this.table.clientHeight-48));this.getX()==$x$$&&this.getY()==$y$$||mxWindow.prototype.setLocation.apply(this,arguments)};var $resizeListener$$=mxUtils.bind(this,function(){var $x$$=this.window.getX(),$y$$=this.window.getY();this.window.setLocation($x$$,$y$$)});mxEvent.addListener(window,"resize",$resizeListener$$);this.destroy=function $this$destroy$(){mxEvent.removeListener(window,"resize",$resizeListener$$);this.window.destroy()}},ConfirmDialog=
function $ConfirmDialog$($editorUi$$,$img$jscomp$47_message$$,$okFn$$,$cancelFn$$,$okLabel$jscomp$1_span$$,$cancelBtn$jscomp$19_cancelLabel$$,$okImg$$,$cancelImg$$,$showRememberOption$$,$btns$$){var $div$$=document.createElement("div");$div$$.style.textAlign="center";var $p2$jscomp$4_p3$$=document.createElement("div");$p2$jscomp$4_p3$$.style.padding="6px";$p2$jscomp$4_p3$$.style.overflow="auto";$p2$jscomp$4_p3$$.style.maxHeight="44px";$p2$jscomp$4_p3$$.style.lineHeight="1.2em";mxClient.IS_QUIRKS&&
($p2$jscomp$4_p3$$.style.height="60px");mxUtils.write($p2$jscomp$4_p3$$,$img$jscomp$47_message$$);$div$$.appendChild($p2$jscomp$4_p3$$);null!=$btns$$&&($p2$jscomp$4_p3$$=document.createElement("div"),$p2$jscomp$4_p3$$.style.padding="6px 0 6px 0",$img$jscomp$47_message$$=document.createElement("img"),$img$jscomp$47_message$$.setAttribute("src",$btns$$),$p2$jscomp$4_p3$$.appendChild($img$jscomp$47_message$$),$div$$.appendChild($p2$jscomp$4_p3$$));$btns$$=document.createElement("div");$btns$$.style.textAlign=
"center";$btns$$.style.whiteSpace="nowrap";var $cb$$=document.createElement("input");$cb$$.setAttribute("type","checkbox");$cancelBtn$jscomp$19_cancelLabel$$=mxUtils.button($cancelBtn$jscomp$19_cancelLabel$$||mxResources.get("cancel"),function(){$editorUi$$.hideDialog();null!=$cancelFn$$&&$cancelFn$$($cb$$.checked)});$cancelBtn$jscomp$19_cancelLabel$$.className="geBtn";null!=$cancelImg$$&&($cancelBtn$jscomp$19_cancelLabel$$.innerHTML=$cancelImg$$+"<br>"+$cancelBtn$jscomp$19_cancelLabel$$.innerHTML,
$cancelBtn$jscomp$19_cancelLabel$$.style.paddingBottom="8px",$cancelBtn$jscomp$19_cancelLabel$$.style.paddingTop="8px",$cancelBtn$jscomp$19_cancelLabel$$.style.height="auto",$cancelBtn$jscomp$19_cancelLabel$$.style.width="40%");$editorUi$$.editor.cancelFirst&&$btns$$.appendChild($cancelBtn$jscomp$19_cancelLabel$$);var $okBtn$$=mxUtils.button($okLabel$jscomp$1_span$$||mxResources.get("ok"),function(){$editorUi$$.hideDialog();null!=$okFn$$&&$okFn$$($cb$$.checked)});$btns$$.appendChild($okBtn$$);null!=
$okImg$$?($okBtn$$.innerHTML=$okImg$$+"<br>"+$okBtn$$.innerHTML+"<br>",$okBtn$$.style.paddingBottom="8px",$okBtn$$.style.paddingTop="8px",$okBtn$$.style.height="auto",$okBtn$$.className="geBtn",$okBtn$$.style.width="40%"):$okBtn$$.className="geBtn gePrimaryBtn";$editorUi$$.editor.cancelFirst||$btns$$.appendChild($cancelBtn$jscomp$19_cancelLabel$$);$div$$.appendChild($btns$$);$showRememberOption$$?($btns$$.style.marginTop="10px",$p2$jscomp$4_p3$$=document.createElement("p"),$p2$jscomp$4_p3$$.style.marginTop=
"20px",$p2$jscomp$4_p3$$.appendChild($cb$$),$okLabel$jscomp$1_span$$=document.createElement("span"),mxUtils.write($okLabel$jscomp$1_span$$," "+mxResources.get("rememberThisSetting")),$p2$jscomp$4_p3$$.appendChild($okLabel$jscomp$1_span$$),$div$$.appendChild($p2$jscomp$4_p3$$),mxEvent.addListener($okLabel$jscomp$1_span$$,"click",function($evt$$){$cb$$.checked=!$cb$$.checked;mxEvent.consume($evt$$)})):$btns$$.style.marginTop="12px";this.init=function $this$init$(){$okBtn$$.focus()};this.container=$div$$};EditorUi.DIFF_INSERT="i";EditorUi.DIFF_REMOVE="r";EditorUi.DIFF_UPDATE="u";EditorUi.prototype.codec=new mxCodec;EditorUi.prototype.viewStateProperties={background:!0,backgroundImage:!0,shadowVisible:!0,foldingEnabled:!0,pageScale:!0,mathEnabled:!0,pageFormat:!0};EditorUi.prototype.cellProperties={id:!0,value:!0,xmlValue:!0,vertex:!0,edge:!0,visible:!0,collapsed:!0,connectable:!0,parent:!0,children:!0,previous:!0,source:!0,target:!0,edges:!0,geometry:!0,style:!0,mxObjectId:!0,mxTransient:!0};
EditorUi.prototype.patchPages=function $EditorUi$$patchPages$($pages$$,$diff$$,$markPages$$,$i$jscomp$111_pageDiff_resolver$$,$updateEdgeParents$$){var $resolverLookup$$={},$newPages$$=[],$inserted$$={},$removed$$={},$lookup$$={},$moved$$={};if(null!=$i$jscomp$111_pageDiff_resolver$$&&null!=$i$jscomp$111_pageDiff_resolver$$[EditorUi.DIFF_UPDATE])for(var $id$jscomp$0$$ in $i$jscomp$111_pageDiff_resolver$$[EditorUi.DIFF_UPDATE])$resolverLookup$$[$id$jscomp$0$$]=$i$jscomp$111_pageDiff_resolver$$[EditorUi.DIFF_UPDATE][$id$jscomp$0$$];
if(null!=$diff$$[EditorUi.DIFF_REMOVE])for($i$jscomp$111_pageDiff_resolver$$=0;$i$jscomp$111_pageDiff_resolver$$<$diff$$[EditorUi.DIFF_REMOVE].length;$i$jscomp$111_pageDiff_resolver$$++)$removed$$[$diff$$[EditorUi.DIFF_REMOVE][$i$jscomp$111_pageDiff_resolver$$]]=!0;if(null!=$diff$$[EditorUi.DIFF_INSERT])for($i$jscomp$111_pageDiff_resolver$$=0;$i$jscomp$111_pageDiff_resolver$$<$diff$$[EditorUi.DIFF_INSERT].length;$i$jscomp$111_pageDiff_resolver$$++)$inserted$$[$diff$$[EditorUi.DIFF_INSERT][$i$jscomp$111_pageDiff_resolver$$].previous]=
$diff$$[EditorUi.DIFF_INSERT][$i$jscomp$111_pageDiff_resolver$$];if(null!=$diff$$[EditorUi.DIFF_UPDATE])for($id$jscomp$0$$ in $diff$$[EditorUi.DIFF_UPDATE])$i$jscomp$111_pageDiff_resolver$$=$diff$$[EditorUi.DIFF_UPDATE][$id$jscomp$0$$],null!=$i$jscomp$111_pageDiff_resolver$$.previous&&($moved$$[$i$jscomp$111_pageDiff_resolver$$.previous]=$id$jscomp$0$$);if(null!=$pages$$){var $prev$$="";for($i$jscomp$111_pageDiff_resolver$$=0;$i$jscomp$111_pageDiff_resolver$$<$pages$$.length;$i$jscomp$111_pageDiff_resolver$$++){var $pageId$$=
$pages$$[$i$jscomp$111_pageDiff_resolver$$].getId();$lookup$$[$pageId$$]=$pages$$[$i$jscomp$111_pageDiff_resolver$$];null!=$moved$$[$prev$$]||$removed$$[$pageId$$]||null!=$diff$$[EditorUi.DIFF_UPDATE]&&null!=$diff$$[EditorUi.DIFF_UPDATE][$pageId$$]&&null!=$diff$$[EditorUi.DIFF_UPDATE][$pageId$$].previous||($moved$$[$prev$$]=$pageId$$);$prev$$=$pageId$$}}var $added$$={},$addPage$$=mxUtils.bind(this,function($ins_mov_page$$){var $id$$=null!=$ins_mov_page$$?$ins_mov_page$$.getId():"";if(null!=$ins_mov_page$$&&
!$added$$[$id$$]){$added$$[$id$$]=!0;$newPages$$.push($ins_mov_page$$);var $pageDiff$$=null!=$diff$$[EditorUi.DIFF_UPDATE]?$diff$$[EditorUi.DIFF_UPDATE][$id$$]:null;null!=$pageDiff$$&&(this.updatePageRoot($ins_mov_page$$),null!=$pageDiff$$.name&&$ins_mov_page$$.setName($pageDiff$$.name),null!=$pageDiff$$.view&&this.patchViewState($ins_mov_page$$,$pageDiff$$.view),null!=$pageDiff$$.cells&&this.patchPage($ins_mov_page$$,$pageDiff$$.cells,$resolverLookup$$[$ins_mov_page$$.getId()],$updateEdgeParents$$),
!$markPages$$||null==$pageDiff$$.cells&&null==$pageDiff$$.view||($ins_mov_page$$.needsUpdate=!0))}$ins_mov_page$$=$moved$$[$id$$];null!=$ins_mov_page$$&&(delete $moved$$[$id$$],$addPage$$($lookup$$[$ins_mov_page$$]));$ins_mov_page$$=$inserted$$[$id$$];null!=$ins_mov_page$$&&(delete $inserted$$[$id$$],$insertPage$$($ins_mov_page$$))}),$insertPage$$=mxUtils.bind(this,function($diagram$jscomp$3_ins$$){$diagram$jscomp$3_ins$$=mxUtils.parseXml($diagram$jscomp$3_ins$$.data).documentElement;$diagram$jscomp$3_ins$$=
new DiagramPage($diagram$jscomp$3_ins$$);this.updatePageRoot($diagram$jscomp$3_ins$$);var $page$$=$lookup$$[$diagram$jscomp$3_ins$$.getId()];null==$page$$?$addPage$$($diagram$jscomp$3_ins$$):($page$$.root=$diagram$jscomp$3_ins$$.root,this.currentPage==$page$$?this.editor.graph.model.setRoot($page$$.root):$markPages$$&&($page$$.needsUpdate=!0))});$addPage$$();for($id$jscomp$0$$ in $moved$$)$addPage$$($lookup$$[$moved$$[$id$jscomp$0$$]]),delete $moved$$[$id$jscomp$0$$];for($id$jscomp$0$$ in $inserted$$)$insertPage$$($inserted$$[$id$jscomp$0$$]),
delete $inserted$$[$id$jscomp$0$$];return $newPages$$};EditorUi.prototype.patchViewState=function $EditorUi$$patchViewState$($page$$,$diff$$){if(null!=$page$$.viewState&&null!=$diff$$){$page$$==this.currentPage&&($page$$.viewState=this.editor.graph.getViewState());for(var $key$$ in $diff$$)$page$$.viewState[$key$$]=JSON.parse($diff$$[$key$$]);$page$$==this.currentPage&&this.editor.graph.setViewState($page$$.viewState)}};
EditorUi.prototype.createParentLookup=function $EditorUi$$createParentLookup$($model$$,$diff$$){function $getLookup$$($id$$){var $result$$=$parentLookup$$[$id$$];null==$result$$&&($result$$={inserted:[],moved:{}},$parentLookup$$[$id$$]=$result$$);return $result$$}var $parentLookup$$={};if(null!=$diff$$[EditorUi.DIFF_INSERT])for(var $cell$jscomp$18_i$jscomp$112_parent$$=0;$cell$jscomp$18_i$jscomp$112_parent$$<$diff$$[EditorUi.DIFF_INSERT].length;$cell$jscomp$18_i$jscomp$112_parent$$++){var $temp$$=
$diff$$[EditorUi.DIFF_INSERT][$cell$jscomp$18_i$jscomp$112_parent$$],$par$$=null!=$temp$$.parent?$temp$$.parent:"",$prev$$=null!=$temp$$.previous?$temp$$.previous:"";$getLookup$$($par$$).inserted[$prev$$]=$temp$$}if(null!=$diff$$[EditorUi.DIFF_UPDATE])for(var $id$jscomp$0$$ in $diff$$[EditorUi.DIFF_UPDATE])$temp$$=$diff$$[EditorUi.DIFF_UPDATE][$id$jscomp$0$$],null!=$temp$$.previous&&($par$$=$temp$$.parent,null==$par$$&&($cell$jscomp$18_i$jscomp$112_parent$$=$model$$.getCell($id$jscomp$0$$),null!=
$cell$jscomp$18_i$jscomp$112_parent$$&&($cell$jscomp$18_i$jscomp$112_parent$$=$model$$.getParent($cell$jscomp$18_i$jscomp$112_parent$$),null!=$cell$jscomp$18_i$jscomp$112_parent$$&&($par$$=$cell$jscomp$18_i$jscomp$112_parent$$.getId()))),null!=$par$$&&($getLookup$$($par$$).moved[$temp$$.previous]=$id$jscomp$0$$));return $parentLookup$$};
EditorUi.prototype.patchPage=function $EditorUi$$patchPage$($page$$,$diff$$,$resolver$$,$updateEdgeParents$$){var $model$$=$page$$==this.currentPage?this.editor.graph.model:new mxGraphModel($page$$.root),$parentLookup$$=this.createParentLookup($model$$,$diff$$);$model$$.beginUpdate();try{var $prev$$=$model$$.updateEdgeParent,$dict$$=new mxDictionary,$pendingUpdates$$=[];$model$$.updateEdgeParent=function $$model$$$updateEdgeParent$($edge$$,$root$$){!$dict$$.get($edge$$)&&$updateEdgeParents$$&&($dict$$.put($edge$$,
!0),$pendingUpdates$$.push($edge$$))};var $temp$$=$parentLookup$$[""],$cellDiff$$=null!=$temp$$&&null!=$temp$$.inserted?$temp$$.inserted[""]:null,$root$jscomp$0$$=null;null!=$cellDiff$$&&($root$jscomp$0$$=this.getCellForJson($cellDiff$$));if(null==$root$jscomp$0$$){var $id$$=null!=$temp$$&&null!=$temp$$.moved?$temp$$.moved[""]:null;null!=$id$$&&($root$jscomp$0$$=$model$$.getCell($id$$))}null!=$root$jscomp$0$$&&($model$$.setRoot($root$jscomp$0$$),$page$$.root=$root$jscomp$0$$);this.patchCellRecursive($page$$,
$model$$,$model$$.root,$parentLookup$$,$diff$$);if(null!=$diff$$[EditorUi.DIFF_REMOVE])for(var $i$$=0;$i$$<$diff$$[EditorUi.DIFF_REMOVE].length;$i$$++){var $cell$$=$model$$.getCell($diff$$[EditorUi.DIFF_REMOVE][$i$$]);null!=$cell$$&&$model$$.remove($cell$$)}if(null!=$diff$$[EditorUi.DIFF_UPDATE]){var $res$$=null!=$resolver$$&&null!=$resolver$$.cells?$resolver$$.cells[EditorUi.DIFF_UPDATE]:null;for($id$$ in $diff$$[EditorUi.DIFF_UPDATE])this.patchCell($model$$,$model$$.getCell($id$$),$diff$$[EditorUi.DIFF_UPDATE][$id$$],
null!=$res$$?$res$$[$id$$]:null)}if(null!=$diff$$[EditorUi.DIFF_INSERT])for($i$$=0;$i$$<$diff$$[EditorUi.DIFF_INSERT].length;$i$$++)$cellDiff$$=$diff$$[EditorUi.DIFF_INSERT][$i$$],$cell$$=$model$$.getCell($cellDiff$$.id),null!=$cell$$&&($model$$.setTerminal($cell$$,$model$$.getCell($cellDiff$$.source),!0),$model$$.setTerminal($cell$$,$model$$.getCell($cellDiff$$.target),!1));$model$$.updateEdgeParent=$prev$$;if($updateEdgeParents$$&&0<$pendingUpdates$$.length)for($i$$=0;$i$$<$pendingUpdates$$.length;$i$$++)$model$$.contains($pendingUpdates$$[$i$$])&&
$model$$.updateEdgeParent($pendingUpdates$$[$i$$])}finally{$model$$.endUpdate()}};
EditorUi.prototype.patchCellRecursive=function $EditorUi$$patchCellRecursive$($page$$,$model$$,$cell$$,$parentLookup$$,$diff$$){if(null!=$cell$$){for(var $moved$jscomp$1_temp$$=$parentLookup$$[$cell$$.getId()],$inserted$$=null!=$moved$jscomp$1_temp$$&&null!=$moved$jscomp$1_temp$$.inserted?$moved$jscomp$1_temp$$.inserted:{},$moved$jscomp$1_temp$$=null!=$moved$jscomp$1_temp$$&&null!=$moved$jscomp$1_temp$$.moved?$moved$jscomp$1_temp$$.moved:{},$index$$=0,$addCell_childCount$$=$model$$.getChildCount($cell$$),
$children_prev$$="",$entry$jscomp$10_i$jscomp$114_id$$=0;$entry$jscomp$10_i$jscomp$114_id$$<$addCell_childCount$$;$entry$jscomp$10_i$jscomp$114_id$$++){var $cellId$jscomp$1_ins$jscomp$2_mov$$=$model$$.getChildAt($cell$$,$entry$jscomp$10_i$jscomp$114_id$$).getId();null==$moved$jscomp$1_temp$$[$children_prev$$]&&(null==$diff$$[EditorUi.DIFF_UPDATE]||null==$diff$$[EditorUi.DIFF_UPDATE][$cellId$jscomp$1_ins$jscomp$2_mov$$]||null==$diff$$[EditorUi.DIFF_UPDATE][$cellId$jscomp$1_ins$jscomp$2_mov$$].previous&&
null==$diff$$[EditorUi.DIFF_UPDATE][$cellId$jscomp$1_ins$jscomp$2_mov$$].parent)&&($moved$jscomp$1_temp$$[$children_prev$$]=$cellId$jscomp$1_ins$jscomp$2_mov$$);$children_prev$$=$cellId$jscomp$1_ins$jscomp$2_mov$$}$addCell_childCount$$=mxUtils.bind(this,function($child$$,$insert$$){var $id$$=null!=$child$$?$child$$.getId():"";if(null!=$child$$&&$insert$$){var $ex$$=$model$$.getCell($id$$);null!=$ex$$&&$ex$$!=$child$$&&($child$$=null)}null!=$child$$&&($model$$.getChildAt($cell$$,$index$$)!=$child$$&&
$model$$.add($cell$$,$child$$,$index$$),this.patchCellRecursive($page$$,$model$$,$child$$,$parentLookup$$,$diff$$),$index$$++);return $id$$});for($children_prev$$=[null];0<$children_prev$$.length;)if($entry$jscomp$10_i$jscomp$114_id$$=$children_prev$$.shift(),$entry$jscomp$10_i$jscomp$114_id$$=$addCell_childCount$$(null!=$entry$jscomp$10_i$jscomp$114_id$$?$entry$jscomp$10_i$jscomp$114_id$$.child:null,null!=$entry$jscomp$10_i$jscomp$114_id$$?$entry$jscomp$10_i$jscomp$114_id$$.insert:!1),$cellId$jscomp$1_ins$jscomp$2_mov$$=
$moved$jscomp$1_temp$$[$entry$jscomp$10_i$jscomp$114_id$$],null!=$cellId$jscomp$1_ins$jscomp$2_mov$$&&(delete $moved$jscomp$1_temp$$[$entry$jscomp$10_i$jscomp$114_id$$],$children_prev$$.push({child:$model$$.getCell($cellId$jscomp$1_ins$jscomp$2_mov$$)})),$cellId$jscomp$1_ins$jscomp$2_mov$$=$inserted$$[$entry$jscomp$10_i$jscomp$114_id$$],null!=$cellId$jscomp$1_ins$jscomp$2_mov$$&&(delete $inserted$$[$entry$jscomp$10_i$jscomp$114_id$$],$children_prev$$.push({child:this.getCellForJson($cellId$jscomp$1_ins$jscomp$2_mov$$),
insert:!0})),0==$children_prev$$.length){for($entry$jscomp$10_i$jscomp$114_id$$ in $moved$jscomp$1_temp$$)$children_prev$$.push({child:$model$$.getCell($moved$jscomp$1_temp$$[$entry$jscomp$10_i$jscomp$114_id$$])}),delete $moved$jscomp$1_temp$$[$entry$jscomp$10_i$jscomp$114_id$$];for($entry$jscomp$10_i$jscomp$114_id$$ in $inserted$$)$children_prev$$.push({child:this.getCellForJson($inserted$$[$entry$jscomp$10_i$jscomp$114_id$$]),insert:!0}),delete $inserted$$[$entry$jscomp$10_i$jscomp$114_id$$]}}};
EditorUi.prototype.patchCell=function $EditorUi$$patchCell$($model$$,$cell$$,$diff$$,$resolve$$){if(null!=$cell$$&&null!=$diff$$){if(null==$resolve$$||null==$resolve$$.xmlValue&&(null==$resolve$$.value||""==$resolve$$.value))"value"in $diff$$?$model$$.setValue($cell$$,$diff$$.value):null!=$diff$$.xmlValue&&$model$$.setValue($cell$$,mxUtils.parseXml($diff$$.xmlValue).documentElement);null!=$resolve$$&&null!=$resolve$$.style||null==$diff$$.style||$model$$.setStyle($cell$$,$diff$$.style);null!=$diff$$.visible&&
$model$$.setVisible($cell$$,1==$diff$$.visible);null!=$diff$$.collapsed&&$model$$.setCollapsed($cell$$,1==$diff$$.collapsed);null!=$diff$$.vertex&&($cell$$.vertex=1==$diff$$.vertex);null!=$diff$$.edge&&($cell$$.edge=1==$diff$$.edge);null!=$diff$$.connectable&&($cell$$.connectable=1==$diff$$.connectable);null!=$diff$$.geometry&&$model$$.setGeometry($cell$$,this.codec.decode(mxUtils.parseXml($diff$$.geometry).documentElement));null!=$diff$$.source&&$model$$.setTerminal($cell$$,$model$$.getCell($diff$$.source),
!0);null!=$diff$$.target&&$model$$.setTerminal($cell$$,$model$$.getCell($diff$$.target),!1);for(var $key$$ in $diff$$)this.cellProperties[$key$$]||($cell$$[$key$$]=$diff$$[$key$$])}};
EditorUi.prototype.getPagesForNode=function $EditorUi$$getPagesForNode$($node$$,$nodeName$$){var $diagrams$jscomp$6_tmp$$=this.editor.extractGraphModel($node$$,!0);null!=$diagrams$jscomp$6_tmp$$&&($node$$=$diagrams$jscomp$6_tmp$$);var $diagrams$jscomp$6_tmp$$=$node$$.getElementsByTagName($nodeName$$||"diagram"),$pages$$=[];if(0<$diagrams$jscomp$6_tmp$$.length)for(var $i$$=0;$i$$<$diagrams$jscomp$6_tmp$$.length;$i$$++){var $page$$=new DiagramPage($diagrams$jscomp$6_tmp$$[$i$$]);this.updatePageRoot($page$$);
$pages$$.push($page$$)}else"mxGraphModel"==$node$$.nodeName&&($page$$=new DiagramPage($node$$.ownerDocument.createElement("diagram")),$page$$.setName(mxResources.get("pageWithNumber",[1])),mxUtils.setTextContent($page$$.node,Graph.compressNode($node$$)),$pages$$.push($page$$));return $pages$$};
EditorUi.prototype.diffPages=function $EditorUi$$diffPages$($oldPages$$,$newPages$$){for(var $inserted$$=[],$removed$$=[],$result$$={},$lookup$$={},$diff$$={},$prev$$=null,$i$$=0;$i$$<$newPages$$.length;$i$$++)$lookup$$[$newPages$$[$i$$].getId()]={page:$newPages$$[$i$$],prev:$prev$$},$prev$$=$newPages$$[$i$$];$prev$$=null;for($i$$=0;$i$$<$oldPages$$.length;$i$$++){var $id$$=$oldPages$$[$i$$].getId(),$newPage$$=$lookup$$[$id$$];if(null==$newPage$$)$removed$$.push($id$$);else{var $temp$jscomp$17_view$$=
this.diffPage($oldPages$$[$i$$],$newPage$$.page),$pageDiff$$={};0<Object.keys($temp$jscomp$17_view$$).length&&($pageDiff$$.cells=$temp$jscomp$17_view$$);$temp$jscomp$17_view$$=this.diffViewState($oldPages$$[$i$$],$newPage$$.page);0<Object.keys($temp$jscomp$17_view$$).length&&($pageDiff$$.view=$temp$jscomp$17_view$$);if((null!=$newPage$$.prev?null==$prev$$:null!=$prev$$)||null!=$prev$$&&null!=$newPage$$.prev&&$prev$$.getId()!=$newPage$$.prev.getId())$pageDiff$$.previous=null!=$newPage$$.prev?$newPage$$.prev.getId():
"";null!=$newPage$$.page.getName()&&$oldPages$$[$i$$].getName()!=$newPage$$.page.getName()&&($pageDiff$$.name=$newPage$$.page.getName());0<Object.keys($pageDiff$$).length&&($diff$$[$id$$]=$pageDiff$$)}delete $lookup$$[$oldPages$$[$i$$].getId()];$prev$$=$oldPages$$[$i$$]}for($id$$ in $lookup$$)$newPage$$=$lookup$$[$id$$],$inserted$$.push({data:mxUtils.getXml($newPage$$.page.node),previous:null!=$newPage$$.prev?$newPage$$.prev.getId():""});0<Object.keys($diff$$).length&&($result$$[EditorUi.DIFF_UPDATE]=
$diff$$);0<$removed$$.length&&($result$$[EditorUi.DIFF_REMOVE]=$removed$$);0<$inserted$$.length&&($result$$[EditorUi.DIFF_INSERT]=$inserted$$);return $result$$};
EditorUi.prototype.createCellLookup=function $EditorUi$$createCellLookup$($cell$$,$prev$$,$lookup$$){$lookup$$=null!=$lookup$$?$lookup$$:{};$lookup$$[$cell$$.getId()]={cell:$cell$$,prev:$prev$$};var $childCount$$=$cell$$.getChildCount();$prev$$=null;for(var $i$$=0;$i$$<$childCount$$;$i$$++){var $child$$=$cell$$.getChildAt($i$$);this.createCellLookup($child$$,$prev$$,$lookup$$);$prev$$=$child$$}return $lookup$$};
EditorUi.prototype.diffCellRecursive=function $EditorUi$$diffCellRecursive$($cell$$,$prev$$,$lookup$$,$diff$$,$removed$$){$diff$$=null!=$diff$$?$diff$$:{};var $childCount$jscomp$4_newCell$$=$lookup$$[$cell$$.getId()];delete $lookup$$[$cell$$.getId()];if(null==$childCount$jscomp$4_newCell$$)$removed$$.push($cell$$.getId());else{var $i$jscomp$118_temp$$=this.diffCell($cell$$,$childCount$jscomp$4_newCell$$.cell);if(null!=$i$jscomp$118_temp$$.parent||(null!=$childCount$jscomp$4_newCell$$.prev?null==$prev$$:
null!=$prev$$)||null!=$prev$$&&null!=$childCount$jscomp$4_newCell$$.prev&&$prev$$.getId()!=$childCount$jscomp$4_newCell$$.prev.getId())$i$jscomp$118_temp$$.previous=null!=$childCount$jscomp$4_newCell$$.prev?$childCount$jscomp$4_newCell$$.prev.getId():"";0<Object.keys($i$jscomp$118_temp$$).length&&($diff$$[$cell$$.getId()]=$i$jscomp$118_temp$$)}$childCount$jscomp$4_newCell$$=$cell$$.getChildCount();$prev$$=null;for($i$jscomp$118_temp$$=0;$i$jscomp$118_temp$$<$childCount$jscomp$4_newCell$$;$i$jscomp$118_temp$$++){var $child$$=
$cell$$.getChildAt($i$jscomp$118_temp$$);this.diffCellRecursive($child$$,$prev$$,$lookup$$,$diff$$,$removed$$);$prev$$=$child$$}return $diff$$};
EditorUi.prototype.diffPage=function $EditorUi$$diffPage$($oldPage$$,$newPage$$){var $inserted$$=[],$removed$$=[],$result$$={};this.updatePageRoot($oldPage$$);this.updatePageRoot($newPage$$);var $lookup$$=this.createCellLookup($newPage$$.root),$diff$$=this.diffCellRecursive($oldPage$$.root,null,$lookup$$,$diff$$,$removed$$),$id$$;for($id$$ in $lookup$$){var $newCell$$=$lookup$$[$id$$];$inserted$$.push(this.getJsonForCell($newCell$$.cell,$newCell$$.prev))}0<Object.keys($diff$$).length&&($result$$[EditorUi.DIFF_UPDATE]=
$diff$$);0<$removed$$.length&&($result$$[EditorUi.DIFF_REMOVE]=$removed$$);0<$inserted$$.length&&($result$$[EditorUi.DIFF_INSERT]=$inserted$$);return $result$$};
EditorUi.prototype.diffViewState=function $EditorUi$$diffViewState$($oldPage$$,$newPage$$){var $source$$=$oldPage$$.viewState,$target$$=$newPage$$.viewState,$result$$={};$newPage$$==this.currentPage&&($target$$=this.editor.graph.getViewState());if(null!=$source$$&&null!=$target$$)for(var $key$$ in this.viewStateProperties){var $old$$=JSON.stringify($source$$[$key$$]),$now$$=JSON.stringify($target$$[$key$$]);$old$$!=$now$$&&($result$$[$key$$]=$now$$)}return $result$$};
EditorUi.prototype.getCellForJson=function $EditorUi$$getCellForJson$($json$$){var $cell$$=null!=$json$$.geometry?this.codec.decode(mxUtils.parseXml($json$$.geometry).documentElement):null,$value$$=$json$$.value;null!=$json$$.xmlValue&&($value$$=mxUtils.parseXml($json$$.xmlValue).documentElement);$cell$$=new mxCell($value$$,$cell$$,$json$$.style);$cell$$.connectable=0!=$json$$.connectable;$cell$$.collapsed=1==$json$$.collapsed;$cell$$.visible=0!=$json$$.visible;$cell$$.vertex=1==$json$$.vertex;$cell$$.edge=
1==$json$$.edge;$cell$$.id=$json$$.id;for(var $key$$ in $json$$)this.cellProperties[$key$$]||($cell$$[$key$$]=$json$$[$key$$]);return $cell$$};
EditorUi.prototype.getJsonForCell=function $EditorUi$$getJsonForCell$($cell$$,$previous$$){var $result$$={id:$cell$$.getId()};$cell$$.vertex&&($result$$.vertex=1);$cell$$.edge&&($result$$.edge=1);$cell$$.connectable||($result$$.connectable=0);null!=$cell$$.parent&&($result$$.parent=$cell$$.parent.getId());null!=$previous$$&&($result$$.previous=$previous$$.getId());null!=$cell$$.source&&($result$$.source=$cell$$.source.getId());null!=$cell$$.target&&($result$$.target=$cell$$.target.getId());null!=
$cell$$.style&&($result$$.style=$cell$$.style);null!=$cell$$.geometry&&($result$$.geometry=mxUtils.getXml(this.codec.encode($cell$$.geometry)));$cell$$.collapsed&&($result$$.collapsed=1);$cell$$.visible||($result$$.visible=0);null!=$cell$$.value&&("object"===typeof $cell$$.value&&"number"===typeof $cell$$.value.nodeType&&"string"===typeof $cell$$.value.nodeName&&"function"===typeof $cell$$.value.getAttribute?$result$$.xmlValue=mxUtils.getXml($cell$$.value):$result$$.value=$cell$$.value);for(var $key$$ in $cell$$)this.cellProperties[$key$$]||
"function"===typeof $cell$$[$key$$]||($result$$[$key$$]=$cell$$[$key$$]);return $result$$};
EditorUi.prototype.diffCell=function $EditorUi$$diffCell$($oldCell$$,$newCell$$){function $isNode$$($value$$){return null!=$value$$&&"object"===typeof $value$$&&"number"===typeof $value$$.nodeType&&"string"===typeof $value$$.nodeName&&"function"===typeof $value$$.getAttribute}var $diff$$={};$oldCell$$.vertex!=$newCell$$.vertex&&($diff$$.vertex=$newCell$$.vertex?1:0);$oldCell$$.edge!=$newCell$$.edge&&($diff$$.edge=$newCell$$.edge?1:0);$oldCell$$.connectable!=$newCell$$.connectable&&($diff$$.connectable=
$newCell$$.connectable?1:0);if((null!=$oldCell$$.parent?null==$newCell$$.parent:null!=$newCell$$.parent)||null!=$oldCell$$.parent&&null!=$newCell$$.parent&&$oldCell$$.parent.getId()!=$newCell$$.parent.getId())$diff$$.parent=null!=$newCell$$.parent?$newCell$$.parent.getId():"";if((null!=$oldCell$$.source?null==$newCell$$.source:null!=$newCell$$.source)||null!=$oldCell$$.source&&null!=$newCell$$.source&&$oldCell$$.source.getId()!=$newCell$$.source.getId())$diff$$.source=null!=$newCell$$.source?$newCell$$.source.getId():
"";if((null!=$oldCell$$.target?null==$newCell$$.target:null!=$newCell$$.target)||null!=$oldCell$$.target&&null!=$newCell$$.target&&$oldCell$$.target.getId()!=$newCell$$.target.getId())$diff$$.target=null!=$newCell$$.target?$newCell$$.target.getId():"";$isNode$$($oldCell$$.value)&&$isNode$$($newCell$$.value)?$oldCell$$.value.isEqualNode($newCell$$.value)||($diff$$.xmlValue=mxUtils.getXml($newCell$$.value)):$oldCell$$.value!=$newCell$$.value&&($isNode$$($newCell$$.value)?$diff$$.xmlValue=mxUtils.getXml($newCell$$.value):
$diff$$.value=null!=$newCell$$.value?$newCell$$.value:null);$oldCell$$.style!=$newCell$$.style&&($diff$$.style=$newCell$$.style);$oldCell$$.visible!=$newCell$$.visible&&($diff$$.visible=$newCell$$.visible?1:0);$oldCell$$.collapsed!=$newCell$$.collapsed&&($diff$$.collapsed=$newCell$$.collapsed?1:0);if(!this.isObjectEqual($oldCell$$.geometry,$newCell$$.geometry,new mxGeometry)){var $node$$=this.codec.encode($newCell$$.geometry);null!=$node$$&&($diff$$.geometry=mxUtils.getXml($node$$))}for(var $key$$ in $oldCell$$)this.cellProperties[$key$$]||
"function"===typeof $oldCell$$[$key$$]||"function"===typeof $newCell$$[$key$$]||$oldCell$$[$key$$]==$newCell$$[$key$$]||($diff$$[$key$$]=void 0===$newCell$$[$key$$]?null:$newCell$$[$key$$]);for($key$$ in $newCell$$)$key$$ in $oldCell$$||this.cellProperties[$key$$]||"function"===typeof $oldCell$$[$key$$]||"function"===typeof $newCell$$[$key$$]||$oldCell$$[$key$$]==$newCell$$[$key$$]||($diff$$[$key$$]=void 0===$newCell$$[$key$$]?null:$newCell$$[$key$$]);return $diff$$};
EditorUi.prototype.isObjectEqual=function $EditorUi$$isObjectEqual$($source$$,$target$$,$proto$$){if(null==$source$$&&null==$target$$)return!0;if(null!=$source$$?null==$target$$:null!=$target$$)return!1;var $replacer$$=function $$replacer$$$($key$$,$value$$){return null==$proto$$||$proto$$[$key$$]!=$value$$?!0===$value$$?1:$value$$:void 0};return JSON.stringify($source$$,$replacer$$)==JSON.stringify($target$$,$replacer$$)};var mxSettings={currentVersion:17,defaultFormatWidth:600>screen.width?"0":"240",key:".drawio-config",getLanguage:function(){return mxSettings.settings.language},setLanguage:function($lang$$){mxSettings.settings.language=$lang$$},getUi:function(){return mxSettings.settings.ui},setUi:function($ui$$){mxSettings.settings.ui=$ui$$},getShowStartScreen:function(){return mxSettings.settings.showStartScreen},setShowStartScreen:function($showStartScreen$$){mxSettings.settings.showStartScreen=$showStartScreen$$},
getGridColor:function(){return mxSettings.settings.gridColor},setGridColor:function($gridColor$$){mxSettings.settings.gridColor=$gridColor$$},getAutosave:function(){return mxSettings.settings.autosave},setAutosave:function($autosave$$){mxSettings.settings.autosave=$autosave$$},getResizeImages:function(){return mxSettings.settings.resizeImages},setResizeImages:function($resizeImages$$){mxSettings.settings.resizeImages=$resizeImages$$},getOpenCounter:function(){return mxSettings.settings.openCounter},
setOpenCounter:function($openCounter$$){mxSettings.settings.openCounter=$openCounter$$},getLibraries:function(){return mxSettings.settings.libraries},setLibraries:function($libs$$){mxSettings.settings.libraries=$libs$$},addCustomLibrary:function($id$$){mxSettings.load();0>mxUtils.indexOf(mxSettings.settings.customLibraries,$id$$)&&("L.scratchpad"===$id$$?mxSettings.settings.customLibraries.splice(0,0,$id$$):mxSettings.settings.customLibraries.push($id$$));mxSettings.save()},removeCustomLibrary:function($id$$){mxSettings.load();
mxUtils.remove($id$$,mxSettings.settings.customLibraries);mxSettings.save()},getCustomLibraries:function(){return mxSettings.settings.customLibraries},getPlugins:function(){return mxSettings.settings.plugins},setPlugins:function($plugins$$){mxSettings.settings.plugins=$plugins$$},getRecentColors:function(){return mxSettings.settings.recentColors},setRecentColors:function($recentColors$$){mxSettings.settings.recentColors=$recentColors$$},getFormatWidth:function(){return parseInt(mxSettings.settings.formatWidth)},
setFormatWidth:function($formatWidth$$){mxSettings.settings.formatWidth=$formatWidth$$},isCreateTarget:function(){return mxSettings.settings.createTarget},setCreateTarget:function($value$$){mxSettings.settings.createTarget=$value$$},getPageFormat:function(){return mxSettings.settings.pageFormat},setPageFormat:function($value$$){mxSettings.settings.pageFormat=$value$$},init:function(){mxSettings.settings={language:"",configVersion:Editor.configVersion,libraries:Sidebar.prototype.defaultEntries,customLibraries:Editor.defaultCustomLibraries,
plugins:[],recentColors:[],formatWidth:mxSettings.defaultFormatWidth,createTarget:!1,pageFormat:mxGraph.prototype.pageFormat,search:!0,showStartScreen:!0,gridColor:mxGraphView.prototype.gridColor,autosave:!0,resizeImages:null,openCounter:0,version:mxSettings.currentVersion,isNew:!0}},save:function(){if(isLocalStorage&&"undefined"!==typeof JSON)try{delete mxSettings.settings.isNew,mxSettings.settings.version=mxSettings.currentVersion,localStorage.setItem(mxSettings.key,JSON.stringify(mxSettings.settings))}catch($e$$){}},
load:function(){isLocalStorage&&"undefined"!==typeof JSON&&mxSettings.parse(localStorage.getItem(mxSettings.key));null==mxSettings.settings&&mxSettings.init()},parse:function($temp$jscomp$19_value$$){null!=$temp$jscomp$19_value$$&&($temp$jscomp$19_value$$=JSON.parse($temp$jscomp$19_value$$),null!=Editor.config&&Editor.config.override||$temp$jscomp$19_value$$.configVersion!=Editor.configVersion?mxSettings.settings=null:(mxSettings.settings=$temp$jscomp$19_value$$,null==mxSettings.settings.plugins&&
(mxSettings.settings.plugins=[]),null==mxSettings.settings.recentColors&&(mxSettings.settings.recentColors=[]),null==mxSettings.settings.libraries&&(mxSettings.settings.libraries=Sidebar.prototype.defaultEntries),null==mxSettings.settings.customLibraries&&(mxSettings.settings.customLibraries=Editor.defaultCustomLibraries),null==mxSettings.settings.ui&&(mxSettings.settings.ui=""),null==mxSettings.settings.formatWidth&&(mxSettings.settings.formatWidth=mxSettings.defaultFormatWidth),null!=mxSettings.settings.lastAlert&&
delete mxSettings.settings.lastAlert,null==mxSettings.settings.createTarget&&(mxSettings.settings.createTarget=!1),null==mxSettings.settings.pageFormat&&(mxSettings.settings.pageFormat=mxGraph.prototype.pageFormat),null==mxSettings.settings.search&&(mxSettings.settings.search=!0),null==mxSettings.settings.showStartScreen&&(mxSettings.settings.showStartScreen=!0),null==mxSettings.settings.gridColor&&(mxSettings.settings.gridColor=mxGraphView.prototype.gridColor),null==mxSettings.settings.autosave&&
(mxSettings.settings.autosave=!0),null!=mxSettings.settings.scratchpadSeen&&delete mxSettings.settings.scratchpadSeen))},clear:function(){isLocalStorage&&localStorage.removeItem(mxSettings.key)}};("undefined"==typeof mxLoadSettings||mxLoadSettings)&&mxSettings.load();DrawioFileSync=function $DrawioFileSync$($file$$){mxEventSource.call(this);this.lastActivity=new Date;this.clientId=Editor.guid();this.ui=$file$$.ui;this.file=$file$$;this.onlineListener=mxUtils.bind(this,function(){this.updateOnlineState();this.isConnected()&&this.fileChangedNotify()});mxEvent.addListener(window,"online",this.onlineListener);this.visibleListener=mxUtils.bind(this,function(){"hidden"==document.visibilityState?this.isConnected()&&this.stop():this.start()});mxEvent.addListener(document,
"visibilitychange",this.visibleListener);this.activityListener=mxUtils.bind(this,function($evt$$){this.lastActivity=new Date;this.start()});mxEvent.addListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.activityListener);mxEvent.addListener(document,"keypress",this.activityListener);mxEvent.addListener(window,"focus",this.activityListener);!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(mxEvent.addListener(document,"touchstart",this.activityListener),mxEvent.addListener(document,"touchmove",
this.activityListener));this.pusherErrorListener=mxUtils.bind(this,function($err$$){null!=$err$$.error&&null!=$err$$.error.data&&4004===$err$$.error.data.code&&EditorUi.logError("Error: Pusher Limit",null,this.file.getId())});this.connectionListener=mxUtils.bind(this,function(){this.updateOnlineState();this.updateStatus();if(this.isConnected()){if(!this.announced){var $user$$=this.file.getCurrentUser(),$join$$={a:"join"};null!=$user$$&&($join$$.name=$user$$.displayName,$join$$.uid=$user$$.id);mxUtils.post(EditorUi.cacheUrl,
this.getIdParameters()+"&msg="+encodeURIComponent(this.objectToString(this.createMessage($join$$))));this.file.stats.msgSent++;this.announced=!0}this.fileChangedNotify()}});this.changeListener=mxUtils.bind(this,function($data$$){this.file.stats.msgReceived++;this.lastActivity=new Date;if(this.enabled&&!this.file.inConflictState&&!this.file.redirectDialogShowing)try{var $msg$$=this.stringToObject($data$$);null!=$msg$$&&(EditorUi.debug("Sync.message",[this],$msg$$,$data$$.length,"bytes"),$msg$$.v>DrawioFileSync.PROTOCOL?
this.file.redirectToNewApp(mxUtils.bind(this,function(){})):$msg$$.v===DrawioFileSync.PROTOCOL&&null!=$msg$$.d&&this.handleMessageData($msg$$.d))}catch($e$$){null!=window.console&&"1"==urlParams.test&&console.log($e$$)}})};DrawioFileSync.PROTOCOL=6;mxUtils.extend(DrawioFileSync,mxEventSource);DrawioFileSync.prototype.maxCacheEntrySize=1E6;DrawioFileSync.prototype.enabled=!0;DrawioFileSync.prototype.updateStatusInterval=1E4;DrawioFileSync.prototype.channelId=null;DrawioFileSync.prototype.channel=null;
DrawioFileSync.prototype.catchupRetryCount=0;DrawioFileSync.prototype.maxCatchupRetries=15;DrawioFileSync.prototype.maxCacheReadyRetries=2;DrawioFileSync.prototype.cacheReadyDelay=500;DrawioFileSync.prototype.inactivityTimeoutSeconds=1800;DrawioFileSync.prototype.lastActivity=null;
DrawioFileSync.prototype.start=function $DrawioFileSync$$start$(){null==this.channelId&&(this.channelId=this.file.getChannelId());null==this.key&&(this.key=this.file.getChannelKey());if(null==this.pusher&&null!=this.channelId&&"hidden"!=document.visibilityState){this.pusher=this.ui.getPusher();if(null!=this.pusher){try{null!=this.pusher.connection&&this.pusher.connection.bind("error",this.pusherErrorListener)}catch($e$$){}try{this.pusher.connect(),this.channel=this.pusher.subscribe(this.channelId),
EditorUi.debug("Sync.start",[this])}catch($e$42$$){}this.installListeners()}window.setTimeout(mxUtils.bind(this,function(){this.lastModified=this.file.getLastModifiedDate();this.lastActivity=new Date;this.resetUpdateStatusThread();this.updateOnlineState();this.updateStatus()},0))}};DrawioFileSync.prototype.isConnected=function $DrawioFileSync$$isConnected$(){return null!=this.pusher&&null!=this.pusher.connection?"connected"==this.pusher.connection.state:!1};
DrawioFileSync.prototype.updateOnlineState=function $DrawioFileSync$$updateOnlineState$(){var $addClickHandler_status$$=mxUtils.bind(this,function($elt$$){mxEvent.addListener($elt$$,"click",mxUtils.bind(this,function($evt$$){this.enabled=!this.enabled;this.ui.updateButtonContainer();this.resetUpdateStatusThread();this.updateOnlineState();this.updateStatus();!this.file.inConflictState&&this.enabled&&this.fileChangedNotify()}))});if("min"==uiTheme&&null!=this.ui.buttonContainer){if(null==this.collaboratorsElement){var $elt$jscomp$0$$=
document.createElement("a");$elt$jscomp$0$$.className="geToolbarButton";$elt$jscomp$0$$.style.cssText="display:inline-block;position:relative;box-sizing:border-box;margin-right:4px;cursor:pointer;float:left;";$elt$jscomp$0$$.style.backgroundPosition="center center";$elt$jscomp$0$$.style.backgroundRepeat="no-repeat";$elt$jscomp$0$$.style.backgroundSize="24px 24px";$elt$jscomp$0$$.style.height="24px";$elt$jscomp$0$$.style.width="24px";$addClickHandler_status$$($elt$jscomp$0$$);this.ui.buttonContainer.appendChild($elt$jscomp$0$$);
this.collaboratorsElement=$elt$jscomp$0$$}}else null!=this.ui.toolbarContainer&&null==this.collaboratorsElement&&($elt$jscomp$0$$=document.createElement("a"),$elt$jscomp$0$$.className="geButton",$elt$jscomp$0$$.style.position="absolute",$elt$jscomp$0$$.style.display="inline-block",$elt$jscomp$0$$.style.verticalAlign="bottom",$elt$jscomp$0$$.style.color="#666",$elt$jscomp$0$$.style.top="8px",$elt$jscomp$0$$.style.right="atlas"!=uiTheme?"70px":"50px",$elt$jscomp$0$$.style.padding="2px",$elt$jscomp$0$$.style.fontSize=
"8pt",$elt$jscomp$0$$.style.verticalAlign="middle",$elt$jscomp$0$$.style.textDecoration="none",$elt$jscomp$0$$.style.backgroundPosition="center center",$elt$jscomp$0$$.style.backgroundRepeat="no-repeat",$elt$jscomp$0$$.style.backgroundSize="16px 16px",$elt$jscomp$0$$.style.width="16px",$elt$jscomp$0$$.style.height="16px",mxUtils.setOpacity($elt$jscomp$0$$,60),"dark"==uiTheme&&($elt$jscomp$0$$.style.filter="invert(100%)"),mxEvent.addListener($elt$jscomp$0$$,mxClient.IS_POINTER?"pointerdown":"mousedown",
mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()})),$addClickHandler_status$$($elt$jscomp$0$$),this.ui.toolbarContainer.appendChild($elt$jscomp$0$$),this.collaboratorsElement=$elt$jscomp$0$$);null!=this.collaboratorsElement&&($addClickHandler_status$$="",$addClickHandler_status$$=this.enabled?this.file.invalidChecksum?mxResources.get("error")+": "+mxResources.get("checksum"):this.ui.isOffline()||!this.isConnected()?mxResources.get("offline"):mxResources.get("online"):mxResources.get("disconnected"),
this.collaboratorsElement.setAttribute("title",$addClickHandler_status$$),this.collaboratorsElement.style.backgroundImage="url("+(this.enabled?this.ui.isOffline()||!this.isConnected()||this.file.invalidChecksum?Editor.syncProblemImage:Editor.syncImage:Editor.syncDisabledImage)+")")};
DrawioFileSync.prototype.updateStatus=function $DrawioFileSync$$updateStatus$(){this.isConnected()&&null!=this.lastActivity&&((new Date).getTime()-this.lastActivity.getTime())/1E3>this.inactivityTimeoutSeconds&&this.stop();if(!(this.file.isModified()||this.file.inConflictState||null!=this.file.autosaveThread||this.file.savingFile||this.file.redirectDialogShowing))if(this.enabled&&null!=this.ui.statusContainer){var $label$jscomp$17_str$$=this.ui.timeSince(new Date(this.lastModified));null==$label$jscomp$17_str$$&&
($label$jscomp$17_str$$=mxResources.get("lessThanAMinute"));var $history$jscomp$2_spans$$=this.file.isRevisionHistorySupported(),$links$jscomp$4_msg$$=this.lastMessage;this.lastMessage=null;null!=$links$jscomp$4_msg$$&&40<$links$jscomp$4_msg$$.length&&($links$jscomp$4_msg$$=$links$jscomp$4_msg$$.substring(0,40)+"...");$label$jscomp$17_str$$=mxResources.get("lastChange",[$label$jscomp$17_str$$]);this.ui.editor.setStatus('<div title="'+mxUtils.htmlEntities($label$jscomp$17_str$$)+'" style="display:inline-block;">'+
mxUtils.htmlEntities($label$jscomp$17_str$$)+"</div>"+(null!=$links$jscomp$4_msg$$?' <span style="opacity:0;" title="'+mxUtils.htmlEntities($links$jscomp$4_msg$$)+'">('+mxUtils.htmlEntities($links$jscomp$4_msg$$)+")</span>":"")+(this.file.isEditable()?"":'<div class="geStatusAlert" style="margin-left:8px;display:inline-block;">'+mxUtils.htmlEntities(mxResources.get("readOnly"))+"</div>")+(this.isConnected()?"":'<div class="geStatusAlert geBlink" style="margin-left:8px;display:inline-block;">'+mxUtils.htmlEntities(mxResources.get("disconnected"))+
"</div>"));$links$jscomp$4_msg$$=this.ui.statusContainer.getElementsByTagName("div");0<$links$jscomp$4_msg$$.length&&$history$jscomp$2_spans$$&&($links$jscomp$4_msg$$[0].style.cursor="pointer",$links$jscomp$4_msg$$[0].style.textDecoration="underline",mxEvent.addListener($links$jscomp$4_msg$$[0],"click",mxUtils.bind(this,function(){this.ui.actions.get("revisionHistory").funct()})));$history$jscomp$2_spans$$=this.ui.statusContainer.getElementsByTagName("span");if(0<$history$jscomp$2_spans$$.length){var $temp$$=
$history$jscomp$2_spans$$[0];mxUtils.setPrefixedStyle($temp$$.style,"transition","all 0.2s ease");window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity($temp$$,100);mxUtils.setPrefixedStyle($temp$$.style,"transition","all 1s ease");window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity($temp$$,0)}),this.updateStatusInterval/2)}),0)}this.resetUpdateStatusThread()}else this.file.addAllSavedStatus()};
DrawioFileSync.prototype.resetUpdateStatusThread=function $DrawioFileSync$$resetUpdateStatusThread$(){null!=this.updateStatusThread&&window.clearInterval(this.updateStatusThread);null!=this.channel&&(this.updateStatusThread=window.setInterval(mxUtils.bind(this,function(){this.updateStatus()}),this.updateStatusInterval))};
DrawioFileSync.prototype.installListeners=function $DrawioFileSync$$installListeners$(){null!=this.pusher&&null!=this.pusher.connection&&this.pusher.connection.bind("state_change",this.connectionListener);null!=this.channel&&this.channel.bind("changed",this.changeListener)};
DrawioFileSync.prototype.handleMessageData=function $DrawioFileSync$$handleMessageData$($data$$){"desc"==$data$$.a?this.file.savingFile||this.reloadDescriptor():"join"==$data$$.a||"leave"==$data$$.a?("join"==$data$$.a&&this.file.stats.joined++,null!=$data$$.name&&(this.lastMessage=mxResources.get("join"==$data$$.a?"userJoined":"userLeft",[$data$$.name]),this.resetUpdateStatusThread(),this.updateStatus())):null!=$data$$.m&&($data$$=new Date($data$$.m),null==this.lastMessageModified||this.lastMessageModified<
$data$$)&&(this.lastMessageModified=$data$$,this.fileChangedNotify())};DrawioFileSync.prototype.isValidState=function $DrawioFileSync$$isValidState$(){return this.ui.getCurrentFile()==this.file&&this.file.sync==this&&!this.file.invalidChecksum&&!this.file.redirectDialogShowing};
DrawioFileSync.prototype.fileChangedNotify=function $DrawioFileSync$$fileChangedNotify$(){if(this.isValidState())if(this.file.savingFile)this.remoteFileChanged=!0;else var $thread$$=this.fileChanged(mxUtils.bind(this,function($err$$){this.updateStatus()}),mxUtils.bind(this,function($err$$){this.file.handleFileError($err$$)}),mxUtils.bind(this,function(){return!this.file.savingFile&&this.notifyThread!=$thread$$}))};
DrawioFileSync.prototype.fileChanged=function $DrawioFileSync$$fileChanged$($success$$,$error$$,$abort$$){var $thread$$=window.setTimeout(mxUtils.bind(this,function(){null!=$abort$$&&$abort$$()||(this.isValidState()?this.file.loadPatchDescriptor(mxUtils.bind(this,function($desc$$){null!=$abort$$&&$abort$$()||(this.isValidState()?this.catchup($desc$$,$success$$,$error$$,$abort$$):null!=$error$$&&$error$$())}),$error$$):null!=$error$$&&$error$$())}),0);return this.notifyThread=$thread$$};
DrawioFileSync.prototype.reloadDescriptor=function $DrawioFileSync$$reloadDescriptor$(){this.file.loadDescriptor(mxUtils.bind(this,function($desc$$){null!=$desc$$?(this.file.setDescriptorEtag($desc$$,this.file.getCurrentEtag()),this.updateDescriptor($desc$$),this.fileChangedNotify()):(this.file.inConflictState=!0,this.file.handleFileError())}),mxUtils.bind(this,function($err$$){this.file.inConflictState=!0;this.file.handleFileError($err$$)}))};
DrawioFileSync.prototype.updateDescriptor=function $DrawioFileSync$$updateDescriptor$($desc$$){this.file.setDescriptor($desc$$);this.file.descriptorChanged();this.start()};
DrawioFileSync.prototype.catchup=function $DrawioFileSync$$catchup$($desc$$,$success$$,$error$$,$abort$$){if(null==$abort$$||!$abort$$()){var $secret$$=this.file.getDescriptorSecret($desc$$),$etag$$=this.file.getDescriptorEtag($desc$$),$current$$=this.file.getCurrentEtag();if($current$$==$etag$$)null!=$success$$&&$success$$();else if(this.isValidState()){var $cacheReadyRetryCount$$=0,$failed$$=!1,$doCatchup$$=mxUtils.bind(this,function(){if(null==$abort$$||!$abort$$())if($current$$!=this.file.getCurrentEtag())null!=
$success$$&&$success$$();else if(this.isValidState()){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;this.reload($success$$,$error$$,$abort$$)}),this.ui.timeout);mxUtils.get(EditorUi.cacheUrl+"?id="+encodeURIComponent(this.channelId)+"&from="+encodeURIComponent($current$$)+"&to="+encodeURIComponent($etag$$)+(null!=$secret$$?"&secret="+encodeURIComponent($secret$$):""),mxUtils.bind(this,function($req$$){this.file.stats.bytesReceived+=$req$$.getText().length;
window.clearTimeout($timeoutThread$$);if($acceptResponse$$&&(null==$abort$$||!$abort$$()))if($current$$!=this.file.getCurrentEtag())null!=$success$$&&$success$$();else if(this.isValidState()){var $checksum$$=null,$temp$$=[];if(200<=$req$$.getStatus()&&299>=$req$$.getStatus()&&0<$req$$.getText().length)try{var $result$$=JSON.parse($req$$.getText());if(null!=$result$$&&0<$result$$.length)for(var $i$$=0;$i$$<$result$$.length;$i$$++){var $value$$=this.stringToObject($result$$[$i$$]);if($value$$.v>DrawioFileSync.PROTOCOL){$failed$$=
!0;$temp$$=[];break}else if($value$$.v===DrawioFileSync.PROTOCOL&&null!=$value$$.d)$checksum$$=$value$$.d.checksum,$temp$$.push($value$$.d.patch);else{$failed$$=!0;$temp$$=[];break}}}catch($e$$){$temp$$=[],null!=window.console&&"1"==urlParams.test&&console.log($e$$)}try{0<$temp$$.length?(this.file.stats.cacheHits++,this.merge($temp$$,$checksum$$,$desc$$,$success$$,$error$$,$abort$$)):$cacheReadyRetryCount$$<=this.maxCacheReadyRetries&&!$failed$$&&401!=$req$$.getStatus()?($cacheReadyRetryCount$$++,
this.file.stats.cacheMiss++,window.setTimeout($doCatchup$$,($cacheReadyRetryCount$$+1)*this.cacheReadyDelay)):(this.file.stats.cacheFail++,this.reload($success$$,$error$$,$abort$$))}catch($e$43$$){null!=$error$$&&$error$$($e$43$$)}}else null!=$error$$&&$error$$()}))}else null!=$error$$&&$error$$()});window.setTimeout($doCatchup$$,this.cacheReadyDelay)}else null!=$error$$&&$error$$()}};
DrawioFileSync.prototype.reload=function $DrawioFileSync$$reload$($success$$,$error$$,$abort$$,$shadow$$){this.file.updateFile(mxUtils.bind(this,function(){this.lastModified=this.file.getLastModifiedDate();this.updateStatus();this.start();null!=$success$$&&$success$$()}),mxUtils.bind(this,function($err$$){null!=$error$$&&$error$$($err$$)}),$abort$$,$shadow$$)};
DrawioFileSync.prototype.merge=function $DrawioFileSync$$merge$($patches$$,$checksum$$,$desc$$,$success$$,$error$$,$abort$jscomp$4_i$$){try{this.file.stats.merged++;this.lastModified=new Date;this.file.shadowPages=null!=this.file.shadowPages?this.file.shadowPages:this.ui.getPagesForNode(mxUtils.parseXml(this.file.shadowData).documentElement);this.file.backupPatch=this.file.isModified()?this.ui.diffPages(this.file.shadowPages,this.ui.pages):null;var $ignored$$=this.file.ignorePatches($patches$$),$etag$$=
this.file.getDescriptorEtag($desc$$);if(!$ignored$$){for($abort$jscomp$4_i$$=0;$abort$jscomp$4_i$$<$patches$$.length;$abort$jscomp$4_i$$++)this.file.shadowPages=this.ui.patchPages(this.file.shadowPages,$patches$$[$abort$jscomp$4_i$$]);var $current$$=null!=$checksum$$?this.ui.getHashValueForPages(this.file.shadowPages):null;"1"==urlParams.test&&EditorUi.debug("Sync.merge",[this],"from",this.file.getCurrentEtag(),"to",$etag$$,"backup",this.file.backupPatch,"attempt",this.catchupRetryCount,"patches",
$patches$$,"checksum",$checksum$$==$current$$,$checksum$$);if(null!=$checksum$$&&$checksum$$!=$current$$){var $from$$=this.ui.hashValue(this.file.getCurrentEtag()),$to$$=this.ui.hashValue($etag$$);this.file.checksumError($error$$,$patches$$,"From: "+$from$$+"\nTo: "+$to$$+"\nChecksum: "+$checksum$$+"\nCurrent: "+$current$$,$etag$$,"merge");return}this.file.patch($patches$$,DrawioFile.LAST_WRITE_WINS?this.file.backupPatch:null)}this.file.invalidChecksum=!1;this.file.inConflictState=!1;this.file.patchDescriptor(this.file.getDescriptor(),
$desc$$);this.file.backupPatch=null;null!=$success$$&&$success$$()}catch($e$$){this.file.inConflictState=!0;this.file.invalidChecksum=!0;this.file.descriptorChanged();null!=$error$$&&$error$$($e$$);try{if(this.file.errorReportsEnabled)$from$$=this.ui.hashValue(this.file.getCurrentEtag()),$to$$=this.ui.hashValue($etag$$),this.file.sendErrorReport("Error in merge","From: "+$from$$+"\nTo: "+$to$$+"\nChecksum: "+$checksum$$+"\nPatches:\n"+this.file.compressReportData(JSON.stringify($patches$$,null,2)),
$e$$);else{var $user$$=this.file.getCurrentUser(),$uid$$=null!=$user$$?$user$$.id:"unknown";EditorUi.logError("Error in merge",null,this.file.getMode()+"."+this.file.getId(),$uid$$,$e$$)}}catch($e2$$){}}};
DrawioFileSync.prototype.descriptorChanged=function $DrawioFileSync$$descriptorChanged$($etag$$){this.lastModified=this.file.getLastModifiedDate();if(null!=this.channelId){var $msg$$=this.objectToString(this.createMessage({a:"desc",m:this.lastModified.getTime()})),$current$$=this.file.getCurrentEtag(),$data$$=this.objectToString({});mxUtils.post(EditorUi.cacheUrl,this.getIdParameters()+"&from="+encodeURIComponent($etag$$)+"&to="+encodeURIComponent($current$$)+"&msg="+encodeURIComponent($msg$$)+"&data="+
encodeURIComponent($data$$));this.file.stats.bytesSent+=$data$$.length;this.file.stats.msgSent++}this.updateStatus()};DrawioFileSync.prototype.objectToString=function $DrawioFileSync$$objectToString$($data$jscomp$142_obj$$){$data$jscomp$142_obj$$=Graph.compress(JSON.stringify($data$jscomp$142_obj$$));null!=this.key&&"undefined"!==typeof CryptoJS&&($data$jscomp$142_obj$$=CryptoJS.AES.encrypt($data$jscomp$142_obj$$,this.key).toString());return $data$jscomp$142_obj$$};
DrawioFileSync.prototype.stringToObject=function $DrawioFileSync$$stringToObject$($data$$){null!=this.key&&"undefined"!==typeof CryptoJS&&($data$$=CryptoJS.AES.decrypt($data$$,this.key).toString(CryptoJS.enc.Utf8));return JSON.parse(Graph.decompress($data$$))};
DrawioFileSync.prototype.fileSaved=function $DrawioFileSync$$fileSaved$($pages$$,$etag$jscomp$6_lastDesc$$,$success$$,$checksum$jscomp$3_error$$){this.lastModified=this.file.getLastModifiedDate();this.resetUpdateStatusThread();this.catchupRetryCount=0;if(!this.ui.isOffline()&&!this.file.inConflictState&&!this.file.redirectDialogShowing&&(this.start(),null!=this.channelId)){var $diff$jscomp$11_shadow$$=null!=this.file.shadowPages?this.file.shadowPages:this.ui.getPagesForNode(mxUtils.parseXml(this.file.shadowData).documentElement);
$checksum$jscomp$3_error$$=this.ui.getHashValueForPages($pages$$);$diff$jscomp$11_shadow$$=this.ui.diffPages($diff$jscomp$11_shadow$$,$pages$$);$etag$jscomp$6_lastDesc$$=this.file.getDescriptorEtag($etag$jscomp$6_lastDesc$$);var $current$$=this.file.getCurrentEtag(),$data$$=this.objectToString(this.createMessage({patch:$diff$jscomp$11_shadow$$,checksum:$checksum$jscomp$3_error$$})),$msg$$=this.objectToString(this.createMessage({m:this.lastModified.getTime()})),$secret$$=this.file.getDescriptorSecret(this.file.getDescriptor());
this.file.stats.bytesSent+=$data$$.length;this.file.stats.msgSent++;mxUtils.post(EditorUi.cacheUrl,this.getIdParameters()+"&from="+encodeURIComponent($etag$jscomp$6_lastDesc$$)+"&to="+encodeURIComponent($current$$)+"&msg="+encodeURIComponent($msg$$)+(null!=$secret$$?"&secret="+encodeURIComponent($secret$$):"")+($data$$.length<this.maxCacheEntrySize?"&data="+encodeURIComponent($data$$):""),mxUtils.bind(this,function($req$$){}));"1"==urlParams.test&&EditorUi.debug("Sync.fileSaved",[this],"from",$etag$jscomp$6_lastDesc$$,
"to",$current$$,$data$$.length,"bytes","diff",$diff$jscomp$11_shadow$$,"checksum",$checksum$jscomp$3_error$$)}this.file.shadowPages=$pages$$;null!=$success$$&&$success$$()};DrawioFileSync.prototype.getIdParameters=function $DrawioFileSync$$getIdParameters$(){var $result$$="id="+this.channelId;null!=this.pusher&&null!=this.pusher.connection&&null!=this.pusher.connection.socket_id&&($result$$+="&sid="+this.pusher.connection.socket_id);return $result$$};
DrawioFileSync.prototype.createMessage=function $DrawioFileSync$$createMessage$($data$$){return{v:DrawioFileSync.PROTOCOL,d:$data$$,c:this.clientId}};
DrawioFileSync.prototype.fileConflict=function $DrawioFileSync$$fileConflict$($desc$$,$success$$,$error$$){this.catchupRetryCount++;this.catchupRetryCount<this.maxCatchupRetries?(this.file.stats.conflicts++,null!=$desc$$?this.catchup($desc$$,$success$$,$error$$):this.fileChanged($success$$,$error$$)):(this.file.stats.timeouts++,this.catchupRetryCount=0,null!=$error$$&&$error$$({message:mxResources.get("timeout")}))};
DrawioFileSync.prototype.stop=function $DrawioFileSync$$stop$(){null!=this.pusher&&(EditorUi.debug("Sync.stop",[this]),null!=this.pusher.connection&&(this.pusher.connection.unbind("state_change",this.connectionListener),this.pusher.connection.unbind("error",this.pusherErrorListener)),null!=this.channel&&(this.channel.unbind("changed",this.changeListener),this.channel=null),this.pusher.disconnect(),this.pusher=null);this.updateOnlineState();this.updateStatus()};
DrawioFileSync.prototype.destroy=function $DrawioFileSync$$destroy$(){if(null!=this.channelId){var $user$$=this.file.getCurrentUser(),$leave$$={a:"leave"};null!=$user$$&&($leave$$.name=$user$$.displayName,$leave$$.uid=$user$$.id);mxUtils.post(EditorUi.cacheUrl,this.getIdParameters()+"&msg="+encodeURIComponent(this.objectToString(this.createMessage($leave$$))));this.file.stats.msgSent++}this.stop();null!=this.updateStatusThread&&(window.clearInterval(this.updateStatusThread),this.updateStatusThread=
null);null!=this.onlineListener&&(mxEvent.removeListener(window,"online",this.onlineListener),this.onlineListener=null);null!=this.visibleListener&&(mxEvent.removeListener(document,"visibilitychange",this.visibleListener),this.visibleListener=null);null!=this.activityListener&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.activityListener),mxEvent.removeListener(document,"keypress",this.activityListener),mxEvent.removeListener(window,"focus",this.activityListener),
!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(mxEvent.removeListener(document,"touchstart",this.activityListener),mxEvent.removeListener(document,"touchmove",this.activityListener)),this.activityListener=null);null!=this.collaboratorsElement&&(this.collaboratorsElement.parentNode.removeChild(this.collaboratorsElement),this.collaboratorsElement=null)};Graph.prototype.defaultThemes["default-style2"]=mxUtils.parseXml('<mxStylesheet><add as="defaultVertex"><add as="shape" value="label"/><add as="perimeter" value="rectanglePerimeter"/><add as="fontSize" value="12"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="fillColor" value="#ffffff"/><add as="strokeColor" value="#000000"/><add as="fontColor" value="#000000"/></add><add as="defaultEdge"><add as="shape" value="connector"/><add as="labelBackgroundColor" value="#ffffff"/><add as="endArrow" value="classic"/><add as="fontSize" value="11"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="rounded" value="1"/><add as="strokeColor" value="#000000"/><add as="fontColor" value="#000000"/></add><add as="fancy"><add as="shadow" value="1"/><add as="glass" value="1"/></add><add as="gray" extend="fancy"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="blue" extend="fancy"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="green" extend="fancy"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="turquoise" extend="fancy"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="yellow" extend="fancy"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="orange" extend="fancy"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="red" extend="fancy"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="pink" extend="fancy"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="purple" extend="fancy"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add><add as="plain-gray"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="plain-blue"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="plain-green"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="plain-turquoise"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="plain-yellow"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="plain-orange"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="plain-red"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="plain-pink"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="plain-purple"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add><add as="text"><add as="fillColor" value="none"/><add as="gradientColor" value="none"/><add as="strokeColor" value="none"/><add as="align" value="left"/><add as="verticalAlign" value="top"/></add><add as="label"><add as="fontStyle" value="1"/><add as="align" value="left"/><add as="verticalAlign" value="middle"/><add as="spacing" value="2"/><add as="spacingLeft" value="52"/><add as="imageWidth" value="42"/><add as="imageHeight" value="42"/><add as="rounded" value="1"/></add><add as="icon" extend="label"><add as="align" value="center"/><add as="imageAlign" value="center"/><add as="verticalLabelPosition" value="bottom"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="4"/><add as="labelBackgroundColor" value="#ffffff"/><add as="spacing" value="0"/><add as="spacingLeft" value="0"/><add as="spacingTop" value="6"/><add as="fontStyle" value="0"/><add as="imageWidth" value="48"/><add as="imageHeight" value="48"/></add><add as="swimlane"><add as="shape" value="swimlane"/><add as="fontSize" value="12"/><add as="fontStyle" value="1"/><add as="startSize" value="23"/></add><add as="group"><add as="verticalAlign" value="top"/><add as="fillColor" value="none"/><add as="strokeColor" value="none"/><add as="gradientColor" value="none"/><add as="pointerEvents" value="0"/></add><add as="ellipse"><add as="shape" value="ellipse"/><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombus"><add as="shape" value="rhombus"/><add as="perimeter" value="rhombusPerimeter"/></add><add as="triangle"><add as="shape" value="triangle"/><add as="perimeter" value="trianglePerimeter"/></add><add as="line"><add as="shape" value="line"/><add as="strokeWidth" value="4"/><add as="labelBackgroundColor" value="#ffffff"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="8"/></add><add as="image"><add as="shape" value="image"/><add as="labelBackgroundColor" value="white"/><add as="verticalAlign" value="top"/><add as="verticalLabelPosition" value="bottom"/></add><add as="roundImage" extend="image"><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombusImage" extend="image"><add as="perimeter" value="rhombusPerimeter"/></add><add as="arrow"><add as="shape" value="arrow"/><add as="edgeStyle" value="none"/><add as="fillColor" value="#ffffff"/></add></mxStylesheet>').documentElement;
Graph.prototype.defaultThemes.darkTheme=mxUtils.parseXml('<mxStylesheet><add as="defaultVertex"><add as="shape" value="label"/><add as="perimeter" value="rectanglePerimeter"/><add as="fontSize" value="12"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="fillColor" value="#2a2a2a"/><add as="strokeColor" value="#f0f0f0"/><add as="fontColor" value="#f0f0f0"/></add><add as="defaultEdge"><add as="shape" value="connector"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="endArrow" value="classic"/><add as="fontSize" value="11"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="rounded" value="1"/><add as="strokeColor" value="#f0f0f0"/><add as="fontColor" value="#f0f0f0"/></add><add as="text"><add as="fillColor" value="none"/><add as="gradientColor" value="none"/><add as="strokeColor" value="none"/><add as="align" value="left"/><add as="verticalAlign" value="top"/></add><add as="label"><add as="fontStyle" value="1"/><add as="align" value="left"/><add as="verticalAlign" value="middle"/><add as="spacing" value="2"/><add as="spacingLeft" value="52"/><add as="imageWidth" value="42"/><add as="imageHeight" value="42"/><add as="rounded" value="1"/></add><add as="icon" extend="label"><add as="align" value="center"/><add as="imageAlign" value="center"/><add as="verticalLabelPosition" value="bottom"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="4"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="spacing" value="0"/><add as="spacingLeft" value="0"/><add as="spacingTop" value="6"/><add as="fontStyle" value="0"/><add as="imageWidth" value="48"/><add as="imageHeight" value="48"/></add><add as="swimlane"><add as="shape" value="swimlane"/><add as="fontSize" value="12"/><add as="fontStyle" value="1"/><add as="startSize" value="23"/></add><add as="group"><add as="verticalAlign" value="top"/><add as="fillColor" value="none"/><add as="strokeColor" value="none"/><add as="gradientColor" value="none"/><add as="pointerEvents" value="0"/></add><add as="ellipse"><add as="shape" value="ellipse"/><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombus"><add as="shape" value="rhombus"/><add as="perimeter" value="rhombusPerimeter"/></add><add as="triangle"><add as="shape" value="triangle"/><add as="perimeter" value="trianglePerimeter"/></add><add as="line"><add as="shape" value="line"/><add as="strokeWidth" value="4"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="8"/></add><add as="image"><add as="shape" value="image"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="verticalAlign" value="top"/><add as="verticalLabelPosition" value="bottom"/></add><add as="roundImage" extend="image"><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombusImage" extend="image"><add as="perimeter" value="rhombusPerimeter"/></add><add as="arrow"><add as="shape" value="arrow"/><add as="edgeStyle" value="none"/><add as="fillColor" value="#2a2a2a"/></add></mxStylesheet>').documentElement;function mxAsyncCanvas($htmlCanvas$$){mxAbstractCanvas2D.call(this);this.htmlCanvas=$htmlCanvas$$;$htmlCanvas$$.images=$htmlCanvas$$.images||[];$htmlCanvas$$.subCanvas=$htmlCanvas$$.subCanvas||[]}mxUtils.extend(mxAsyncCanvas,mxAbstractCanvas2D);mxAsyncCanvas.prototype.htmlCanvas=null;mxAsyncCanvas.prototype.canvasIndex=0;mxAsyncCanvas.prototype.waitCounter=0;mxAsyncCanvas.prototype.onComplete=null;mxAsyncCanvas.prototype.incWaitCounter=function $mxAsyncCanvas$$incWaitCounter$(){this.waitCounter++};
mxAsyncCanvas.prototype.decWaitCounter=function $mxAsyncCanvas$$decWaitCounter$(){this.waitCounter--;0==this.waitCounter&&null!=this.onComplete&&(this.onComplete(),this.onComplete=null)};
mxAsyncCanvas.prototype.updateFont=function $mxAsyncCanvas$$updateFont$(){var $style$$="";(this.state.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&($style$$+="bold ");(this.state.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&($style$$+="italic ");this.ctx.font=$style$$+this.state.fontSize+"px "+this.state.fontFamily};mxAsyncCanvas.prototype.rotate=function $mxAsyncCanvas$$rotate$($theta$$,$flipH$$,$flipV$$,$cx$$,$cy$$){};
mxAsyncCanvas.prototype.setAlpha=function $mxAsyncCanvas$$setAlpha$($alpha$$){this.state.alpha=$alpha$$};mxAsyncCanvas.prototype.setFontColor=function $mxAsyncCanvas$$setFontColor$($value$$){this.state.fontColor=$value$$};mxAsyncCanvas.prototype.setFontBackgroundColor=function $mxAsyncCanvas$$setFontBackgroundColor$($value$$){$value$$==mxConstants.NONE&&($value$$=null);this.state.fontBackgroundColor=$value$$};
mxAsyncCanvas.prototype.setFontBorderColor=function $mxAsyncCanvas$$setFontBorderColor$($value$$){$value$$==mxConstants.NONE&&($value$$=null);this.state.fontBorderColor=$value$$};mxAsyncCanvas.prototype.setFontSize=function $mxAsyncCanvas$$setFontSize$($value$$){this.state.fontSize=$value$$};mxAsyncCanvas.prototype.setFontFamily=function $mxAsyncCanvas$$setFontFamily$($value$$){this.state.fontFamily=$value$$};
mxAsyncCanvas.prototype.setFontStyle=function $mxAsyncCanvas$$setFontStyle$($value$$){this.state.fontStyle=$value$$};mxAsyncCanvas.prototype.rect=function $mxAsyncCanvas$$rect$($x$$,$y$$,$w$$,$h$$){};mxAsyncCanvas.prototype.roundrect=function $mxAsyncCanvas$$roundrect$($x$$,$y$$,$w$$,$h$$,$dx$$,$dy$$){};mxAsyncCanvas.prototype.ellipse=function $mxAsyncCanvas$$ellipse$($x$$,$y$$,$w$$,$h$$){};
mxAsyncCanvas.prototype.rewriteImageSource=function $mxAsyncCanvas$$rewriteImageSource$($src$$){if("http://"==$src$$.substring(0,7)||"https://"==$src$$.substring(0,8))$src$$="/proxy?url="+encodeURIComponent($src$$);return $src$$};
mxAsyncCanvas.prototype.image=function $mxAsyncCanvas$$image$($image$jscomp$8_x$$,$y$$,$w$$,$h$$,$src$$,$aspect$$,$flipH$$,$flipV$$){$src$$=this.rewriteImageSource($src$$);$image$jscomp$8_x$$=this.htmlCanvas.images[$src$$];null==$image$jscomp$8_x$$&&($image$jscomp$8_x$$=new Image,$image$jscomp$8_x$$.onload=mxUtils.bind(this,function(){this.decWaitCounter()}),$image$jscomp$8_x$$.onerror=mxUtils.bind(this,function(){this.decWaitCounter()}),this.incWaitCounter(),this.htmlCanvas.images[$src$$]=$image$jscomp$8_x$$,
$image$jscomp$8_x$$.src=$src$$)};mxAsyncCanvas.prototype.fill=function $mxAsyncCanvas$$fill$(){};mxAsyncCanvas.prototype.stroke=function $mxAsyncCanvas$$stroke$(){};mxAsyncCanvas.prototype.fillAndStroke=function $mxAsyncCanvas$$fillAndStroke$(){};
mxAsyncCanvas.prototype.text=function $mxAsyncCanvas$$text$($sc_x$$,$y$$,$w$$,$h$$,$str$$,$align$$,$valign$$,$wrap$$,$format$$,$overflow$$,$clip$$,$rotation$$){if(null!=$str$$&&0!=$str$$.length&&($sc_x$$=this.state.scale,"html"==$format$$&&"function"===typeof html2canvas)){this.incWaitCounter();var $canvasIndex$$=this.canvasIndex++;html2canvas($str$$,{onrendered:mxUtils.bind(this,function($canvas$$){this.htmlCanvas.subCanvas[$canvasIndex$$]=$canvas$$;this.decWaitCounter()}),scale:$sc_x$$,logging:!0})}};
mxAsyncCanvas.prototype.finish=function $mxAsyncCanvas$$finish$($handler$$){0==this.waitCounter?$handler$$():this.onComplete=$handler$$};function mxJsCanvas($canvas$$){mxAbstractCanvas2D.call(this);this.ctx=$canvas$$.getContext("2d");this.ctx.textBaseline="top";this.ctx.fillStyle="rgba(255,255,255,0)";this.ctx.strokeStyle="rgba(0, 0, 0, 0)";this.M_RAD_PER_DEG=Math.PI/180;this.images=null==this.images?[]:this.images;this.subCanvas=null==this.subCanvas?[]:this.subCanvas}mxUtils.extend(mxJsCanvas,mxAbstractCanvas2D);mxJsCanvas.prototype.ctx=null;mxJsCanvas.prototype.waitCounter=0;mxJsCanvas.prototype.onComplete=null;
mxJsCanvas.prototype.images=null;mxJsCanvas.prototype.subCanvas=null;mxJsCanvas.prototype.canvasIndex=0;
mxJsCanvas.prototype.hexToRgb=function $mxJsCanvas$$hexToRgb$($hex_result$$){$hex_result$$=$hex_result$$.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function($m$$,$r$$,$g$$,$b$$){return $r$$+$r$$+$g$$+$g$$+$b$$+$b$$});return($hex_result$$=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec($hex_result$$))?{r:parseInt($hex_result$$[1],16),g:parseInt($hex_result$$[2],16),b:parseInt($hex_result$$[3],16)}:null};mxJsCanvas.prototype.incWaitCounter=function $mxJsCanvas$$incWaitCounter$(){this.waitCounter++};
mxJsCanvas.prototype.decWaitCounter=function $mxJsCanvas$$decWaitCounter$(){this.waitCounter--;0==this.waitCounter&&null!=this.onComplete&&(this.onComplete(),this.onComplete=null)};mxJsCanvas.prototype.updateFont=function $mxJsCanvas$$updateFont$(){var $style$$="";(this.state.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&($style$$+="bold ");(this.state.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&($style$$+="italic ");this.ctx.font=$style$$+this.state.fontSize+"px "+this.state.fontFamily};
mxJsCanvas.prototype.save=function $mxJsCanvas$$save$(){this.states.push(this.state);this.state=mxUtils.clone(this.state);this.ctx.save()};mxJsCanvas.prototype.restore=function $mxJsCanvas$$restore$(){this.state=this.states.pop();this.ctx.restore()};mxJsCanvas.prototype.scale=function $mxJsCanvas$$scale$($s$$){this.state.scale*=$s$$;this.state.strokeWidth*=$s$$;this.ctx.scale($s$$,$s$$)};
mxJsCanvas.prototype.translate=function $mxJsCanvas$$translate$($dx$$,$dy$$){this.state.dx+=$dx$$;this.state.dy+=$dy$$;this.ctx.translate($dx$$,$dy$$)};mxJsCanvas.prototype.rotate=function $mxJsCanvas$$rotate$($theta$$,$flipH$$,$flipV$$,$cx$$,$cy$$){$cx$$-=this.state.dx;$cy$$-=this.state.dy;this.ctx.translate($cx$$,$cy$$);($flipH$$||$flipV$$)&&this.ctx.scale($flipH$$?-1:1,$flipV$$?-1:1);this.ctx.rotate($theta$$*this.M_RAD_PER_DEG);this.ctx.translate(-$cx$$,-$cy$$)};
mxJsCanvas.prototype.setAlpha=function $mxJsCanvas$$setAlpha$($alpha$$){this.state.alpha=$alpha$$;this.ctx.globalAlpha=$alpha$$};mxJsCanvas.prototype.setFillColor=function $mxJsCanvas$$setFillColor$($value$$){$value$$==mxConstants.NONE&&($value$$=null);this.state.fillColor=$value$$;this.state.gradientColor=null;this.ctx.fillStyle=$value$$};
mxJsCanvas.prototype.setGradient=function $mxJsCanvas$$setGradient$($color1_rgb1$$,$color2_rgb2$$,$gradient_x$$,$s$jscomp$23_y$$,$w$$,$h$$,$direction$$,$alpha1$$,$alpha2$$){$gradient_x$$=this.ctx.createLinearGradient(0,$s$jscomp$23_y$$,0,$s$jscomp$23_y$$+$h$$);$s$jscomp$23_y$$=this.state;$s$jscomp$23_y$$.fillColor=$color1_rgb1$$;$s$jscomp$23_y$$.fillAlpha=null!=$alpha1$$?$alpha1$$:1;$s$jscomp$23_y$$.gradientColor=$color2_rgb2$$;$s$jscomp$23_y$$.gradientAlpha=null!=$alpha2$$?$alpha2$$:1;$s$jscomp$23_y$$.gradientDirection=
$direction$$;$color1_rgb1$$=this.hexToRgb($color1_rgb1$$);$color2_rgb2$$=this.hexToRgb($color2_rgb2$$);null!=$color1_rgb1$$&&$gradient_x$$.addColorStop(0,"rgba("+$color1_rgb1$$.r+","+$color1_rgb1$$.g+","+$color1_rgb1$$.b+","+$s$jscomp$23_y$$.fillAlpha+")");null!=$color2_rgb2$$&&$gradient_x$$.addColorStop(1,"rgba("+$color2_rgb2$$.r+","+$color2_rgb2$$.g+","+$color2_rgb2$$.b+","+$s$jscomp$23_y$$.gradientAlpha+")");this.ctx.fillStyle=$gradient_x$$};
mxJsCanvas.prototype.setStrokeColor=function $mxJsCanvas$$setStrokeColor$($value$$){null!=$value$$&&($value$$==mxConstants.NONE?(this.state.strokeColor=null,this.ctx.strokeStyle="rgba(0, 0, 0, 0)"):(this.ctx.strokeStyle=$value$$,this.state.strokeColor=$value$$))};mxJsCanvas.prototype.setStrokeWidth=function $mxJsCanvas$$setStrokeWidth$($value$$){this.ctx.lineWidth=$value$$};
mxJsCanvas.prototype.setDashed=function $mxJsCanvas$$setDashed$($dashArray_value$$){if(this.state.dashed=$dashArray_value$$){$dashArray_value$$=this.state.dashPattern.split(" ");for(var $i$$=0;$i$$<$dashArray_value$$.length;$i$$++)$dashArray_value$$[$i$$]=parseInt($dashArray_value$$[$i$$],10);this.setLineDash($dashArray_value$$)}else this.setLineDash([0])};mxJsCanvas.prototype.setLineDash=function $mxJsCanvas$$setLineDash$($value$$){try{"function"===typeof this.ctx.setLineDash&&this.ctx.setLineDash($value$$)}catch($e$$){}};
mxJsCanvas.prototype.setDashPattern=function $mxJsCanvas$$setDashPattern$($dashArray$jscomp$1_value$$){this.state.dashPattern=$dashArray$jscomp$1_value$$;if(this.state.dashed){$dashArray$jscomp$1_value$$=$dashArray$jscomp$1_value$$.split(" ");for(var $i$$=0;$i$$<$dashArray$jscomp$1_value$$.length;$i$$++)$dashArray$jscomp$1_value$$[$i$$]=parseInt($dashArray$jscomp$1_value$$[$i$$],10);this.ctx.setLineDash($dashArray$jscomp$1_value$$)}};
mxJsCanvas.prototype.setLineCap=function $mxJsCanvas$$setLineCap$($value$$){this.ctx.lineCap=$value$$};mxJsCanvas.prototype.setLineJoin=function $mxJsCanvas$$setLineJoin$($value$$){this.ctx.lineJoin=$value$$};mxJsCanvas.prototype.setMiterLimit=function $mxJsCanvas$$setMiterLimit$($value$$){this.ctx.lineJoin=$value$$};mxJsCanvas.prototype.setFontColor=function $mxJsCanvas$$setFontColor$($value$$){this.ctx.fillStyle=$value$$};
mxJsCanvas.prototype.setFontBackgroundColor=function $mxJsCanvas$$setFontBackgroundColor$($value$$){$value$$==mxConstants.NONE&&($value$$=null);this.state.fontBackgroundColor=$value$$};mxJsCanvas.prototype.setFontBorderColor=function $mxJsCanvas$$setFontBorderColor$($value$$){$value$$==mxConstants.NONE&&($value$$=null);this.state.fontBorderColor=$value$$};mxJsCanvas.prototype.setFontSize=function $mxJsCanvas$$setFontSize$($value$$){this.state.fontSize=$value$$};
mxJsCanvas.prototype.setFontFamily=function $mxJsCanvas$$setFontFamily$($value$$){this.state.fontFamily=$value$$};mxJsCanvas.prototype.setFontStyle=function $mxJsCanvas$$setFontStyle$($value$$){this.state.fontStyle=$value$$};
mxJsCanvas.prototype.setShadow=function $mxJsCanvas$$setShadow$($enabled$$){(this.state.shadow=$enabled$$)?(this.setShadowOffset(this.state.shadowDx,this.state.shadowDy),this.setShadowAlpha(this.state.shadowAlpha)):(this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0)};
mxJsCanvas.prototype.setShadowColor=function $mxJsCanvas$$setShadowColor$($rgb_value$$){if(null==$rgb_value$$||$rgb_value$$==mxConstants.NONE)$rgb_value$$=null,this.ctx.shadowColor="transparent";this.state.shadowColor=$rgb_value$$;if(this.state.shadow&&null!=$rgb_value$$){var $alpha$$=null!=this.state.shadowAlpha?this.state.shadowAlpha:1;$rgb_value$$=this.hexToRgb($rgb_value$$);this.ctx.shadowColor="rgba("+$rgb_value$$.r+","+$rgb_value$$.g+","+$rgb_value$$.b+","+$alpha$$+")"}};
mxJsCanvas.prototype.setShadowAlpha=function $mxJsCanvas$$setShadowAlpha$($value$$){this.state.shadowAlpha=$value$$;this.setShadowColor(this.state.shadowColor)};mxJsCanvas.prototype.setShadowOffset=function $mxJsCanvas$$setShadowOffset$($dx$$,$dy$$){this.state.shadowDx=$dx$$;this.state.shadowDy=$dy$$;this.state.shadow&&(this.ctx.shadowOffsetX=$dx$$,this.ctx.shadowOffsetY=$dy$$)};
mxJsCanvas.prototype.moveTo=function $mxJsCanvas$$moveTo$($x$$,$y$$){this.ctx.moveTo($x$$,$y$$);this.lastMoveX=$x$$;this.lastMoveY=$y$$};mxJsCanvas.prototype.lineTo=function $mxJsCanvas$$lineTo$($x$$,$y$$){this.ctx.lineTo($x$$,$y$$);this.lastMoveX=$x$$;this.lastMoveY=$y$$};mxJsCanvas.prototype.quadTo=function $mxJsCanvas$$quadTo$($x1$$,$y1$$,$x2$$,$y2$$){this.ctx.quadraticCurveTo($x1$$,$y1$$,$x2$$,$y2$$);this.lastMoveX=$x2$$;this.lastMoveY=$y2$$};
mxJsCanvas.prototype.arcTo=function $mxJsCanvas$$arcTo$($curves_rx$$,$i$$,$angle$$,$largeArcFlag$$,$sweepFlag$$,$x$$,$y$$){$curves_rx$$=mxUtils.arcToCurves(this.lastMoveX,this.lastMoveY,$curves_rx$$,$i$$,$angle$$,$largeArcFlag$$,$sweepFlag$$,$x$$,$y$$);if(null!=$curves_rx$$)for($i$$=0;$i$$<$curves_rx$$.length;$i$$+=6)this.curveTo($curves_rx$$[$i$$],$curves_rx$$[$i$$+1],$curves_rx$$[$i$$+2],$curves_rx$$[$i$$+3],$curves_rx$$[$i$$+4],$curves_rx$$[$i$$+5])};
mxJsCanvas.prototype.curveTo=function $mxJsCanvas$$curveTo$($x1$$,$y1$$,$x2$$,$y2$$,$x3$$,$y3$$){this.ctx.bezierCurveTo($x1$$,$y1$$,$x2$$,$y2$$,$x3$$,$y3$$);this.lastMoveX=$x3$$;this.lastMoveY=$y3$$};mxJsCanvas.prototype.rect=function $mxJsCanvas$$rect$($x$$,$y$$,$w$$,$h$$){this.begin();this.moveTo($x$$,$y$$);this.lineTo($x$$+$w$$,$y$$);this.lineTo($x$$+$w$$,$y$$+$h$$);this.lineTo($x$$,$y$$+$h$$);this.close()};
mxJsCanvas.prototype.roundrect=function $mxJsCanvas$$roundrect$($x$$,$y$$,$w$$,$h$$,$dx$$,$dy$$){this.begin();this.moveTo($x$$+$dx$$,$y$$);this.lineTo($x$$+$w$$-$dx$$,$y$$);this.quadTo($x$$+$w$$,$y$$,$x$$+$w$$,$y$$+$dy$$);this.lineTo($x$$+$w$$,$y$$+$h$$-$dy$$);this.quadTo($x$$+$w$$,$y$$+$h$$,$x$$+$w$$-$dx$$,$y$$+$h$$);this.lineTo($x$$+$dx$$,$y$$+$h$$);this.quadTo($x$$,$y$$+$h$$,$x$$,$y$$+$h$$-$dy$$);this.lineTo($x$$,$y$$+$dy$$);this.quadTo($x$$,$y$$,$x$$+$dx$$,$y$$)};
mxJsCanvas.prototype.ellipse=function $mxJsCanvas$$ellipse$($x$$,$y$$,$w$$,$h$$){this.ctx.save();this.ctx.translate($x$$+$w$$/2,$y$$+$h$$/2);this.ctx.scale($w$$/2,$h$$/2);this.ctx.beginPath();this.ctx.arc(0,0,1,0,2*Math.PI,!1);this.ctx.restore()};mxJsCanvas.prototype.rewriteImageSource=function $mxJsCanvas$$rewriteImageSource$($src$$){if("http://"==$src$$.substring(0,7)||"https://"==$src$$.substring(0,8))$src$$="/proxy?url="+encodeURIComponent($src$$);return $src$$};
mxJsCanvas.prototype.image=function $mxJsCanvas$$image$($x$jscomp$103_x$$,$y$jscomp$90_y$$,$w$jscomp$48_w$$,$h$jscomp$50_h$$,$image$jscomp$9_src$$,$aspect$jscomp$2_iw$$,$flipH$$,$flipV$$){$image$jscomp$9_src$$=this.rewriteImageSource($image$jscomp$9_src$$);$image$jscomp$9_src$$=this.images[$image$jscomp$9_src$$];if(null!=$image$jscomp$9_src$$&&0<$image$jscomp$9_src$$.height&&0<$image$jscomp$9_src$$.width){var $ctx$$=this.ctx;$ctx$$.save();if($aspect$jscomp$2_iw$$){$aspect$jscomp$2_iw$$=$image$jscomp$9_src$$.width;
var $ih$$=$image$jscomp$9_src$$.height,$s$$=Math.min($w$jscomp$48_w$$/$aspect$jscomp$2_iw$$,$h$jscomp$50_h$$/$ih$$);$x$jscomp$103_x$$+=($w$jscomp$48_w$$-$aspect$jscomp$2_iw$$*$s$$)/2;$y$jscomp$90_y$$+=($h$jscomp$50_h$$-$ih$$*$s$$)/2;$w$jscomp$48_w$$=$aspect$jscomp$2_iw$$*$s$$;$h$jscomp$50_h$$=$ih$$*$s$$}$flipH$$&&($ctx$$.translate(2*$x$jscomp$103_x$$+$w$jscomp$48_w$$,0),$ctx$$.scale(-1,1));$flipV$$&&($ctx$$.translate(0,2*$y$jscomp$90_y$$+$h$jscomp$50_h$$),$ctx$$.scale(1,-1));$ctx$$.drawImage($image$jscomp$9_src$$,
$x$jscomp$103_x$$,$y$jscomp$90_y$$,$w$jscomp$48_w$$,$h$jscomp$50_h$$);$ctx$$.restore()}};mxJsCanvas.prototype.begin=function $mxJsCanvas$$begin$(){this.ctx.beginPath()};mxJsCanvas.prototype.close=function $mxJsCanvas$$close$(){this.ctx.closePath()};mxJsCanvas.prototype.fill=function $mxJsCanvas$$fill$(){this.ctx.fill()};mxJsCanvas.prototype.stroke=function $mxJsCanvas$$stroke$(){this.ctx.stroke()};
mxJsCanvas.prototype.fillAndStroke=function $mxJsCanvas$$fillAndStroke$(){if(this.state.shadow){this.ctx.stroke();this.ctx.fill();var $shadowColor$$=this.ctx.shadowColor,$shadowOffsetX$$=this.ctx.shadowOffsetX,$shadowOffsetY$$=this.ctx.shadowOffsetY;this.ctx.shadowColor="transparent";this.ctx.shadowOffsetX=0;this.ctx.shadowOffsetY=0;this.ctx.stroke();this.ctx.shadowColor=$shadowColor$$;this.ctx.shadowOffsetX=$shadowOffsetX$$;this.ctx.shadowOffsetY=$shadowOffsetY$$}else this.ctx.fill(),this.ctx.stroke()};
mxJsCanvas.prototype.text=function $mxJsCanvas$$text$($startMostX_x$$,$y$$,$i$jscomp$124_sc$jscomp$1_w$$,$h$$,$lines$jscomp$2_str$$,$align$$,$lineWidth_valign$$,$wrap$$,$backgroundY_cavHeight_format$$,$overflow$$,$clip$$,$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$){if(null!=$lines$jscomp$2_str$$&&0!=$lines$jscomp$2_str$$.length){$i$jscomp$124_sc$jscomp$1_w$$=this.state.scale;0!=$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$&&(this.ctx.translate(Math.round($startMostX_x$$),Math.round($y$$)),
this.ctx.rotate($cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$*Math.PI/180),this.ctx.translate(Math.round(-$startMostX_x$$),Math.round(-$y$$)));if("html"==$backgroundY_cavHeight_format$$){$lines$jscomp$2_str$$=this.subCanvas[this.canvasIndex++];$backgroundY_cavHeight_format$$=$lines$jscomp$2_str$$.height;$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$=$lines$jscomp$2_str$$.width;switch($lineWidth_valign$$){case mxConstants.ALIGN_MIDDLE:$y$$-=$backgroundY_cavHeight_format$$/2/$i$jscomp$124_sc$jscomp$1_w$$;
break;case mxConstants.ALIGN_BOTTOM:$y$$-=$backgroundY_cavHeight_format$$/$i$jscomp$124_sc$jscomp$1_w$$}switch($align$$){case mxConstants.ALIGN_CENTER:$startMostX_x$$-=$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$/2/$i$jscomp$124_sc$jscomp$1_w$$;break;case mxConstants.ALIGN_RIGHT:$startMostX_x$$-=$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$/$i$jscomp$124_sc$jscomp$1_w$$}this.ctx.save();if(null!=this.state.fontBackgroundColor||null!=this.state.fontBorderColor)null!=this.state.fontBackgroundColor&&
(this.ctx.fillStyle=this.state.fontBackgroundColor,this.ctx.fillRect(Math.round($startMostX_x$$)-.5,Math.round($y$$)-.5,Math.round($lines$jscomp$2_str$$.width/$i$jscomp$124_sc$jscomp$1_w$$),Math.round($lines$jscomp$2_str$$.height/$i$jscomp$124_sc$jscomp$1_w$$))),null!=this.state.fontBorderColor&&(this.ctx.strokeStyle=this.state.fontBorderColor,this.ctx.lineWidth=1,this.ctx.strokeRect(Math.round($startMostX_x$$)-.5,Math.round($y$$)-.5,Math.round($lines$jscomp$2_str$$.width/$i$jscomp$124_sc$jscomp$1_w$$),
Math.round($lines$jscomp$2_str$$.height/$i$jscomp$124_sc$jscomp$1_w$$)));this.ctx.scale(1/$i$jscomp$124_sc$jscomp$1_w$$,1/$i$jscomp$124_sc$jscomp$1_w$$);this.ctx.drawImage($lines$jscomp$2_str$$,Math.round($startMostX_x$$*$i$jscomp$124_sc$jscomp$1_w$$),Math.round($y$$*$i$jscomp$124_sc$jscomp$1_w$$))}else{this.ctx.save();this.updateFont();$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$=document.createElement("div");$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.innerHTML=$lines$jscomp$2_str$$;
$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.style.position="absolute";$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.style.top="-9999px";$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.style.left="-9999px";$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.style.fontFamily=this.state.fontFamily;$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.style.fontWeight="bold";$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.style.fontSize=this.state.fontSize+"pt";document.body.appendChild($cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$);
$backgroundY_cavHeight_format$$=[$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.offsetWidth,$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$.offsetHeight];document.body.removeChild($cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$);$lines$jscomp$2_str$$=$lines$jscomp$2_str$$.split("\n");$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$=$backgroundY_cavHeight_format$$[1];this.ctx.textBaseline="top";$backgroundY_cavHeight_format$$=$y$$;switch($lineWidth_valign$$){case mxConstants.ALIGN_MIDDLE:this.ctx.textBaseline=
"middle";$y$$-=($lines$jscomp$2_str$$.length-1)*$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$/2;$backgroundY_cavHeight_format$$=$y$$-this.state.fontSize/2;break;case mxConstants.ALIGN_BOTTOM:this.ctx.textBaseline="alphabetic",$y$$-=$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$*($lines$jscomp$2_str$$.length-1),$backgroundY_cavHeight_format$$=$y$$-this.state.fontSize}$lineWidth_valign$$=[];$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$=[];for($i$jscomp$124_sc$jscomp$1_w$$=0;$i$jscomp$124_sc$jscomp$1_w$$<
$lines$jscomp$2_str$$.length;$i$jscomp$124_sc$jscomp$1_w$$++)$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$[$i$jscomp$124_sc$jscomp$1_w$$]=$startMostX_x$$,$lineWidth_valign$$[$i$jscomp$124_sc$jscomp$1_w$$]=this.ctx.measureText($lines$jscomp$2_str$$[$i$jscomp$124_sc$jscomp$1_w$$]).width,null!=$align$$&&$align$$!=mxConstants.ALIGN_LEFT&&($cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$[$i$jscomp$124_sc$jscomp$1_w$$]-=$lineWidth_valign$$[$i$jscomp$124_sc$jscomp$1_w$$],$align$$==mxConstants.ALIGN_CENTER&&
($cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$[$i$jscomp$124_sc$jscomp$1_w$$]+=$lineWidth_valign$$[$i$jscomp$124_sc$jscomp$1_w$$]/2));if(null!=this.state.fontBackgroundColor||null!=this.state.fontBorderColor){$startMostX_x$$=$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$[0];$align$$=$lineWidth_valign$$[0];for($i$jscomp$124_sc$jscomp$1_w$$=1;$i$jscomp$124_sc$jscomp$1_w$$<$lines$jscomp$2_str$$.length;$i$jscomp$124_sc$jscomp$1_w$$++)$startMostX_x$$=Math.min($startMostX_x$$,$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$[$i$jscomp$124_sc$jscomp$1_w$$]),
$align$$=Math.max($align$$,$lineWidth_valign$$[$i$jscomp$124_sc$jscomp$1_w$$]);this.ctx.save();$startMostX_x$$=Math.round($startMostX_x$$)-.5;$backgroundY_cavHeight_format$$=Math.round($backgroundY_cavHeight_format$$)-.5;null!=this.state.fontBackgroundColor&&(this.ctx.fillStyle=this.state.fontBackgroundColor,this.ctx.fillRect($startMostX_x$$,$backgroundY_cavHeight_format$$,$align$$,this.state.fontSize*mxConstants.LINE_HEIGHT*$lines$jscomp$2_str$$.length));null!=this.state.fontBorderColor&&(this.ctx.strokeStyle=
this.state.fontBorderColor,this.ctx.lineWidth=1,this.ctx.strokeRect($startMostX_x$$,$backgroundY_cavHeight_format$$,$align$$,this.state.fontSize*mxConstants.LINE_HEIGHT*$lines$jscomp$2_str$$.length));this.ctx.restore()}for($i$jscomp$124_sc$jscomp$1_w$$=0;$i$jscomp$124_sc$jscomp$1_w$$<$lines$jscomp$2_str$$.length;$i$jscomp$124_sc$jscomp$1_w$$++)this.ctx.fillText($lines$jscomp$2_str$$[$i$jscomp$124_sc$jscomp$1_w$$],$cavWidth_div$jscomp$55_lineHeight_lineX_rotation$$[$i$jscomp$124_sc$jscomp$1_w$$],$y$$),
$y$$+=this.state.fontSize*mxConstants.LINE_HEIGHT}this.ctx.restore()}};mxJsCanvas.prototype.getCanvas=function $mxJsCanvas$$getCanvas$(){return canvas};mxJsCanvas.prototype.finish=function $mxJsCanvas$$finish$($handler$$){0==this.waitCounter?$handler$$():this.onComplete=$handler$$};var guidService=function(){function $init$$(){var $GuidList$$=[];return{getNextGuid:function(){if(5>$GuidList$$.length){var $arr$jscomp$inline_119_url$$=getRootUrl()+"api/guid/requestblock",$i$jscomp$inline_120_request$$=new XMLHttpRequest;$i$jscomp$inline_120_request$$.open("GET",$arr$jscomp$inline_119_url$$,!1);$i$jscomp$inline_120_request$$.send(null);if(200===$i$jscomp$inline_120_request$$.status)for($arr$jscomp$inline_119_url$$=JSON.parse($i$jscomp$inline_120_request$$.responseText),$i$jscomp$inline_120_request$$=
0;$i$jscomp$inline_120_request$$<$arr$jscomp$inline_119_url$$.length;$i$jscomp$inline_120_request$$++)$GuidList$$.push($arr$jscomp$inline_119_url$$[$i$jscomp$inline_120_request$$]);else console.log("error code",error.status),console.log("error description",error.statusText)}return $GuidList$$.pop()}}}var $guidInstance$$;return{getInstance:function(){$guidInstance$$||($guidInstance$$=$init$$());return $guidInstance$$}}}();
function getRootUrl(){return window.location.origin?window.location.origin+"/":window.location.protocol+"/"+window.location.host+"/"};DrawioClient=function $DrawioClient$($editorUi$$,$cookieName$$){mxEventSource.call(this);this.ui=$editorUi$$;this.cookieName=$cookieName$$;this.token=this.getPersistentToken()};mxUtils.extend(DrawioClient,mxEventSource);DrawioClient.prototype.token=null;DrawioClient.prototype.user=null;DrawioClient.prototype.setUser=function $DrawioClient$$setUser$($user$$){this.user=$user$$;this.fireEvent(new mxEventObject("userChanged"))};DrawioClient.prototype.getUser=function $DrawioClient$$getUser$(){return this.user};
DrawioClient.prototype.clearPersistentToken=function $DrawioClient$$clearPersistentToken$(){if(isLocalStorage)localStorage.removeItem("."+this.cookieName),sessionStorage.removeItem("."+this.cookieName);else if("undefined"!=typeof Storage){var $expiration$$=new Date;$expiration$$.setYear($expiration$$.getFullYear()-1);document.cookie=this.cookieName+"=; expires="+$expiration$$.toUTCString()}};
DrawioClient.prototype.getPersistentToken=function $DrawioClient$$getPersistentToken$($name$$){var $end$jscomp$5_token$jscomp$6_value$$=null;isLocalStorage&&($end$jscomp$5_token$jscomp$6_value$$=localStorage.getItem("."+this.cookieName),null==$end$jscomp$5_token$jscomp$6_value$$&&$name$$&&($end$jscomp$5_token$jscomp$6_value$$=sessionStorage.getItem("."+this.cookieName)));if(null==$end$jscomp$5_token$jscomp$6_value$$&&"undefined"!=typeof Storage){var $cookies_expiry$$=document.cookie;$name$$=this.cookieName+
"=";var $start$$=$cookies_expiry$$.indexOf($name$$);0<=$start$$&&($start$$+=$name$$.length,$end$jscomp$5_token$jscomp$6_value$$=$cookies_expiry$$.indexOf(";",$start$$),0>$end$jscomp$5_token$jscomp$6_value$$?$end$jscomp$5_token$jscomp$6_value$$=$cookies_expiry$$.length:postCookie=$cookies_expiry$$.substring($end$jscomp$5_token$jscomp$6_value$$),$end$jscomp$5_token$jscomp$6_value$$=$cookies_expiry$$.substring($start$$,$end$jscomp$5_token$jscomp$6_value$$),$end$jscomp$5_token$jscomp$6_value$$=0<$end$jscomp$5_token$jscomp$6_value$$.length?
$end$jscomp$5_token$jscomp$6_value$$:null,null!=$end$jscomp$5_token$jscomp$6_value$$&&isLocalStorage&&($cookies_expiry$$=new Date,$cookies_expiry$$.setYear($cookies_expiry$$.getFullYear()-1),document.cookie=$name$$+"; expires="+$cookies_expiry$$.toUTCString(),localStorage.setItem("."+this.cookieName,$end$jscomp$5_token$jscomp$6_value$$)))}return $end$jscomp$5_token$jscomp$6_value$$};
DrawioClient.prototype.setPersistentToken=function $DrawioClient$$setPersistentToken$($token$$,$sessionOnly$$){if(null!=$token$$)if(isLocalStorage)$sessionOnly$$?sessionStorage.setItem("."+this.cookieName,$token$$):localStorage.setItem("."+this.cookieName,$token$$);else{if("undefined"!=typeof Storage){var $cookie_expiration$$=new Date;$cookie_expiration$$.setYear($cookie_expiration$$.getFullYear()+10);$cookie_expiration$$=this.cookieName+"="+$token$$+"; path=/"+($sessionOnly$$?"":"; expires="+$cookie_expiration$$.toUTCString());
"https"==document.location.protocol.toLowerCase()&&($cookie_expiration$$+=";secure");document.cookie=$cookie_expiration$$}}else this.clearPersistentToken()};DrawioUser=function $DrawioUser$($id$$,$email$$,$displayName$$,$pictureUrl$$,$locale$$){this.id=$id$$;this.email=$email$$;this.displayName=$displayName$$;this.pictureUrl=$pictureUrl$$;this.locale=$locale$$};DriveFile=function $DriveFile$($ui$$,$data$$,$desc$$){DrawioFile.call(this,$ui$$,$data$$);this.desc=$desc$$};mxUtils.extend(DriveFile,DrawioFile);DriveFile.prototype.saveDelay=0;DriveFile.prototype.allChangesSavedKey="allChangesSavedInDrive";DriveFile.prototype.getSize=function $DriveFile$$getSize$(){return this.desc.fileSize};
DriveFile.prototype.isRestricted=function $DriveFile$$isRestricted$(){return null!=this.desc.userPermission&&null!=this.desc.labels&&"reader"==this.desc.userPermission.role&&this.desc.labels.restricted};DriveFile.prototype.isConflict=function $DriveFile$$isConflict$($err$$){return null!=$err$$&&null!=$err$$.error&&412==$err$$.error.code};DriveFile.prototype.getCurrentUser=function $DriveFile$$getCurrentUser$(){return null!=this.ui.drive?this.ui.drive.user:null};DriveFile.prototype.getMode=function $DriveFile$$getMode$(){return App.MODE_GOOGLE};
DriveFile.prototype.getPublicUrl=function $DriveFile$$getPublicUrl$($fn$$){gapi.client.drive.permissions.list({fileId:this.desc.id}).execute(mxUtils.bind(this,function($resp$$){if(null!=$resp$$&&null!=$resp$$.items)for(var $i$$=0;$i$$<$resp$$.items.length;$i$$++)if("anyoneWithLink"===$resp$$.items[$i$$].id||"anyone"===$resp$$.items[$i$$].id){$fn$$(this.desc.webContentLink);return}$fn$$(null)}))};DriveFile.prototype.isAutosaveOptional=function $DriveFile$$isAutosaveOptional$(){return!0};
DriveFile.prototype.isRenamable=function $DriveFile$$isRenamable$(){return this.isEditable()&&DrawioFile.prototype.isEditable.apply(this,arguments)};DriveFile.prototype.isMovable=function $DriveFile$$isMovable$(){return this.isEditable()};
DriveFile.prototype.save=function $DriveFile$$save$($revision$$,$success$$,$error$$,$unloading$$,$overwrite$$){DrawioFile.prototype.save.apply(this,[$revision$$,mxUtils.bind(this,function(){this.saveFile(null,$revision$$,$success$$,$error$$,$unloading$$,$overwrite$$)}),$error$$,$unloading$$,$overwrite$$])};
DriveFile.prototype.saveFile=function $DriveFile$$saveFile$($title$$,$revision$$,$success$$,$error$$,$unloading$$,$overwrite$$){try{if(!this.isEditable())null!=$success$$&&$success$$();else if(!this.savingFile){var $doSave$$=mxUtils.bind(this,function($realOverwrite$$,$realRevision$$){try{var $lastDesc$$=this.desc,$modified$$=this.isModified();this.setModified(!1);this.savingFile=!0;var $prevModified$$=this.isModified;this.isModified=function $this$isModified$(){return!0};this.ui.drive.saveFile(this,
$realRevision$$,mxUtils.bind(this,function($resp$$,$savedData$$){try{this.isModified=$prevModified$$,this.savingFile=!1,0!=$resp$$?($revision$$&&(this.lastAutosaveRevision=(new Date).getTime()),this.autosaveDelay=Math.min(8E3,Math.max(this.saveDelay+500,DriveFile.prototype.autosaveDelay)),this.desc=$resp$$,this.fileSaved($savedData$$,$lastDesc$$,mxUtils.bind(this,function(){this.contentChanged();null!=$success$$&&$success$$($resp$$)}),$error$$)):(this.setModified($modified$$||this.isModified()),null!=
$error$$&&$error$$($resp$$))}catch($e$$){if(this.setModified($modified$$||this.isModified()),null!=$error$$)$error$$($e$$);else throw $e$$;}}),mxUtils.bind(this,function($err$$,$desc$$){try{this.savingFile=!1,this.isModified=$prevModified$$,this.setModified($modified$$||this.isModified()),this.isConflict($err$$)?(this.inConflictState=!0,null!=this.sync?(this.savingFile=!0,this.sync.fileConflict($desc$$,mxUtils.bind(this,function(){window.setTimeout(mxUtils.bind(this,function(){this.updateFileData();
$doSave$$($realOverwrite$$,!0)}),100+500*Math.random())}),mxUtils.bind(this,function(){this.savingFile=!1;null!=$error$$&&$error$$()}))):null!=$error$$&&$error$$()):null!=$error$$&&$error$$($err$$)}catch($e$$){if(this.setModified($modified$$||this.isModified()),null!=$error$$)$error$$($e$$);else throw $e$$;}}),$unloading$$,$unloading$$,$realOverwrite$$)}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}});$doSave$$($overwrite$$,$revision$$)}}catch($e$$){if(null!=$error$$)$error$$($e$$);
else throw $e$$;}};DriveFile.prototype.copyFile=function $DriveFile$$copyFile$($success$$,$error$$){this.isRestricted()?DrawioFile.prototype.copyFile.apply(this,arguments):this.makeCopy(mxUtils.bind(this,function(){if(this.ui.spinner.spin(document.body,mxResources.get("saving")))try{this.save(!0,$success$$,$error$$)}catch($e$$){$error$$($e$$)}}),$error$$,!0)};
DriveFile.prototype.makeCopy=function $DriveFile$$makeCopy$($success$$,$error$$,$timestamp$$){this.ui.spinner.spin(document.body,mxResources.get("saving"))&&this.saveAs(this.ui.getCopyFilename(this,$timestamp$$),mxUtils.bind(this,function($resp$$){this.desc=$resp$$;this.ui.spinner.stop();this.setModified(!1);this.backupPatch=null;this.inConflictState=this.invalidChecksum=!1;this.descriptorChanged();$success$$()}),mxUtils.bind(this,function(){this.ui.spinner.stop();null!=$error$$&&$error$$()}))};
DriveFile.prototype.saveAs=function $DriveFile$$saveAs$($filename$$,$success$$,$error$$){this.ui.drive.copyFile(this.getId(),$filename$$,$success$$,$error$$)};
DriveFile.prototype.rename=function $DriveFile$$rename$($title$$,$success$$,$error$$){var $etag$$=this.getCurrentEtag();this.ui.drive.renameFile(this.getId(),$title$$,mxUtils.bind(this,function($desc$$){this.hasSameExtension($title$$,this.getTitle())?(this.desc=$desc$$,this.descriptorChanged(),null!=this.sync&&this.sync.descriptorChanged($etag$$),null!=$success$$&&$success$$($desc$$)):(this.desc=$desc$$,null!=this.sync&&this.sync.descriptorChanged($etag$$),this.save(!0,$success$$,$error$$))}),$error$$)};
DriveFile.prototype.move=function $DriveFile$$move$($folderId$$,$success$$,$error$$){this.ui.drive.moveFile(this.getId(),$folderId$$,mxUtils.bind(this,function($resp$$){this.desc=$resp$$;this.descriptorChanged();null!=$success$$&&$success$$($resp$$)}),$error$$)};DriveFile.prototype.getTitle=function $DriveFile$$getTitle$(){return this.desc.title};DriveFile.prototype.getHash=function $DriveFile$$getHash$(){return"G"+this.getId()};DriveFile.prototype.getId=function $DriveFile$$getId$(){return this.desc.id};
DriveFile.prototype.isEditable=function $DriveFile$$isEditable$(){return DrawioFile.prototype.isEditable.apply(this,arguments)&&this.desc.editable};DriveFile.prototype.isSyncSupported=function $DriveFile$$isSyncSupported$(){return!0};DriveFile.prototype.isRevisionHistorySupported=function $DriveFile$$isRevisionHistorySupported$(){return!0};
DriveFile.prototype.getRevisions=function $DriveFile$$getRevisions$($success$$,$error$$){this.ui.drive.executeRequest(gapi.client.drive.revisions.list({fileId:this.getId()}),mxUtils.bind(this,function($resp$$){for(var $i$$=0;$i$$<$resp$$.items.length;$i$$++)mxUtils.bind(this,function($item$$){$item$$.title=$item$$.originalFilename;$item$$.getXml=mxUtils.bind(this,function($itemSuccess$$,$itemError$$){this.ui.drive.getXmlFile($item$$,mxUtils.bind(this,function($file$$){$itemSuccess$$($file$$.getData())}),
$itemError$$)});$item$$.getUrl=mxUtils.bind(this,function($page$$){return this.ui.getUrl(window.location.pathname+"?rev="+$item$$.id+"&chrome=0&nav=1&layers=1&edit=_blank"+(null!=$page$$?"&page="+$page$$:""))+window.location.hash})})($resp$$.items[$i$$]);$success$$($resp$$.items)}),$error$$)};DriveFile.prototype.getLatestVersion=function $DriveFile$$getLatestVersion$($success$$,$error$$){this.ui.drive.getFile(this.getId(),$success$$,$error$$,!0)};
DriveFile.prototype.getChannelId=function $DriveFile$$getChannelId$(){var $chan$$=this.ui.drive.getCustomProperty(this.desc,"channel");null!=$chan$$&&($chan$$="G-"+this.getId()+"."+$chan$$);return $chan$$};DriveFile.prototype.getChannelKey=function $DriveFile$$getChannelKey$(){return this.ui.drive.getCustomProperty(this.desc,"key")};DriveFile.prototype.getLastModifiedDate=function $DriveFile$$getLastModifiedDate$(){return new Date(this.desc.modifiedDate)};DriveFile.prototype.getDescriptor=function $DriveFile$$getDescriptor$(){return this.desc};
DriveFile.prototype.setDescriptor=function $DriveFile$$setDescriptor$($desc$$){this.desc=$desc$$};DriveFile.prototype.getDescriptorSecret=function $DriveFile$$getDescriptorSecret$($desc$$){return this.ui.drive.getCustomProperty($desc$$,"secret")};DriveFile.prototype.getDescriptorEtag=function $DriveFile$$getDescriptorEtag$($desc$$){return $desc$$.etag};DriveFile.prototype.setDescriptorEtag=function $DriveFile$$setDescriptorEtag$($desc$$,$etag$$){$desc$$.etag=$etag$$};
DriveFile.prototype.loadPatchDescriptor=function $DriveFile$$loadPatchDescriptor$($success$$,$error$$){this.ui.drive.executeRequest(gapi.client.drive.files.get({fileId:this.getId(),fields:this.ui.drive.catchupFields,supportsTeamDrives:!0}),mxUtils.bind(this,function($desc$$){$success$$($desc$$)}),$error$$)};
DriveFile.prototype.patchDescriptor=function $DriveFile$$patchDescriptor$($desc$$,$patch$$){DrawioFile.prototype.patchDescriptor.apply(this,arguments);$desc$$.headRevisionId=$patch$$.headRevisionId;$desc$$.modifiedDate=$patch$$.modifiedDate};DriveFile.prototype.loadDescriptor=function $DriveFile$$loadDescriptor$($success$$,$error$$){this.ui.drive.loadDescriptor(this.getId(),$success$$,$error$$)};DriveFile.prototype.commentsSupported=function $DriveFile$$commentsSupported$(){return!0};
DriveFile.prototype.getComments=function $DriveFile$$getComments$($success$$,$error$$){function $driveCommentToDrawio$$($file$$,$gComment$$,$comment$$){if($gComment$$.deleted)return null;$comment$$=new DriveComment($file$$,$gComment$$.commentId||$gComment$$.replyId,$gComment$$.content,$gComment$$.modifiedDate,$gComment$$.createdDate,"resolved"==$gComment$$.status,$gComment$$.author.isAuthenticatedUser?$currentUser$$:new DrawioUser($gComment$$.author.permissionId,$gComment$$.author.emailAddress,$gComment$$.author.displayName,
$gComment$$.author.picture.url),$comment$$);for(var $i$$=0;null!=$gComment$$.replies&&$i$$<$gComment$$.replies.length;$i$$++)$comment$$.addReplyDirect($driveCommentToDrawio$$($file$$,$gComment$$.replies[$i$$],$gComment$$.commentId));return $comment$$}var $currentUser$$=this.ui.getCurrentUser();this.ui.drive.executeRequest(gapi.client.drive.comments.list({fileId:this.getId()}),mxUtils.bind(this,function($resp$$){for(var $comments$$=[],$i$$=0;$i$$<$resp$$.items.length;$i$$++){var $comment$$=$driveCommentToDrawio$$(this,
$resp$$.items[$i$$]);null!=$comment$$&&$comments$$.push($comment$$)}$success$$($comments$$)}),$error$$)};DriveFile.prototype.addComment=function $DriveFile$$addComment$($body$jscomp$1_comment$$,$success$$,$error$$){$body$jscomp$1_comment$$={content:$body$jscomp$1_comment$$.content};this.ui.drive.executeRequest(gapi.client.drive.comments.insert({fileId:this.getId(),resource:$body$jscomp$1_comment$$}),mxUtils.bind(this,function($resp$$){$success$$($resp$$.commentId)}),$error$$)};
DriveFile.prototype.canReplyToReplies=function $DriveFile$$canReplyToReplies$(){return!1};DriveFile.prototype.canComment=function $DriveFile$$canComment$(){return this.desc.canComment};DriveFile.prototype.newComment=function $DriveFile$$newComment$($content$$,$user$$){return new DriveComment(this,null,$content$$,Date.now(),Date.now(),!1,$user$$)};DriveLibrary=function $DriveLibrary$($ui$$,$data$$,$desc$$){DriveFile.call(this,$ui$$,$data$$,$desc$$)};mxUtils.extend(DriveLibrary,DriveFile);DriveLibrary.prototype.isAutosave=function $DriveLibrary$$isAutosave$(){return!0};DriveLibrary.prototype.save=function $DriveLibrary$$save$($revision$$,$success$$,$error$$){this.ui.drive.saveFile(this,$revision$$,mxUtils.bind(this,function($resp$$){this.desc=$resp$$;null!=$success$$&&$success$$($resp$$)}),$error$$)};DriveLibrary.prototype.open=function $DriveLibrary$$open$(){};DriveClient=function $DriveClient$($editorUi$$){mxEventSource.call(this);this.ui=$editorUi$$;this.xmlMimeType="application/vnd.jgraph.mxfile";this.ui.isDriveDomain()?(this.appId="671128082532",this.clientId="671128082532.apps.googleusercontent.com",this.mimeType="application/vnd.jgraph.mxfile.realtime"):(this.appId="420247213240",this.clientId="420247213240-hnbju1pt13seqrc1hhd5htpotk4g9q7u.apps.googleusercontent.com",this.mimeType="application/vnd.jgraph.mxfile.rtlegacy");this.mimeTypes=this.xmlMimeType+
"application/mxe,application/mxr,application/vnd.jgraph.mxfile.realtime,application/vnd.jgraph.mxfile.rtlegacy"};mxUtils.extend(DriveClient,mxEventSource);
DriveClient.prototype.scopes="1"==urlParams.photos?["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/photos","https://www.googleapis.com/auth/photos.upload","https://www.googleapis.com/auth/userinfo.profile"]:["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/userinfo.profile"];DriveClient.prototype.allFields="kind,id,parents,headRevisionId,etag,title,mimeType,modifiedDate,editable,copyable,canComment,labels,properties,downloadUrl,webContentLink,userPermission,fileSize";
DriveClient.prototype.catchupFields="etag,headRevisionId,modifiedDate,properties(key,value)";DriveClient.prototype.enableThumbnails=!0;DriveClient.prototype.thumbnailWidth=1E3;DriveClient.prototype.maxThumbnailSize=2E6;
DriveClient.prototype.placeholderThumbnail="iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAACN1BMVEXwhwXvhgX4iwXzhwXgbQzvhgXhbAzocgzqcwzldAoAAADhbgvjcQnmdgrlbgDwhgXsfwXufgjwhgXwgQfziAXxgADibgz4iwX4jAX3iwTpcwr1igXoewjsfgj3igX4iwXqcQv4jAX3iwXtfQnndQrvhAbibArwhwXgbQz//////v39jwX6jQX+/v7fagHfawzdVQDwhADgbhPgbhXwhwPocQ3uvKvwiA/faQDscgzxiAT97+XgciTgcSP6jAXgbQ3gcCHwiRfpcQzwhwfeXQD77ef74NLvhgTvegD66uPgbAf66+TvfADwjCzgcCfwiSD67ObhcjjwiBHhczvwiyrgbxj///777ujgcSHgcB/xiRzgbhveWgDeVwDhdEDgbRDqfgffYgDfXwD97+bvfQDxiz7//vvwiRr118rrcgztggbfZgDfZAD++PT98+3gbBPsgAb99vD33tPgcB7icAvuhAX//Pn66N/00sTyy7vuuqbjekLwhwzkcgr88er449n++vfutp/kh1vgcBvhbwvmdwnwgwDwgADeWQD87eLxxrTssJjqpIf0roHmjWTkhFP759n63czvvanomnjnlHDhczD22cr4y6/wwa/3xKX2wJ3rqpH0tY7qp4vpnoDymlbjf0vxjjntcwzldAroegj/kgX12s7518PzqnnnkWfynmLieUjpewjrdAD40Lj1uZTzpm3idTbiciLydQzzfwnyiQTsfgD3xqnzp3TxlkzgbCrdTwDdSwBLKUlNAAAAJ3RSTlP8/b2X/YH8wb+FAIuIggJbQin5opAM9+a/ubaubyD78NjSyr2WgRp4sjN4AAAI70lEQVR42u2cZ38SQRDGT8WGvfde4E4BxVMRRaKiUURRlJhQRDCCSgQVO/bee++9994+nMt5ywoezFJd/fm8uITi3p9n5mbYkcCpO6rVnVu2YEXd+3dRIySuo7pLv4GjGNKg7j3UHTl1l14PajmG9OFBnx7Ird4PumpYEtf1QXc112l0M7OGKXEfeg3guo3iNIyJG92Jaz61mYYxcaNacs1H/8f6j6X5j1WI/mMVIsawRFEzI49SjwOqAJa43emclk8Rp2c7AFZ+LDGyvXE2kmO2Q1Lq17RSd6ND48QIwFVuLNHTOPbEpTOz8ujMpccHGz0AV5mxIo4TpwUeUPj0YwfAVVYs0Tn7VZjnBUA8v+n6CyfERY8FR/DEJj7MQ6oL85vOvfDUAsuVC8s19s5yXuAppOPnvPk4EeSCsehCeBVTwVzHfE6RcFUQa4an8Qw91kpbw2oz4aoc1sSxniO0WAI/J24wriabmEpizZtM79bc+fr4/tUarEpiLabGElJYRsOGjbJfjGDpJCxtmosRLOEnVpqLESzZLYlLg65H1rAkLo2GESwcROwXI1jELcS1Y6OGQSzEVaupZQJLDiLhYtCtFBcbbslYhOueqKllDwtzwVhTq4RFuBh0C3EdEBl0C3OBWNUrEISLvSD+5GLQLYmLoSqfwcUiFuaqzhYDxiJc981lxqqdVsCGbHPcQLBgrtK3rwLt9tWqhblKxxI9hW3267U5ZHhuBrCKzXl4NIJTS5FrmbmMWGIEDZIouOp0/O6boYQ2jxBXWcdu13fzRILuF/2Ku+aGr96uBbhALHo5Z38+XcfXyVRZVx/+Ed513ldDCCCu0rFE0Xlo2mu5TAj8ki0XV0q6ePHilhi+d/15b9ACQGGusg3AFzc+XSMBCPzu89+CNlnB7zfD8t1z4iaLXUvDVT6sGdMOnv5pi47f6r9Qk9YF3xZ0l8S11UfMArlgLMpZM6bamYy6rWnta9q7TrZrzZPgPgoqg3atubY8WK6D8lQXHfb4p/wSK7vFfxmxSsAPQ96AlZ4LxoLNeompdkUDGQVznL5mLr4ar5ESD3PBWHA9fbpbjlT4pq1Bm6H6w9dwfOd69ePouNDYt3S3ULPGZ96S3YqtAW/Tepz1E8bgAANc+xEXhAX36ut1cslcd6rJq81SIvgEe7lmL3kY5iqxVYvOI9isswp22KeMOcrriJlWai5giwHl+yec73Ma9Mbfz+qOJndKz6hLpR5V1uPxavFuTTt0K1XfpbNeO0wKeUaR2IPBN5sMRlqu1eY8bsFmPeIFUpi0CjIGTLvSZY2EGeYSi3VL9Dgeb0I+SQl9MlcZT4TObZKzfmfS5NZSx1GsLQ5r+8Sxp7ERR/1TtDlUn2qNuGXCrZGM5URlLDiEVzDVkje5fdjXdDsm27XpXChBz4XG0UpYcDOMYaxjGc3wtyJxFtu1PohaI71f2K2imqEONcN4nrMZ9TWbMf81wg9z3VNwC26Gr3enY4ObobLqbccFefuz5AKONpVfzQp2y3NoVvrN32GLNl9orA22lTiM+Nqg5CJY1DueOjkwsdtNgAP7gidR2SWVhFqt3o9QwoKHIuiwDcwX+xT/UWztSlvCaqXGmtQBY1GadQmfh6anuE0XlkhhRFs3tGGkd+tuIVhiJN0M+brj0mlAu46lX0bcbizVLbgZrgwl4JhYA+NQa9TJQUetsSJYHscJvAVct7eJKoUbQudxPYmdirqzsYsIojhjoitD01yadH287J+vpZF1/uGt2K4ttinjshQo2C2XMzI2U64X6WY4tyZq99a7wZS3eA3BpNyrUPn1x00Z0uM1ACzilOfg7EN3VmRo8dN16WYYerYw6G9qCOSDCjQ0jQkufRbalt65LVyapaA/2mClxhK3Rxy3rsyavDxDR/DL5sMLFiyYu/7sXps7z8VldPv2Xl6PnjlTwOOuJQuytH7CXpvXCOQWoZrYeHWd4nw2Q+v22OLGnFSG0Nk1PCi0xjgjpVvTGi8hht9F+ARBGq8dtXmtOSLoDm1FhUSHnihkTecESalHkPAaWVhtFbA8jqvQGBmbt8fWkKtNn0Xw9GvAWK6DX9bBVHjzqtyvvcG9a+jXyC5oKoKV/a4YFG7Yij2ofszlgtaA3ZoRwW+pIOH3w0qZFURNh3oNtKsDsAr9LNvMC0pj93H6hTPpX9ocg8FIgTVvcgFYC03jFLBMi6ix0MDAoi8/lh7Cgt2q0VfNrSX0ayhjTa2IW0tKdotNrMq4NbPkILKZW+xdiSoGgshogfh7Ul7FcIEoFevfrPLC3+XWf6y/CEvHZoFQqlts9sQigqjLxFpQCJauakFcsqhKPXH79rGb6bE2B5Qmu0b91zn0WJtN8Wys9tgtIqfjEf2SWw7XKI8gHuKQ0X0eDsQSI44TaGBN6dYN5dlI/eFj9I7f8GWtoUJYOIgkiq6Ds/gw5T7dZDUqTrfscbLbB9eIB7JmEKsUgiii/4uO8ToBfJlhfif5tEGWEsGTMT4Mr6HDa0BBlP5Y88lcnkdkCtLhnyjMM0+Gcn2WzW6xnd/J8zn+LZq4SUeEvUBaA8LCs6Tk1p1AetXt3JoMWexWZSyr3RK6vSUGrRHbmkRUVgCLpP1HW/L4tgl5tO140mdKKFFhrkTUdxta4xleA8DCXC6n/vCYvPJFa9zAWL4m6qNaA8IiqjW73lreWnJrSj0AJYFZpvwq6RZRzjVUGEtB5tX7DdoqCXaL+PXHuEjdYsuvVqva4Sqv6NdabdW4YLeIKsoFYzHGhYPIGBd2izGuVpPaSVgAV7VEsOQgsuUXdosxLuwWxLVMW0WRK5ExLiiIpN4vq2YYVTiIbPmFgii5xRiXimCBqmIcVSS3WMqvdMqz5VcKqzdKeca4UrnVT/ryR6bi2Opuf64TwYJlfl4FLqu2Zxeux5BRXZnisvZ8103NqTtzoziuGa24+wZVRdVK9W7wyNSX1nYeOmrU6JSmjp6KhH5BR+kGvk++Ld0c/X66rPH4SEQeGl+kpq8a33eAumPqK347durWpzm9hrWhUevi1Hd4ZzVC+gGMHY0TYnDOYwAAAABJRU5ErkJggg==".replace(/\+/g,"-").replace(/\//g,
"_");DriveClient.prototype.placeholderMimeType="image/png";DriveClient.prototype.libraryMimeType="application/vnd.jgraph.mxlibrary";DriveClient.prototype.newAppHostname="www.draw.io";DriveClient.prototype.oldAppHostname="legacy.draw.io";DriveClient.prototype.extension=".drawio";DriveClient.prototype.tokenRefreshInterval=0;DriveClient.prototype.lastTokenRefresh=0;DriveClient.prototype.maxRetries=5;DriveClient.prototype.coolOff=1E3;DriveClient.prototype.mimeTypeCheckCoolOff=6E4;
DriveClient.prototype.user=null;DriveClient.prototype.setUser=function $DriveClient$$setUser$($user$$){this.user=$user$$;null==this.user&&null!=this.tokenRefreshThread&&(window.clearTimeout(this.tokenRefreshThread),this.tokenRefreshThread=null);this.fireEvent(new mxEventObject("userChanged"))};DriveClient.prototype.getUser=function $DriveClient$$getUser$(){return this.user};
DriveClient.prototype.setUserId=function $DriveClient$$setUserId$($userId$$,$remember$$){if($remember$$)if(isLocalStorage)localStorage.setItem(".guid",$userId$$);else if("undefined"!=typeof Storage)try{var $expiry$$=new Date;$expiry$$.setYear($expiry$$.getFullYear()+1);document.cookie="GUID="+$userId$$+"; expires="+$expiry$$.toUTCString()}catch($e$$){}};
DriveClient.prototype.clearUserId=function $DriveClient$$clearUserId$(){if(isLocalStorage)localStorage.removeItem(".guid");else if("undefined"!=typeof Storage){var $expiry$$=new Date;$expiry$$.setYear($expiry$$.getFullYear()-1);document.cookie="GUID=; expires="+$expiry$$.toUTCString()}};
DriveClient.prototype.getUserId=function $DriveClient$$getUserId$(){var $uid$$=null;null!=this.user&&($uid$$=this.user.id);null==$uid$$&&isLocalStorage&&($uid$$=localStorage.getItem(".guid"));if(null==$uid$$&&"undefined"!=typeof Storage){for(var $cookies$jscomp$1_expiry$$=document.cookie.split(";"),$i$$=0;$i$$<$cookies$jscomp$1_expiry$$.length;$i$$++){var $cookie$$=mxUtils.trim($cookies$jscomp$1_expiry$$[$i$$]);if("GUID="==$cookie$$.substring(0,5)){$uid$$=$cookie$$.substring(5);break}}null!=$uid$$&&
isLocalStorage&&($cookies$jscomp$1_expiry$$=new Date,$cookies$jscomp$1_expiry$$.setYear($cookies$jscomp$1_expiry$$.getFullYear()-1),document.cookie="GUID=; expires="+$cookies$jscomp$1_expiry$$.toUTCString(),localStorage.setItem(".guid",$uid$$))}return $uid$$};
DriveClient.prototype.execute=function $DriveClient$$execute$($fn$$){var $fallback$$=mxUtils.bind(this,function($resp$jscomp$0$$){this.ui.showAuthDialog(this,!0,mxUtils.bind(this,function($remember$$,$success$$){this.authorize(!1,mxUtils.bind(this,function(){null!=$success$$&&$success$$();$fn$$()}),mxUtils.bind(this,function($resp$$){var $msg$$=mxResources.get("cannotLogin");null!=$resp$$&&null!=$resp$$.error&&403==$resp$$.error.code&&null!=$resp$$.error.data&&0<$resp$$.error.data.length&&"domainPolicy"==
$resp$$.error.data[0].reason&&($msg$$=$resp$$.error.message);this.ui.drive.clearUserId();this.ui.drive.setUser(null);gapi.auth.signOut();this.ui.showError(mxResources.get("error"),$msg$$,mxResources.get("help"),mxUtils.bind(this,function(){this.ui.openLink("https://desk.draw.io/support/solutions/articles/16000074659")}),null,mxResources.get("ok"))}),$remember$$)}))});this.authorize(!0,$fn$$,$fallback$$)};
DriveClient.prototype.executeRequest=function $DriveClient$$executeRequest$($req$$,$success$$,$error$$){try{var $acceptResponse$$=!0,$timeoutThread$$=null,$retryCount$$=0;null!=this.requestThread&&window.clearTimeout(this.requestThread);var $fn$$=mxUtils.bind(this,function(){try{this.requestThread=null,this.currentRequest=$req$$,null!=$timeoutThread$$&&window.clearTimeout($timeoutThread$$),$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;null!=$error$$&&$error$$({code:App.ERROR_TIMEOUT,
retry:$fn$$})}),this.ui.timeout),$req$$.execute(mxUtils.bind(this,function($resp$$){try{if(window.clearTimeout($timeoutThread$$),$acceptResponse$$)if(null!=$resp$$&&null==$resp$$.error)null!=$success$$&&$success$$($resp$$);else{var $data$$=null!=$resp$$&&null!=$resp$$.error?null!=$resp$$.error.data?$resp$$.error.data:$resp$$.error.errors:null,$reason$$=null!=$data$$&&0<$data$$.length?$data$$[0].reason:null;null==$error$$||null==$resp$$||null==$resp$$.error||-1!=$resp$$.error.code&&(403!=$resp$$.error.code||
"domainPolicy"!=$reason$$&&"The requested mime type change is forbidden."!=$resp$$.error.message)?null!=$resp$$&&null!=$resp$$.error&&(401==$resp$$.error.code||403==$resp$$.error.code&&"rateLimitExceeded"!=$reason$$)?403==$resp$$.error.code&&null!=this.user||401==$resp$$.error.code&&null!=this.user&&"authError"==$reason$$?null!=$error$$&&$error$$($resp$$):this.execute($fn$$):null!=$resp$$&&null!=$resp$$.error&&412!=$resp$$.error.code&&404!=$resp$$.error.code&&400!=$resp$$.error.code&&this.currentRequest==
$req$$&&$retryCount$$<this.maxRetries?($retryCount$$++,this.requestThread=window.setTimeout($fn$$,Math.round(Math.pow(2,$retryCount$$)*(1+.1*(Math.random()-.5))*this.coolOff))):null!=$error$$&&$error$$($resp$$):$error$$($resp$$)}}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}}))}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}});null==gapi.auth.getToken()?this.execute($fn$$):$fn$$()}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}};
DriveClient.prototype.authorize=function $DriveClient$$authorize$($immediate$$,$success$$,$error$$,$remember$$){try{var $userId$$=this.getUserId();null!=this.ui.stateArg&&null!=this.ui.stateArg.userId&&($userId$$=this.ui.stateArg.userId);if($immediate$$&&null==$userId$$)null!=$error$$&&$error$$();else{var $params$$={scope:this.scopes,client_id:this.clientId};$immediate$$&&null!=$userId$$?($params$$.immediate=!0,$params$$.user_id=$userId$$):($params$$.immediate=!1,$params$$.authuser=-1);gapi.auth.authorize($params$$,
mxUtils.bind(this,function($resp$$){try{null!=$resp$$&&null==$resp$$.error?null!=this.user&&$immediate$$&&this.user.id==$userId$$?null!=$success$$&&$success$$():this.updateUser($success$$,$error$$,$remember$$):null!=$error$$&&$error$$($resp$$),this.resetTokenRefresh($resp$$)}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}}))}}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}};
DriveClient.prototype.resetTokenRefresh=function $DriveClient$$resetTokenRefresh$($resp$$){null!=this.tokenRefreshThread&&(window.clearTimeout(this.tokenRefreshThread),this.tokenRefreshThread=null);null!=$resp$$&&null==$resp$$.error&&0<$resp$$.expires_in&&(this.tokenRefreshInterval=1E3*parseInt($resp$$.expires_in),this.lastTokenRefresh=(new Date).getTime(),this.tokenRefreshThread=window.setTimeout(mxUtils.bind(this,function(){this.authorize(!0,mxUtils.bind(this,function(){}),mxUtils.bind(this,function(){}))}),
900*$resp$$.expires_in))};DriveClient.prototype.checkToken=function $DriveClient$$checkToken$($fn$$){var $connected$$=0<this.lastTokenRefresh;(new Date).getTime()-this.lastTokenRefresh>this.tokenRefreshInterval||null==this.tokenRefreshThread?this.execute(mxUtils.bind(this,function(){$fn$$();$connected$$&&this.fireEvent(new mxEventObject("disconnected"))})):$fn$$()};
DriveClient.prototype.updateUser=function $DriveClient$$updateUser$($success$$,$error$$,$remember$$){try{var $token$$=gapi.auth.getToken().access_token;this.ui.loadUrl("https://www.googleapis.com/oauth2/v2/userinfo?alt=json&access_token="+$token$$,mxUtils.bind(this,function($data$$){var $info$$=JSON.parse($data$$);this.executeRequest(gapi.client.drive.about.get(),mxUtils.bind(this,function($resp$$){var $email$$=mxResources.get("notAvailable"),$name$$=$email$$,$pic$$=null;null!=$resp$$&&null!=$resp$$.user&&
($email$$=$resp$$.user.emailAddress,$name$$=$resp$$.user.displayName,$pic$$=null!=$resp$$.user.picture?$resp$$.user.picture.url:null);this.setUser(new DrawioUser($info$$.id,$email$$,$name$$,$pic$$,$info$$.locale));this.setUserId($info$$.id,$remember$$);null!=$success$$&&$success$$()}),$error$$)}),$error$$)}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}};
DriveClient.prototype.copyFile=function $DriveClient$$copyFile$($id$$,$title$$,$success$$,$error$$){null!=$id$$&&null!=$title$$&&this.executeRequest(gapi.client.drive.files.copy({fileId:$id$$,fields:this.allFields,supportsTeamDrives:!0,resource:{title:$title$$,properties:[{key:"channel",value:Editor.guid()}]}}),$success$$,$error$$)};
DriveClient.prototype.renameFile=function $DriveClient$$renameFile$($id$$,$title$$,$success$$,$error$$){null!=$id$$&&null!=$title$$&&this.executeRequest(this.createDriveRequest($id$$,{title:$title$$}),$success$$,$error$$)};DriveClient.prototype.moveFile=function $DriveClient$$moveFile$($id$$,$folderId$$,$success$$,$error$$){null!=$id$$&&null!=$folderId$$&&this.executeRequest(this.createDriveRequest($id$$,{parents:[{kind:"drive#fileLink",id:$folderId$$}]}),$success$$,$error$$)};
DriveClient.prototype.createDriveRequest=function $DriveClient$$createDriveRequest$($id$$,$body$$){return gapi.client.request({path:"/drive/v2/files/"+$id$$,method:"PUT",params:{uploadType:"multipart",supportsTeamDrives:!0},headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify($body$$)})};DriveClient.prototype.getLibrary=function $DriveClient$$getLibrary$($id$$,$success$$,$error$$){return this.getFile($id$$,$success$$,$error$$,!0,!0)};
DriveClient.prototype.loadDescriptor=function $DriveClient$$loadDescriptor$($id$$,$success$$,$error$$,$fields$$){this.executeRequest(gapi.client.drive.files.get({fileId:$id$$,fields:null!=$fields$$?$fields$$:this.allFields,supportsTeamDrives:!0}),$success$$,$error$$)};
DriveClient.prototype.getCustomProperty=function $DriveClient$$getCustomProperty$($desc$$,$key$$){var $props$$=$desc$$.properties,$result$$=null;if(null!=$props$$)for(var $i$$=0;$i$$<$props$$.length;$i$$++)if($props$$[$i$$].key==$key$$){$result$$=$props$$[$i$$].value;break}return $result$$};
DriveClient.prototype.getFile=function $DriveClient$$getFile$($id$$,$success$$,$error$$,$readXml$$,$readLibrary$$){$readXml$$=null!=$readXml$$?$readXml$$:!1;$readLibrary$$=null!=$readLibrary$$?$readLibrary$$:!1;null!=urlParams.rev?this.executeRequest(gapi.client.drive.revisions.get({fileId:$id$$,revisionId:urlParams.rev,supportsTeamDrives:!0}),mxUtils.bind(this,function($resp$$){$resp$$.title=$resp$$.originalFilename;$resp$$.headRevisionId=$resp$$.id;$resp$$.id=$id$$;this.getXmlFile($resp$$,$success$$,
$error$$)}),$error$$):this.loadDescriptor($id$$,mxUtils.bind(this,function($resp$$){try{if(null!=this.user){var $binary$$=/\.png$/i.test($resp$$.title);if(/\.v(dx|sdx?)$/i.test($resp$$.title)||/\.gliffy$/i.test($resp$$.title)||!this.ui.useCanvasForExport&&$binary$$){var $url$$=$resp$$.downloadUrl+"&access_token="+gapi.auth.getToken().access_token;this.ui.convertFile($url$$,$resp$$.title,$resp$$.mimeType,this.extension,$success$$,$error$$)}else $readXml$$||$readLibrary$$||$resp$$.mimeType==this.libraryMimeType||
$resp$$.mimeType==this.xmlMimeType?this.getXmlFile($resp$$,$success$$,$error$$,!0,$readLibrary$$):this.isGoogleRealtimeMimeType($resp$$.mimeType)?this.convertRealtimeFile($resp$$,$success$$,$error$$):this.getXmlFile($resp$$,$success$$,$error$$)}else $error$$({message:mxResources.get("loggedOut")})}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}}),$error$$)};
DriveClient.prototype.isGoogleRealtimeMimeType=function $DriveClient$$isGoogleRealtimeMimeType$($mimeType$$){return null!=$mimeType$$&&"application/vnd.jgraph.mxfile."==$mimeType$$.substring(0,30)};
DriveClient.prototype.getRealtimeData=function $DriveClient$$getRealtimeData$($id$$,$success$$,$error$$,$retryCount$$){this.executeRequest(gapi.client.drive.realtime.get({fileId:$id$$,supportsTeamDrives:!0}),mxUtils.bind(this,function($json$jscomp$2_resp$$){$json$jscomp$2_resp$$=null!=$json$jscomp$2_resp$$.result?$json$jscomp$2_resp$$.result.data:null;null!=$json$jscomp$2_resp$$&&null!=$json$jscomp$2_resp$$.value&&null!=$json$jscomp$2_resp$$.value.diagrams?$success$$($json$jscomp$2_resp$$):null!=
$error$$&&$error$$({message:"realtime.get returned invalid data for "+$id$$})}),mxUtils.bind(this,function($resp$$){null==$retryCount$$&&($retryCount$$=0);3>$retryCount$$?window.setTimeout(mxUtils.bind(this,function(){this.getRealtimeData($id$$,$success$$,$error$$,$retryCount$$+1)}),100*($retryCount$$+1)):null!=$error$$&&$error$$({message:"realtime.get failed for "+$id$$})}))};
DriveClient.prototype.loadRealtime=function $DriveClient$$loadRealtime$($resp$$,$success$$,$error$$){"1"==urlParams.ignoremime||"420247213240"!=this.appId||"application/vnd.jgraph.mxfile.realtime"!=$resp$$.mimeType&&"application/mxr"!=$resp$$.mimeType?$success$$():this.redirectToNewApp($error$$,$resp$$.id)};
DriveClient.prototype.getXmlFile=function $DriveClient$$getXmlFile$($resp$$,$success$$,$error$$,$ignoreMime$$,$readLibrary$$){try{var $token$$=gapi.auth.getToken().access_token,$url$$=$resp$$.downloadUrl+"&access_token="+$token$$;this.ui.loadUrl($url$$,mxUtils.bind(this,function($data$$){try{if(null==$data$$)$error$$({message:mxResources.get("invalidOrMissingFile")});else if($resp$$.mimeType==this.libraryMimeType||$readLibrary$$)$resp$$.mimeType!=this.libraryMimeType||$readLibrary$$?$success$$(new DriveLibrary(this.ui,
$data$$,$resp$$)):$error$$({message:mxResources.get("notADiagramFile")});else{var $importFile$$=!1;if(/\.png$/i.test($resp$$.title)){var $index$$=$data$$.lastIndexOf(",");if(0<$index$$){var $xml$$=this.ui.extractGraphModelFromPng($data$$.substring($index$$+1));if(null!=$xml$$&&0<$xml$$.length)$data$$=$xml$$;else try{var $xml$$=$data$$.substring($index$$+1),$temp$$=!window.atob||mxClient.IS_IE||mxClient.IS_IE11?Base64.decode($xml$$):atob($xml$$),$node$$=this.ui.editor.extractGraphModel(mxUtils.parseXml($temp$$).documentElement,
!0);null==$node$$||0<$node$$.getElementsByTagName("parsererror").length?$importFile$$=!0:$data$$=$temp$$}catch($e$$){$importFile$$=!0}}}else"data:image/png;base64,PG14ZmlsZS"==$data$$.substring(0,32)&&($temp$$=$data$$.substring(22),$data$$=window.atob&&!mxClient.IS_SF?atob($temp$$):Base64.decode($temp$$));Graph.fileSupport&&(new XMLHttpRequest).upload&&this.ui.isRemoteFileFormat($data$$,$url$$)?this.ui.parseFile(new Blob([$data$$],{type:"application/octet-stream"}),mxUtils.bind(this,function($xhr$$){try{4==
$xhr$$.readyState&&(200<=$xhr$$.status&&299>=$xhr$$.status?$success$$(new LocalFile(this.ui,$xhr$$.responseText,$resp$$.title+this.extension,!0)):null!=$error$$&&$error$$({message:mxResources.get("errorLoadingFile")}))}catch($e$44$$){if(null!=$error$$)$error$$($e$44$$);else throw $e$44$$;}}),$resp$$.title):$success$$($importFile$$?new LocalFile(this.ui,$data$$,$resp$$.title,!0):new DriveFile(this.ui,$data$$,$resp$$))}}catch($e$45$$){if(null!=$error$$)$error$$($e$45$$);else throw $e$45$$;}}),$error$$,
null!=$resp$$.mimeType&&"image/"==$resp$$.mimeType.substring(0,6)&&"image/svg"!=$resp$$.mimeType.substring(0,9)||/\.png$/i.test($resp$$.title)||/\.jpe?g$/i.test($resp$$.title))}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}};
DriveClient.prototype.saveFile=function $DriveClient$$saveFile$($file$$,$revision$$,$success$$,$errFn$$,$noCheck$$,$unloading$$,$overwrite$$,$properties$$){var $error$$=mxUtils.bind(this,function($e$$){if(null!=$errFn$$)$errFn$$($e$$);else throw $e$$;try{if(!$file$$.isConflict($e$$)){var $err$$="error-"+($file$$.getErrorMessage($e$$)||"unknown");null!=$e$$&&null!=$e$$.error&&null!=$e$$.error.code&&($err$$+="-code-"+$e$$.error.code);EditorUi.logEvent({category:"ERROR-SAVE-FILE-"+$file$$.getHash()+
"."+$file$$.desc.headRevisionId+"."+$file$$.desc.modifiedDate+"-size-"+$file$$.getSize(),action:$err$$,label:(null!=this.user?this.user.id:"unknown-user")+"."+(null!=$file$$.sync?$file$$.sync.clientId+"-chan-"+($file$$.sync.channelId||"none"):"-nosync")+(this.ui.editor.autosave?"-autosave-on":"-autosave-off")})}}catch($ex$$){}}),$criticalError$$=mxUtils.bind(this,function($e$$){$error$$($e$$);try{EditorUi.logError($e$$.message,null,null,$e$$),EditorUi.sendReport("Critical error in DriveClient.saveFile "+
(new Date).toISOString()+":\n\nBrowser="+navigator.userAgent+"\nFile="+$file$$.desc.id+"."+$file$$.desc.headRevisionId+"\nUser="+(null!=this.user?this.user.id:"unknown")+"."+(null!=$file$$.sync?$file$$.sync.clientId:"nosync")+"\nMessage="+$e$$.message+"\n\nStack:\n"+$e$$.stack)}catch($e$46$$){}});try{if($file$$.isEditable()&&null!=$file$$.desc){var $t0$$=(new Date).getTime(),$etag0$$=$file$$.desc.etag,$mod0$$=$file$$.desc.modifiedDate,$head0$$=$file$$.desc.headRevisionId,$saveAsPng$$=this.ui.useCanvasForExport&&
/(\.png)$/i.test($file$$.getTitle());$noCheck$$=null!=$noCheck$$?$noCheck$$:!this.ui.isLegacyDriveDomain()||"1"==urlParams.ignoremime;$unloading$$=null!=$unloading$$?$unloading$$:!1;var $doSave$$=mxUtils.bind(this,function($thumb$$,$thumbMime$$,$keepExisting$$){try{var $prevDesc$$=null,$pinned$$=!1,$meta$$={mimeType:$file$$.desc.mimeType,title:$file$$.getTitle()};this.isGoogleRealtimeMimeType($file$$.desc.mimeType)?($meta$$.mimeType=this.xmlMimeType,$prevDesc$$=$file$$.desc,$pinned$$=$revision$$=
!0):"application/octet-stream"==$meta$$.mimeType&&($meta$$.mimeType=this.xmlMimeType);$file$$.constructor==DriveFile&&(null==$properties$$&&($properties$$=[]),null==$file$$.getChannelId()&&$properties$$.push({key:"channel",value:Editor.guid(32)}),null==$file$$.getChannelKey()&&$properties$$.push({key:"key",value:Editor.guid(32)}),$properties$$.push({key:"secret",value:Editor.guid(32)}));$keepExisting$$||(null!=$thumb$$||$unloading$$||($thumb$$=this.placeholderThumbnail,$thumbMime$$=this.placeholderMimeType),
null!=$thumb$$&&null!=$thumbMime$$&&($meta$$.thumbnail={image:$thumb$$,mimeType:$thumbMime$$}));var $savedData$$=$file$$.getData(),$wrapper$$=mxUtils.bind(this,function($resp$jscomp$0$$){try{$file$$.saveDelay=(new Date).getTime()-$t0$$;var $delta$$=(new Date($resp$jscomp$0$$.modifiedDate)).getTime()-(new Date($mod0$$)).getTime();if(0>=$delta$$||$etag0$$==$resp$jscomp$0$$.etag||$revision$$&&$head0$$==$resp$jscomp$0$$.headRevisionId){var $reasons$$=[];0>=$delta$$&&$reasons$$.push("invalid modified time");
$etag0$$==$resp$jscomp$0$$.etag&&$reasons$$.push("stale etag");$revision$$&&$head0$$==$resp$jscomp$0$$.headRevisionId&&$reasons$$.push("stale revision");var $temp$$=$reasons$$.join(", ");$error$$({message:mxResources.get("errorSavingFile")+": "+$temp$$},$resp$jscomp$0$$);try{EditorUi.sendReport("Critical: Error saving to Google Drive "+(new Date).toISOString()+":\n\nBrowser="+navigator.userAgent+"\nFile="+$file$$.desc.id+" "+$file$$.desc.mimeType+"\nUser="+(null!=this.user?this.user.id:"unknown")+
"."+(null!=$file$$.sync?$file$$.sync.clientId:"nosync")+"\nErrors="+$temp$$+"\nOld="+$head0$$+" "+$mod0$$+" etag-hash="+this.ui.hashValue($etag0$$)+"\nNew="+$resp$jscomp$0$$.headRevisionId+" "+$resp$jscomp$0$$.modifiedDate+" etag-hash="+this.ui.hashValue($resp$jscomp$0$$.etag)),EditorUi.logError("Critical: Error saving to Google Drive "+$file$$.desc.id,null,"from-"+$head0$$+"."+$mod0$$+"-"+this.ui.hashValue($etag0$$)+"-to-"+$resp$jscomp$0$$.headRevisionId+"."+$resp$jscomp$0$$.modifiedDate+"-"+this.ui.hashValue($resp$jscomp$0$$.etag)+
(0<$temp$$.length?"-errors-"+$temp$$:""),null!=this.user?this.user.id:"unknown")}catch($e$$){}}else{$success$$($resp$jscomp$0$$,$savedData$$);if(null!=$prevDesc$$){this.executeRequest(gapi.client.drive.revisions.get({fileId:$prevDesc$$.id,revisionId:$prevDesc$$.headRevisionId,supportsTeamDrives:!0}),mxUtils.bind(this,mxUtils.bind(this,function($resp$$){$resp$$.pinned=!0;this.executeRequest(gapi.client.drive.revisions.update({fileId:$prevDesc$$.id,revisionId:$prevDesc$$.headRevisionId,resource:$resp$$}))})));
try{EditorUi.logEvent({category:$file$$.convertedFrom+"-CONVERT-FILE-"+$file$$.getHash(),action:"from-"+$prevDesc$$.id+"."+$prevDesc$$.headRevisionId+"-to-"+$file$$.desc.id+"."+$file$$.desc.headRevisionId,label:null!=this.user?this.user.id:"unknown-user."+(null!=$file$$.sync?$file$$.sync.clientId:"nosync")})}catch($e$47$$){}}try{EditorUi.logEvent({category:"SUCCESS-SAVE-FILE-"+$file$$.getHash()+"."+$head0$$+"."+$mod0$$,action:"saved-"+$resp$jscomp$0$$.headRevisionId+"."+$resp$jscomp$0$$.modifiedDate+
"-size-"+$file$$.getSize(),label:(null!=this.user?this.user.id:"unknown-user")+"."+(null!=$file$$.sync?$file$$.sync.clientId+"-chan-"+($file$$.sync.channelId||"none"):"-nosync")+(this.ui.editor.autosave?"-autosave-on":"-autosave-off")})}catch($e$48$$){}}}catch($e$49$$){$criticalError$$($e$49$$)}}),$doExecuteRequest$$=mxUtils.bind(this,function($data$$,$binary$$){try{null!=$properties$$&&($meta$$.properties=$properties$$);var $etag$$=$overwrite$$||$file$$.constructor!=DriveFile||"manual"!=DrawioFile.SYNC&&
"auto"!=DrawioFile.SYNC?null:$file$$.getCurrentEtag(),$retryCount$$=0,$executeSave$$=mxUtils.bind(this,function($realOverwrite$$){try{var $unknown$$=$file$$.desc.mimeType!=this.xmlMimeType&&$file$$.desc.mimeType!=this.mimeType&&$file$$.desc.mimeType!=this.libraryMimeType;this.executeRequest(this.createUploadRequest($file$$.getId(),$meta$$,$data$$,$revision$$||$realOverwrite$$||$unknown$$,$binary$$,$realOverwrite$$?null:$etag$$,$pinned$$),$wrapper$$,mxUtils.bind(this,function($err$$){try{$file$$.isConflict($err$$)?
this.executeRequest(gapi.client.drive.files.get({fileId:$file$$.getId(),fields:this.catchupFields,supportsTeamDrives:!0}),mxUtils.bind(this,function($resp$$){try{if(null!=$resp$$&&$resp$$.etag==$etag$$)if($retryCount$$<this.maxRetries)$retryCount$$++,window.setTimeout($executeSave$$,2*$retryCount$$*this.coolOff*(1+.1*(Math.random()-.5)));else{$executeSave$$(!0);try{EditorUi.logError("Warning: Stale Etag Overwrite "+$file$$.getHash(),null,$file$$.desc.id+"."+$file$$.desc.headRevisionId,null!=this.user?
this.user.id:"unknown."+(null!=$file$$.sync?$file$$.sync.clientId:"nosync"))}catch($e$$){}}else null!=$error$$&&$error$$($err$$,$resp$$)}catch($e$50$$){$criticalError$$($e$50$$)}}),mxUtils.bind(this,function(){null!=$error$$&&$error$$($err$$)})):$error$$($err$$)}catch($e$$){$criticalError$$($e$$)}}))}catch($e$$){$criticalError$$($e$$)}});if($saveAsPng$$&&null==$thumb$$){var $img$$=new Image;$img$$.onload=mxUtils.bind(this,function(){try{var $s$$=this.thumbnailWidth/$img$$.width,$canvas$$=document.createElement("canvas");
$canvas$$.width=this.thumbnailWidth;$canvas$$.height=Math.floor($img$$.height*$s$$);$canvas$$.getContext("2d").drawImage($img$$,0,0,$canvas$$.width,$canvas$$.height);var $temp$$=$canvas$$.toDataURL(),$temp$$=$temp$$.substring($temp$$.indexOf(",")+1).replace(/\+/g,"-").replace(/\//g,"_");$meta$$.thumbnail={image:$temp$$,mimeType:"image/png"};$executeSave$$(!1)}catch($e$$){$executeSave$$(!1)}});$img$$.src="data:image/png;base64,"+$data$$}else $executeSave$$(!1)}catch($e$$){$criticalError$$($e$$)}});
$saveAsPng$$?this.ui.getEmbeddedPng(mxUtils.bind(this,function($data$$){$doExecuteRequest$$($data$$,!0)}),$error$$,this.ui.getCurrentFile()!=$file$$?$savedData$$:null):$doExecuteRequest$$($savedData$$,!1)}catch($e$$){$criticalError$$($e$$)}}),$fn$$=mxUtils.bind(this,function(){($unloading$$||$saveAsPng$$||$file$$.constructor==DriveLibrary||!this.enableThumbnails||"0"==urlParams.thumb||null!=$file$$.desc.mimeType&&"application/vnd.jgraph.mxfile"!=$file$$.desc.mimeType.substring(0,29)||!this.ui.getThumbnail(this.thumbnailWidth,
mxUtils.bind(this,function($canvas$$){try{var $thumb$$=null;try{null!=$canvas$$&&($thumb$$=$canvas$$.toDataURL("image/png")),null!=$thumb$$&&($thumb$$=$thumb$$.length>this.maxThumbnailSize?null:$thumb$$.substring($thumb$$.indexOf(",")+1).replace(/\+/g,"-").replace(/\//g,"_"))}catch($e$$){$thumb$$=null}$doSave$$($thumb$$,"image/png")}catch($e$51$$){$criticalError$$($e$51$$)}})))&&$doSave$$(null,null,$file$$.constructor!=DriveLibrary)});$noCheck$$||!$revision$$?$fn$$():this.verifyMimeType($file$$.getId(),
$fn$$,!0)}else this.ui.editor.graph.reset(),null!=$error$$&&$error$$({message:mxResources.get("readOnly")})}catch($e$$){$criticalError$$($e$$)}};
DriveClient.prototype.verifyMimeType=function $DriveClient$$verifyMimeType$($fileId$$,$fn$$,$force$$,$error$$){null==this.lastMimeCheck&&(this.lastMimeCheck=0);var $now$$=(new Date).getTime();if($force$$||$now$$-this.lastMimeCheck>this.mimeTypeCheckCoolOff)this.lastMimeCheck=$now$$,this.checkingMimeType||(this.checkingMimeType=!0,this.executeRequest(gapi.client.drive.files.get({fileId:$fileId$$,fields:"mimeType",supportsTeamDrives:!0}),mxUtils.bind(this,function($resp$$){this.checkingMimeType=!1;
null!=$resp$$&&"application/vnd.jgraph.mxfile.realtime"==$resp$$.mimeType?this.redirectToNewApp($error$$,$fileId$$):null!=$fn$$&&$fn$$()})))};
DriveClient.prototype.redirectToNewApp=function $DriveClient$$redirectToNewApp$($error$$,$fileId$$){this.ui.spinner.stop();if(!this.redirectDialogShowing){this.redirectDialogShowing=!0;var $url$$=window.location.protocol+"//"+this.newAppHostname+"/"+this.ui.getSearch("create title mode url drive splash state".split(" "))+"#G"+$fileId$$,$redirect$$=mxUtils.bind(this,function(){this.redirectDialogShowing=!1;window.location.href==$url$$?window.location.reload():window.location.href=$url$$});null!=$error$$?
this.ui.confirm(mxResources.get("redirectToNewApp"),$redirect$$,mxUtils.bind(this,function(){this.redirectDialogShowing=!1;null!=$error$$&&$error$$()})):this.ui.alert(mxResources.get("redirectToNewApp"),$redirect$$)}};
DriveClient.prototype.insertFile=function $DriveClient$$insertFile$($metadata_title$$,$data$$,$folderId$$,$success$$,$error$$,$mimeType$$,$binary$$){$mimeType$$=null!=$mimeType$$?$mimeType$$:this.xmlMimeType;$metadata_title$$={mimeType:$mimeType$$,title:$metadata_title$$};null!=$folderId$$&&($metadata_title$$.parents=[{kind:"drive#fileLink",id:$folderId$$}]);this.executeRequest(this.createUploadRequest(null,$metadata_title$$,$data$$,!1,$binary$$),mxUtils.bind(this,function($resp$$){$mimeType$$==this.libraryMimeType?
$success$$(new DriveLibrary(this.ui,$data$$,$resp$$)):0==$resp$$?null!=$error$$&&$error$$({message:mxResources.get("errorSavingFile")}):$success$$(new DriveFile(this.ui,$data$$,$resp$$))}),$error$$)};
DriveClient.prototype.createUploadRequest=function $DriveClient$$createUploadRequest$($id$$,$metadata$$,$data$$,$revision$$,$binary$$,$etag$$,$pinned$$){$binary$$=null!=$binary$$?$binary$$:!1;var $headers$$={"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'};null!=$etag$$&&($headers$$["If-Match"]=$etag$$);$id$$={path:"/upload/drive/v2/files"+(null!=$id$$?"/"+$id$$:""),method:null!=$id$$?"PUT":"POST",params:{uploadType:"multipart"},headers:$headers$$,body:"\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+
JSON.stringify($metadata$$)+"\r\n---------314159265358979323846\r\nContent-Type: application/octect-stream\r\nContent-Transfer-Encoding: base64\r\n\r\n"+(null!=$data$$?$binary$$?$data$$:Base64.encode($data$$):"")+"\r\n---------314159265358979323846--"};$revision$$||($id$$.params.newRevision=!1);$pinned$$&&($id$$.params.pinned=!0);$id$$.params.supportsTeamDrives=!0;$id$$.params.fields=this.allFields;return gapi.client.request($id$$)};
DriveClient.prototype.pickFile=function $DriveClient$$pickFile$($fn$$,$acceptAllFiles$$){this.filePickerCallback=null!=$fn$$?$fn$$:mxUtils.bind(this,function($id$$){this.ui.loadFile("G"+$id$$)});this.filePicked=mxUtils.bind(this,function($data$$){$data$$.action==google.picker.Action.PICKED&&this.filePickerCallback($data$$.docs[0].id)});this.ui.spinner.spin(document.body,mxResources.get("authorizing"))&&this.execute(mxUtils.bind(this,function(){try{this.ui.spinner.stop();var $token$$=gapi.auth.getToken().access_token,
$name$$=$acceptAllFiles$$?"genericPicker":"filePicker",$exit$$=mxUtils.bind(this,function($evt$$){"picker modal-dialog-bg picker-dialog-bg"==mxEvent.getSource($evt$$).className&&(mxEvent.removeListener(document,"click",$exit$$),this[$name$$].setVisible(!1))});if(null==this[$name$$]||this[$name$$+"Token"]!=$token$$){this[$name$$+"Token"]=$token$$;var $view$$=(new google.picker.DocsView(google.picker.ViewId.FOLDERS)).setParent("root").setIncludeFolders(!0),$view2$$=(new google.picker.DocsView).setIncludeFolders(!0),
$view3$$=(new google.picker.DocsView).setEnableTeamDrives(!0).setIncludeFolders(!0),$view4$$=(new google.picker.DocsUploadView).setIncludeFolders(!0);$acceptAllFiles$$?($view$$.setMimeTypes("*/*"),$view2$$.setMimeTypes("*/*"),$view3$$.setMimeTypes("*/*")):($view$$.setMimeTypes(this.mimeTypes),$view2$$.setMimeTypes(this.mimeTypes),$view3$$.setMimeTypes(this.mimeTypes));this[$name$$]=(new google.picker.PickerBuilder).setOAuthToken(this[$name$$+"Token"]).setLocale(mxLanguage).setAppId(this.appId).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).addView($view$$).addView($view2$$).addView($view3$$).addView(google.picker.ViewId.RECENTLY_PICKED).addView($view4$$).setCallback(mxUtils.bind(this,
function($data$$){$data$$.action!=google.picker.Action.PICKED&&$data$$.action!=google.picker.Action.CANCEL||mxEvent.removeListener(document,"click",$exit$$);$data$$.action==google.picker.Action.PICKED&&this.filePicked($data$$)})).build()}mxEvent.addListener(document,"click",$exit$$);this[$name$$].setVisible(!0)}catch($e$$){this.ui.spinner.stop(),this.ui.handleError($e$$)}}))};
DriveClient.prototype.pickFolder=function $DriveClient$$pickFolder$($fn$$,$force$$){this.folderPickerCallback=$fn$$;var $showPicker$$=mxUtils.bind(this,function(){try{this.ui.spinner.spin(document.body,mxResources.get("authorizing"))&&this.execute(mxUtils.bind(this,function(){try{this.ui.spinner.stop();var $token$$=gapi.auth.getToken().access_token,$exit$$=mxUtils.bind(this,function($evt$$){"picker modal-dialog-bg picker-dialog-bg"==mxEvent.getSource($evt$$).className&&(mxEvent.removeListener(document,
"click",$exit$$),this.folderPicker.setVisible(!1))});if(null==this.folderPicker||this.folderPickerToken!=$token$$){this.folderPickerToken=$token$$;var $view$$=(new google.picker.DocsView(google.picker.ViewId.FOLDERS)).setParent("root").setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder"),$view2$$=(new google.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder"),$view3$$=(new google.picker.DocsView).setIncludeFolders(!0).setEnableTeamDrives(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");
this.folderPicker=(new google.picker.PickerBuilder).setSelectableMimeTypes("application/vnd.google-apps.folder").setOAuthToken(this.folderPickerToken).setLocale(mxLanguage).setAppId(this.appId).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).addView($view$$).addView($view2$$).addView($view3$$).addView(google.picker.ViewId.RECENTLY_PICKED).setTitle(mxResources.get("pickFolder")).setCallback(mxUtils.bind(this,function($data$$){$data$$.action!=google.picker.Action.PICKED&&$data$$.action!=google.picker.Action.CANCEL||
mxEvent.removeListener(document,"click",$exit$$);this.folderPickerCallback($data$$)})).build()}mxEvent.addListener(document,"click",$exit$$);this.folderPicker.setVisible(!0)}catch($e$$){this.ui.spinner.stop(),this.ui.handleError($e$$)}}))}catch($e$$){this.ui.handleError($e$$)}});$force$$?$showPicker$$():this.ui.confirm(mxResources.get("useRootFolder"),mxUtils.bind(this,function(){this.folderPickerCallback({action:google.picker.Action.PICKED,docs:[{type:"folder",id:"root"}]})}),mxUtils.bind(this,function(){$showPicker$$()}),
mxResources.get("yes"),mxResources.get("noPickFolder")+"...",!0)};
DriveClient.prototype.pickLibrary=function $DriveClient$$pickLibrary$($fn$$){this.filePickerCallback=$fn$$;this.filePicked=mxUtils.bind(this,function($data$$){$data$$.action==google.picker.Action.PICKED?this.filePickerCallback($data$$.docs[0].id):$data$$.action==google.picker.Action.CANCEL&&null==this.ui.getCurrentFile()&&this.ui.showSplash()});this.ui.spinner.spin(document.body,mxResources.get("authorizing"))&&this.execute(mxUtils.bind(this,function(){try{this.ui.spinner.stop();var $exit$$=mxUtils.bind(this,
function($evt$$){"picker modal-dialog-bg picker-dialog-bg"==mxEvent.getSource($evt$$).className&&(mxEvent.removeListener(document,"click",$exit$$),this.libraryPicker.setVisible(!1))}),$token$$=gapi.auth.getToken().access_token;if(null==this.libraryPicker||this.libraryPickerToken!=$token$$){this.libraryPickerToken=$token$$;var $view$$=(new google.picker.DocsView(google.picker.ViewId.FOLDERS)).setParent("root").setIncludeFolders(!0).setMimeTypes(this.libraryMimeType+",application/xml,text/plain,application/octet-stream"),
$view2$$=(new google.picker.DocsView).setIncludeFolders(!0).setMimeTypes(this.libraryMimeType+",application/xml,text/plain,application/octet-stream"),$view3$$=(new google.picker.DocsView).setEnableTeamDrives(!0).setIncludeFolders(!0).setMimeTypes(this.libraryMimeType+",application/xml,text/plain,application/octet-stream"),$view4$$=(new google.picker.DocsUploadView).setIncludeFolders(!0);this.libraryPicker=(new google.picker.PickerBuilder).setOAuthToken(this.libraryPickerToken).setLocale(mxLanguage).setAppId(this.appId).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).addView($view$$).addView($view2$$).addView($view3$$).addView(google.picker.ViewId.RECENTLY_PICKED).addView($view4$$).setCallback(mxUtils.bind(this,
function($data$$){$data$$.action!=google.picker.Action.PICKED&&$data$$.action!=google.picker.Action.CANCEL||mxEvent.removeListener(document,"click",$exit$$);$data$$.action==google.picker.Action.PICKED&&this.filePicked($data$$)})).build()}mxEvent.addListener(document,"click",$exit$$);this.libraryPicker.setVisible(!0)}catch($e$$){this.ui.spinner.stop(),this.ui.handleError($e$$)}}))};
DriveClient.prototype.showPermissions=function $DriveClient$$showPermissions$($id$$){var $fallback$$=mxUtils.bind(this,function(){var $dlg$$=new ConfirmDialog(this.ui,mxResources.get("googleSharingNotAvailable"),mxUtils.bind(this,function(){this.ui.editor.graph.openLink("https://drive.google.com/open?id="+$id$$)}),null,mxResources.get("open"),null,null,null,null,IMAGE_PATH+"/google-share.png");this.ui.showDialog($dlg$$.container,360,190,!0,!0);$dlg$$.init()});this.sharingFailed?$fallback$$():this.checkToken(mxUtils.bind(this,
function(){try{var $shareClient$$=new gapi.drive.share.ShareClient(this.appId);$shareClient$$.setOAuthToken(gapi.auth.getToken().access_token);$shareClient$$.setItemIds([$id$$]);$shareClient$$.showSettingsDialog();"MutationObserver"in window&&(null!=this.sharingObserver&&(this.sharingObserver.disconnect(),this.sharingObserver=null),this.sharingObserver=new MutationObserver(mxUtils.bind(this,function($mutations$$){for(var $done$$=!1,$i$$=0;$i$$<$mutations$$.length;$i$$++)for(var $j$$=0;$j$$<$mutations$$[$i$$].addedNodes.length;$j$$++){var $child$$=
$mutations$$[$i$$].addedNodes[$j$$];"BUTTON"==$child$$.nodeName&&"ok"==$child$$.getAttribute("name")&&null!=$child$$.parentNode&&null!=$child$$.parentNode.parentNode&&"dialog"==$child$$.parentNode.parentNode.getAttribute("role")?(this.sharingFailed=!0,$child$$.click(),$fallback$$(),$done$$=!0):"DIV"==$child$$.nodeName&&"shr-q-shr-r-shr-xb"==$child$$.className&&($done$$=!0)}$done$$&&(this.sharingObserver.disconnect(),this.sharingObserver=null)})),this.sharingObserver.observe(document,{childList:!0,
subtree:!0}))}catch($e$$){this.ui.handleError($e$$)}}))};DriveClient.prototype.getRealtimeAge=function $DriveClient$$getRealtimeAge$($desc$$,$json$$){var $mod$$=null!=$json$$&&null!=$json$$.value&&null!=$json$$.value.modifiedDate?$json$$.value.modifiedDate.json:null,$result$$=0;null!=$mod$$&&0<$mod$$&&($mod$$=new Date($mod$$),$result$$=(new Date($desc$$.modifiedDate)).getTime()-$mod$$.getTime());return $result$$};
DriveClient.prototype.convertRealtimeFile=function $DriveClient$$convertRealtimeFile$($desc$$,$success$$,$error$$){var $xmlSuccess$$=mxUtils.bind(this,function($file$$){$file$$.convertedFrom="xml";$success$$($file$$)}),$jsonSuccess$$=mxUtils.bind(this,function($file$$){$file$$.convertedFrom="json";$success$$($file$$)});this.getRealtimeData($desc$$.id,mxUtils.bind(this,function($json$$){try{3E5>this.getRealtimeAge($desc$$,$json$$)?$jsonSuccess$$(new DriveFile(this.ui,mxUtils.getXml(this.convertJsonToXml($json$$)),
$desc$$)):this.getXmlFile($desc$$,$xmlSuccess$$,mxUtils.bind(this,function(){try{$jsonSuccess$$(new DriveFile(this.ui,mxUtils.getXml(this.convertJsonToXml($json$$)),$desc$$))}catch($e$$){this.getXmlFile($desc$$,$xmlSuccess$$,$error$$)}}))}catch($e$$){this.getXmlFile($desc$$,$xmlSuccess$$,$error$$)}}),mxUtils.bind(this,function(){this.getXmlFile($desc$$,$xmlSuccess$$,$error$$)}))};
DriveClient.prototype.convertJsonToXml=function $DriveClient$$convertJsonToXml$($json$$,$uncompressed$$){if(null==$json$$.value||null==$json$$.value.diagrams)throw Error("Invalid JSON: no diagrams in root map");for(var $node$$=mxUtils.createXmlDocument().createElement("mxfile"),$diagrams$$=$json$$.value.diagrams.value,$i$$=0;$i$$<$diagrams$$.length;$i$$++)try{var $diagramNode$$=this.decodeJsonPage($diagrams$$[$i$$].value,$node$$.ownerDocument.createElement("diagram"),$uncompressed$$);$node$$.appendChild($diagramNode$$)}catch($e$$){throw Error("Error on page "+
$i$$+": "+$e$$.stack);}return $node$$};
DriveClient.prototype.decodeJsonPage=function $DriveClient$$decodeJsonPage$($json$$,$node$$,$uncompressed$$){if(null==$json$$)throw Error("Invalid JSON: json for page is null");var $codec$$=new mxCodec,$root$$=this.createJsonCell($json$$.root,$codec$$);if(null==$root$$)throw Error("Invalid JSON: no root cell for page");$codec$$=$codec$$.encode(new mxGraphModel($root$$));this.decodeJsonViewState($json$$,$codec$$);$uncompressed$$?$node$$.appendChild($codec$$):mxUtils.setTextContent($node$$,Graph.compressNode($codec$$));
null!=$json$$.id?$node$$.setAttribute("id",$json$$.id.json):$node$$.setAttribute("id",Editor.guid());null!=$json$$.name&&$node$$.setAttribute("name",$json$$.name.json);return $node$$};
DriveClient.prototype.decodeJsonViewState=function $DriveClient$$decodeJsonViewState$($json$$,$node$$){var $bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$=null!=$json$$.pageFormat?$json$$.pageFormat.json:null;null!=$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$&&0<$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$.length&&($bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$=$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$.split(","),1<$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$.length&&($node$$.setAttribute("pageWidth",
$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$[0]),$node$$.setAttribute("pageHeight",$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$[1])));$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$=null!=$json$$.backgroundColor?$json$$.backgroundColor.json:null;null!=$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$&&0<$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$.length&&$node$$.setAttribute("background",$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$);$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$=
null!=$json$$.backgroundImage?$json$$.backgroundImage.json:null;null!=$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$&&0<$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$.length&&$node$$.setAttribute("backgroundImage",$bg$jscomp$17_img$jscomp$49_pf$jscomp$1_values$$);$node$$.setAttribute("fold",null!=$json$$.foldingEnabled?$json$$.foldingEnabled.json:"0");$node$$.setAttribute("pageScale",null!=$json$$.pageScale?$json$$.pageScale.json:mxGraph.prototype.pageScale);$node$$.setAttribute("math",null!=
$json$$.mathEnabled?$json$$.mathEnabled.json:"0");$node$$.setAttribute("shadow",null!=$json$$.shadowVisible?$json$$.shadowVisible.json:"0");return $node$$};
DriveClient.prototype.createJsonCell=function $DriveClient$$createJsonCell$($json$$,$codec$$){if(null!=$json$$&&null!=$json$$.id){var $val$$=$json$$.value,$cell$$=this.jsonToCell($val$$,$codec$$);$codec$$.putObject($json$$.id,$cell$$);$cell$$.source=null!=$val$$.source?this.createJsonCell($val$$.source,$codec$$):null;$cell$$.target=null!=$val$$.target?this.createJsonCell($val$$.target,$codec$$):null;this.createJsonCell($val$$.parent,$codec$$);for(var $i$$=0;$i$$<$val$$.children.value.length;$i$$++){var $child$$=
this.createJsonCell($val$$.children.value[$i$$],$codec$$);if(null!=$child$$)$cell$$.insert($child$$);else throw Error("Invalid JSON: no child "+$i$$+" for cell "+$json$$.id);}return $cell$$}return null!=$json$$&&null!=$json$$.ref?$codec$$.objects[$json$$.ref]:null};
DriveClient.prototype.jsonToCell=function $DriveClient$$jsonToCell$($val$$,$codec$$){var $cell$$=new mxCell;$cell$$.id=$val$$.cellId.json;$cell$$.vertex="vertex"==$val$$.type.json;$cell$$.edge="edge"==$val$$.type.json;$cell$$.connectable="0"!=$val$$.connectable.json;$cell$$.collapsed="1"==$val$$.collapsed.json;$cell$$.visible="0"!=$val$$.visible.json;$cell$$.style=null!=$val$$.style?$val$$.style.json:null;$cell$$.value=null!=$val$$.xmlValue?mxUtils.parseXml($val$$.xmlValue.json).documentElement:null!=
$val$$.value?$val$$.value.json:null;$cell$$.geometry=null!=$val$$.geometry?$codec$$.decode(mxUtils.parseXml($val$$.geometry.json).documentElement):null;return $cell$$};
DriveClient.prototype.checkRealtimeFiles=function $DriveClient$$checkRealtimeFiles$($fn$$){var $email$$=null!=this.user&&null!=this.user.email?this.user.email:null;this.executeRequest(gapi.client.drive.files.list({maxResults:1,q:"mimeType='application/vnd.jgraph.mxfile.realtime'"+(null!=$email$$?" and '"+$email$$+"' in writers":""),includeTeamDriveItems:!0,supportsTeamDrives:!0}),mxUtils.bind(this,function($res$$){null!=$res$$&&(null!=$res$$.nextPageToken||null!=$res$$.items&&0<$res$$.items.length)&&
$fn$$()}))};
DriveClient.prototype.convertRealtimeFiles=function $DriveClient$$convertRealtimeFiles$(){var $output$$=document.createElement("div");$output$$.style.cssText="position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:8px;background:#ffffff;z-index:2;overflow:auto;white-space:nowrap;line-height:1.5em;";document.body.appendChild($output$$);var $t0$$=Date.now(),$print$$=mxUtils.bind(this,function($msg$$,$noBr$$){$output$$.innerHTML+=$msg$$+($noBr$$?"":"<br>");$output$$.scrollTop=$output$$.scrollHeight});$print$$("draw.io ("+
EditorUi.VERSION+") is searching files to be converted...");this.ui.spinner.spin(document.body,"Searching files...")?this.checkToken(mxUtils.bind(this,function(){var $convertedIds$$={},$converted$$=0,$fromJson$$=0,$fromXml$$=0,$loadFail$$=0,$invalid$$=0,$saveFail$$=0,$failed$$=0,$total$$=0,$queryFail$$=0,$email$$=null!=this.user&&null!=this.user.email?this.user.email:null,$q$$="mimeType='application/vnd.jgraph.mxfile.realtime'"+(null!=$email$$?" and '"+$email$$+"' in writers":""),$done$$=mxUtils.bind(this,
function(){this.ui.spinner.stop();$print$$("<br>Conversion complete. Successfully converted "+$converted$$+" file(s).",!0);0<$failed$$?$print$$(" Failed to convert "+$failed$$+' file(s).<br><br><b>ACTION REQUIRED:</b><br><ul><li>Click <a target="_blank" href="https://drive.google.com/drive/u/0/search?q=type:application/vnd.jgraph.mxfile.realtime">here</a> to list all affected files</li><li>Open each file in turn by right-clicking the file and selecting open with draw.io</li><li>Open each file in turn. When loaded, select File->Save</li></ul>'):
$print$$("<br><br>This window can now be closed.");try{var $dt$$=Date.now()-$t0$$;EditorUi.logEvent({category:"AUTO-CONVERT",action:"total-"+$total$$+"-xml-"+$fromXml$$+"-json-"+$fromJson$$+"-done-"+$converted$$+"-fail-"+$failed$$+"-load-"+$loadFail$$+"-save-"+$saveFail$$+"-invalid-"+$invalid$$+"-dt-"+Math.round($dt$$/1E3),label:null!=this.user?this.user.id:"unknown-user"})}catch($e$$){}}),$getMessage$$=function $$getMessage$$$($err$$){return null==$err$$?"":null!=$err$$.message?$err$$.message:null!=
$err$$.error&&null!=$err$$.error.message?$err$$.error.message:""},$doConvert$$=mxUtils.bind(this,function(){if(this.ui.spinner.spin(document.body,"Converting "+$total$$+" file(s)")){$print$$("Found "+$total$$+" file(s). This will take up to "+Math.ceil(5E3*$total$$/6E4)+" minute(s). <b>Please do not close this window!</b><br>");var $counter$$=0,$nextPage$$=mxUtils.bind(this,function($token$$,$delay$$){var $query$$={maxResults:1,q:$q$$,includeTeamDriveItems:!0,supportsTeamDrives:!0};null!=$token$$&&
($query$$.pageToken=$token$$);var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$nextPage$$($token$$,$delay$$)}),this.ui.timeout);this.executeRequest(gapi.client.drive.files.list($query$$),mxUtils.bind(this,function($res$$){window.clearTimeout($timeoutThread$$);if($acceptResponse$$){var $doNextPage$$=mxUtils.bind(this,function(){null!=$res$$.nextPageToken?$nextPage$$($res$$.nextPageToken):$done$$()});if(null!=$res$$&&null!=$res$$.error)$queryFail$$++,
4>$queryFail$$?$nextPage$$($token$$,$delay$$):(this.ui.spinner.stop(),$print$$("Query for next file failed multiple times. Exiting.<br><br>This window can now be closed."));else if(null==$res$$||null!=$res$$.items&&0!=$res$$.items.length||null==$res$$.nextPageToken)if(null!=$res$$&&null!=$res$$.items&&0<$res$$.items.length){var $fileId$$=$res$$.items[0].id;this.ui.spinner.stop();$counter$$++;this.ui.spinner.spin(document.body,"Converting file "+$counter$$+" of "+$total$$)&&($print$$("Converting "+
$counter$$+" of "+$total$$+': "'+mxUtils.htmlEntities($res$$.items[0].title)+'" (<a href="https://drive.google.com/open?id='+$fileId$$+'" target="_blank">'+$fileId$$+"</a>)... ",!0),window.setTimeout(mxUtils.bind(this,function(){null==$convertedIds$$[$fileId$$]?($acceptResponse$$=$convertedIds$$[$fileId$$]=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$failed$$++;$loadFail$$++;$print$$('<img src="'+this.ui.editor.graph.warningImage.src+'" border="0" valign="absmiddle"/> Timeout');
$doNextPage$$()}),this.ui.timeout),this.getFile($fileId$$,mxUtils.bind(this,function($file$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&($file$$.constructor==DriveFile?("json"==$file$$.convertedFrom?$fromJson$$++:$fromXml$$++,$acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$failed$$++;$saveFail$$++;$print$$('<img src="'+this.ui.editor.graph.warningImage.src+'" border="0" valign="absmiddle"/> Timeout');$doNextPage$$()}),this.ui.timeout),
this.saveFile($file$$,null,mxUtils.bind(this,function(){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&($converted$$++,$print$$('OK <img src="'+Editor.checkmarkImage+'" border="0" valign="middle"/>'),$doNextPage$$())}),mxUtils.bind(this,function($err$jscomp$33_msg$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&($err$jscomp$33_msg$$=$getMessage$$($err$jscomp$33_msg$$),$failed$$++,$saveFail$$++,$print$$('<img src="'+this.ui.editor.graph.warningImage.src+'" border="0" valign="absmiddle"/> '+
$err$jscomp$33_msg$$),$doNextPage$$())}))):($failed$$++,$invalid$$++,$print$$('<img src="'+this.ui.editor.graph.warningImage.src+'" border="0" valign="absmiddle"/> Invalid file'),$doNextPage$$()))}),mxUtils.bind(this,function($err$jscomp$34_msg$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&($err$jscomp$34_msg$$=$getMessage$$($err$jscomp$34_msg$$),$failed$$++,$loadFail$$++,$print$$('<img src="'+this.ui.editor.graph.warningImage.src+'" border="0" valign="absmiddle"/> '+$err$jscomp$34_msg$$),
$doNextPage$$())}))):(this.ui.spinner.stop(),$print$$("Search returned duplicate file "+$fileId$$+". Exiting.<br><br>This window can now be closed."))}),null!=$delay$$?$delay$$:2E3))}else $done$$();else $nextPage$$($res$$.nextPageToken,1E4)}}))});$nextPage$$()}}),$totals$$={maxResults:1E4,q:$q$$,includeTeamDriveItems:!0,supportsTeamDrives:!0},$count$$=mxUtils.bind(this,function($token$$){null!=$token$$&&($totals$$.pageToken=$token$$);this.executeRequest(gapi.client.drive.files.list($totals$$),mxUtils.bind(this,
function($res$$){$total$$+=null!=$res$$&&null!=$res$$.items?$res$$.items.length:0;null!=$res$$.nextPageToken?$count$$($res$$.nextPageToken):(this.ui.spinner.stop(),this.ui.confirm("You are about to convert "+$total$$+" file(s)",mxUtils.bind(this,function(){$doConvert$$()}),mxUtils.bind(this,function(){$print$$("Cancelled by user.<br><br>This window can now be closed.")})))}))});$count$$()})):(this.ui.spinner.stop(),$print$$("Busy. <br><br>This window can now be closed."))};DropboxFile=function $DropboxFile$($ui$$,$data$$,$stat$$){DrawioFile.call(this,$ui$$,$data$$);this.stat=$stat$$};mxUtils.extend(DropboxFile,DrawioFile);DropboxFile.prototype.getId=function $DropboxFile$$getId$(){return this.stat.path_display.substring(1)};DropboxFile.prototype.getHash=function $DropboxFile$$getHash$(){return"D"+encodeURIComponent(this.getId())};DropboxFile.prototype.getMode=function $DropboxFile$$getMode$(){return App.MODE_DROPBOX};DropboxFile.prototype.isAutosaveOptional=function $DropboxFile$$isAutosaveOptional$(){return!0};
DropboxFile.prototype.getTitle=function $DropboxFile$$getTitle$(){return this.stat.name};DropboxFile.prototype.isRenamable=function $DropboxFile$$isRenamable$(){return!0};DropboxFile.prototype.getSize=function $DropboxFile$$getSize$(){return this.stat.size};DropboxFile.prototype.isRevisionHistorySupported=function $DropboxFile$$isRevisionHistorySupported$(){return!0};
DropboxFile.prototype.getRevisions=function $DropboxFile$$getRevisions$($success$$,$error$$){var $promise$$=this.ui.dropbox.client.filesListRevisions({path:this.stat.path_lower,limit:100});$promise$$.then(mxUtils.bind(this,function($resp$$){try{for(var $revs$$=[],$i$$=$resp$$.entries.length-1;0<=$i$$;$i$$--)mxUtils.bind(this,function($stat$$){$revs$$.push({modifiedDate:$stat$$.client_modified,fileSize:$stat$$.size,getXml:mxUtils.bind(this,function($itemSuccess$$,$itemError$$){this.ui.dropbox.readFile({path:this.stat.path_lower,
rev:$stat$$.rev},$itemSuccess$$,$itemError$$)}),getUrl:mxUtils.bind(this,function($page$$){return this.ui.getUrl(window.location.pathname+"?rev="+$stat$$.rev+"&chrome=0&nav=1&layers=1&edit=_blank"+(null!=$page$$?"&page="+$page$$:""))+window.location.hash})})})($resp$$.entries[$i$$]);$success$$($revs$$)}catch($e$$){$error$$($e$$)}}));$promise$$["catch"](function($err$$){$error$$($err$$)})};
DropboxFile.prototype.getLatestVersion=function $DropboxFile$$getLatestVersion$($success$$,$error$$){this.ui.dropbox.getFile(this.getId(),$success$$,$error$$)};DropboxFile.prototype.updateDescriptor=function $DropboxFile$$updateDescriptor$($newFile$$){this.stat=$newFile$$.stat};DropboxFile.prototype.save=function $DropboxFile$$save$($revision$$,$success$$,$error$$){this.doSave(this.getTitle(),$success$$,$error$$)};
DropboxFile.prototype.saveAs=function $DropboxFile$$saveAs$($title$$,$success$$,$error$$){this.doSave($title$$,$success$$,$error$$)};DropboxFile.prototype.doSave=function $DropboxFile$$doSave$($title$$,$success$$,$error$$){var $prev$$=this.stat.name;this.stat.name=$title$$;DrawioFile.prototype.save.apply(this,arguments);this.stat.name=$prev$$;this.saveFile($title$$,!1,$success$$,$error$$)};
DropboxFile.prototype.saveFile=function $DropboxFile$$saveFile$($title$$,$fn$jscomp$56_revision$$,$success$$,$error$$){this.isEditable()?this.savingFile?null!=$error$$&&$error$$({code:App.ERROR_BUSY}):($fn$jscomp$56_revision$$=mxUtils.bind(this,function($checked$$){if($checked$$){this.savingFile=!0;var $prevModified$$=this.isModified,$modified$$=this.isModified(),$prepare$$=mxUtils.bind(this,function(){this.setModified(!1);this.isModified=function $this$isModified$(){return $modified$$}});$prepare$$();
var $doSave$$=mxUtils.bind(this,function($data$$){var $folder_index$$=this.stat.path_display.lastIndexOf("/"),$folder_index$$=1<$folder_index$$?this.stat.path_display.substring(1,$folder_index$$+1):null;this.ui.dropbox.saveFile($title$$,$data$$,mxUtils.bind(this,function($stat$$){this.savingFile=!1;this.isModified=$prevModified$$;this.stat=$stat$$;this.contentChanged();null!=$success$$&&$success$$()}),mxUtils.bind(this,function($err$$){this.savingFile=!1;this.isModified=$prevModified$$;this.setModified($modified$$||
this.isModified());if(null!=$error$$){if(null!=$err$$&&null!=$err$$.retry){var $retry$$=$err$$.retry;$err$$.retry=function $$err$$$retry$(){$prepare$$();$retry$$()}}$error$$($err$$)}}),$folder_index$$)});this.ui.useCanvasForExport&&/(\.png)$/i.test(this.getTitle())?this.ui.getEmbeddedPng(mxUtils.bind(this,function($data$$){$doSave$$(this.ui.base64ToBlob($data$$,"image/png"))}),$error$$,this.ui.getCurrentFile()!=this?this.getData():null):$doSave$$(this.getData())}else null!=$error$$&&$error$$()}),
this.getTitle()==$title$$?$fn$jscomp$56_revision$$(!0):this.ui.dropbox.checkExists($title$$,$fn$jscomp$56_revision$$)):null!=$success$$&&$success$$()};
DropboxFile.prototype.rename=function $DropboxFile$$rename$($title$$,$success$$,$error$$){this.ui.dropbox.renameFile(this,$title$$,mxUtils.bind(this,function($stat$$){this.hasSameExtension($title$$,this.getTitle())?(this.stat=$stat$$,this.descriptorChanged(),null!=$success$$&&$success$$()):(this.stat=$stat$$,this.descriptorChanged(),this.save(!0,$success$$,$error$$))}),$error$$)};DropboxLibrary=function $DropboxLibrary$($ui$$,$data$$,$stat$$){DropboxFile.call(this,$ui$$,$data$$,$stat$$)};mxUtils.extend(DropboxLibrary,DropboxFile);DropboxLibrary.prototype.isAutosave=function $DropboxLibrary$$isAutosave$(){return!0};DropboxLibrary.prototype.doSave=function $DropboxLibrary$$doSave$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};DropboxLibrary.prototype.open=function $DropboxLibrary$$open$(){};DropboxClient=function $DropboxClient$($editorUi$$){DrawioClient.call(this,$editorUi$$,"dbauth");this.client=new Dropbox({clientId:App.DROPBOX_APPKEY});this.client.setAccessToken(this.token)};mxUtils.extend(DropboxClient,DrawioClient);DropboxClient.prototype.appPath="/drawio/";DropboxClient.prototype.extension=".drawio";DropboxClient.prototype.writingFile=!1;DropboxClient.prototype.maxRetries=4;
DropboxClient.prototype.logout=function $DropboxClient$$logout$(){this.clearPersistentToken();this.setUser(null);this.token=null;this.client.authTokenRevoke().then(mxUtils.bind(this,function(){this.client.setAccessToken(null)}))};
DropboxClient.prototype.updateUser=function $DropboxClient$$updateUser$($success$$,$error$$,$failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT})}),this.ui.timeout),$promise$$=this.client.usersGetCurrentAccount();$promise$$.then(mxUtils.bind(this,function($response$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(this.setUser(new DrawioUser($response$$.account_id,$response$$.email,
$response$$.name.display_name)),$success$$())}));$promise$$["catch"](mxUtils.bind(this,function($err$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(null==$err$$||401!==$err$$.status||$failOnAuth$$?$error$$({message:mxResources.get("accessDenied")}):(this.setUser(null),this.client.setAccessToken(null),this.authenticate(mxUtils.bind(this,function(){this.updateUser($success$$,$error$$,!0)}),$error$$)))}))};
DropboxClient.prototype.authenticate=function $DropboxClient$$authenticate$($success$$,$error$$){if(null==window.onDropboxCallback){var $auth$$=mxUtils.bind(this,function(){var $acceptAuthResponse$$=!0;this.ui.showAuthDialog(this,!0,mxUtils.bind(this,function($remember$$,$authSuccess$$){null!=window.open(this.client.getAuthenticationUrl("https://"+window.location.host+"/dropbox.html"),"dbauth")?window.onDropboxCallback=mxUtils.bind(this,function($token$$,$authWindow$$){if($acceptAuthResponse$$){window.onDropboxCallback=
null;$acceptAuthResponse$$=!1;try{null==$token$$?$error$$({message:mxResources.get("accessDenied"),retry:$auth$$}):(null!=$authSuccess$$&&$authSuccess$$(),this.client.setAccessToken($token$$),this.setUser(null),$remember$$&&this.setPersistentToken($token$$),$success$$())}catch($e$$){$error$$($e$$)}finally{null!=$authWindow$$&&$authWindow$$.close()}}else null!=$authWindow$$&&$authWindow$$.close()}):$error$$({message:mxResources.get("serviceUnavailableOrBlocked"),retry:$auth$$})}),mxUtils.bind(this,
function(){$acceptAuthResponse$$&&(window.onDropboxCallback=null,$acceptAuthResponse$$=!1,$error$$({message:mxResources.get("accessDenied"),retry:$auth$$}))}))});$auth$$()}else $error$$({code:App.ERROR_BUSY})};
DropboxClient.prototype.executePromise=function $DropboxClient$$executePromise$($promise$$,$success$$,$error$$){var $doExecute$$=mxUtils.bind(this,function($failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$fn$$})}),this.ui.timeout);$promise$$.then(mxUtils.bind(this,function($response$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&null!=$success$$&&$success$$($response$$)}));
$promise$$["catch"](mxUtils.bind(this,function($err$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(null==$err$$||500!=$err$$.status&&400!=$err$$.status&&401!=$err$$.status?$error$$({message:mxResources.get("error")+" "+$err$$.status}):(this.setUser(null),this.client.setAccessToken(null),$failOnAuth$$?$error$$({message:mxResources.get("accessDenied"),retry:mxUtils.bind(this,function(){this.authenticate(function(){$fn$$(!0)},$error$$)})}):this.authenticate(function(){$doExecute$$(!0)},
$error$$)))}))}),$fn$$=mxUtils.bind(this,function($failOnAuth$$){null==this.user?this.updateUser(function(){$fn$$(!0)},$error$$,$failOnAuth$$):$doExecute$$($failOnAuth$$)});null===this.client.getAccessToken()?this.authenticate(function(){$fn$$(!0)},$error$$):$fn$$(!1)};DropboxClient.prototype.getLibrary=function $DropboxClient$$getLibrary$($path$$,$success$$,$error$$){this.getFile($path$$,$success$$,$error$$,!0)};
DropboxClient.prototype.getFile=function $DropboxClient$$getFile$($path$$,$success$$,$error$$,$asLibrary$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;var $binary$$=/\.png$/i.test($path$$);if(/^https:\/\//i.test($path$$)||/\.v(dx|sdx?)$/i.test($path$$)||/\.gliffy$/i.test($path$$)||!this.ui.useCanvasForExport&&$binary$$){var $arg$jscomp$9_fn$$=mxUtils.bind(this,function(){var $tokens$$=$path$$.split("/");this.ui.convertFile($path$$,0<$tokens$$.length?$tokens$$[$tokens$$.length-1]:$path$$,null,
this.extension,$success$$,$error$$)});null!=this.token?$arg$jscomp$9_fn$$():this.authenticate($arg$jscomp$9_fn$$,$error$$)}else $arg$jscomp$9_fn$$={path:"/"+$path$$},null!=urlParams.rev&&($arg$jscomp$9_fn$$.rev=urlParams.rev),this.readFile($arg$jscomp$9_fn$$,mxUtils.bind(this,function($data$$,$response$$){var $index$jscomp$56_xml$$=$binary$$?$data$$.lastIndexOf(","):-1,$file$$=null;0<$index$jscomp$56_xml$$&&($index$jscomp$56_xml$$=this.ui.extractGraphModelFromPng($data$$.substring($index$jscomp$56_xml$$+
1)),null!=$index$jscomp$56_xml$$&&0<$index$jscomp$56_xml$$.length?$data$$=$index$jscomp$56_xml$$:$file$$=new LocalFile(this,$data$$,$path$$,!0));$success$$(null!=$file$$?$file$$:$asLibrary$$?new DropboxLibrary(this.ui,$data$$,$response$$):new DropboxFile(this.ui,$data$$,$response$$))}),$error$$,$binary$$)};
DropboxClient.prototype.readFile=function $DropboxClient$$readFile$($arg$$,$success$$,$error$$,$binary$$){var $doExecute$$=mxUtils.bind(this,function($failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT})}),this.ui.timeout),$checkPromise_promise$$=this.client.filesGetMetadata({path:"/"+$arg$$.path.substring(1),include_deleted:!1});$checkPromise_promise$$.then(mxUtils.bind(this,function($response$$){}));
$checkPromise_promise$$["catch"](function($err$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&null!=$err$$&&409==$err$$.status&&($acceptResponse$$=!1,$error$$({message:mxResources.get("fileNotFound")}))});$checkPromise_promise$$=this.client.filesDownload($arg$$);$checkPromise_promise$$.then(mxUtils.bind(this,function($response$$){window.clearTimeout($timeoutThread$$);if($acceptResponse$$){$acceptResponse$$=!1;try{var $reader$$=new FileReader;$reader$$.onload=mxUtils.bind(this,function($event$$){$success$$($reader$$.result,
$response$$)});$binary$$?$reader$$.readAsDataURL($response$$.fileBlob):$reader$$.readAsText($response$$.fileBlob)}catch($e$$){$error$$($e$$)}}}));$checkPromise_promise$$["catch"](mxUtils.bind(this,function($err$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&($acceptResponse$$=!1,null==$err$$||500!=$err$$.status&&400!=$err$$.status&&401!=$err$$.status?$error$$({message:mxResources.get("error")+" "+$err$$.status}):(this.client.setAccessToken(null),this.setUser(null),$failOnAuth$$?$error$$({message:mxResources.get("accessDenied"),
retry:mxUtils.bind(this,function(){this.authenticate(function(){$fn$$(!0)},$error$$)})}):this.authenticate(function(){$doExecute$$(!0)},$error$$)))}))}),$fn$$=mxUtils.bind(this,function($failOnAuth$$){null==this.user?this.updateUser(function(){$fn$$(!0)},$error$$,$failOnAuth$$):$doExecute$$($failOnAuth$$)});null===this.client.getAccessToken()?this.authenticate(function(){$fn$$(!0)},$error$$):$fn$$(!1)};
DropboxClient.prototype.checkExists=function $DropboxClient$$checkExists$($filename$$,$fn$$,$noConfirm$$){var $promise$$=this.client.filesGetMetadata({path:"/"+$filename$$.toLowerCase(),include_deleted:!1});this.executePromise($promise$$,mxUtils.bind(this,function($response$$){$noConfirm$$?$fn$$(!1,!0,$response$$):this.ui.confirm(mxResources.get("replaceIt",[$filename$$]),function(){$fn$$(!0,!0,$response$$)},function(){$fn$$(!1,!0,$response$$)})}),function($err$$){$fn$$(!0,!1)})};
DropboxClient.prototype.renameFile=function $DropboxClient$$renameFile$($file$$,$filename$$,$success$$,$error$$){if(/[\\\/:\?\*"\|]/.test($filename$$))$error$$({message:mxResources.get("dropboxCharsNotAllowed")});else{if(null!=$file$$&&null!=$filename$$){var $path$$=$file$$.stat.path_display.substring(1),$idx$$=$path$$.lastIndexOf("/");0<$idx$$&&($filename$$=$path$$.substring(0,$idx$$+1)+$filename$$)}null!=$file$$&&null!=$filename$$&&$file$$.stat.path_lower.substring(1)!==$filename$$.toLowerCase()?
this.checkExists($filename$$,mxUtils.bind(this,function($checked$$,$exists$jscomp$1_promise$$,$response$$){$checked$$?($checked$$=mxUtils.bind(this,function($deleteResponse_move$$){$deleteResponse_move$$=this.client.filesMove({from_path:$file$$.stat.path_display,to_path:"/"+$filename$$,autorename:!1});this.executePromise($deleteResponse_move$$,$success$$,$error$$)}),$exists$jscomp$1_promise$$&&$response$$.path_lower.substring(1)!==$filename$$.toLowerCase()?($exists$jscomp$1_promise$$=this.client.filesDelete({path:"/"+
$filename$$.toLowerCase()}),this.executePromise($exists$jscomp$1_promise$$,$checked$$,$error$$)):$checked$$()):$error$$()})):$error$$({message:mxResources.get("invalidName")})}};DropboxClient.prototype.insertLibrary=function $DropboxClient$$insertLibrary$($filename$$,$data$$,$success$$,$error$$){this.insertFile($filename$$,$data$$,$success$$,$error$$,!0)};
DropboxClient.prototype.insertFile=function $DropboxClient$$insertFile$($filename$$,$data$$,$success$$,$error$$,$asLibrary$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;this.checkExists($filename$$,mxUtils.bind(this,function($checked$$){$checked$$?this.saveFile($filename$$,$data$$,mxUtils.bind(this,function($stat$$){$asLibrary$$?$success$$(new DropboxLibrary(this.ui,$data$$,$stat$$)):$success$$(new DropboxFile(this.ui,$data$$,$stat$$))}),$error$$):$error$$()}))};
DropboxClient.prototype.saveFile=function $DropboxClient$$saveFile$($filename$jscomp$28_promise$$,$data$$,$success$$,$error$$,$folder$$){/[\\\/:\?\*"\|]/.test($filename$jscomp$28_promise$$)?$error$$({message:mxResources.get("dropboxCharsNotAllowed")}):15E7<=$data$$.length?$error$$({message:mxResources.get("drawingTooLarge")+" ("+this.ui.formatFileSize($data$$.length)+" / 150 MB)"}):($filename$jscomp$28_promise$$=this.client.filesUpload({path:"/"+(null!=$folder$$?$folder$$:"")+$filename$jscomp$28_promise$$,
mode:{".tag":"overwrite"},mute:!0,contents:new Blob([$data$$],{type:"text/plain"})}),this.executePromise($filename$jscomp$28_promise$$,$success$$,$error$$))};
DropboxClient.prototype.pickLibrary=function $DropboxClient$$pickLibrary$($fn$$){Dropbox.choose({linkType:"direct",cancel:mxUtils.bind(this,function(){}),success:mxUtils.bind(this,function($files$$){if(this.ui.spinner.spin(document.body,mxResources.get("loading"))){var $error$$=mxUtils.bind(this,function($e$$){this.ui.spinner.stop();this.ui.handleError($e$$)}),$tmp$$=$files$$[0].link.indexOf(this.appPath);if(0<$tmp$$){var $rel$$=decodeURIComponent($files$$[0].link.substring($tmp$$+this.appPath.length-
1));this.readFile({path:$rel$$},mxUtils.bind(this,function($data$$,$stat$$){if(null!=$stat$$&&$stat$$.id==$files$$[0].id)try{this.ui.spinner.stop(),$fn$$($rel$$.substring(1),new DropboxLibrary(this.ui,$data$$,$stat$$))}catch($e$$){this.ui.handleError($e$$)}else this.createLibrary($files$$[0],$fn$$,$error$$)}),$error$$)}else this.createLibrary($files$$[0],$fn$$,$error$$)}})})};
DropboxClient.prototype.createLibrary=function $DropboxClient$$createLibrary$($file$$,$success$$,$error$$){this.ui.confirm(mxResources.get("note")+": "+mxResources.get("fileWillBeSavedInAppFolder",[$file$$.name]),mxUtils.bind(this,function(){this.ui.loadUrl($file$$.link,mxUtils.bind(this,function($data$$){this.insertFile($file$$.name,$data$$,mxUtils.bind(this,function($newFile$$){try{this.ui.spinner.stop(),$success$$($newFile$$.getHash().substring(1),$newFile$$)}catch($e$$){$error$$($e$$)}}),$error$$,
!0)}),$error$$)}),mxUtils.bind(this,function(){this.ui.spinner.stop()}))};
DropboxClient.prototype.pickFile=function $DropboxClient$$pickFile$($fn$$,$readOnly$$){null!=Dropbox.choose?($fn$$=null!=$fn$$?$fn$$:mxUtils.bind(this,function($path$$,$file$$){this.ui.loadFile(null!=$path$$?"D"+encodeURIComponent($path$$):$file$$.getHash(),null,$file$$)}),Dropbox.choose({linkType:"direct",cancel:mxUtils.bind(this,function(){}),success:mxUtils.bind(this,function($files$$){if(this.ui.spinner.spin(document.body,mxResources.get("loading")))if($readOnly$$)this.ui.spinner.stop(),$fn$$($files$$[0].link);
else{var $error$$=mxUtils.bind(this,function($e$$){this.ui.spinner.stop();this.ui.handleError($e$$)}),$success$$=mxUtils.bind(this,function($path$$,$file$$){this.ui.spinner.stop();$fn$$($path$$,$file$$)}),$binary$$=/\.png$/i.test($files$$[0].name);if(/\.vsdx$/i.test($files$$[0].name)||/\.gliffy$/i.test($files$$[0].name)||!this.ui.useCanvasForExport&&$binary$$)$success$$($files$$[0].link);else{var $tmp$$=$files$$[0].link.indexOf(this.appPath);if(0<$tmp$$){var $rel$$=decodeURIComponent($files$$[0].link.substring($tmp$$+
this.appPath.length-1));this.readFile({path:$rel$$},mxUtils.bind(this,function($data$$,$stat$$){if(null!=$stat$$&&$stat$$.id==$files$$[0].id){var $index$jscomp$57_xml$$=$binary$$?$data$$.lastIndexOf(","):-1;this.ui.spinner.stop();var $file$$=null;0<$index$jscomp$57_xml$$&&($index$jscomp$57_xml$$=this.ui.extractGraphModelFromPng($data$$.substring($index$jscomp$57_xml$$+1)),null!=$index$jscomp$57_xml$$&&0<$index$jscomp$57_xml$$.length?$data$$=$index$jscomp$57_xml$$:$file$$=new LocalFile(this,$data$$,
$rel$$,!0));$fn$$($rel$$.substring(1),null!=$file$$?$file$$:new DropboxFile(this.ui,$data$$,$stat$$))}else this.createFile($files$$[0],$success$$,$error$$)}),$error$$,$binary$$)}else this.createFile($files$$[0],$success$$,$error$$)}}})})):this.ui.handleError({message:mxResources.get("serviceUnavailableOrBlocked")})};
DropboxClient.prototype.createFile=function $DropboxClient$$createFile$($file$$,$success$$,$error$$){var $binary$$=/(\.png)$/i.test($file$$.name);this.ui.loadUrl($file$$.link,mxUtils.bind(this,function($data$$){null!=$data$$&&0<$data$$.length?this.ui.confirm(mxResources.get("note")+": "+mxResources.get("fileWillBeSavedInAppFolder",[$file$$.name]),mxUtils.bind(this,function(){var $index$jscomp$58_xml$$=$binary$$?$data$$.lastIndexOf(","):-1;0<$index$jscomp$58_xml$$&&($index$jscomp$58_xml$$=this.ui.extractGraphModelFromPng($data$$.substring($index$jscomp$58_xml$$+
1)),null!=$index$jscomp$58_xml$$&&0<$index$jscomp$58_xml$$.length&&($data$$=$index$jscomp$58_xml$$));this.insertFile($file$$.name,$data$$,mxUtils.bind(this,function($newFile$$){$success$$($file$$.name,$newFile$$)}),$error$$)}),mxUtils.bind(this,function(){this.ui.spinner.stop()})):(this.ui.spinner.stop(),$error$$({message:mxResources.get("errorLoadingFile")}))}),$error$$,$binary$$)};OneDriveFile=function $OneDriveFile$($ui$$,$data$$,$meta$$){DrawioFile.call(this,$ui$$,$data$$);this.meta=$meta$$};mxUtils.extend(OneDriveFile,DrawioFile);OneDriveFile.prototype.getId=function $OneDriveFile$$getId$(){return this.getIdOf(this.meta)};OneDriveFile.prototype.getParentId=function $OneDriveFile$$getParentId$(){return this.getIdOf(this.meta,!0)};
OneDriveFile.prototype.getIdOf=function $OneDriveFile$$getIdOf$($itemObj$$,$parent$$){return(null!=$itemObj$$.parentReference&&null!=$itemObj$$.parentReference.driveId?$itemObj$$.parentReference.driveId+"/":"")+(null!=$parent$$?$itemObj$$.parentReference.id:$itemObj$$.id)};OneDriveFile.prototype.getChannelId=function $OneDriveFile$$getChannelId$(){return"W-"+DrawioFile.prototype.getChannelId.apply(this,arguments)};OneDriveFile.prototype.getHash=function $OneDriveFile$$getHash$(){return"W"+encodeURIComponent(this.getId())};
OneDriveFile.prototype.getMode=function $OneDriveFile$$getMode$(){return App.MODE_ONEDRIVE};OneDriveFile.prototype.isAutosaveOptional=function $OneDriveFile$$isAutosaveOptional$(){return!0};OneDriveFile.prototype.getTitle=function $OneDriveFile$$getTitle$(){return this.meta.name};OneDriveFile.prototype.isRenamable=function $OneDriveFile$$isRenamable$(){return!0};OneDriveFile.prototype.isSyncSupported=function $OneDriveFile$$isSyncSupported$(){return!0};OneDriveFile.prototype.getSize=function $OneDriveFile$$getSize$(){return this.meta.size};
OneDriveFile.prototype.isConflict=function $OneDriveFile$$isConflict$($req$$){return null!=$req$$&&(412==$req$$.getStatus()||409==$req$$.getStatus())};OneDriveFile.prototype.getCurrentUser=function $OneDriveFile$$getCurrentUser$(){return null!=this.ui.oneDrive?this.ui.oneDrive.user:null};
OneDriveFile.prototype.loadDescriptor=function $OneDriveFile$$loadDescriptor$($success$$,$error$$){this.ui.oneDrive.executeRequest(this.ui.oneDrive.getItemURL(this.getId()),mxUtils.bind(this,function($req$$){200<=$req$$.getStatus()&&299>=$req$$.getStatus()?$success$$(JSON.parse($req$$.getText())):null!=$error$$&&$error$$()}),$error$$)};OneDriveFile.prototype.getLatestVersion=function $OneDriveFile$$getLatestVersion$($success$$,$error$$){this.ui.oneDrive.getFile(this.getId(),$success$$,$error$$)};
OneDriveFile.prototype.getDescriptor=function $OneDriveFile$$getDescriptor$(){return this.meta};OneDriveFile.prototype.setDescriptor=function $OneDriveFile$$setDescriptor$($desc$$){this.meta=$desc$$};OneDriveFile.prototype.getDescriptorSecret=function $OneDriveFile$$getDescriptorSecret$($desc$$){return null!=$desc$$.file&&null!=$desc$$.file.hashes&&null!=$desc$$.file.hashes.quickXorHash?$desc$$.file.hashes.quickXorHash:null};OneDriveFile.prototype.getDescriptorEtag=function $OneDriveFile$$getDescriptorEtag$($desc$$){return $desc$$.eTag};
OneDriveFile.prototype.setDescriptorEtag=function $OneDriveFile$$setDescriptorEtag$($desc$$,$etag$$){$desc$$.eTag=$etag$$};
OneDriveFile.prototype.loadPatchDescriptor=function $OneDriveFile$$loadPatchDescriptor$($success$$,$error$$){var $url$$=this.ui.oneDrive.getItemURL(this.getId());this.ui.oneDrive.executeRequest($url$$+"?select=etag,file",mxUtils.bind(this,function($req$$){200<=$req$$.getStatus()&&299>=$req$$.getStatus()?$success$$(JSON.parse($req$$.getText())):$error$$(this.ui.oneDrive.parseRequestText($req$$))}),$error$$)};
OneDriveFile.prototype.getChannelKey=function $OneDriveFile$$getChannelKey$(){return"undefined"!==typeof CryptoJS?CryptoJS.MD5(this.meta.createdDateTime+(null!=this.meta.createdBy&&null!=this.meta.createdBy.user?this.meta.createdBy.user.id:"")).toString():null};OneDriveFile.prototype.getLastModifiedDate=function $OneDriveFile$$getLastModifiedDate$(){return new Date(this.meta.lastModifiedDateTime)};
OneDriveFile.prototype.save=function $OneDriveFile$$save$($revision$$,$success$$,$error$$,$unloading$$,$overwrite$$){DrawioFile.prototype.save.apply(this,[$revision$$,mxUtils.bind(this,function(){this.saveFile(this.getTitle(),!1,$success$$,$error$$,$unloading$$,$overwrite$$)}),$error$$,$unloading$$,$overwrite$$])};
OneDriveFile.prototype.saveAs=function $OneDriveFile$$saveAs$($title$$,$success$$,$error$$){var $prev$$=this.meta.name;this.meta.name=$title$$;DrawioFile.prototype.save.apply(this,arguments);this.meta.name=$prev$$;this.saveFile($title$$,!1,$success$$,$error$$)};OneDriveFile.prototype.doSave=function $OneDriveFile$$doSave$($title$$,$success$$,$error$$,$unloading$$,$overwrite$$){this.saveFile($title$$,!1,$success$$,$error$$,$unloading$$,$overwrite$$)};
OneDriveFile.prototype.saveFile=function $OneDriveFile$$saveFile$($title$$,$revision$$,$success$$,$error$$,$unloading$$,$overwrite$$){if(!this.isEditable())null!=$success$$&&$success$$();else if(!this.savingFile)if(this.getTitle()==$title$$){var $doSave$$=mxUtils.bind(this,function(){var $etag$$=$overwrite$$||this.constructor!=OneDriveFile||"manual"!=DrawioFile.SYNC&&"auto"!=DrawioFile.SYNC?null:this.getCurrentEtag(),$lastDesc$$=this.meta,$prevModified$$=this.isModified,$modified$$=this.isModified();
this.savingFile=!0;var $prepare$$=mxUtils.bind(this,function(){this.setModified(!1);this.isModified=function $this$isModified$(){return $modified$$}});$prepare$$();this.ui.oneDrive.saveFile(this,mxUtils.bind(this,function($meta$$,$savedData$$){this.isModified=$prevModified$$;this.savingFile=!1;this.meta=$meta$$;this.fileSaved($savedData$$,$lastDesc$$,mxUtils.bind(this,function(){this.contentChanged();null!=$success$$&&$success$$()}),$error$$)}),mxUtils.bind(this,function($err$$,$req$$){this.savingFile=
!1;this.isModified=$prevModified$$;this.setModified($modified$$||this.isModified());if(this.isConflict($req$$))this.inConflictState=!0,null!=this.sync?(this.savingFile=!0,this.sync.fileConflict(null,mxUtils.bind(this,function(){window.setTimeout(mxUtils.bind(this,function(){this.updateFileData();$doSave$$()}),100+500*Math.random())}),mxUtils.bind(this,function(){this.savingFile=!1;null!=$error$$&&$error$$()}))):null!=$error$$&&$error$$();else if(null!=$error$$){if(null!=$err$$&&null!=$err$$.retry){var $retry$$=
$err$$.retry;$err$$.retry=function $$err$$$retry$(){$prepare$$();$retry$$()}}$error$$($err$$)}}),$etag$$)});$doSave$$()}else this.savingFile=!0,this.ui.oneDrive.insertFile($title$$,this.getData(),mxUtils.bind(this,function($file$$){this.savingFile=!1;null!=$success$$&&$success$$();this.ui.fileLoaded($file$$)}),mxUtils.bind(this,function(){this.savingFile=!1;null!=$error$$&&$error$$()}))};
OneDriveFile.prototype.rename=function $OneDriveFile$$rename$($title$$,$success$$,$error$$){var $etag$$=this.getCurrentEtag();this.ui.oneDrive.renameFile(this,$title$$,mxUtils.bind(this,function($meta$$){this.hasSameExtension($title$$,this.getTitle())?(this.meta=$meta$$,this.descriptorChanged(),null!=this.sync&&this.sync.descriptorChanged($etag$$),null!=$success$$&&$success$$($meta$$)):(this.meta=$meta$$,null!=this.sync&&this.sync.descriptorChanged($etag$$),this.save(!0,$success$$,$error$$))}),$error$$)};
OneDriveFile.prototype.move=function $OneDriveFile$$move$($folderId$$,$success$$,$error$$){this.ui.oneDrive.moveFile(this.getId(),$folderId$$,mxUtils.bind(this,function($meta$$){this.meta=$meta$$;this.descriptorChanged();null!=$success$$&&$success$$($meta$$)}),$error$$)};OneDriveLibrary=function $OneDriveLibrary$($ui$$,$data$$,$meta$$){OneDriveFile.call(this,$ui$$,$data$$,$meta$$)};mxUtils.extend(OneDriveLibrary,OneDriveFile);OneDriveLibrary.prototype.isAutosave=function $OneDriveLibrary$$isAutosave$(){return!0};OneDriveLibrary.prototype.save=function $OneDriveLibrary$$save$($revision$$,$success$$,$error$$){this.ui.oneDrive.saveFile(this,mxUtils.bind(this,function($resp$$){this.desc=$resp$$;null!=$success$$&&$success$$($resp$$)}),$error$$)};
OneDriveLibrary.prototype.open=function $OneDriveLibrary$$open$(){};OneDriveClient=function $OneDriveClient$($authInfo_editorUi$$){DrawioClient.call(this,$authInfo_editorUi$$,"oneDriveAuthInfo");$authInfo_editorUi$$=JSON.parse(this.token);null!=$authInfo_editorUi$$&&(this.token=$authInfo_editorUi$$.access_token,this.endpointHint=$authInfo_editorUi$$.endpointHint,this.tokenExpiresOn=$authInfo_editorUi$$.expiresOn,$authInfo_editorUi$$=(this.tokenExpiresOn-Date.now())/1E3,this.resetTokenRefresh(600>$authInfo_editorUi$$?1:$authInfo_editorUi$$))};
mxUtils.extend(OneDriveClient,DrawioClient);OneDriveClient.prototype.clientId="test.draw.io"==window.location.hostname?"2e598409-107f-4b59-89ca-d7723c8e00a4":"45c10911-200f-4e27-a666-9e9fca147395";OneDriveClient.prototype.scopes="user.read files.readwrite.all offline_access";OneDriveClient.prototype.redirectUri="https://"+window.location.hostname+"/microsoft";OneDriveClient.prototype.pickerRedirectUri="https://"+window.location.hostname+"/onedrive3.html";OneDriveClient.prototype.defEndpointHint="api.onedrive.com";
OneDriveClient.prototype.endpointHint=OneDriveClient.prototype.defEndpointHint;OneDriveClient.prototype.extension=".drawio";OneDriveClient.prototype.baseUrl="https://graph.microsoft.com/v1.0";OneDriveClient.prototype.emptyFn=function $OneDriveClient$$emptyFn$(){};OneDriveClient.prototype.invalidFilenameRegExs=[/[~"#%\*:<>\?\/\\{\|}]/,/^\.lock$/i,/^CON$/i,/^PRN$/i,/^AUX$/i,/^NUL$/i,/^COM\d$/i,/^LPT\d$/i,/^desktop\.ini$/i,/_vti_/i];
OneDriveClient.prototype.isValidFilename=function $OneDriveClient$$isValidFilename$($filename$$){if(null==$filename$$||""===$filename$$)return!1;for(var $i$$=0;$i$$<this.invalidFilenameRegExs.length;$i$$++)if(this.invalidFilenameRegExs[$i$$].test($filename$$))return!1;return!0};
OneDriveClient.prototype.get=function $OneDriveClient$$get$($req$jscomp$24_url$$,$onload$$,$onerror$$){$req$jscomp$24_url$$=new mxXmlRequest($req$jscomp$24_url$$,null,"GET");$req$jscomp$24_url$$.setRequestHeaders=mxUtils.bind(this,function($request$$,$params$$){$request$$.setRequestHeader("Authorization","Bearer "+this.token)});$req$jscomp$24_url$$.send($onload$$,$onerror$$);return $req$jscomp$24_url$$};
OneDriveClient.prototype.updateUser=function $OneDriveClient$$updateUser$($success$$,$error$$,$failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT})}),this.ui.timeout);this.get(this.baseUrl+"/me",mxUtils.bind(this,function($data$jscomp$174_req$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(200>$data$jscomp$174_req$$.getStatus()||300<=$data$jscomp$174_req$$.getStatus()?$failOnAuth$$?
$error$$({message:mxResources.get("accessDenied")}):(this.logout(),this.authenticate(mxUtils.bind(this,function(){this.updateUser($success$$,$error$$,!0)}),$error$$)):($data$jscomp$174_req$$=JSON.parse($data$jscomp$174_req$$.getText()),this.setUser(new DrawioUser($data$jscomp$174_req$$.id,null,$data$jscomp$174_req$$.displayName)),$success$$()))}),$error$$)};
OneDriveClient.prototype.resetTokenRefresh=function $OneDriveClient$$resetTokenRefresh$($expires_in$$){null!=this.tokenRefreshThread&&(window.clearTimeout(this.tokenRefreshThread),this.tokenRefreshThread=null);0<$expires_in$$&&(this.tokenRefreshInterval=1E3*$expires_in$$,this.tokenRefreshThread=window.setTimeout(mxUtils.bind(this,function(){this.authenticate(this.emptyFn,this.emptyFn,!0)}),900*$expires_in$$))};
OneDriveClient.prototype.authenticate=function $OneDriveClient$$authenticate$($success$$,$error$$,$failOnAuth$$){if(null==window.onOneDriveCallback){var $auth$$=mxUtils.bind(this,function(){var $acceptAuthResponse$$=!0,$authInfo$jscomp$0$$=JSON.parse(this.getPersistentToken(!0));null!=$authInfo$jscomp$0$$?(new mxXmlRequest(this.redirectUri+"?refresh_token="+$authInfo$jscomp$0$$.refresh_token,null,"GET")).send(mxUtils.bind(this,function($authInfo$jscomp$2_req$$){200<=$authInfo$jscomp$2_req$$.getStatus()&&
299>=$authInfo$jscomp$2_req$$.getStatus()?($authInfo$jscomp$2_req$$=JSON.parse($authInfo$jscomp$2_req$$.getText()),this.token=$authInfo$jscomp$2_req$$.access_token,$authInfo$jscomp$2_req$$.access_token=$authInfo$jscomp$2_req$$.access_token,$authInfo$jscomp$2_req$$.refresh_token=$authInfo$jscomp$2_req$$.refresh_token,$authInfo$jscomp$2_req$$.expiresOn=Date.now()+1E3*$authInfo$jscomp$2_req$$.expires_in,this.tokenExpiresOn=$authInfo$jscomp$2_req$$.expiresOn,this.setPersistentToken(JSON.stringify($authInfo$jscomp$2_req$$),
!$authInfo$jscomp$2_req$$.remember),this.resetTokenRefresh($authInfo$jscomp$2_req$$.expires_in),$success$$()):(this.clearPersistentToken(),this.setUser(null),this.token=null,401!=$authInfo$jscomp$2_req$$.getStatus()||$failOnAuth$$?$error$$({message:mxResources.get("accessDenied"),retry:$auth$$}):$auth$$())}),$error$$):this.ui.showAuthDialog(this,!0,mxUtils.bind(this,function($remember$$,$authSuccess$$){var $popup_url$$="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id="+this.clientId+
"&response_type=code&redirect_uri="+encodeURIComponent(this.redirectUri)+"&scope="+encodeURIComponent(this.scopes),$popup_url$$=window.open($popup_url$$,"odauth",["width=525,height=525","top="+(window.screenY+Math.max(window.outerHeight-525,0)/2),"left="+(window.screenX+Math.max(window.outerWidth-525,0)/2),"status=no,resizable=yes,toolbar=no,menubar=no,scrollbars=yes"].join());null!=$popup_url$$&&(window.onOneDriveCallback=mxUtils.bind(this,function($authInfo$$,$authWindow$$){if($acceptAuthResponse$$){window.onOneDriveCallback=
null;$acceptAuthResponse$$=!1;try{null==$authInfo$$?$error$$({message:mxResources.get("accessDenied"),retry:$auth$$}):(null!=$authSuccess$$&&$authSuccess$$(),this.setUser(null),this.token=$authInfo$$.access_token,$authInfo$$.expiresOn=Date.now()+1E3*$authInfo$$.expires_in,this.tokenExpiresOn=$authInfo$$.expiresOn,$authInfo$$.remember=$remember$$,this.setPersistentToken(JSON.stringify($authInfo$$),!$remember$$),this.resetTokenRefresh($authInfo$$.expires_in),this.getAccountTypeAndEndpoint(mxUtils.bind(this,
function(){$success$$()}),$error$$))}catch($e$$){$error$$($e$$)}finally{null!=$authWindow$$&&$authWindow$$.close()}}else null!=$authWindow$$&&$authWindow$$.close()}),$popup_url$$.focus())}),mxUtils.bind(this,function(){$acceptAuthResponse$$&&(window.onOneDriveCallback=null,$acceptAuthResponse$$=!1,$error$$({message:mxResources.get("accessDenied"),retry:$auth$$}))}))});$auth$$()}else $error$$({code:App.ERROR_BUSY})};
OneDriveClient.prototype.getAccountTypeAndEndpoint=function $OneDriveClient$$getAccountTypeAndEndpoint$($success$$,$error$$){this.get(this.baseUrl+"/me/drive/root",mxUtils.bind(this,function($req$$){try{if(200<=$req$$.getStatus()&&299>=$req$$.getStatus()){var $resp$$=JSON.parse($req$$.getText());0<$resp$$.webUrl.indexOf(".sharepoint.com")?this.endpointHint=$resp$$.webUrl:this.endpointHint=this.defEndpointHint;var $authInfo$$=JSON.parse(this.getPersistentToken(!0));null!=$authInfo$$&&($authInfo$$.endpointHint=
this.endpointHint,this.setPersistentToken(JSON.stringify($authInfo$$),!$authInfo$$.remember));$success$$();return}}catch($e$$){}$error$$({message:mxResources.get("unknownError")+" (Code: "+$req$$.getStatus()+")"})}),$error$$)};
OneDriveClient.prototype.executeRequest=function $OneDriveClient$$executeRequest$($url$$,$success$$,$error$$){var $doExecute$$=mxUtils.bind(this,function($failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$doExecute$$})}),this.ui.timeout);this.get($url$$,mxUtils.bind(this,function($req$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(200<=$req$$.getStatus()&&299>=$req$$.getStatus()||
404==$req$$.getStatus()?(null==this.user&&this.updateUser(this.emptyFn,this.emptyFn,!0),$success$$($req$$)):$failOnAuth$$||401!==$req$$.getStatus()&&400!==$req$$.getStatus()?$error$$(this.parseRequestText($req$$)):this.authenticate(function(){$doExecute$$(!0)},$error$$,$failOnAuth$$))}),$error$$)});null==this.token||6E4>this.tokenExpiresOn-Date.now()?this.authenticate(function(){$doExecute$$(!0)},$error$$):$doExecute$$(!1)};
OneDriveClient.prototype.checkToken=function $OneDriveClient$$checkToken$($fn$$){null==this.token||null==this.tokenRefreshThread||6E4>this.tokenExpiresOn-Date.now()?this.authenticate($fn$$,this.emptyFn):$fn$$()};OneDriveClient.prototype.getItemRef=function $OneDriveClient$$getItemRef$($id$$){var $idParts$$=$id$$.split("/");return 1<$idParts$$.length?{driveId:$idParts$$[0],id:$idParts$$[1]}:{id:$id$$}};
OneDriveClient.prototype.getItemURL=function $OneDriveClient$$getItemURL$($id$$,$relative$$){var $idParts$$=$id$$.split("/");return 1<$idParts$$.length?($relative$$?"":this.baseUrl)+"/drives/"+$idParts$$[0]+"/items/"+$idParts$$[1]:($relative$$?"":this.baseUrl)+"/me/drive/items/"+$id$$};OneDriveClient.prototype.getLibrary=function $OneDriveClient$$getLibrary$($id$$,$success$$,$error$$){this.getFile($id$$,$success$$,$error$$,!1,!0)};
OneDriveClient.prototype.getFile=function $OneDriveClient$$getFile$($id$$,$success$$,$error$$,$denyConvert$$,$asLibrary$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;this.executeRequest(this.getItemURL($id$$),mxUtils.bind(this,function($req$jscomp$0$$){if(200<=$req$jscomp$0$$.getStatus()&&299>=$req$jscomp$0$$.getStatus()){var $meta$$=JSON.parse($req$jscomp$0$$.getText()),$binary$$=/\.png$/i.test($meta$$.name);if(/\.v(dx|sdx?)$/i.test($meta$$.name)||/\.gliffy$/i.test($meta$$.name)||!this.ui.useCanvasForExport&&
$binary$$)this.ui.convertFile($meta$$["@microsoft.graph.downloadUrl"],$meta$$.name,null!=$meta$$.file?$meta$$.file.mimeType:null,this.extension,$success$$,$error$$);else{var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT})}),this.ui.timeout);this.ui.loadUrl($meta$$["@microsoft.graph.downloadUrl"],mxUtils.bind(this,function($data$$){try{if(window.clearTimeout($timeoutThread$$),$acceptResponse$$){var $index$$=
$binary$$?$data$$.lastIndexOf(","):-1,$file$$=null;if(0<$index$$){var $xml$$=this.ui.extractGraphModelFromPng($data$$.substring($index$$+1));null!=$xml$$&&0<$xml$$.length?$data$$=$xml$$:$file$$=new LocalFile(this.ui,$data$$,$meta$$.name,!0)}else if("data:image/png;base64,PG14ZmlsZS"==$data$$.substring(0,32)){var $temp$$=$data$$.substring(22);$data$$=window.atob&&!mxClient.IS_SF?atob($temp$$):Base64.decode($temp$$)}Graph.fileSupport&&(new XMLHttpRequest).upload&&this.ui.isRemoteFileFormat($data$$,
$meta$$["@microsoft.graph.downloadUrl"])?this.ui.parseFile(new Blob([$data$$],{type:"application/octet-stream"}),mxUtils.bind(this,function($xhr$$){try{4==$xhr$$.readyState&&(200<=$xhr$$.status&&299>=$xhr$$.status?$success$$(new LocalFile(this.ui,$xhr$$.responseText,$meta$$.name+this.extension,!0)):null!=$error$$&&$error$$({message:mxResources.get("errorLoadingFile")}))}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}}),$meta$$.name):null!=$file$$?$success$$($file$$):$asLibrary$$?$success$$(new OneDriveLibrary(this.ui,
$data$$,$meta$$)):$success$$(new OneDriveFile(this.ui,$data$$,$meta$$))}}catch($e$$){if(null!=$error$$)$error$$($e$$);else throw $e$$;}}),mxUtils.bind(this,function($req$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&$error$$(this.parseRequestText($req$$))}),$binary$$||null!=$meta$$.file&&null!=$meta$$.file.mimeType&&"image/"==$meta$$.file.mimeType.substring(0,6))}}else $error$$(this.parseRequestText($req$jscomp$0$$))}),$error$$)};
OneDriveClient.prototype.renameFile=function $OneDriveClient$$renameFile$($file$$,$filename$$,$success$$,$error$$){null!=$file$$&&null!=$filename$$&&(this.isValidFilename($filename$$)?this.checkExists($file$$.getParentId(),$filename$$,!1,mxUtils.bind(this,function($checked$$){$checked$$?this.writeFile(this.getItemURL($file$$.getId()),JSON.stringify({name:$filename$$}),"PATCH","application/json",$success$$,$error$$):$error$$()})):$error$$({message:this.invalidFilenameRegExs[0].test($filename$$)?mxResources.get("oneDriveCharsNotAllowed"):
mxResources.get("oneDriveInvalidDeviceName")}))};
OneDriveClient.prototype.moveFile=function $OneDriveClient$$moveFile$($id$$,$folderId$$,$success$$,$error$$){$folderId$$=this.getItemRef($folderId$$);var $fileInfo$$=this.getItemRef($id$$);$folderId$$.driveId!=$fileInfo$$.driveId?$error$$({message:mxResources.get("cannotMoveOneDrive",null,"Moving a file between accounts is not supported yet.")}):this.writeFile(this.getItemURL($id$$),JSON.stringify({parentReference:$folderId$$}),"PATCH","application/json",$success$$,$error$$)};
OneDriveClient.prototype.insertLibrary=function $OneDriveClient$$insertLibrary$($filename$$,$data$$,$success$$,$error$$,$folderId$$){this.insertFile($filename$$,$data$$,$success$$,$error$$,!0,$folderId$$)};
OneDriveClient.prototype.insertFile=function $OneDriveClient$$insertFile$($filename$$,$data$$,$success$$,$error$$,$asLibrary$$,$folderId$$){this.isValidFilename($filename$$)?($asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1,this.checkExists($folderId$$,$filename$$,!0,mxUtils.bind(this,function($checked$jscomp$9_folder$jscomp$2_url$$){$checked$jscomp$9_folder$jscomp$2_url$$?($checked$jscomp$9_folder$jscomp$2_url$$="/me/drive/root",null!=$folderId$$&&($checked$jscomp$9_folder$jscomp$2_url$$=this.getItemURL($folderId$$,
!0)),$checked$jscomp$9_folder$jscomp$2_url$$=this.baseUrl+$checked$jscomp$9_folder$jscomp$2_url$$+"/children/"+encodeURIComponent($filename$$)+"/content",this.writeFile($checked$jscomp$9_folder$jscomp$2_url$$,$data$$,"PUT",null,mxUtils.bind(this,function($meta$$){$asLibrary$$?$success$$(new OneDriveLibrary(this.ui,$data$$,$meta$$)):$success$$(new OneDriveFile(this.ui,$data$$,$meta$$))}),$error$$)):$error$$()}))):$error$$({message:this.invalidFilenameRegExs[0].test($filename$$)?mxResources.get("oneDriveCharsNotAllowed"):
mxResources.get("oneDriveInvalidDeviceName")})};
OneDriveClient.prototype.checkExists=function $OneDriveClient$$checkExists$($parentId$$,$filename$$,$askReplace$$,$fn$$){var $folder$$="/me/drive/root";null!=$parentId$$&&($folder$$=this.getItemURL($parentId$$,!0));this.executeRequest(this.baseUrl+$folder$$+"/children/"+encodeURIComponent($filename$$),mxUtils.bind(this,function($req$$){404==$req$$.getStatus()?$fn$$(!0):$askReplace$$?(this.ui.spinner.stop(),this.ui.confirm(mxResources.get("replaceIt",[$filename$$]),function(){$fn$$(!0)},function(){$fn$$(!1)})):
(this.ui.spinner.stop(),this.ui.showError(mxResources.get("error"),mxResources.get("fileExists"),mxResources.get("ok"),function(){$fn$$(!1)}))}),function($req$$){$fn$$(!1)},!0)};
OneDriveClient.prototype.saveFile=function $OneDriveClient$$saveFile$($file$$,$success$$,$error$$,$etag$$){var $savedData$$=$file$$.getData(),$fn$$=mxUtils.bind(this,function($data$$){var $url$$=this.getItemURL($file$$.getId())+"/content/";this.writeFile($url$$,$data$$,"PUT",null,mxUtils.bind(this,function($resp$$){$success$$($resp$$,$savedData$$)}),$error$$,$etag$$)});this.ui.useCanvasForExport&&/(\.png)$/i.test($file$$.meta.name)?this.ui.getEmbeddedPng(mxUtils.bind(this,function($data$$){$fn$$(this.ui.base64ToBlob($data$$,
"image/png"))}),$error$$,this.ui.getCurrentFile()!=$file$$?$savedData$$:null):$fn$$($savedData$$)};
OneDriveClient.prototype.writeFile=function $OneDriveClient$$writeFile$($url$$,$data$$,$method$$,$contentType$$,$success$$,$error$$,$etag$$){if(null!=$url$$&&null!=$data$$){var $doExecute$$=mxUtils.bind(this,function($failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$doExecute$$})}),this.ui.timeout),$req$jscomp$0$$=new mxXmlRequest($url$$,$data$$,$method$$);$req$jscomp$0$$.setRequestHeaders=
mxUtils.bind(this,function($request$$,$params$$){$request$$.setRequestHeader("Content-Type",$contentType$$||" ");$request$$.setRequestHeader("Authorization","Bearer "+this.token);null!=$etag$$&&$request$$.setRequestHeader("If-Match",$etag$$)});$req$jscomp$0$$.send(mxUtils.bind(this,function($req$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(200<=$req$$.getStatus()&&299>=$req$$.getStatus()?(null==this.user&&this.updateUser(this.emptyFn,this.emptyFn,!0),$success$$(JSON.parse($req$$.getText()))):
$failOnAuth$$||401!==$req$$.getStatus()?$error$$(this.parseRequestText($req$$),$req$$):this.authenticate(function(){$doExecute$$(!0)},$error$$,$failOnAuth$$))}),mxUtils.bind(this,function($req$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&$error$$(this.parseRequestText($req$$))}))});null==this.token||6E4>this.tokenExpiresOn-Date.now()?this.authenticate(function(){$doExecute$$(!0)},$error$$):$doExecute$$(!1)}else $error$$({message:mxResources.get("unknownError")})};
OneDriveClient.prototype.parseRequestText=function $OneDriveClient$$parseRequestText$($req$$){var $result$$={message:mxResources.get("unknownError")};try{$result$$=JSON.parse($req$$.getText())}catch($e$$){}return $result$$};OneDriveClient.prototype.pickLibrary=function $OneDriveClient$$pickLibrary$($fn$$){this.pickFile(function($id$$){$fn$$($id$$)})};
OneDriveClient.prototype.pickFolder=function $OneDriveClient$$pickFolder$($fn$$,$direct$$){var $odSaveDlg$$=mxUtils.bind(this,function($direct$$){var $openSaveDlg$$=mxUtils.bind(this,function(){OneDrive.save({clientId:this.clientId,action:"query",openInNewWindow:!0,advanced:{endpointHint:mxClient.IS_IE11?null:this.endpointHint,redirectUri:this.pickerRedirectUri,queryParameters:"select=id,name,parentReference",accessToken:this.token,isConsumerAccount:!1},success:mxUtils.bind(this,function($files$$){$fn$$($files$$);
mxClient.IS_IE11&&(this.token=$files$$.accessToken)}),cancel:mxUtils.bind(this,function(){}),error:mxUtils.bind(this,function($e$$){this.ui.showError(mxResources.get("error"),$e$$)})})});$direct$$?$openSaveDlg$$():this.ui.confirm(mxResources.get("useRootFolder"),mxUtils.bind(this,function(){$fn$$({value:[{id:"root",name:"root",parentReference:{driveId:"me"}}]})}),$openSaveDlg$$,mxResources.get("yes"),mxResources.get("noPickFolder")+"...",!0);null==this.user&&this.updateUser(this.emptyFn,this.emptyFn,
!0)});null==this.token||6E4>this.tokenExpiresOn-Date.now()?this.authenticate(mxUtils.bind(this,function(){$odSaveDlg$$(!1)}),this.emptyFn):$odSaveDlg$$($direct$$)};
OneDriveClient.prototype.pickFile=function $OneDriveClient$$pickFile$($fn$$){$fn$$=null!=$fn$$?$fn$$:mxUtils.bind(this,function($id$$){this.ui.loadFile("W"+encodeURIComponent($id$$))});var $odOpenDlg$$=mxUtils.bind(this,function(){OneDrive.open({clientId:this.clientId,action:"query",multiSelect:!1,advanced:{endpointHint:mxClient.IS_IE11?null:this.endpointHint,redirectUri:this.pickerRedirectUri,queryParameters:"select=id,name,parentReference",accessToken:this.token,isConsumerAccount:!1},success:mxUtils.bind(this,
function($files$$){null!=$files$$&&null!=$files$$.value&&0<$files$$.value.length&&(mxClient.IS_IE11&&(this.token=$files$$.accessToken),$fn$$(OneDriveFile.prototype.getIdOf($files$$.value[0]),$files$$))}),cancel:mxUtils.bind(this,function(){}),error:mxUtils.bind(this,function($e$$){this.ui.showError(mxResources.get("error"),$e$$)})});null==this.user&&this.updateUser(this.emptyFn,this.emptyFn,!0)});null==this.token||6E4>this.tokenExpiresOn-Date.now()?this.authenticate(mxUtils.bind(this,function(){this.ui.showDialog((new BtnDialog(this.ui,
this,mxResources.get("open"),mxUtils.bind(this,function(){$odOpenDlg$$();this.ui.hideDialog()}))).container,300,140,!0,!0)}),this.emptyFn):$odOpenDlg$$()};OneDriveClient.prototype.logout=function $OneDriveClient$$logout$(){if(isLocalStorage){var $check$$=localStorage.getItem("odpickerv7cache");null!=$check$$&&'{"odsdkLoginHint":{'==$check$$.substring(0,19)&&localStorage.removeItem("odpickerv7cache")}this.clearPersistentToken();this.setUser(null);this.token=null};GitHubFile=function $GitHubFile$($ui$$,$data$$,$meta$$){DrawioFile.call(this,$ui$$,$data$$);this.meta=$meta$$};mxUtils.extend(GitHubFile,DrawioFile);GitHubFile.prototype.getId=function $GitHubFile$$getId$(){return encodeURIComponent(this.meta.org)+"/"+(null!=this.meta.repo?encodeURIComponent(this.meta.repo)+"/"+(null!=this.meta.ref?this.meta.ref+(null!=this.meta.path?"/"+this.meta.path:""):""):"")};GitHubFile.prototype.getHash=function $GitHubFile$$getHash$(){return encodeURIComponent("H"+this.getId())};
GitHubFile.prototype.getPublicUrl=function $GitHubFile$$getPublicUrl$($fn$$){null!=this.meta.download_url?mxUtils.get(this.meta.download_url,mxUtils.bind(this,function($req$$){$fn$$(200<=$req$$.getStatus()&&299>=$req$$.getStatus()?this.meta.download_url:null)}),mxUtils.bind(this,function(){$fn$$(null)})):$fn$$(null)};GitHubFile.prototype.isConflict=function $GitHubFile$$isConflict$($err$$){return null!=$err$$&&409==$err$$.status};GitHubFile.prototype.getMode=function $GitHubFile$$getMode$(){return App.MODE_GITHUB};
GitHubFile.prototype.isAutosave=function $GitHubFile$$isAutosave$(){return!1};GitHubFile.prototype.getTitle=function $GitHubFile$$getTitle$(){return this.meta.name};GitHubFile.prototype.isRenamable=function $GitHubFile$$isRenamable$(){return!1};GitHubFile.prototype.getLatestVersion=function $GitHubFile$$getLatestVersion$($success$$,$error$$){this.ui.gitHub.getFile(this.getId(),$success$$,$error$$)};GitHubFile.prototype.getDescriptor=function $GitHubFile$$getDescriptor$(){return this.meta};
GitHubFile.prototype.setDescriptor=function $GitHubFile$$setDescriptor$($desc$$){this.meta=$desc$$};GitHubFile.prototype.getDescriptorEtag=function $GitHubFile$$getDescriptorEtag$($desc$$){return $desc$$.sha};GitHubFile.prototype.setDescriptorEtag=function $GitHubFile$$setDescriptorEtag$($desc$$,$etag$$){$desc$$.sha=$etag$$};
GitHubFile.prototype.save=function $GitHubFile$$save$($revision$$,$success$$,$error$$,$unloading$$,$overwrite$$,$message$$){this.doSave(this.getTitle(),$success$$,$error$$,$unloading$$,$overwrite$$,$message$$)};GitHubFile.prototype.saveAs=function $GitHubFile$$saveAs$($title$$,$success$$,$error$$){this.doSave($title$$,$success$$,$error$$)};
GitHubFile.prototype.doSave=function $GitHubFile$$doSave$($title$$,$success$$,$error$$,$unloading$$,$overwrite$$,$message$$){var $prev$$=this.meta.name;this.meta.name=$title$$;DrawioFile.prototype.save.apply(this,arguments);this.meta.name=$prev$$;this.saveFile($title$$,!1,$success$$,$error$$,$unloading$$,$overwrite$$,$message$$)};
GitHubFile.prototype.saveFile=function $GitHubFile$$saveFile$($title$$,$revision$$,$success$$,$error$$,$unloading$$,$overwrite$$,$message$jscomp$0$$){if(this.isEditable())if(this.savingFile)null!=$error$$&&$error$$({code:App.ERROR_BUSY});else{var $doSave$$=mxUtils.bind(this,function($message$$){if(this.getTitle()==$title$$){var $savedEtag$$=this.getCurrentEtag(),$savedData$$=this.data,$prevModified$$=this.isModified,$modified$$=this.isModified();this.savingFile=!0;var $prepare$$=mxUtils.bind(this,
function(){this.setModified(!1);this.isModified=function $this$isModified$(){return $modified$$}});$prepare$$();this.ui.gitHub.saveFile(this,mxUtils.bind(this,function($commit$$){this.isModified=$prevModified$$;this.savingFile=!1;this.meta.sha=$commit$$.content.sha;this.meta.html_url=$commit$$.content.html_url;this.meta.download_url=$commit$$.content.download_url;this.fileSaved($savedData$$,$savedEtag$$,mxUtils.bind(this,function(){this.contentChanged();null!=$success$$&&$success$$()}),$error$$)}),
mxUtils.bind(this,function($err$$){this.savingFile=!1;this.isModified=$prevModified$$;this.setModified($modified$$||this.isModified());if(this.isConflict($err$$))this.inConflictState=!0,null!=$error$$&&$error$$({commitMessage:$message$$});else if(null!=$error$$){if(null!=$err$$&&null!=$err$$.retry){var $retry$$=$err$$.retry;$err$$.retry=function $$err$$$retry$(){$prepare$$();$retry$$()}}$error$$($err$$)}}),$overwrite$$,$message$$)}else this.savingFile=!0,this.ui.pickFolder(App.MODE_GITHUB,mxUtils.bind(this,
function($folderId$$){this.ui.gitHub.insertFile($title$$,this.getData(),mxUtils.bind(this,function($file$$){this.savingFile=!1;null!=$success$$&&$success$$();this.ui.fileLoaded($file$$)}),mxUtils.bind(this,function(){this.savingFile=!1;null!=$error$$&&$error$$()}),!1,$folderId$$,$message$$)}))});null!=$message$jscomp$0$$?$doSave$$($message$jscomp$0$$):this.ui.gitHub.showCommitDialog(this.meta.name,null==this.meta.sha||this.meta.isNew,mxUtils.bind(this,function($message$$){$doSave$$($message$$)}),
$error$$)}else null!=$success$$&&$success$$()};GitHubLibrary=function $GitHubLibrary$($ui$$,$data$$,$meta$$){GitHubFile.call(this,$ui$$,$data$$,$meta$$)};mxUtils.extend(GitHubLibrary,GitHubFile);GitHubLibrary.prototype.doSave=function $GitHubLibrary$$doSave$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};GitHubLibrary.prototype.open=function $GitHubLibrary$$open$(){};GitHubClient=function $GitHubClient$($editorUi$$){DrawioClient.call(this,$editorUi$$,"ghauth")};mxUtils.extend(GitHubClient,DrawioClient);GitHubClient.prototype.clientId="test.draw.io"==window.location.hostname?"23bc97120b9035515661":"89c9e4624ca416554489";GitHubClient.prototype.scope="repo";GitHubClient.prototype.extension=".drawio";GitHubClient.prototype.baseUrl="https://api.github.com";GitHubClient.prototype.maxFileSize=1E6;
GitHubClient.prototype.updateUser=function $GitHubClient$$updateUser$($success$$,$error$$,$failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT})}),this.ui.timeout);mxUtils.get(this.baseUrl+"/user?access_token="+this.token,mxUtils.bind(this,function($userInfo_userReq$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(401===$userInfo_userReq$$.getStatus()?$failOnAuth$$?$error$$({message:mxResources.get("accessDenied")}):
(this.logout(),this.authenticate(mxUtils.bind(this,function(){this.updateUser($success$$,$error$$,!0)}),$error$$)):200>$userInfo_userReq$$.getStatus()||300<=$userInfo_userReq$$.getStatus()?$error$$({message:mxResources.get("accessDenied")}):($userInfo_userReq$$=JSON.parse($userInfo_userReq$$.getText()),this.setUser(new DrawioUser($userInfo_userReq$$.id,$userInfo_userReq$$.email,$userInfo_userReq$$.name)),$success$$()))}))};
GitHubClient.prototype.authenticate=function $GitHubClient$$authenticate$($success$$,$error$$){if(null==window.onGitHubCallback){var $auth$$=mxUtils.bind(this,function(){var $acceptAuthResponse$$=!0;this.ui.showAuthDialog(this,!0,mxUtils.bind(this,function($remember$$,$authSuccess$$){null!=window.open("https://github.com/login/oauth/authorize?client_id="+this.clientId+"&scope="+this.scope,"ghauth")?window.onGitHubCallback=mxUtils.bind(this,function($code$$,$authWindow$$){if($acceptAuthResponse$$)if(window.onGitHubCallback=
null,$acceptAuthResponse$$=!1,null==$code$$)$error$$({message:mxResources.get("accessDenied"),retry:$auth$$});else{var $fn$$=mxUtils.bind(this,function(){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$fn$$})}),this.ui.timeout);mxUtils.get("/github?client_id="+this.clientId+"&code="+$code$$,mxUtils.bind(this,function($authReq$$){window.clearTimeout($timeoutThread$$);if($acceptResponse$$)try{if(200>
$authReq$$.getStatus()||300<=$authReq$$.getStatus())$error$$({message:mxResources.get("cannotLogin")});else{null!=$authSuccess$$&&$authSuccess$$();var $res$$=$authReq$$.getText();this.token=$res$$.substring($res$$.indexOf("=")+1,$res$$.indexOf("&"));this.setUser(null);$remember$$&&this.setPersistentToken(this.token);$success$$()}}catch($e$$){$error$$($e$$)}finally{null!=$authWindow$$&&$authWindow$$.close()}}))});$fn$$()}else null!=$authWindow$$&&$authWindow$$.close()}):$error$$({message:mxResources.get("serviceUnavailableOrBlocked"),
retry:$auth$$})}),mxUtils.bind(this,function(){$acceptAuthResponse$$&&(window.onGitHubCallback=null,$acceptAuthResponse$$=!1,$error$$({message:mxResources.get("accessDenied"),retry:$auth$$}))}))});$auth$$()}else $error$$({code:App.ERROR_BUSY})};GitHubClient.prototype.getErrorMessage=function $GitHubClient$$getErrorMessage$($req$$,$defaultText$$){try{var $temp$$=JSON.parse($req$$.getText());null!=$temp$$&&null!=$temp$$.message&&($defaultText$$=$temp$$.message)}catch($e$$){}return $defaultText$$};
GitHubClient.prototype.executeRequest=function $GitHubClient$$executeRequest$($req$$,$success$$,$error$$,$ignoreNotFound$$){var $doExecute$$=mxUtils.bind(this,function($failOnAuth$$){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$fn$$})}),this.ui.timeout),$temp$jscomp$0$$=this.token;$req$$.setRequestHeaders=function $$req$$$setRequestHeaders$($request$$,$params$$){$request$$.setRequestHeader("Authorization",
"token "+$temp$jscomp$0$$)};$req$$.send(mxUtils.bind(this,function(){window.clearTimeout($timeoutThread$$);if($acceptResponse$$)if(200<=$req$$.getStatus()&&299>=$req$$.getStatus()||$ignoreNotFound$$&&404==$req$$.getStatus())$success$$($req$$);else if(401===$req$$.getStatus())$failOnAuth$$?$error$$({message:mxResources.get("accessDenied"),retry:mxUtils.bind(this,function(){this.authenticate(function(){$fn$$(!0)},$error$$)})}):this.authenticate(function(){$doExecute$$(!0)},$error$$);else if(403===$req$$.getStatus()){var $tooLarge$$=
!1;try{var $temp$$=JSON.parse($req$$.getText());null!=$temp$$&&null!=$temp$$.errors&&0<$temp$$.errors.length&&($tooLarge$$="too_large"==$temp$$.errors[0].code)}catch($e$$){}$error$$({message:mxResources.get($tooLarge$$?"drawingTooLarge":"forbidden")})}else 404===$req$$.getStatus()?$error$$({message:this.getErrorMessage($req$$,mxResources.get("fileNotFound"))}):409===$req$$.getStatus()?$error$$({status:409}):$error$$({message:this.getErrorMessage($req$$,mxResources.get("error")+" "+$req$$.getStatus())})}),
$error$$)}),$fn$$=mxUtils.bind(this,function($failOnAuth$$){null==this.user?this.updateUser(function(){$fn$$(!0)},$error$$,$failOnAuth$$):$doExecute$$($failOnAuth$$)});null==this.token?this.authenticate(function(){$fn$$(!0)},$error$$):$fn$$(!1)};GitHubClient.prototype.getLibrary=function $GitHubClient$$getLibrary$($path$$,$success$$,$error$$){this.getFile($path$$,$success$$,$error$$,!0)};
GitHubClient.prototype.getFile=function $GitHubClient$$getFile$($path$jscomp$9_req$$,$success$$,$error$$,$asLibrary$$,$checkExists_rnd_url$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;var $binary$jscomp$13_tokens$$=$path$jscomp$9_req$$.split("/"),$org$$=$binary$jscomp$13_tokens$$[0],$repo$$=$binary$jscomp$13_tokens$$[1],$ref$$=$binary$jscomp$13_tokens$$[2];$path$jscomp$9_req$$=$binary$jscomp$13_tokens$$.slice(3,$binary$jscomp$13_tokens$$.length).join("/");$binary$jscomp$13_tokens$$=/\.png$/i.test($path$jscomp$9_req$$);
!$checkExists_rnd_url$$&&(/\.v(dx|sdx?)$/i.test($path$jscomp$9_req$$)||/\.gliffy$/i.test($path$jscomp$9_req$$)||!this.ui.useCanvasForExport&&$binary$jscomp$13_tokens$$)?null!=this.token?($checkExists_rnd_url$$=this.baseUrl+"/repos/"+$org$$+"/"+$repo$$+"/contents/"+$path$jscomp$9_req$$+"?ref="+$ref$$+"&token="+this.token,$binary$jscomp$13_tokens$$=$path$jscomp$9_req$$.split("/"),this.ui.convertFile($checkExists_rnd_url$$,0<$binary$jscomp$13_tokens$$.length?$binary$jscomp$13_tokens$$[$binary$jscomp$13_tokens$$.length-
1]:$path$jscomp$9_req$$,null,this.extension,$success$$,$error$$)):$error$$({message:mxResources.get("accessDenied")}):($checkExists_rnd_url$$="&t="+(new Date).getTime(),$path$jscomp$9_req$$=new mxXmlRequest(this.baseUrl+"/repos/"+$org$$+"/"+$repo$$+"/contents/"+$path$jscomp$9_req$$+"?ref="+$ref$$+$checkExists_rnd_url$$,null,"GET"),this.executeRequest($path$jscomp$9_req$$,mxUtils.bind(this,function($req$$){try{$success$$(this.createGitHubFile($org$$,$repo$$,$ref$$,JSON.parse($req$$.getText()),$asLibrary$$))}catch($e$$){$error$$($e$$)}}),
$error$$))};
GitHubClient.prototype.createGitHubFile=function $GitHubClient$$createGitHubFile$($meta$jscomp$10_org$$,$content$jscomp$10_repo$$,$ref$$,$data$jscomp$183_xml$$,$asLibrary$$){$meta$jscomp$10_org$$={org:$meta$jscomp$10_org$$,repo:$content$jscomp$10_repo$$,ref:$ref$$,name:$data$jscomp$183_xml$$.name,path:$data$jscomp$183_xml$$.path,sha:$data$jscomp$183_xml$$.sha,html_url:$data$jscomp$183_xml$$.html_url,download_url:$data$jscomp$183_xml$$.download_url};$content$jscomp$10_repo$$=$data$jscomp$183_xml$$.content;"base64"===
$data$jscomp$183_xml$$.encoding&&("PG14ZmlsZS"==$content$jscomp$10_repo$$.substring(0,10)?$content$jscomp$10_repo$$=window.atob&&!mxClient.IS_SF?atob($content$jscomp$10_repo$$):Base64.decode($content$jscomp$10_repo$$):/\.jpe?g$/i.test($data$jscomp$183_xml$$.name)?$content$jscomp$10_repo$$="data:image/jpeg;base64,"+$content$jscomp$10_repo$$:/\.gif$/i.test($data$jscomp$183_xml$$.name)?$content$jscomp$10_repo$$="data:image/gif;base64,"+$content$jscomp$10_repo$$:/\.png$/i.test($data$jscomp$183_xml$$.name)?
($data$jscomp$183_xml$$=this.ui.extractGraphModelFromPng($content$jscomp$10_repo$$),$content$jscomp$10_repo$$=null!=$data$jscomp$183_xml$$&&0<$data$jscomp$183_xml$$.length?$data$jscomp$183_xml$$:"data:image/png;base64,"+$content$jscomp$10_repo$$):$content$jscomp$10_repo$$=Base64.decode($content$jscomp$10_repo$$));return $asLibrary$$?new GitHubLibrary(this.ui,$content$jscomp$10_repo$$,$meta$jscomp$10_org$$):new GitHubFile(this.ui,$content$jscomp$10_repo$$,$meta$jscomp$10_org$$)};
GitHubClient.prototype.insertLibrary=function $GitHubClient$$insertLibrary$($filename$$,$data$$,$success$$,$error$$,$folderId$$){this.insertFile($filename$$,$data$$,$success$$,$error$$,!0,$folderId$$,!1)};
GitHubClient.prototype.insertFile=function $GitHubClient$$insertFile$($filename$$,$data$$,$success$$,$error$$,$asLibrary$$,$folderId$jscomp$14_tokens$$,$base64Encoded$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;$folderId$jscomp$14_tokens$$=$folderId$jscomp$14_tokens$$.split("/");var $org$$=$folderId$jscomp$14_tokens$$[0],$repo$$=$folderId$jscomp$14_tokens$$[1],$ref$$=$folderId$jscomp$14_tokens$$[2],$path$$=$folderId$jscomp$14_tokens$$.slice(3,$folderId$jscomp$14_tokens$$.length).join("/");
0<$path$$.length&&($path$$+="/");$path$$+=$filename$$;this.checkExists($org$$+"/"+$repo$$+"/"+$ref$$+"/"+$path$$,!0,mxUtils.bind(this,function($checked$$,$sha$$){$checked$$?$asLibrary$$?($base64Encoded$$||($data$$=Base64.encode($data$$)),this.showCommitDialog($filename$$,!0,mxUtils.bind(this,function($message$$){this.writeFile($org$$,$repo$$,$ref$$,$path$$,$message$$,$data$$,$sha$$,mxUtils.bind(this,function($req$$){try{var $msg$$=JSON.parse($req$$.getText());$success$$(this.createGitHubFile($org$$,
$repo$$,$ref$$,$msg$$.content,$asLibrary$$))}catch($e$$){$error$$($e$$)}}),$error$$)}),$error$$)):$success$$(new GitHubFile(this.ui,$data$$,{org:$org$$,repo:$repo$$,ref:$ref$$,name:$filename$$,path:$path$$,sha:$sha$$,isNew:!0})):$error$$()}))};
GitHubClient.prototype.showCommitDialog=function $GitHubClient$$showCommitDialog$($dlg$jscomp$29_filename$$,$isNew$$,$success$$,$cancel$$){var $resume$$=this.ui.spinner.pause();$dlg$jscomp$29_filename$$=new FilenameDialog(this.ui,mxResources.get($isNew$$?"addedFile":"updateFile",[$dlg$jscomp$29_filename$$]),mxResources.get("ok"),mxUtils.bind(this,function($message$$){$resume$$();$success$$($message$$)}),mxResources.get("commitMessage"),null,null,null,null,mxUtils.bind(this,function(){$cancel$$()}));
this.ui.showDialog($dlg$jscomp$29_filename$$.container,300,80,!0,!1);$dlg$jscomp$29_filename$$.init()};
GitHubClient.prototype.writeFile=function $GitHubClient$$writeFile$($org$jscomp$4_req$$,$repo$$,$entity_ref$$,$path$$,$message$$,$data$$,$sha$$,$success$$,$error$$){$data$$.length>=this.maxFileSize?$error$$({message:mxResources.get("drawingTooLarge")+" ("+this.ui.formatFileSize($data$$.length)+" / 1 MB)"}):($entity_ref$$={path:$path$$,branch:decodeURIComponent($entity_ref$$),message:$message$$,content:$data$$},null!=$sha$$&&($entity_ref$$.sha=$sha$$),$org$jscomp$4_req$$=new mxXmlRequest(this.baseUrl+
"/repos/"+$org$jscomp$4_req$$+"/"+$repo$$+"/contents/"+$path$$,JSON.stringify($entity_ref$$),"PUT"),this.executeRequest($org$jscomp$4_req$$,mxUtils.bind(this,function($req$$){$success$$($req$$)}),$error$$))};
GitHubClient.prototype.checkExists=function $GitHubClient$$checkExists$($path$$,$askReplace$$,$fn$$){this.getFile($path$$,mxUtils.bind(this,function($file$$){if($askReplace$$&&null!=$file$$.meta){var $resume$$=this.ui.spinner.pause();this.ui.confirm(mxResources.get("replaceIt",[$path$$]),function(){$resume$$();$fn$$(!0,$file$$.meta.sha)},function(){$resume$$();$fn$$(!1)})}else this.ui.spinner.stop(),this.ui.showError(mxResources.get("error"),mxResources.get("fileExists"),mxResources.get("ok"),function(){$fn$$(!1)})}),
mxUtils.bind(this,function($err$$){$fn$$(!0)}),null,!0)};
GitHubClient.prototype.saveFile=function $GitHubClient$$saveFile$($file$$,$success$$,$error$$,$overwrite$$,$message$$){var $org$$=$file$$.meta.org,$repo$$=$file$$.meta.repo,$ref$$=$file$$.meta.ref,$path$$=$file$$.meta.path,$fn$$=mxUtils.bind(this,function($sha$$,$data$$){this.writeFile($org$$,$repo$$,$ref$$,$path$$,$message$$,$data$$,$sha$$,mxUtils.bind(this,function($req$$){delete $file$$.meta.isNew;$success$$(JSON.parse($req$$.getText()))}),mxUtils.bind(this,function($err$$){$error$$($err$$)}))}),
$fn2$$=mxUtils.bind(this,function(){this.ui.useCanvasForExport&&/(\.png)$/i.test($path$$)?this.ui.getEmbeddedPng(mxUtils.bind(this,function($data$$){$fn$$($file$$.meta.sha,$data$$)}),$error$$,this.ui.getCurrentFile()!=$file$$?$file$$.getData():null):$fn$$($file$$.meta.sha,Base64.encode($file$$.getData()))});$overwrite$$?this.getFile($org$$+"/"+$repo$$+"/"+encodeURIComponent($ref$$)+"/"+$path$$,mxUtils.bind(this,function($tempFile$$){$file$$.meta.sha=$tempFile$$.meta.sha;$fn2$$()}),$error$$):$fn2$$()};
GitHubClient.prototype.pickLibrary=function $GitHubClient$$pickLibrary$($fn$$){this.pickFile($fn$$)};GitHubClient.prototype.pickFolder=function $GitHubClient$$pickFolder$($fn$$){this.showGitHubDialog(!1,$fn$$)};GitHubClient.prototype.pickFile=function $GitHubClient$$pickFile$($fn$$){$fn$$=null!=$fn$$?$fn$$:mxUtils.bind(this,function($path$$){this.ui.loadFile("H"+encodeURIComponent($path$$))});this.showGitHubDialog(!0,$fn$$)};
GitHubClient.prototype.showGitHubDialog=function $GitHubClient$$showGitHubDialog$($showFiles$$,$fn$jscomp$0$$){var $org$$=null,$repo$$=null,$ref$$=null,$path$$=null,$content$$=document.createElement("div");$content$$.style.whiteSpace="nowrap";$content$$.style.overflow="hidden";$content$$.style.height="224px";var $hd$$=document.createElement("h3");mxUtils.write($hd$$,mxResources.get($showFiles$$?"selectFile":"selectFolder"));$hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:12px";
$content$$.appendChild($hd$$);var $div$$=document.createElement("div");$div$$.style.whiteSpace="nowrap";$div$$.style.overflow="auto";$div$$.style.lineHeight="1.2em";$div$$.style.height="194px";$content$$.appendChild($div$$);var $dlg$jscomp$0$$=new CustomDialog(this.ui,$content$$,mxUtils.bind(this,function(){$fn$jscomp$0$$($org$$+"/"+$repo$$+"/"+encodeURIComponent($ref$$)+"/"+$path$$)}));this.ui.showDialog($dlg$jscomp$0$$.container,340,270,!0,!0);$showFiles$$&&$dlg$jscomp$0$$.okButton.parentNode.removeChild($dlg$jscomp$0$$.okButton);
var $createLink$$=mxUtils.bind(this,function($label$$,$fn$$){var $link$$=document.createElement("a");$link$$.setAttribute("href","javascript:void(0);");mxUtils.write($link$$,$label$$);mxEvent.addListener($link$$,"click",$fn$$);return $link$$}),$updatePathInfo$$=mxUtils.bind(this,function($hideRef_i$$){var $pathInfo$$=document.createElement("div");$pathInfo$$.style.marginBottom="8px";$pathInfo$$.appendChild($createLink$$($org$$+"/"+$repo$$,mxUtils.bind(this,function(){$path$$=null;$selectRepo$$()})));
$hideRef_i$$||(mxUtils.write($pathInfo$$," / "),$pathInfo$$.appendChild($createLink$$(decodeURIComponent($ref$$),mxUtils.bind(this,function(){$path$$=null;$selectRef$$()}))));if(null!=$path$$&&0<$path$$.length){var $tokens$$=$path$$.split("/");for($hideRef_i$$=0;$hideRef_i$$<$tokens$$.length;$hideRef_i$$++)(function($index$$){mxUtils.write($pathInfo$$," / ");$pathInfo$$.appendChild($createLink$$($tokens$$[$index$$],mxUtils.bind(this,function(){$path$$=$tokens$$.slice(0,$index$$+1).join("/");$selectFile$$()})))})($hideRef_i$$)}$div$$.appendChild($pathInfo$$)}),
$error$$=mxUtils.bind(this,function($err$$){this.ui.handleError($err$$,null,mxUtils.bind(this,function(){this.ui.spinner.stop();null!=this.getUser()?($path$$=$ref$$=$repo$$=$org$$=null,$selectRepo$$()):this.ui.hideDialog()}))}),$selectFile$$=mxUtils.bind(this,function(){var $req$$=new mxXmlRequest(this.baseUrl+"/repos/"+$org$$+"/"+$repo$$+"/contents/"+$path$$+"?ref="+encodeURIComponent($ref$$),null,"GET");$dlg$jscomp$0$$.okButton.removeAttribute("disabled");$div$$.innerHTML="";this.ui.spinner.spin($div$$,
mxResources.get("loading"));this.executeRequest($req$$,mxUtils.bind(this,function($listFiles_req$$){$updatePathInfo$$();this.ui.spinner.stop();var $files$$=JSON.parse($listFiles_req$$.getText());$div$$.appendChild($createLink$$("../ [Up]",mxUtils.bind(this,function(){if(""==$path$$)$path$$=null,$selectRepo$$();else{var $tokens$$=$path$$.split("/");$path$$=$tokens$$.slice(0,$tokens$$.length-1).join("/");$selectFile$$()}})));mxUtils.br($div$$);null==$files$$||0==$files$$.length?mxUtils.write($div$$,
mxResources.get("noFiles")):($listFiles_req$$=mxUtils.bind(this,function($showFolders$$){for(var $i$$=0;$i$$<$files$$.length;$i$$++)mxUtils.bind(this,function($file$$){$showFolders$$==("dir"==$file$$.type)&&($div$$.appendChild($createLink$$($file$$.name+("dir"==$file$$.type?"/":""),mxUtils.bind(this,function(){"dir"==$file$$.type?($path$$=$file$$.path,$selectFile$$()):$showFiles$$&&"file"==$file$$.type&&(this.ui.hideDialog(),$fn$jscomp$0$$($org$$+"/"+$repo$$+"/"+encodeURIComponent($ref$$)+"/"+$file$$.path))}))),
mxUtils.br($div$$))})($files$$[$i$$])}),$listFiles_req$$(!0),$showFiles$$&&$listFiles_req$$(!1))}),$error$$,!0)}),$nextPageDiv$$=null,$scrollFn$$=null,$selectRef$$=mxUtils.bind(this,function($page$$){null==$page$$&&($div$$.innerHTML="",$page$$=1);var $req$$=new mxXmlRequest(this.baseUrl+"/repos/"+$org$$+"/"+$repo$$+"/branches?per_page=100&page="+$page$$,null,"GET");$dlg$jscomp$0$$.okButton.setAttribute("disabled","disabled");this.ui.spinner.spin($div$$,mxResources.get("loading"));null!=$nextPageDiv$$&&
null!=$nextPageDiv$$.parentNode&&$nextPageDiv$$.parentNode.removeChild($nextPageDiv$$);$nextPageDiv$$=document.createElement("a");$nextPageDiv$$.style.display="block";$nextPageDiv$$.setAttribute("href","javascript:void(0);");mxUtils.write($nextPageDiv$$,mxResources.get("more")+"...");var $nextPage$$=mxUtils.bind(this,function(){mxEvent.removeListener($div$$,"scroll",$scrollFn$$);$selectRef$$($page$$+1)});mxEvent.addListener($nextPageDiv$$,"click",$nextPage$$);this.executeRequest($req$$,mxUtils.bind(this,
function($branches_req$$){this.ui.spinner.stop();1==$page$$&&($updatePathInfo$$(!0),$div$$.appendChild($createLink$$("../ [Up]",mxUtils.bind(this,function(){$path$$=null;$selectRepo$$()}))),mxUtils.br($div$$));$branches_req$$=JSON.parse($branches_req$$.getText());if(null==$branches_req$$||0==$branches_req$$.length)mxUtils.write($div$$,mxResources.get("noFiles"));else{for(var $i$$=0;$i$$<$branches_req$$.length;$i$$++)mxUtils.bind(this,function($branch$$){$div$$.appendChild($createLink$$($branch$$.name,
mxUtils.bind(this,function(){$ref$$=$branch$$.name;$path$$="";$selectFile$$()})));mxUtils.br($div$$)})($branches_req$$[$i$$]);100==$branches_req$$.length&&($div$$.appendChild($nextPageDiv$$),$scrollFn$$=function $$scrollFn$$$(){$div$$.scrollTop>=$div$$.scrollHeight-$div$$.offsetHeight&&$nextPage$$()},mxEvent.addListener($div$$,"scroll",$scrollFn$$))}}),$error$$)}),$selectRepo$$=mxUtils.bind(this,function($page$$){null==$page$$&&($div$$.innerHTML="",$page$$=1);var $req$$=new mxXmlRequest(this.baseUrl+
"/user/repos?per_page=100&page="+$page$$,null,"GET");$dlg$jscomp$0$$.okButton.setAttribute("disabled","disabled");this.ui.spinner.spin($div$$,mxResources.get("loading"));null!=$nextPageDiv$$&&null!=$nextPageDiv$$.parentNode&&$nextPageDiv$$.parentNode.removeChild($nextPageDiv$$);$nextPageDiv$$=document.createElement("a");$nextPageDiv$$.style.display="block";$nextPageDiv$$.setAttribute("href","javascript:void(0);");mxUtils.write($nextPageDiv$$,mxResources.get("more")+"...");var $nextPage$$=mxUtils.bind(this,
function(){mxEvent.removeListener($div$$,"scroll",$scrollFn$$);$selectRepo$$($page$$+1)});mxEvent.addListener($nextPageDiv$$,"click",$nextPage$$);this.executeRequest($req$$,mxUtils.bind(this,function($repos_req$$){this.ui.spinner.stop();$repos_req$$=JSON.parse($repos_req$$.getText());if(null==$repos_req$$||0==$repos_req$$.length)mxUtils.write($div$$,mxResources.get("noFiles"));else{1==$page$$&&($div$$.appendChild($createLink$$(mxResources.get("enterValue")+"...",mxUtils.bind(this,function(){var $dlg$$=
new FilenameDialog(this.ui,"org/repo/ref",mxResources.get("ok"),mxUtils.bind(this,function($tmpOrg_value$$){if(null!=$tmpOrg_value$$){var $tmpRef_tokens$$=$tmpOrg_value$$.split("/");if(1<$tmpRef_tokens$$.length){$tmpOrg_value$$=$tmpRef_tokens$$[0];var $tmpRepo$$=$tmpRef_tokens$$[1];3>$tmpRef_tokens$$.length?($org$$=$tmpOrg_value$$,$repo$$=$tmpRepo$$,$path$$=$ref$$=null,$selectRef$$()):this.ui.spinner.spin($div$$,mxResources.get("loading"))&&($tmpRef_tokens$$=encodeURIComponent($tmpRef_tokens$$.slice(2,
$tmpRef_tokens$$.length).join("/")),this.getFile($tmpOrg_value$$+"/"+$tmpRepo$$+"/"+$tmpRef_tokens$$,mxUtils.bind(this,function($file$$){this.ui.spinner.stop();$org$$=$file$$.meta.org;$repo$$=$file$$.meta.repo;$ref$$=decodeURIComponent($file$$.meta.ref);$path$$="";$selectFile$$()}),mxUtils.bind(this,function($err$$){this.ui.spinner.stop();this.ui.handleError({message:mxResources.get("fileNotFound")})})))}else this.ui.spinner.stop(),this.ui.handleError({message:mxResources.get("invalidName")})}}),
mxResources.get("enterValue"));this.ui.showDialog($dlg$$.container,300,80,!0,!1);$dlg$$.init()}))),mxUtils.br($div$$),mxUtils.br($div$$));for(var $i$$=0;$i$$<$repos_req$$.length;$i$$++)mxUtils.bind(this,function($repository$$){$div$$.appendChild($createLink$$($repository$$.full_name,mxUtils.bind(this,function(){$org$$=$repository$$.owner.login;$repo$$=$repository$$.name;$ref$$=$repository$$.default_branch;$path$$="";$selectFile$$()})));mxUtils.br($div$$)})($repos_req$$[$i$$])}100==$repos_req$$.length&&
($div$$.appendChild($nextPageDiv$$),$scrollFn$$=function $$scrollFn$$$(){$div$$.scrollTop>=$div$$.scrollHeight-$div$$.offsetHeight&&$nextPage$$()},mxEvent.addListener($div$$,"scroll",$scrollFn$$))}),$error$$)});$selectRepo$$()};GitHubClient.prototype.logout=function $GitHubClient$$logout$(){this.clearPersistentToken();this.setUser(null);this.token=null};TrelloFile=function $TrelloFile$($ui$$,$data$$,$meta$$){DrawioFile.call(this,$ui$$,$data$$);this.meta=$meta$$;this.saveNeededCounter=0};mxUtils.extend(TrelloFile,DrawioFile);TrelloFile.prototype.getHash=function $TrelloFile$$getHash$(){return"T"+encodeURIComponent(this.meta.compoundId)};TrelloFile.prototype.getMode=function $TrelloFile$$getMode$(){return App.MODE_TRELLO};TrelloFile.prototype.isAutosave=function $TrelloFile$$isAutosave$(){return!0};TrelloFile.prototype.getTitle=function $TrelloFile$$getTitle$(){return this.meta.name};
TrelloFile.prototype.isRenamable=function $TrelloFile$$isRenamable$(){return!1};TrelloFile.prototype.getSize=function $TrelloFile$$getSize$(){return this.meta.bytes};TrelloFile.prototype.save=function $TrelloFile$$save$($revision$$,$success$$,$error$$){this.doSave(this.getTitle(),$success$$,$error$$)};TrelloFile.prototype.saveAs=function $TrelloFile$$saveAs$($title$$,$success$$,$error$$){this.doSave($title$$,$success$$,$error$$)};
TrelloFile.prototype.doSave=function $TrelloFile$$doSave$($title$$,$success$$,$error$$){var $prev$$=this.meta.name;this.meta.name=$title$$;DrawioFile.prototype.save.apply(this,arguments);this.meta.name=$prev$$;this.saveFile($title$$,!1,$success$$,$error$$)};
TrelloFile.prototype.saveFile=function $TrelloFile$$saveFile$($title$$,$revision$$,$success$$,$error$$){if(this.isEditable())if(this.savingFile)null!=$error$$&&(this.saveNeededCounter++,$error$$({code:App.ERROR_BUSY}));else if(this.savingFile=!0,this.getTitle()==$title$$){var $prevModified$$=this.isModified,$modified$$=this.isModified(),$prepare$$=mxUtils.bind(this,function(){this.setModified(!1);this.isModified=function $this$isModified$(){return $modified$$}});$prepare$$();this.ui.trello.saveFile(this,
mxUtils.bind(this,function($meta$$){this.savingFile=!1;this.isModified=$prevModified$$;this.meta=$meta$$;this.contentChanged();null!=$success$$&&$success$$();0<this.saveNeededCounter&&(this.saveNeededCounter--,this.saveFile($title$$,$revision$$,$success$$,$error$$))}),mxUtils.bind(this,function($err$$){this.savingFile=!1;this.isModified=$prevModified$$;this.setModified($modified$$||this.isModified());if(null!=$error$$){if(null!=$err$$&&null!=$err$$.retry){var $retry$$=$err$$.retry;$err$$.retry=function $$err$$$retry$(){$prepare$$();
$retry$$()}}$error$$($err$$)}}))}else this.ui.pickFolder(App.MODE_TRELLO,mxUtils.bind(this,function($cardId$$){this.ui.trello.insertFile($title$$,this.getData(),mxUtils.bind(this,function($file$$){this.savingFile=!1;null!=$success$$&&$success$$();this.ui.fileLoaded($file$$);0<this.saveNeededCounter&&(this.saveNeededCounter--,this.saveFile($title$$,$revision$$,$success$$,$error$$))}),mxUtils.bind(this,function(){this.savingFile=!1;null!=$error$$&&$error$$()}),!1,$cardId$$)}));else null!=$success$$&&
$success$$()};TrelloLibrary=function $TrelloLibrary$($ui$$,$data$$,$meta$$){TrelloFile.call(this,$ui$$,$data$$,$meta$$)};mxUtils.extend(TrelloLibrary,TrelloFile);TrelloLibrary.prototype.doSave=function $TrelloLibrary$$doSave$($title$$,$success$$,$error$$){this.saveFile($title$$,!1,$success$$,$error$$)};TrelloLibrary.prototype.open=function $TrelloLibrary$$open$(){};TrelloClient=function $TrelloClient$($editorUi$$){DrawioClient.call(this,$editorUi$$,"tauth");Trello.setKey(this.key)};mxUtils.extend(TrelloClient,DrawioClient);TrelloClient.prototype.key="e73615c79cf7e381aef91c85936e9553";TrelloClient.prototype.baseUrl="https://api.trello.com/1/";TrelloClient.prototype.SEPARATOR="|$|";TrelloClient.prototype.maxFileSize=1E7;TrelloClient.prototype.extension=".xml";
TrelloClient.prototype.authenticate=function $TrelloClient$$authenticate$($fn$$,$error$$,$callback$jscomp$74_force$$){$callback$jscomp$74_force$$&&this.logout();$callback$jscomp$74_force$$=mxUtils.bind(this,function($remember$$,$success$$){Trello.authorize({type:"popup",name:"draw.io",scope:{read:"true",write:"true"},expiration:$remember$$?"never":"1hour",success:function(){null!=$success$$&&$success$$();$fn$$()},error:function(){null!=$success$$&&$success$$();null!=$error$$&&$error$$(mxResources.get("loggedOut"))}})});
this.isAuthorized()?$callback$jscomp$74_force$$(!0):this.ui.showAuthDialog(this,!0,$callback$jscomp$74_force$$)};TrelloClient.prototype.getLibrary=function $TrelloClient$$getLibrary$($id$$,$success$$,$error$$){this.getFile($id$$,$success$$,$error$$,!1,!0)};
TrelloClient.prototype.getFile=function $TrelloClient$$getFile$($id$$,$success$$,$error$$,$denyConvert$$,$asLibrary$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;var $callback$$=mxUtils.bind(this,function(){var $ids$$=$id$$.split(this.SEPARATOR),$acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$callback$$})}),this.ui.timeout);Trello.cards.get($ids$$[0]+"/attachments/"+$ids$$[1],mxUtils.bind(this,function($meta$$){window.clearTimeout($timeoutThread$$);
if($acceptResponse$$){var $binary$$=/\.png$/i.test($meta$$.name);/\.v(dx|sdx?)$/i.test($meta$$.name)||/\.gliffy$/i.test($meta$$.name)||!this.ui.useCanvasForExport&&$binary$$?this.ui.convertFile(PROXY_URL+"?url="+encodeURIComponent($meta$$.url),$meta$$.name,$meta$$.mimeType,this.extension,$success$$,$error$$):($acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT})}),this.ui.timeout),this.ui.loadUrl(PROXY_URL+"?url="+
encodeURIComponent($meta$$.url),mxUtils.bind(this,function($data$$){window.clearTimeout($timeoutThread$$);if($acceptResponse$$){$meta$$.compoundId=$id$$;var $index$jscomp$61_xml$$=$binary$$?$data$$.lastIndexOf(","):-1;0<$index$jscomp$61_xml$$&&($index$jscomp$61_xml$$=this.ui.extractGraphModelFromPng($data$$.substring($index$jscomp$61_xml$$+1)),null!=$index$jscomp$61_xml$$&&0<$index$jscomp$61_xml$$.length&&($data$$=$index$jscomp$61_xml$$));$asLibrary$$?$success$$(new TrelloLibrary(this.ui,$data$$,
$meta$$)):$success$$(new TrelloFile(this.ui,$data$$,$meta$$))}}),mxUtils.bind(this,function($err$$,$req$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(401==$req$$.status?this.authenticate($callback$$,$error$$,!0):$error$$())}),$binary$$||null!=$meta$$.mimeType&&"image/"==$meta$$.mimeType.substring(0,6)))}}),mxUtils.bind(this,function($err$$){window.clearTimeout($timeoutThread$$);$acceptResponse$$&&(401==$err$$.status?this.authenticate($callback$$,$error$$,!0):$error$$())}))});this.authenticate($callback$$,
$error$$)};TrelloClient.prototype.insertLibrary=function $TrelloClient$$insertLibrary$($filename$$,$data$$,$success$$,$error$$,$cardId$$){this.insertFile($filename$$,$data$$,$success$$,$error$$,!0,$cardId$$)};
TrelloClient.prototype.insertFile=function $TrelloClient$$insertFile$($filename$$,$data$$,$success$$,$error$$,$asLibrary$$,$cardId$$){$asLibrary$$=null!=$asLibrary$$?$asLibrary$$:!1;var $callback$$=mxUtils.bind(this,function(){var $fn$$=mxUtils.bind(this,function($fileData$$){this.writeFile($filename$$,$fileData$$,$cardId$$,mxUtils.bind(this,function($meta$$){$asLibrary$$?$success$$(new TrelloLibrary(this.ui,$data$$,$meta$$)):$success$$(new TrelloFile(this.ui,$data$$,$meta$$))}),$error$$)});this.ui.useCanvasForExport&&
/(\.png)$/i.test($filename$$)?this.ui.getEmbeddedPng(mxUtils.bind(this,function($pngData$$){$fn$$(this.ui.base64ToBlob($pngData$$,"image/png"))}),$error$$,$data$$):$fn$$($data$$)});this.authenticate($callback$$,$error$$)};
TrelloClient.prototype.saveFile=function $TrelloClient$$saveFile$($file$$,$success$$,$error$$){var $ids$$=$file$$.meta.compoundId.split(this.SEPARATOR),$fn$$=mxUtils.bind(this,function($data$$){this.writeFile($file$$.meta.name,$data$$,$ids$$[0],function($meta$$){Trello.del("cards/"+$ids$$[0]+"/attachments/"+$ids$$[1],mxUtils.bind(this,function(){$success$$($meta$$)}),mxUtils.bind(this,function($err$$){401==$err$$.status?this.authenticate($callback$$,$error$$,!0):$error$$()}))},$error$$)}),$callback$$=
mxUtils.bind(this,function(){this.ui.useCanvasForExport&&/(\.png)$/i.test($file$$.meta.name)?this.ui.getEmbeddedPng(mxUtils.bind(this,function($data$$){$fn$$(this.ui.base64ToBlob($data$$,"image/png"))}),$error$$,this.ui.getCurrentFile()!=$file$$?$file$$.getData():null):$fn$$($file$$.getData())});this.authenticate($callback$$,$error$$)};
TrelloClient.prototype.writeFile=function $TrelloClient$$writeFile$($filename$$,$data$$,$cardId$$,$success$$,$error$$){if(null!=$filename$$&&null!=$data$$)if($data$$.length>=this.maxFileSize)$error$$({message:mxResources.get("drawingTooLarge")+" ("+this.ui.formatFileSize($data$$.length)+" / 10 MB)"});else{var $fn$$=mxUtils.bind(this,function(){var $acceptResponse$$=!0,$timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){$acceptResponse$$=!1;$error$$({code:App.ERROR_TIMEOUT,retry:$fn$$})}),
this.ui.timeout),$formData$$=new FormData;$formData$$.append("key",Trello.key());$formData$$.append("token",Trello.token());$formData$$.append("file","string"===typeof $data$$?new Blob([$data$$]):$data$$,$filename$$);$formData$$.append("name",$filename$$);var $request$$=new XMLHttpRequest;$request$$.responseType="json";$request$$.onreadystatechange=mxUtils.bind(this,function(){if(4===$request$$.readyState&&(window.clearTimeout($timeoutThread$$),$acceptResponse$$))if(200==$request$$.status){var $fileMeta$$=
$request$$.response;$fileMeta$$.compoundId=$cardId$$+this.SEPARATOR+$fileMeta$$.id;$success$$($fileMeta$$)}else 401==$request$$.status?this.authenticate($fn$$,$error$$,!0):$error$$()});$request$$.open("POST",this.baseUrl+"cards/"+$cardId$$+"/attachments");$request$$.send($formData$$)});this.authenticate($fn$$,$error$$)}else $error$$({message:mxResources.get("unknownError")})};TrelloClient.prototype.pickLibrary=function $TrelloClient$$pickLibrary$($fn$$){this.pickFile($fn$$)};
TrelloClient.prototype.pickFolder=function $TrelloClient$$pickFolder$($fn$$){this.authenticate(mxUtils.bind(this,function(){this.showTrelloDialog(!1,$fn$$)}),mxUtils.bind(this,function($e$$){this.ui.showError(mxResources.get("error"),$e$$)}))};
TrelloClient.prototype.pickFile=function $TrelloClient$$pickFile$($fn$$,$returnObject$$){$fn$$=null!=$fn$$?$fn$$:mxUtils.bind(this,function($id$$){this.ui.loadFile("T"+encodeURIComponent($id$$))});this.authenticate(mxUtils.bind(this,function(){this.showTrelloDialog(!0,$fn$$)}),mxUtils.bind(this,function($e$$){this.ui.showError(mxResources.get("error"),$e$$,mxResources.get("ok"))}))};
TrelloClient.prototype.showTrelloDialog=function $TrelloClient$$showTrelloDialog$($showFiles$$,$fn$jscomp$0$$){var $cardId$$=null,$filter$$="@me",$linkCounter$$=0,$content$jscomp$12_dlg$$=document.createElement("div");$content$jscomp$12_dlg$$.style.whiteSpace="nowrap";$content$jscomp$12_dlg$$.style.overflow="hidden";$content$jscomp$12_dlg$$.style.height="224px";var $hd$$=document.createElement("h3");mxUtils.write($hd$$,$showFiles$$?mxResources.get("selectFile"):mxResources.get("selectCard"));$hd$$.style.cssText=
"width:100%;text-align:center;margin-top:0px;margin-bottom:12px";$content$jscomp$12_dlg$$.appendChild($hd$$);var $div$jscomp$0$$=document.createElement("div");$div$jscomp$0$$.style.whiteSpace="nowrap";$div$jscomp$0$$.style.overflow="auto";$div$jscomp$0$$.style.height="194px";$content$jscomp$12_dlg$$.appendChild($div$jscomp$0$$);$content$jscomp$12_dlg$$=new CustomDialog(this.ui,$content$jscomp$12_dlg$$);this.ui.showDialog($content$jscomp$12_dlg$$.container,340,270,!0,!0);$content$jscomp$12_dlg$$.okButton.parentNode.removeChild($content$jscomp$12_dlg$$.okButton);
var $createLink$$=mxUtils.bind(this,function($label$$,$fn$$,$preview$$){$linkCounter$$++;var $div$$=document.createElement("div");$div$$.style="width:100%;text-overflow:ellipsis;overflow:hidden;vertical-align:middle;background:"+(0==$linkCounter$$%2?"#eee":"#fff");var $link$$=document.createElement("a");$link$$.setAttribute("href","javascript:void(0);");if(null!=$preview$$){var $img$$=document.createElement("img");$img$$.src=$preview$$.url;$img$$.width=$preview$$.width;$img$$.height=$preview$$.height;
$img$$.style="border: 1px solid black;margin:5px;vertical-align:middle";$link$$.appendChild($img$$)}mxUtils.write($link$$,$label$$);mxEvent.addListener($link$$,"click",$fn$$);$div$$.appendChild($link$$);return $div$$}),$error$$=mxUtils.bind(this,function($err$$){this.ui.handleError($err$$,null,mxUtils.bind(this,function(){this.ui.spinner.stop();this.ui.hideDialog()}))}),$selectAtt$$=mxUtils.bind(this,function(){$linkCounter$$=0;$div$jscomp$0$$.innerHTML="";this.ui.spinner.spin($div$jscomp$0$$,mxResources.get("loading"));
var $callback$$=mxUtils.bind(this,function(){Trello.cards.get($cardId$$+"/attachments",{fields:"id,name,previews"},mxUtils.bind(this,function($data$$){this.ui.spinner.stop();$div$jscomp$0$$.appendChild($createLink$$("../ [Up]",mxUtils.bind(this,function(){$selectCard$$()})));mxUtils.br($div$jscomp$0$$);null==$data$$||0==$data$$.length?mxUtils.write($div$jscomp$0$$,mxResources.get("noFiles")):mxUtils.bind(this,function(){for(var $i$$=0;$i$$<$data$$.length;$i$$++)mxUtils.bind(this,function($file$$){$div$jscomp$0$$.appendChild($createLink$$($file$$.name,
mxUtils.bind(this,function(){this.ui.hideDialog();$fn$jscomp$0$$($cardId$$+this.SEPARATOR+$file$$.id)}),null!=$file$$.previews?$file$$.previews[0]:null))})($data$$[$i$$])})()}),mxUtils.bind(this,function($req$$){401==$req$$.status?this.authenticate($callback$$,$error$$,!0):null!=$error$$&&$error$$($req$$)}))});$callback$$()}),$nextPageDiv$$=null,$scrollFn$$=null,$selectCard$$=mxUtils.bind(this,function($page$$){null==$page$$&&($linkCounter$$=0,$div$jscomp$0$$.innerHTML="",$page$$=1);this.ui.spinner.spin($div$jscomp$0$$,
mxResources.get("loading"));null!=$nextPageDiv$$&&null!=$nextPageDiv$$.parentNode&&$nextPageDiv$$.parentNode.removeChild($nextPageDiv$$);$nextPageDiv$$=document.createElement("a");$nextPageDiv$$.style.display="block";$nextPageDiv$$.setAttribute("href","javascript:void(0);");mxUtils.write($nextPageDiv$$,mxResources.get("more")+"...");var $nextPage$$=mxUtils.bind(this,function(){mxEvent.removeListener($div$jscomp$0$$,"scroll",$scrollFn$$);$selectCard$$($page$$+1)});mxEvent.addListener($nextPageDiv$$,
"click",$nextPage$$);var $callback$$=mxUtils.bind(this,function(){Trello.get("search",{query:""==mxUtils.trim($filter$$)?"is:open":$filter$$,cards_limit:100,cards_page:$page$$-1},mxUtils.bind(this,function($cards_data$$){this.ui.spinner.stop();$cards_data$$=null!=$cards_data$$?$cards_data$$.cards:null;if(null==$cards_data$$||0==$cards_data$$.length)mxUtils.write($div$jscomp$0$$,mxResources.get("noFiles"));else{1==$page$$&&($div$jscomp$0$$.appendChild($createLink$$(mxResources.get("filterCards")+"...",
mxUtils.bind(this,function(){var $dlg$$=new FilenameDialog(this.ui,$filter$$,mxResources.get("ok"),mxUtils.bind(this,function($value$$){null!=$value$$&&($filter$$=$value$$,$selectCard$$())}),mxResources.get("filterCards"),null,null,"http://help.trello.com/article/808-searching-for-cards-all-boards");this.ui.showDialog($dlg$$.container,300,80,!0,!1);$dlg$$.init()}))),mxUtils.br($div$jscomp$0$$));for(var $i$$=0;$i$$<$cards_data$$.length;$i$$++)mxUtils.bind(this,function($card$$){$div$jscomp$0$$.appendChild($createLink$$($card$$.name,
mxUtils.bind(this,function(){$showFiles$$?($cardId$$=$card$$.id,$selectAtt$$()):(this.ui.hideDialog(),$fn$jscomp$0$$($card$$.id))})))})($cards_data$$[$i$$]);100==$cards_data$$.length&&($div$jscomp$0$$.appendChild($nextPageDiv$$),$scrollFn$$=function $$scrollFn$$$(){$div$jscomp$0$$.scrollTop>=$div$jscomp$0$$.scrollHeight-$div$jscomp$0$$.offsetHeight&&$nextPage$$()},mxEvent.addListener($div$jscomp$0$$,"scroll",$scrollFn$$))}}),mxUtils.bind(this,function($req$$){401==$req$$.status?this.authenticate($callback$$,
$error$$,!0):null!=$error$$&&$error$$({message:$req$$.responseText})}))});$callback$$()});$selectCard$$()};TrelloClient.prototype.isAuthorized=function $TrelloClient$$isAuthorized$(){try{return null!=localStorage.trello_token}catch($e$$){}return!1};TrelloClient.prototype.logout=function $TrelloClient$$logout$(){localStorage.removeItem("trello_token");Trello.deauthorize()};DrawioComment=function $DrawioComment$($file$$,$id$$,$content$$,$modifiedDate$$,$createdDate$$,$isResolved$$,$user$$){this.file=$file$$;this.id=$id$$;this.content=$content$$;this.modifiedDate=$modifiedDate$$;this.createdDate=$createdDate$$;this.isResolved=$isResolved$$;this.user=$user$$;this.replies=[]};DrawioComment.prototype.addReplyDirect=function $DrawioComment$$addReplyDirect$($reply$$){null!=$reply$$&&this.replies.push($reply$$)};
DrawioComment.prototype.addReply=function $DrawioComment$$addReply$($reply$$,$success$$,$error$$,$doResolve$$,$doReopen$$){$success$$()};DrawioComment.prototype.editComment=function $DrawioComment$$editComment$($newContent$$,$success$$,$error$$){$success$$()};DrawioComment.prototype.deleteComment=function $DrawioComment$$deleteComment$($success$$,$error$$){$success$$()};DriveComment=function $DriveComment$($file$$,$id$$,$content$$,$modifiedDate$$,$createdDate$$,$isResolved$$,$user$$,$pCommentId$$){DrawioComment.call(this,$file$$,$id$$,$content$$,$modifiedDate$$,$createdDate$$,$isResolved$$,$user$$);this.pCommentId=$pCommentId$$};mxUtils.extend(DriveComment,DrawioComment);
DriveComment.prototype.addReply=function $DriveComment$$addReply$($body$jscomp$3_reply$$,$success$$,$error$$,$doResolve$$,$doReopen$$){$body$jscomp$3_reply$$={content:$body$jscomp$3_reply$$.content};$doResolve$$?$body$jscomp$3_reply$$.verb="resolve":$doReopen$$&&($body$jscomp$3_reply$$.verb="reopen");this.file.ui.drive.executeRequest(gapi.client.drive.replies.insert({fileId:this.file.getId(),commentId:this.id,resource:$body$jscomp$3_reply$$}),mxUtils.bind(this,function($resp$$){$success$$($resp$$.replyId)}),
$error$$)};
DriveComment.prototype.editComment=function $DriveComment$$editComment$($body$jscomp$4_newContent$$,$success$$,$error$$){this.content=$body$jscomp$4_newContent$$;$body$jscomp$4_newContent$$={content:$body$jscomp$4_newContent$$};this.file.ui.drive.executeRequest(this.pCommentId?gapi.client.drive.replies.patch({fileId:this.file.getId(),commentId:this.pCommentId,replyId:this.id,resource:$body$jscomp$4_newContent$$}):gapi.client.drive.comments.patch({fileId:this.file.getId(),commentId:this.id,resource:$body$jscomp$4_newContent$$}),
$success$$,$error$$)};DriveComment.prototype.deleteComment=function $DriveComment$$deleteComment$($success$$,$error$$){this.file.ui.drive.executeRequest(this.pCommentId?gapi.client.drive.replies["delete"]({fileId:this.file.getId(),commentId:this.pCommentId,replyId:this.id}):gapi.client.drive.comments["delete"]({fileId:this.file.getId(),commentId:this.id}),$success$$,$error$$)};App=function $App$($editor$jscomp$2_i$$,$container$$,$lightbox$$){EditorUi.call(this,$editor$jscomp$2_i$$,$container$$,null!=$lightbox$$?$lightbox$$:"1"==urlParams.lightbox||"min"==uiTheme&&"0"!=urlParams.chrome);mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||(window.onunload=mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();null!=$file$$&&$file$$.constructor==DriveFile&&$file$$.isModified()&&null!=this.drive?EditorUi.logEvent({category:"DISCARD-SAVE-FILE-"+$file$$.getHash()+"."+$file$$.desc.headRevisionId+
"."+$file$$.desc.modifiedDate+"-size_"+$file$$.getSize(),action:"save_"+(null!=$file$$.lastSaved?Math.round(((new Date).getTime()-$file$$.lastSaved)/1E3):"never")+"-autosave_"+((this.editor.autosave?"on":"off")+"-open_"+(null!=$file$$.opened?Math.round(((new Date).getTime()-$file$$.opened)/1E3):"never")),label:null!=this.drive.user?this.drive.user.id:"unknown-user"}):null!=$file$$&&$file$$.isModified()&&EditorUi.logEvent({category:"DISCARD-SAVE-FILE-"+$file$$.getHash()+"-size_"+$file$$.getSize(),
action:"save_"+(null!=$file$$.lastSaved?Math.round(((new Date).getTime()-$file$$.lastSaved)/1E3):"never")+"-autosave_"+((this.editor.autosave?"on":"off")+"-open_"+(null!=$file$$.opened?Math.round(((new Date).getTime()-$file$$.opened)/1E3):"never")),label:"nolabel"})}));this.editor.addListener("autosaveChanged",mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();null!=$file$$&&EditorUi.logEvent({category:(this.editor.autosave?"ON":"OFF")+"-AUTOSAVE-FILE-"+$file$$.getHash(),action:"changed",
label:"autosave_"+(this.editor.autosave?"on":"off")})}));mxClient.IS_SVG?mxGraph.prototype.warningImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE7SURBVHjaYvz//z8DJQAggBjwGXDuHMP/tWuD/uPTCxBAOA0AaQRK/f/+XeJ/cbHlf1wGAAQQTgPu3QNLgfHSpZo4DQAIIKwGwGyH4e/fFbG6AiQJEEAs2Ew2NFzH8OOHBMO6dT/A/KCg7wxGRh+wuhQggDBcALMdFIAcHBxgDGJjcwVIIUAAYbhAUXEdVos4OO4DXcGBIQ4QQCguQPY7sgtgAYruCpAgQACx4LJdU1OCwctLEcyWlLwPJF+AXQE0EMUBAAEEdwF6yMOiD4RRY0QT7gqQAEAAseDzu6XldYYPH9DD4joQa8L5AAEENgWb7SBcXa0JDQMBrK4AcQACiAlfyOMCEFdAnAYQQEz4FLa0XGf4/v0H0IIPONUABBAjyBmMjIwMS5cK/L927QORbtBkaG29DtYLEGAAH6f7oq3Zc+kAAAAASUVORK5CYII=":
(new Image).src=mxGraph.prototype.warningImage.src;window.openWindow=mxUtils.bind(this,function($url$$,$pre$$,$fallback$$){var $wnd$$=null;try{$wnd$$=window.open($url$$)}catch($e$$){}null==$wnd$$||void 0===$wnd$$?this.showDialog((new PopupDialog(this,$url$$,$pre$$,$fallback$$)).container,320,140,!0,!0):null!=$pre$$&&$pre$$()});this.updateDocumentTitle();this.updateUi();window.showOpenAlert=mxUtils.bind(this,function($message$$){null!=window.openFile&&window.openFile.cancel(!0);this.handleError($message$$)});
this.editor.chromeless&&!this.editor.editable||this.addFileDropHandler([document]);if(null!=App.DrawPlugins){for($editor$jscomp$2_i$$=0;$editor$jscomp$2_i$$<App.DrawPlugins.length;$editor$jscomp$2_i$$++)try{App.DrawPlugins[$editor$jscomp$2_i$$](this)}catch($e$$){null!=window.console&&console.log("Plugin Error:",$e$$,App.DrawPlugins[$editor$jscomp$2_i$$])}finally{App.embedModePluginsCount--,this.initializeEmbedMode()}window.Draw.loadPlugin=mxUtils.bind(this,function($callback$$){try{$callback$$(this)}finally{App.embedModePluginsCount--,
this.initializeEmbedMode()}});setTimeout(mxUtils.bind(this,function(){0<App.embedModePluginsCount&&(App.embedModePluginsCount=0,this.initializeEmbedMode())}),5E3)}this.load()};App.ERROR_TIMEOUT="timeout";App.ERROR_BUSY="busy";App.ERROR_UNKNOWN="unknown";App.MODE_GOOGLE="google";App.MODE_DROPBOX="dropbox";App.MODE_ONEDRIVE="onedrive";App.MODE_GITHUB="github";App.MODE_DEVICE="device";App.MODE_BROWSER="browser";App.MODE_TRELLO="trello";App.MODE_CSET="cset";App.DROPBOX_APPKEY="libwls2fa9szdji";
App.DROPBOX_URL="js/dropbox/Dropbox-sdk.min.js";App.DROPINS_URL="https://www.dropbox.com/static/api/2/dropins.js";App.ONEDRIVE_URL=mxClient.IS_IE11?"https://js.live.net/v7.2/OneDrive.js":"js/onedrive/OneDrive.js";App.TRELLO_URL="https://api.trello.com/1/client.js";App.TRELLO_JQUERY_URL="https://code.jquery.com/jquery-1.7.1.min.js";App.FOOTER_PLUGIN_URL="https://www.jgraph.com/drawio-footer.js";App.PUSHER_KEY="1e756b07a690c5bdb054";App.PUSHER_CLUSTER="eu";App.PUSHER_URL="https://js.pusher.com/4.3/pusher.min.js";
App.GOOGLE_APIS="client,drive-share";
App.pluginRegistry={"4xAKTrabTpTzahoLthkwPNUn":"/plugins/explore.js",ex:"/plugins/explore.js",p1:"/plugins/p1.js",ac:"/plugins/connect.js",acj:"/plugins/connectJira.js",ac148:"/plugins/cConf-1-4-8.js",voice:"/plugins/voice.js",tips:"/plugins/tooltips.js",svgdata:"/plugins/svgdata.js",electron:"plugins/electron.js",number:"/plugins/number.js",sql:"/plugins/sql.js",props:"/plugins/props.js",text:"/plugins/text.js",anim:"/plugins/animation.js",update:"/plugins/update.js",trees:"/plugins/trees/trees.js",
"import":"/plugins/import.js",replay:"/plugins/replay.js",anon:"/plugins/anonymize.js",tr:"/plugins/trello.js",f5:"/plugins/rackF5.js",tickets:"/plugins/tickets.js",flow:"/plugins/flow.js",webcola:"/plugins/webcola/webcola.js",rnd:"/plugins/random.js",page:"/plugins/page.js",gd:"/plugins/googledrive.js"};
App.getStoredMode=function $App$getStoredMode$(){var $mode$$=null;null==$mode$$&&isLocalStorage&&($mode$$=localStorage.getItem(".mode"));if(null==$mode$$&&"undefined"!=typeof Storage){for(var $cookies$jscomp$2_expiry$$=document.cookie.split(";"),$i$$=0;$i$$<$cookies$jscomp$2_expiry$$.length;$i$$++){var $cookie$$=mxUtils.trim($cookies$jscomp$2_expiry$$[$i$$]);if("MODE="==$cookie$$.substring(0,5)){$mode$$=$cookie$$.substring(5);break}}null!=$mode$$&&isLocalStorage&&($cookies$jscomp$2_expiry$$=new Date,
$cookies$jscomp$2_expiry$$.setYear($cookies$jscomp$2_expiry$$.getFullYear()-1),document.cookie="MODE=; expires="+$cookies$jscomp$2_expiry$$.toUTCString(),localStorage.setItem(".mode",$mode$$))}return $mode$$};
(function(){mxClient.IS_CHROMEAPP||("1"!=urlParams.offline&&("db.draw.io"==window.location.hostname&&null==urlParams.mode&&(urlParams.mode="dropbox"),App.mode=urlParams.mode,null==App.mode&&(App.mode=App.getStoredMode())),null!=window.mxscript&&("1"!=urlParams.embed&&("function"===typeof window.DriveClient&&("0"!=urlParams.gapi&&isSvgBrowser&&(null==document.documentMode||10<=document.documentMode)?App.mode==App.MODE_GOOGLE||null!=urlParams.state&&""==window.location.hash||null!=window.location.hash&&
"#G"==window.location.hash.substring(0,2)?mxscript("https://apis.google.com/js/api.js"):"0"!=urlParams.chrome||null!=window.location.hash&&"#Uhttps%3A%2F%2Fdrive.google.com%2Fuc%3Fid%3D"===window.location.hash.substring(0,45)||(window.DriveClient=null):window.DriveClient=null),"function"===typeof window.DropboxClient&&("0"!=urlParams.db&&isSvgBrowser&&(null==document.documentMode||9<document.documentMode)?App.mode==App.MODE_DROPBOX||null!=window.location.hash&&"#D"==window.location.hash.substring(0,
2)?App.CSET||(mxscript(App.DROPBOX_URL),mxscript(App.DROPINS_URL,null,"dropboxjs",App.DROPBOX_APPKEY)):"0"==urlParams.chrome&&(window.DropboxClient=null):window.DropboxClient=null),"function"===typeof window.OneDriveClient&&("0"!=urlParams.od&&(0>navigator.userAgent.indexOf("MSIE")||10<=document.documentMode)?App.mode==App.MODE_ONEDRIVE||null!=window.location.hash&&"#W"==window.location.hash.substring(0,2)?mxscript(App.ONEDRIVE_URL):"0"==urlParams.chrome&&(window.OneDriveClient=null):window.OneDriveClient=
null),"function"===typeof window.TrelloClient&&("0"!=urlParams.tr&&isSvgBrowser&&(null==document.documentMode||10<=document.documentMode)?App.mode==App.MODE_TRELLO||null!=window.location.hash&&"#T"==window.location.hash.substring(0,2)?(mxscript(App.TRELLO_JQUERY_URL),mxscript(App.TRELLO_URL)):"0"==urlParams.chrome&&(window.TrelloClient=null):window.TrelloClient=null)),"undefined"==typeof JSON&&mxscript("js/json/json2.min.js")))})();
App.main=function $App$main$($callback$$,$createUi$$){function $doLoad$$($bundle$$){mxUtils.getAll("1"!=urlParams.dev?[$bundle$$]:[$bundle$$,STYLE_PATH+"/default.xml",STYLE_PATH+"/dark-default.xml"],function($ui$jscomp$26_xhr$$){mxResources.parse($ui$jscomp$26_xhr$$[0].getText());2<$ui$jscomp$26_xhr$$.length&&(Graph.prototype.defaultThemes["default-style2"]=$ui$jscomp$26_xhr$$[1].getDocumentElement(),Graph.prototype.defaultThemes.darkTheme=$ui$jscomp$26_xhr$$[2].getDocumentElement());$ui$jscomp$26_xhr$$=
null!=$createUi$$?$createUi$$():new App(new Editor("0"==urlParams.chrome||"min"==uiTheme,null,null,null,"0"!=urlParams.chrome));if(null!=window.mxscript){if("function"===typeof window.DropboxClient&&null==window.Dropbox&&null!=window.DrawDropboxClientCallback&&("1"!=urlParams.embed&&"0"!=urlParams.db||"1"==urlParams.embed&&"1"==urlParams.db)&&isSvgBrowser&&(null==document.documentMode||9<document.documentMode))App.CSET||mxscript(App.DROPBOX_URL,function(){mxscript(App.DROPINS_URL,function(){DrawDropboxClientCallback()},
"dropboxjs",App.DROPBOX_APPKEY)});else if("undefined"===typeof window.Dropbox||"undefined"===typeof window.Dropbox.choose)window.DropboxClient=null;"function"===typeof window.OneDriveClient&&"undefined"===typeof OneDrive&&null!=window.DrawOneDriveClientCallback&&("1"!=urlParams.embed&&"0"!=urlParams.od||"1"==urlParams.embed&&"1"==urlParams.od)&&(0>navigator.userAgent.indexOf("MSIE")||10<=document.documentMode)?mxscript(App.ONEDRIVE_URL,window.DrawOneDriveClientCallback):"undefined"===typeof window.OneDrive&&
(window.OneDriveClient=null);"function"===typeof window.TrelloClient&&"undefined"===typeof window.Trello&&null!=window.DrawTrelloClientCallback&&("1"!=urlParams.embed&&"0"!=urlParams.tr||"1"==urlParams.embed&&"1"==urlParams.tr)&&(0>navigator.userAgent.indexOf("MSIE")||10<=document.documentMode)?mxscript(App.TRELLO_JQUERY_URL,function(){mxscript(App.TRELLO_URL,function(){DrawTrelloClientCallback()})}):"undefined"===typeof window.Trello&&(window.TrelloClient=null)}null!=$callback$$&&$callback$$($ui$jscomp$26_xhr$$);
"0"!=urlParams.chrome&&"1"==urlParams.test&&(EditorUi.debug("Started in "+((new Date).getTime()-t0.getTime())+"ms"),null!=urlParams["export"]&&EditorUi.debug("Export:",EXPORT_URL))},function($st$jscomp$2_xhr$$){$st$jscomp$2_xhr$$=document.getElementById("geStatus");null!=$st$jscomp$2_xhr$$&&($st$jscomp$2_xhr$$.innerHTML="Error loading page. <a>Please try refreshing.</a>",$st$jscomp$2_xhr$$.getElementsByTagName("a")[0].onclick=function $$st$jscomp$2_xhr$$$getElementsByTagName$0$onclick$(){mxLanguage=
"en";$doLoad$$(mxResources.getDefaultBundle(RESOURCE_BASE,mxLanguage)||mxResources.getSpecialBundle(RESOURCE_BASE,mxLanguage))})})}function $doMain$$(){mxResources.loadDefaultBundle=!1;$doLoad$$(mxResources.getDefaultBundle(RESOURCE_BASE,mxLanguage)||mxResources.getSpecialBundle(RESOURCE_BASE,mxLanguage))}window.onerror=function $window$onerror$($message$$,$url$$,$linenumber$$,$colno$$,$err$$){EditorUi.logError($message$$,$url$$,$linenumber$$,$colno$$,$err$$)};if("1"==urlParams.embed||"1"==urlParams.lightbox){var $frame_geInfo_plugins$$=
document.getElementById("geInfo");null!=$frame_geInfo_plugins$$&&$frame_geInfo_plugins$$.parentNode.removeChild($frame_geInfo_plugins$$)}null!=document.referrer&&"aws3"==urlParams.libs&&"https://aws.amazon.com/architecture/icons/"==document.referrer.substring(0,42)&&(urlParams.libs="aws4");if(null!=window.mxscript){if("1"==urlParams.offline||"1"==urlParams.appcache)mxscript("js/shapes.min.js"),mxscript("js/stencils.min.js"),mxscript("js/extensions.min.js"),$frame_geInfo_plugins$$=document.createElement("iframe"),
$frame_geInfo_plugins$$.setAttribute("width","0"),$frame_geInfo_plugins$$.setAttribute("height","0"),$frame_geInfo_plugins$$.setAttribute("src","offline.html"),document.body.appendChild($frame_geInfo_plugins$$);mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||"auto"!=DrawioFile.SYNC||"1"==urlParams.stealth||"1"==urlParams.offline||mxscript(App.PUSHER_URL);if("0"!=urlParams.plugins&&"1"!=urlParams.offline){$frame_geInfo_plugins$$=null!=mxSettings.settings?mxSettings.getPlugins():null;if(null==mxSettings.settings&&
isLocalStorage&&"undefined"!==typeof JSON)try{var $temp$jscomp$29_tmp$$=JSON.parse(localStorage.getItem(mxSettings.key));null!=$temp$jscomp$29_tmp$$&&($frame_geInfo_plugins$$=$temp$jscomp$29_tmp$$.plugins)}catch($e$$){}$temp$jscomp$29_tmp$$=urlParams.p;App.initPluginCallback();null!=$temp$jscomp$29_tmp$$&&App.loadPlugins($temp$jscomp$29_tmp$$.split(";"));if(null!=$frame_geInfo_plugins$$&&0<$frame_geInfo_plugins$$.length&&"0"!=urlParams.plugins){for(var $temp$jscomp$29_tmp$$=window.location.protocol+
"//"+window.location.host,$local$$=!0,$i$$=0;$i$$<$frame_geInfo_plugins$$.length&&$local$$;$i$$++)"/"!=$frame_geInfo_plugins$$[$i$$].charAt(0)&&$frame_geInfo_plugins$$[$i$$].substring(0,$temp$jscomp$29_tmp$$.length)!=$temp$jscomp$29_tmp$$&&($local$$=!1);if($local$$||mxUtils.confirm(mxResources.replacePlaceholders("The page has requested to load the following plugin(s):\n \n {1}\n \n Would you like to load these plugin(s) now?\n \n NOTE : Only allow plugins to run if you fully understand the security implications of doing so.\n",
[$frame_geInfo_plugins$$.join("\n")]).replace(/\\n/g,"\n")))for($i$$=0;$i$$<$frame_geInfo_plugins$$.length;$i$$++)try{null==App.pluginsLoaded[$frame_geInfo_plugins$$[$i$$]]&&(App.pluginsLoaded[$frame_geInfo_plugins$$[$i$$]]=!0,App.embedModePluginsCount++,mxscript($frame_geInfo_plugins$$[$i$$]))}catch($e$52$$){}}}"function"===typeof window.DriveClient&&"undefined"===typeof gapi&&("1"!=urlParams.embed&&"0"!=urlParams.gapi||"1"==urlParams.embed&&"1"==urlParams.gapi)&&isSvgBrowser&&isLocalStorage&&(null==
document.documentMode||10<=document.documentMode)?mxscript("https://apis.google.com/js/api.js?onload=DrawGapiClientCallback",null,null,null,mxClient.IS_SVG):"undefined"===typeof window.gapi&&(window.DriveClient=null)}"0"!=urlParams.math&&Editor.initMath();try{if(null!=mxSettings.settings){if(null!=mxSettings.settings.autosaveDelay){var $val$$=parseInt(mxSettings.settings.autosaveDelay);!isNaN($val$$)&&0<$val$$?(DrawioFile.prototype.autosaveDelay=$val$$,null!=window.console&&console.log("Setting autosaveDelay to "+
DrawioFile.prototype.autosaveDelay)):null!=window.console&&console.log("Invalid value for autosaveDelay")}null!=mxSettings.settings.defaultEdgeLength&&($val$$=parseInt(mxSettings.settings.defaultEdgeLength),!isNaN($val$$)&&0<$val$$?(Graph.prototype.defaultEdgeLength=$val$$,null!=window.console&&console.log("Setting defaultEdgeLength to "+Graph.prototype.defaultEdgeLength)):null!=window.console&&console.log("Invalid value for defaultEdgeLength"))}}catch($e$53$$){null!=window.console&&console.error($e$53$$)}if("1"==
urlParams.configure){var $op$$=window.opener||window.parent,$configHandler$$=function $$configHandler$$$($evt$$){if($evt$$.source==$op$$)try{var $data$$=JSON.parse($evt$$.data);null!=$data$$&&"configure"==$data$$.action&&(mxEvent.removeListener(window,"message",$configHandler$$),Editor.configure($data$$.config,!0),mxSettings.load(),$doMain$$())}catch($e$54$$){null!=window.console&&console.log("Error in configuration: "+$e$54$$)}};mxEvent.addListener(window,"message",$configHandler$$);$op$$.postMessage(JSON.stringify({event:"configure"}),
"*")}else $doMain$$()};mxUtils.extend(App,EditorUi);App.prototype.defaultUserPicture="https://lh3.googleusercontent.com/-HIzvXUy6QUY/AAAAAAAAAAI/AAAAAAAAAAA/giuR7PQyjEk/photo.jpg?sz=30";App.prototype.shareImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowOTgwMTE3NDA3MjA2ODExODhDNkFGMDBEQkQ0RTgwOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjU2NzdEMTcwRDIxMUUxQjc0MDkxRDhCNUQzOEFGRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjU2NzdEMDcwRDIxMUUxQjc0MDkxRDhCNUQzOEFGRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNjgwMTE3NDA3MjA2ODExODcxRkM4MUY1OTFDMjQ5OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNzgwMTE3NDA3MjA2ODExODhDNkFGMDBEQkQ0RTgwOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrM/fs0AAADgSURBVHjaYmDAA/7//88MwgzkAKDGFiD+BsQ/QWxSNaf9RwN37twpI8WAS+gGfP78+RpQSoRYA36iG/D379+vQClNdLVMOMz4gi7w79+/n0CKg1gD9qELvH379hzIHGK9oA508ieY8//8+fO5rq4uFCilRKwL1JmYmNhhHEZGRiZ+fn6Q2meEbDYG4u3/cYCfP38uA7kOm0ZOIJ7zn0jw48ePPiDFhmzArv8kgi9fvuwB+w5qwH9ykjswbFSZyM4sEMDPBDTlL5BxkFSd7969OwZ2BZKYGhDzkmjOJ4AAAwBhpRqGnEFb8QAAAABJRU5ErkJggg==";
App.prototype.chevronUpImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDg2NEE3NUY1MUVBMTFFM0I3MUVEMTc0N0YyOUI4QzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDg2NEE3NjA1MUVBMTFFM0I3MUVEMTc0N0YyOUI4QzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ODY0QTc1RDUxRUExMUUzQjcxRUQxNzQ3RjI5QjhDMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0ODY0QTc1RTUxRUExMUUzQjcxRUQxNzQ3RjI5QjhDMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pg+qUokAAAAMUExURQAAANnZ2b+/v////5bgre4AAAAEdFJOU////wBAKqn0AAAAL0lEQVR42mJgRgMMRAswMKAKMDDARBjg8lARBoR6KImkH0wTbygT6YaS4DmAAAMAYPkClOEDDD0AAAAASUVORK5CYII=":
IMAGE_PATH+"/chevron-up.png";
App.prototype.chevronDownImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDg2NEE3NUI1MUVBMTFFM0I3MUVEMTc0N0YyOUI4QzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDg2NEE3NUM1MUVBMTFFM0I3MUVEMTc0N0YyOUI4QzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ODY0QTc1OTUxRUExMUUzQjcxRUQxNzQ3RjI5QjhDMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0ODY0QTc1QTUxRUExMUUzQjcxRUQxNzQ3RjI5QjhDMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsCtve8AAAAMUExURQAAANnZ2b+/v////5bgre4AAAAEdFJOU////wBAKqn0AAAALUlEQVR42mJgRgMMRAkwQEXBNAOcBSPhclB1cNVwfcxI+vEZykSpoSR6DiDAAF23ApT99bZ+AAAAAElFTkSuQmCC":IMAGE_PATH+
"/chevron-down.png";
App.prototype.formatShowImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODdCREY5REY1NkQ3MTFFNTkyNjNEMTA5NjgwODUyRTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODdCREY5RTA1NkQ3MTFFNTkyNjNEMTA5NjgwODUyRTgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4N0JERjlERDU2RDcxMUU1OTI2M0QxMDk2ODA4NTJFOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4N0JERjlERTU2RDcxMUU1OTI2M0QxMDk2ODA4NTJFOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlnMQ/8AAAAJUExURQAAAP///3FxcTfTiAsAAAACdFJOU/8A5bcwSgAAACFJREFUeNpiYEQDDEQJMMABTAAixcQ00ALoDiPRcwABBgB6DADly9Yx8wAAAABJRU5ErkJggg==":IMAGE_PATH+
"/format-show.png";
App.prototype.formatHideImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODdCREY5REI1NkQ3MTFFNTkyNjNEMTA5NjgwODUyRTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODdCREY5REM1NkQ3MTFFNTkyNjNEMTA5NjgwODUyRTgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4N0JERjlEOTU2RDcxMUU1OTI2M0QxMDk2ODA4NTJFOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4N0JERjlEQTU2RDcxMUU1OTI2M0QxMDk2ODA4NTJFOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqjT9SMAAAAGUExURQAAAP///6XZn90AAAACdFJOU/8A5bcwSgAAAB9JREFUeNpiYEQDDEQJMMABTAAmNdAC6A4j0XMAAQYAcbwA1Xvj1CgAAAAASUVORK5CYII=":IMAGE_PATH+
"/format-hide.png";App.prototype.fullscreenImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAABpJREFUCNdjgAAbGxAy4AEh5gNwBBGByoIBAIueBd12TUjqAAAAAElFTkSuQmCC":IMAGE_PATH+"/fullscreen.png";"1"!=urlParams.embed?App.prototype.menubarHeight=60:App.prototype.footerHeight=0;App.initPluginCallback=function $App$initPluginCallback$(){null==App.DrawPlugins&&(App.DrawPlugins=[],window.Draw={},window.Draw.loadPlugin=function $window$Draw$loadPlugin$($callback$$){App.DrawPlugins.push($callback$$)})};
App.pluginsLoaded={};App.embedModePluginsCount=0;
App.loadPlugins=function $App$loadPlugins$($plugins$$,$useInclude$$){for(var $i$$=0;$i$$<$plugins$$.length;$i$$++)if(null!=$plugins$$[$i$$]&&0<$plugins$$[$i$$].length)try{var $url$$=App.pluginRegistry[$plugins$$[$i$$]];null!=$url$$?null==App.pluginsLoaded[$url$$]&&(App.pluginsLoaded[$url$$]=!0,App.embedModePluginsCount++,"undefined"===typeof window.drawDevUrl?$useInclude$$?mxinclude($url$$):mxscript($url$$):$useInclude$$?mxinclude($url$$):mxscript(drawDevUrl+$url$$)):null!=window.console&&console.log("Unknown plugin:",
$plugins$$[$i$$])}catch($e$$){null!=window.console&&console.log("Error loading plugin:",$plugins$$[$i$$],$e$$)}};App.prototype.initializeEmbedMode=function $App$$initializeEmbedMode$(){"1"!=urlParams.embed||0<App.embedModePluginsCount||this.initEmbedDone||(this.initEmbedDone=!0,EditorUi.prototype.initializeEmbedMode.apply(this,arguments))};
App.prototype.init=function $App$$init$(){EditorUi.prototype.init.apply(this,arguments);this.defaultLibraryName=mxResources.get("untitledLibrary");this.descriptorChangedListener=mxUtils.bind(this,this.descriptorChanged);this.gitHub=mxClient.IS_IE&&10!=document.documentMode&&!mxClient.IS_IE11&&!mxClient.IS_EDGE||"0"==urlParams.gh||"1"==urlParams.embed&&"1"!=urlParams.gh?null:new GitHubClient(this);null!=this.gitHub&&this.gitHub.addListener("userChanged",mxUtils.bind(this,function(){this.updateUserElement();
this.restoreLibraries()}));if("1"!=urlParams.embed||"1"==urlParams.od){var $initOneDriveClient$$=mxUtils.bind(this,function(){"undefined"!==typeof OneDrive?(this.oneDrive=new OneDriveClient(this),this.oneDrive.addListener("userChanged",mxUtils.bind(this,function(){this.updateUserElement();this.restoreLibraries()})),this.fireEvent(new mxEventObject("clientLoaded","client",this.oneDrive))):null==window.DrawOneDriveClientCallback&&(window.DrawOneDriveClientCallback=$initOneDriveClient$$)});$initOneDriveClient$$()}if("1"!=
urlParams.embed||"1"==urlParams.tr){var $initTrelloClient$$=mxUtils.bind(this,function(){"undefined"!==typeof window.Trello?(this.trello=new TrelloClient(this),this.trello.addListener("userChanged",mxUtils.bind(this,function(){this.updateUserElement();this.restoreLibraries()})),this.fireEvent(new mxEventObject("clientLoaded","client",this.trello))):null==window.DrawTrelloClientCallback&&(window.DrawTrelloClientCallback=$initTrelloClient$$)});$initTrelloClient$$()}if("1"!=urlParams.embed||"1"==urlParams.gapi){var $initDriveClient$$=
mxUtils.bind(this,function(){if("undefined"!==typeof gapi){var $doInit$$=mxUtils.bind(this,function(){this.drive=new DriveClient(this);"420247213240"==this.drive.appId&&this.editor.addListener("fileLoaded",mxUtils.bind(this,function(){var $file$jscomp$93_td$$=this.getCurrentFile();null!=$file$jscomp$93_td$$&&$file$jscomp$93_td$$.constructor==DriveFile&&($file$jscomp$93_td$$=document.getElementById("geFooterItem2"),null!=$file$jscomp$93_td$$&&($file$jscomp$93_td$$.innerHTML='<a href="https://support.draw.io/display/DO/2014/11/27/Switching+application+in+Google+Drive" target="_blank" title="IMPORTANT NOTICE">IMPORTANT NOTICE</a>'))}));
this.drive.addListener("userChanged",mxUtils.bind(this,function(){this.updateUserElement();this.restoreLibraries();this.checkLicense();null==this.drive.user||isLocalStorage&&null!=mxSettings.settings&&null!=mxSettings.settings.closeRealtimeWarning&&!(mxSettings.settings.closeRealtimeWarning<(new Date).getTime()-2592E6)||this.editor.chromeless&&!this.editor.editable||this.drive.checkRealtimeFiles(mxUtils.bind(this,function(){var $footer$$=document.createElement("div");$footer$$.style.cssText="position:absolute;bottom:0px;max-width:90%;padding:10px;padding-right:26px;white-space:nowrap;left:50%;bottom:2px;";
$footer$$.className="geStatusAlert";mxUtils.setPrefixedStyle($footer$$.style,"transform","translate(-50%,110%)");mxUtils.setPrefixedStyle($footer$$.style,"transition","all 1s ease");$footer$$.style.whiteSpace="nowrap";$footer$$.innerHTML='<a href="https://desk.draw.io/support/solutions/articles/16000092210" target="_blank" style="display:inline;text-decoration:none;font-weight:700;font-size:13px;opacity:1;"><img src="'+this.editor.graph.warningImage.src+'" border="0" style="margin-top:-4px;margin-right:2px;" valign="middle"/>&nbsp;You need to take action to convert legacy files. Click here.&nbsp;<img src="'+
this.editor.graph.warningImage.src+'" border="0" style="margin-top:-4px;margin-left:2px;" valign="middle"/></a>';var $img$$=document.createElement("img");$img$$.setAttribute("src",Dialog.prototype.closeImage);$img$$.setAttribute("title",mxResources.get("close"));$img$$.style.position="absolute";$img$$.style.cursor="pointer";$img$$.style.right="10px";$img$$.style.top="12px";$footer$$.appendChild($img$$);mxEvent.addListener($img$$,"click",mxUtils.bind(this,function(){$footer$$.parentNode.removeChild($footer$$);
this.hideFooter();isLocalStorage&&null!=mxSettings.settings&&(mxSettings.settings.closeRealtimeWarning=Date.now(),mxSettings.save())}));document.body.appendChild($footer$$);window.setTimeout(mxUtils.bind(this,function(){mxUtils.setPrefixedStyle($footer$$.style,"transform","translate(-50%,0%)")}),1500)}))}));this.fireEvent(new mxEventObject("clientLoaded","client",this.drive))});null!=window.DrawGapiClientCallback?(gapi.load(("0"!=urlParams.picker?"picker,":"")+"auth:"+App.GOOGLE_APIS,mxUtils.bind(this,
function($resp$$){null!=gapi.client&&gapi.client.load("drive","v2",mxUtils.bind(this,function(){gapi.auth.init(mxUtils.bind(this,function(){null!=gapi.client.drive&&$doInit$$()}))}))})),window.DrawGapiClientCallback=null):$doInit$$()}else null==window.DrawGapiClientCallback&&(window.DrawGapiClientCallback=$initDriveClient$$)});$initDriveClient$$()}if("1"!=urlParams.embed||"1"==urlParams.db){var $initDropboxClient$$=mxUtils.bind(this,function(){"function"===typeof Dropbox&&"undefined"!==typeof Dropbox.choose?
(window.DrawDropboxClientCallback=null,this.dropbox=new DropboxClient(this),this.dropbox.addListener("userChanged",mxUtils.bind(this,function(){this.updateUserElement();this.restoreLibraries()})),this.fireEvent(new mxEventObject("clientLoaded","client",this.dropbox))):null==window.DrawDropboxClientCallback&&(window.DrawDropboxClientCallback=$initDropboxClient$$)});$initDropboxClient$$()}if("1"!=urlParams.embed){if(this.bg=this.createBackground(),document.body.appendChild(this.bg),this.diagramContainer.style.visibility=
"hidden",this.formatContainer.style.visibility="hidden",this.hsplit.style.display="none",this.sidebarContainer.style.display="none",this.sidebarFooterContainer.style.display="none","1"==urlParams.local?this.setMode(App.MODE_DEVICE):this.mode=App.mode,!(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||"1"==urlParams.embed||"1"==urlParams.stealth||"1"==urlParams.offline||this.editor.chromeless&&!this.editor.editable)){var $timeoutThread$$=window.setTimeout(mxUtils.bind(this,function(){EditorUi.logEvent({category:"TIMEOUT-CACHE-CHECK",
action:"timeout",label:408})}),this.timeout);(new Date).getTime();mxUtils.get(EditorUi.cacheUrl+"?alive",mxUtils.bind(this,function($req$$){window.clearTimeout($timeoutThread$$)}))}}else null!=this.menubar&&(this.menubar.container.style.paddingTop="0px");this.updateHeader();null!=this.menubar&&(this.buttonContainer=document.createElement("div"),this.buttonContainer.style.display="inline-block",this.buttonContainer.style.paddingRight="48px",this.buttonContainer.style.position="absolute",this.buttonContainer.style.right=
"0px",this.menubar.container.appendChild(this.buttonContainer));"atlas"==uiTheme&&null!=this.menubar&&(null!=this.toggleElement&&(this.toggleElement.click(),this.toggleElement.style.display="none"),this.icon=document.createElement("img"),this.icon.setAttribute("src",IMAGE_PATH+"/logo-flat-small.png"),this.icon.setAttribute("title",mxResources.get("draw.io")),this.icon.style.padding="6px",this.icon.style.cursor="pointer",mxEvent.addListener(this.icon,"click",mxUtils.bind(this,function($evt$$){this.appIconClicked($evt$$)})),
mxClient.IS_QUIRKS&&(this.icon.style.marginTop="12px"),this.menubar.container.insertBefore(this.icon,this.menubar.container.firstChild))};App.prototype.isDriveDomain=function $App$$isDriveDomain$(){return"0"!=urlParams.drive&&("test.draw.io"==window.location.hostname||"cdn.draw.io"==window.location.hostname||"www.draw.io"==window.location.hostname||"drive.draw.io"==window.location.hostname||"jgraph.github.io"==window.location.hostname)};
App.prototype.isLegacyDriveDomain=function $App$$isLegacyDriveDomain$(){return 0==urlParams.drive||"legacy.draw.io"==window.location.hostname};App.prototype.getPusher=function $App$$getPusher$(){null==this.pusher&&"function"===typeof window.Pusher&&(this.pusher=new Pusher(App.PUSHER_KEY,{cluster:App.PUSHER_CLUSTER,encrypted:!0}));return this.pusher};
App.prototype.checkLicense=function $App$$checkLicense$(){var $driveUser$$=this.drive.getUser(),$email$$=("1"==urlParams.dev?urlParams.lic:null)||(null!=$driveUser$$?$driveUser$$.email:null);if(!this.isOffline()&&!this.editor.chromeless&&null!=$email$$){var $at$$=$email$$.lastIndexOf("@"),$domain$$=$email$$;0<=$at$$&&($domain$$=$email$$.substring($at$$+1),$email$$=this.crc32($email$$.substring(0,$at$$))+"@"+$domain$$);mxUtils.post("/license","domain="+encodeURIComponent($domain$$)+"&email="+encodeURIComponent($email$$)+
"&ds="+encodeURIComponent($driveUser$$.displayName)+"&lc="+encodeURIComponent($driveUser$$.locale)+"&ts="+(new Date).getTime(),mxUtils.bind(this,function($req$$){try{if(200<=$req$$.getStatus()&&299>=$req$$.getStatus()){var $value$$=$req$$.getText();if(0<$value$$.length){var $lic$$=JSON.parse($value$$);null!=$lic$$&&this.handleLicense($lic$$,$domain$$)}}}catch($e$$){}}))}};
App.prototype.handleLicense=function $App$$handleLicense$($lic$$,$domain$$){null!=$lic$$&&null!=$lic$$.plugins&&App.loadPlugins($lic$$.plugins.split(";"),!0)};App.prototype.getEditBlankXml=function $App$$getEditBlankXml$(){var $file$$=this.getCurrentFile();return null!=$file$$&&this.editor.isChromelessView()&&this.editor.graph.isLightboxView()?$file$$.getData():this.getFileData(!0)};
App.prototype.updateActionStates=function $App$$updateActionStates$(){EditorUi.prototype.updateActionStates.apply(this,arguments);this.actions.get("revisionHistory").setEnabled(this.isRevisionHistoryEnabled())};App.prototype.updateDraft=function $App$$updateDraft$(){isLocalStorage&&null!=localStorage&&localStorage.setItem(".draft",JSON.stringify({modified:(new Date).getTime(),data:this.getFileData()}))};App.prototype.getDraft=function $App$$getDraft$(){return null};
App.prototype.addRecent=function $App$$addRecent$($entry$$){if(isLocalStorage&&null!=localStorage){var $recent$$=this.getRecent();if(null==$recent$$)$recent$$=[];else for(var $i$$=0;$i$$<$recent$$.length;$i$$++)$recent$$[$i$$].id==$entry$$.id&&$recent$$.splice($i$$,1);null!=$recent$$&&($recent$$.unshift($entry$$),$recent$$=$recent$$.slice(0,10),localStorage.setItem(".recent",JSON.stringify($recent$$)))}};
App.prototype.getRecent=function $App$$getRecent$(){if(isLocalStorage&&null!=localStorage){try{var $recent$$=localStorage.getItem(".recent");if(null!=$recent$$)return JSON.parse($recent$$)}catch($e$$){}return null}};App.prototype.resetRecent=function $App$$resetRecent$($entry$$){if(isLocalStorage&&null!=localStorage)try{localStorage.removeItem(".recent")}catch($e$$){}};App.prototype.removeDraft=function $App$$removeDraft$(){if(isLocalStorage&&null!=localStorage&&"0"==urlParams.splash)try{localStorage.removeItem(".draft")}catch($e$$){}};
App.prototype.onBeforeUnload=function $App$$onBeforeUnload$(){if("1"==urlParams.embed&&this.editor.modified)return mxResources.get("allChangesLost");var $file$$=this.getCurrentFile();if(null!=$file$$)if($file$$.constructor!=LocalFile||""!=$file$$.getHash()||$file$$.isModified()||"1"==urlParams.nowarn||this.isDiagramEmpty()||null!=urlParams.url||this.editor.isChromelessView()){if($file$$.isModified())return mxResources.get("allChangesLost");$file$$.close(!0)}else return mxResources.get("ensureDataSaved")};
App.prototype.updateDocumentTitle=function $App$$updateDocumentTitle$(){if(!this.editor.graph.isLightboxView()){var $title$$=this.editor.appName,$file$$=this.getCurrentFile();this.isOfflineApp();null!=$file$$&&null!=$file$$.getTitle()&&$file$$.getTitle();document.title="CSET Diagram"}};App.prototype.createCrcTable=function $App$$createCrcTable$(){for(var $crcTable$$=[],$c$$,$n$$=0;256>$n$$;$n$$++){$c$$=$n$$;for(var $k$$=0;8>$k$$;$k$$++)$c$$=$c$$&1?3988292384^$c$$>>>1:$c$$>>>1;$crcTable$$[$n$$]=$c$$}return $crcTable$$};
App.prototype.getThumbnail=function $App$$getThumbnail$($width$$,$success$$){var $result$$=!1;try{null==this.thumbImageCache&&(this.thumbImageCache={});var $graph$$=this.editor.graph;if(null!=this.pages&&this.currentPage!=this.pages[0]){var $graph$$=this.createTemporaryGraph($graph$$.getStylesheet()),$graphGetGlobalVariable$$=$graph$$.getGlobalVariable,$page$$=this.pages[0];$graph$$.getGlobalVariable=function $$graph$$$getGlobalVariable$($name$$){return"page"==$name$$?$page$$.getName():"pagenumber"==
$name$$?1:$graphGetGlobalVariable$$.apply(this,arguments)};document.body.appendChild($graph$$.container);$graph$$.model.setRoot($page$$.root)}if(mxClient.IS_CHROMEAPP||!$graph$$.mathEnabled&&this.useCanvasForExport)this.exportToCanvas(mxUtils.bind(this,function($canvas$$){try{$graph$$!=this.editor.graph&&null!=$graph$$.container.parentNode&&$graph$$.container.parentNode.removeChild($graph$$.container)}catch($e$$){$canvas$$=null}$success$$($canvas$$)}),$width$$,this.thumbImageCache,"#ffffff",function(){$success$$()},
null,null,null,null,null,null,$graph$$),$result$$=!0;else if(this.canvasSupported&&null!=this.getCurrentFile()){var $canvas$jscomp$0$$=document.createElement("canvas"),$bounds$$=$graph$$.getGraphBounds(),$scale$$=$width$$/$bounds$$.width,$scale$$=Math.min(1,Math.min(3*$width$$/(4*$bounds$$.height),$scale$$)),$x0$$=Math.floor($bounds$$.x),$y0$$=Math.floor($bounds$$.y);$canvas$jscomp$0$$.setAttribute("width",Math.ceil($scale$$*($bounds$$.width+4)));$canvas$jscomp$0$$.setAttribute("height",Math.ceil($scale$$*
($bounds$$.height+4)));var $ctx$$=$canvas$jscomp$0$$.getContext("2d");$ctx$$.scale($scale$$,$scale$$);$ctx$$.translate(-$x0$$,-$y0$$);var $bg$$=$graph$$.background;if(null==$bg$$||""==$bg$$||$bg$$==mxConstants.NONE)$bg$$="#ffffff";$ctx$$.save();$ctx$$.fillStyle=$bg$$;$ctx$$.fillRect($x0$$,$y0$$,Math.ceil($bounds$$.width+4),Math.ceil($bounds$$.height+4));$ctx$$.restore();var $htmlCanvas$$=new mxJsCanvas($canvas$jscomp$0$$),$asynCanvas$$=new mxAsyncCanvas(this.thumbImageCache);$htmlCanvas$$.images=
this.thumbImageCache.images;var $imgExport$$=new mxImageExport;$imgExport$$.drawShape=function $$imgExport$$$drawShape$($state$$,$canvas$$){$state$$.shape instanceof mxShape&&$state$$.shape.checkBounds()&&($canvas$$.save(),$canvas$$.translate(.5,.5),$state$$.shape.paint($canvas$$),$canvas$$.translate(-.5,-.5),$canvas$$.restore())};$imgExport$$.drawText=function $$imgExport$$$drawText$($state$$,$canvas$$){};$imgExport$$.drawState($graph$$.getView().getState($graph$$.model.root),$asynCanvas$$);$asynCanvas$$.finish(mxUtils.bind(this,
function(){try{$imgExport$$.drawState($graph$$.getView().getState($graph$$.model.root),$htmlCanvas$$),$graph$$!=this.editor.graph&&null!=$graph$$.container.parentNode&&$graph$$.container.parentNode.removeChild($graph$$.container)}catch($e$$){$canvas$jscomp$0$$=null}$success$$($canvas$jscomp$0$$)}));$result$$=!0}}catch($e$$){$graph$$!=this.editor.graph&&null!=$graph$$.container.parentNode&&$graph$$.container.parentNode.removeChild($graph$$.container)}return $result$$};
App.prototype.createBackground=function $App$$createBackground$(){var $bg$$=this.createDiv("background");$bg$$.style.position="absolute";$bg$$.style.background="white";$bg$$.style.left="0px";$bg$$.style.top="0px";$bg$$.style.bottom="0px";$bg$$.style.right="0px";mxUtils.setOpacity($bg$$,100);mxClient.IS_QUIRKS&&new mxDivResizer($bg$$);return $bg$$};
(function(){var $editorUiSetMode$$=EditorUi.prototype.setMode;App.prototype.setMode=function $App$$setMode$($mode$$,$remember$$){$editorUiSetMode$$.apply(this,arguments);this.mode&&(Editor.useLocalStorage=this.mode===App.MODE_BROWSER);if(this.appIcon){var $file$$=this.getCurrentFile();$mode$$=$file$$&&$file$$.getMode()||$mode$$;switch($mode$$){case App.MODE_GOOGLE:this.appIcon.setAttribute("title",mxResources.get("openIt",[mxResources.get("googleDrive")]));this.appIcon.style.cursor="pointer";break;
case App.MODE_DROPBOX:this.appIcon.setAttribute("title",mxResources.get("openIt",[mxResources.get("dropbox")]));this.appIcon.style.cursor="pointer";break;case App.MODE_ONEDRIVE:this.appIcon.setAttribute("title",mxResources.get("openIt",[mxResources.get("oneDrive")]));this.appIcon.style.cursor="pointer";break;default:this.appIcon.removeAttribute("title"),this.appIcon.style.cursor="default"}}if($remember$$)try{if(isLocalStorage)localStorage.setItem(".mode",$mode$$);else if("undefined"!==typeof Storage){var $expiry$$=
new Date;$expiry$$.setYear($expiry$$.getFullYear()+1);document.cookie="MODE="+$mode$$+"; expires="+$expiry$$.toUTCString()}}catch($e$$){}}})();
App.prototype.appIconClicked=function $App$$appIconClicked$($evt$$){if(mxEvent.isAltDown($evt$$))this.showSplash(!0);else{var $file$$=this.getCurrentFile(),$mode$$=null!=$file$$?$file$$.getMode():null;$mode$$==App.MODE_GOOGLE?null!=$file$$&&null!=$file$$.desc&&null!=$file$$.desc.parents&&0<$file$$.desc.parents.length&&!mxEvent.isShiftDown($evt$$)?this.openLink("https://drive.google.com/drive/folders/"+$file$$.desc.parents[0].id):null!=$file$$&&null!=$file$$.getId()?this.openLink("https://drive.google.com/open?id="+
$file$$.getId()):this.openLink("https://drive.google.com/?authuser=0"):$mode$$==App.MODE_DROPBOX?this.openLink("https://www.dropbox.com/"):$mode$$==App.MODE_ONEDRIVE?this.openLink("https://onedrive.live.com/"):$mode$$==App.MODE_TRELLO?this.openLink("https://trello.com/"):$mode$$==App.MODE_GITHUB&&(null!=$file$$&&$file$$.constructor==GitHubFile?this.openLink($file$$.meta.html_url):this.openLink("https://github.com/"))}mxEvent.consume($evt$$)};
App.prototype.clearMode=function $App$$clearMode$(){if(isLocalStorage)localStorage.removeItem(".mode");else if("undefined"!=typeof Storage){var $expiry$$=new Date;$expiry$$.setYear($expiry$$.getFullYear()-1);document.cookie="MODE=; expires="+$expiry$$.toUTCString()}};
App.prototype.getDiagramId=function $App$$getDiagramId$(){var $id$$=window.location.hash;null!=$id$$&&0<$id$$.length&&($id$$=$id$$.substring(1));if(null!=$id$$&&1<$id$$.length&&"T"==$id$$.charAt(0)){var $idx$$=$id$$.indexOf("#");0<$idx$$&&($id$$=$id$$.substring(0,$idx$$))}return $id$$};
App.prototype.open=function $App$$open$(){try{if(null!=window.opener){var $value$$=urlParams.create;null!=$value$$&&($value$$=decodeURIComponent($value$$));if(null!=$value$$&&0<$value$$.length&&"http://"!=$value$$.substring(0,7)&&"https://"!=$value$$.substring(0,8)){var $doc$$=mxUtils.parseXml(window.opener[$value$$]);this.editor.setGraphXml($doc$$.documentElement)}else null!=window.opener.openFile&&window.opener.openFile.setConsumer(mxUtils.bind(this,function($xml$$,$filename$jscomp$41_title$$,$temp$$){this.spinner.stop();
null==$filename$jscomp$41_title$$&&($filename$jscomp$41_title$$=urlParams.title,$temp$$=!0,$filename$jscomp$41_title$$=null!=$filename$jscomp$41_title$$?decodeURIComponent($filename$jscomp$41_title$$):this.defaultFilename);0<(this.useCanvasForExport?-1:".png"==$filename$jscomp$41_title$$.substring($filename$jscomp$41_title$$.length-4))&&($filename$jscomp$41_title$$=$filename$jscomp$41_title$$.substring(0,$filename$jscomp$41_title$$.length-4)+".drawio");this.fileLoaded(mxClient.IS_IOS?new StorageFile(this,
$xml$$,$filename$jscomp$41_title$$):new LocalFile(this,$xml$$,$filename$jscomp$41_title$$,$temp$$))}))}}catch($e$$){}};
App.prototype.loadGapi=function $App$$loadGapi$($then$$){"undefined"!==typeof gapi&&gapi.load(("0"!=urlParams.picker?"picker,":"")+"auth:"+App.GOOGLE_APIS,mxUtils.bind(this,function($resp$$){null==gapi.client?(this.mode=this.drive=null,$then$$()):gapi.client.load("drive","v2",mxUtils.bind(this,function(){gapi.auth.init(mxUtils.bind(this,function(){null==gapi.client.drive&&(this.mode=this.drive=null);$then$$()}))}))}))};
App.prototype.load=function $App$$load$(){if("1"!=urlParams.embed){if(this.spinner.spin(document.body,mxResources.get("starting"))){try{this.stateArg=null!=urlParams.state&&null!=this.drive?JSON.parse(decodeURIComponent(urlParams.state)):null}catch($e$$){}this.editor.graph.setEnabled(null!=this.getCurrentFile());null!=window.location.hash&&0!=window.location.hash.length||null==this.drive||null==this.stateArg||null==this.stateArg.userId||this.drive.setUserId(this.stateArg.userId);null!=urlParams.fileId?
(window.location.hash="G"+urlParams.fileId,window.location.search=this.getSearch(["fileId"])):null==this.drive?(this.mode==App.MODE_GOOGLE&&(this.mode=null),this.start()):this.loadGapi(mxUtils.bind(this,function(){"1"==urlParams["convert-realtime"]?(this.spinner.stop(),this.drive.convertRealtimeFiles()):this.start()}))}}else this.restoreLibraries(),"1"==urlParams.gapi&&this.loadGapi(function(){})};
App.prototype.showRefreshDialog=function $App$$showRefreshDialog$($title$$,$message$$){if(!this.showingRefreshDialog&&(this.showingRefreshDialog=!0,this.showError($title$$||mxResources.get("externalChanges"),$message$$||mxResources.get("redirectToNewApp"),mxResources.get("refresh"),mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();null!=$file$$&&$file$$.setModified(!1);this.spinner.spin(document.body,mxResources.get("connecting"));this.editor.graph.setEnabled(!1);window.location.reload()}),
null,null,null,null,null,340,180),null!=this.dialog&&null!=this.dialog.container)){var $alert$$=this.createRealtimeNotice();$alert$$.style.left="0";$alert$$.style.right="0";$alert$$.style.borderRadius="0";$alert$$.style.borderLeftStyle="none";$alert$$.style.borderRightStyle="none";$alert$$.style.marginBottom="26px";$alert$$.style.padding="8px 0 8px 0";this.dialog.container.appendChild($alert$$)}};
App.prototype.showAlert=function $App$$showAlert$($close$jscomp$1_message$$){if(null!=$close$jscomp$1_message$$&&0<$close$jscomp$1_message$$.length){var $div$$=document.createElement("div");$div$$.className="geAlert";$div$$.style.zIndex=2E9;$div$$.style.left="50%";$div$$.style.top="-100%";mxUtils.setPrefixedStyle($div$$.style,"transform","translate(-50%,0%)");mxUtils.setPrefixedStyle($div$$.style,"transition","all 1s ease");$div$$.innerHTML=$close$jscomp$1_message$$;$close$jscomp$1_message$$=document.createElement("a");
$close$jscomp$1_message$$.className="geAlertLink";$close$jscomp$1_message$$.style.textAlign="right";$close$jscomp$1_message$$.style.marginTop="20px";$close$jscomp$1_message$$.style.display="block";$close$jscomp$1_message$$.setAttribute("title",mxResources.get("close"));$close$jscomp$1_message$$.innerHTML=mxResources.get("close");$div$$.appendChild($close$jscomp$1_message$$);mxEvent.addListener($close$jscomp$1_message$$,"click",function($evt$$){null!=$div$$.parentNode&&($div$$.parentNode.removeChild($div$$),
mxEvent.consume($evt$$))});document.body.appendChild($div$$);window.setTimeout(function(){$div$$.style.top="30px"},10);window.setTimeout(function(){mxUtils.setPrefixedStyle($div$$.style,"transition","all 2s ease");$div$$.style.opacity="0";window.setTimeout(function(){null!=$div$$.parentNode&&$div$$.parentNode.removeChild($div$$)},2E3)},15E3)}};
App.prototype.start=function $App$$start$(){this.bg.parentNode.removeChild(this.bg);this.restoreLibraries();this.spinner.stop();try{if("1"!=urlParams.client&&"1"!=urlParams.embed&&mxEvent.addListener(window,"hashchange",mxUtils.bind(this,function($evt$$){try{this.hideDialog();var $id$$=this.getDiagramId(),$file$jscomp$0$$=this.getCurrentFile();null!=$file$jscomp$0$$&&$file$jscomp$0$$.getHash()==$id$$||this.loadFile($id$$,!0)}catch($e$$){null!=document.body&&this.handleError($e$$,mxResources.get("errorLoadingFile"),
mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();window.location.hash=null!=$file$$?$file$$.getHash():""}))}})),(null==window.location.hash||1>=window.location.hash.length)&&null!=urlParams.url)this.loadFile("U"+urlParams.url,!0);else if(null==this.getCurrentFile()){var $done$$=mxUtils.bind(this,function(){if("1"==urlParams.client&&(null==window.location.hash||0==window.location.hash.length||"#P"==window.location.hash.substring(0,2))){var $doLoadFile$$=mxUtils.bind(this,function($file$jscomp$103_xml$$){"data:image/png;base64,"==
$file$jscomp$103_xml$$.substring(0,22)&&($file$jscomp$103_xml$$=this.extractGraphModelFromPng($file$jscomp$103_xml$$));var $title$$=urlParams.title,$title$$=null!=$title$$?decodeURIComponent($title$$):this.defaultFilename;$file$jscomp$103_xml$$=new LocalFile(this,$file$jscomp$103_xml$$,$title$$,!0);null!=window.location.hash&&"#P"==window.location.hash.substring(0,2)&&($file$jscomp$103_xml$$.getHash=function $$file$jscomp$103_xml$$$getHash$(){return window.location.hash.substring(1)});this.fileLoaded($file$jscomp$103_xml$$);
this.getCurrentFile().setModified(!this.editor.chromeless)}),$parent$$=window.opener||window.parent;if($parent$$!=window){var $file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=urlParams.create;null!=$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$?$doLoadFile$$($parent$$[decodeURIComponent($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$)]):($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=urlParams.data,null!=
$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$?$doLoadFile$$(decodeURIComponent($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$)):this.installMessageHandler(mxUtils.bind(this,function($xml$$,$evt$$){$evt$$.source==$parent$$&&$doLoadFile$$($xml$$)})))}}else if(null==this.dialog)if("1"==urlParams.demo)$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=Editor.useLocalStorage,this.createFile(this.defaultFilename,null,null,null,null,
null,null,!0),Editor.useLocalStorage=$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$;else{$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=!1;try{$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=null!=window.opener&&null!=window.opener.openFile}catch($e$$){}if($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$)this.spinner.spin(document.body,mxResources.get("loading"));else if($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=
this.getDiagramId(),"0"!=urlParams.splash||null!=$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$&&0!=$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$.length)this.loadFile($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$);else if(!mxClient.IS_CHROMEAPP){var $draft$$=this.getDraft(),$fileData$$=null!=$draft$$?$draft$$.data:this.getFileData(),$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=Editor.useLocalStorage;
this.createFile(this.defaultFilename,$fileData$$,null,null,null,null,null,!0);Editor.useLocalStorage=$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$;null!=$draft$$&&($file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$=this.getCurrentFile(),null!=$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$&&$file$jscomp$102_id$jscomp$52_prev$jscomp$16_value$jscomp$126_waiting$$.addUnsavedStatus())}}}),$value$$=decodeURIComponent(urlParams.create||
"");if((null==window.location.hash||1>=window.location.hash.length)&&null!=$value$$&&0<$value$$.length&&this.spinner.spin(document.body,mxResources.get("loading"))){var $reconnect$$=mxUtils.bind(this,function(){this.spinner.spin(document.body,mxResources.get("reconnecting"))&&(window.location.search=this.getSearch(["create","title"]))}),$showCreateDialog$$=mxUtils.bind(this,function($serviceCount$jscomp$2_xml$$){this.spinner.stop();if("0"!=urlParams.splash){this.fileLoaded(new LocalFile(this,$serviceCount$jscomp$2_xml$$,
null));this.editor.graph.setEnabled(!1);this.mode=urlParams.mode;var $dlg$jscomp$34_title$$=urlParams.title,$dlg$jscomp$34_title$$=null!=$dlg$jscomp$34_title$$?decodeURIComponent($dlg$jscomp$34_title$$):this.defaultFilename;$serviceCount$jscomp$2_xml$$=this.getServiceCount(!0);var $rowLimit$$=4>=$serviceCount$jscomp$2_xml$$?4:3,$dlg$jscomp$34_title$$=new CreateDialog(this,$dlg$jscomp$34_title$$,mxUtils.bind(this,function($filename$$,$mode$$){if(null==$mode$$){this.hideDialog();var $prev$$=Editor.useLocalStorage;
this.createFile(0<$filename$$.length?$filename$$:this.defaultFilename,this.getFileData(),null,null,null,!0,null,!0);Editor.useLocalStorage=$prev$$}else this.pickFolder($mode$$,mxUtils.bind(this,function($folderId$$){this.createFile($filename$$,this.getFileData(!0),null,$mode$$,null,!0,$folderId$$)}))}),null,null,null,null,"1"==urlParams.browser,null,null,!0,$rowLimit$$,null,null,null,this.editor.fileExtensions);this.showDialog($dlg$jscomp$34_title$$.container,400,$serviceCount$jscomp$2_xml$$>$rowLimit$$?
390:270,!0,!1,mxUtils.bind(this,function($cancel$$){$cancel$$&&null==this.getCurrentFile()&&this.showSplash()}));$dlg$jscomp$34_title$$.init()}}),$value$$=decodeURIComponent($value$$);if("http://"!=$value$$.substring(0,7)&&"https://"!=$value$$.substring(0,8))try{null!=window.opener&&null!=window.opener[$value$$]?$showCreateDialog$$(window.opener[$value$$]):this.handleError(null,mxResources.get("errorLoadingFile"))}catch($e$$){this.handleError($e$$,mxResources.get("errorLoadingFile"))}else this.loadTemplate($value$$,
function($text$$){$showCreateDialog$$($text$$)},mxUtils.bind(this,function(){this.handleError(null,mxResources.get("errorLoadingFile"),$reconnect$$)}))}else(null==window.location.hash||1>=window.location.hash.length)&&null!=urlParams.state&&null!=this.stateArg&&"open"==this.stateArg.action&&null!=this.stateArg.ids&&(window.location.hash="G"+this.stateArg.ids[0]),(null==window.location.hash||1>=window.location.hash.length)&&null!=this.drive&&null!=this.stateArg&&"create"==this.stateArg.action?(this.setMode(App.MODE_GOOGLE),
this.actions.get("new").funct()):$done$$()}}catch($e$55$$){this.handleError($e$55$$)}};
App.prototype.showSplash=function $App$$showSplash$($force$$){if(this.editor.isChromelessView())this.handleError({message:mxResources.get("noFileSelected")},mxResources.get("errorLoadingFile"),mxUtils.bind(this,function(){this.showSplash()}));else{var $serviceCount$$=this.getServiceCount(!0,!0),$showSecondDialog$$=mxUtils.bind(this,function(){var $splashDheight$$=2>$serviceCount$$||mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?200:260,$splashDonclose$$=mxUtils.bind(this,function($cancel$jscomp$8_prev$$){$cancel$jscomp$8_prev$$&&
!mxClient.IS_CHROMEAPP&&($cancel$jscomp$8_prev$$=Editor.useLocalStorage,this.createFile(this.defaultFilename,null,null,null,null,null,null,"1"!==urlParams.local),Editor.useLocalStorage=$cancel$jscomp$8_prev$$)}),$dlg$$=new SplashDialog(this);this.showDialog($dlg$$.container,340,$splashDheight$$,!0,!0,$splashDonclose$$,!0)});if(!urlParams.create)$showSecondDialog$$();else if(!mxClient.IS_CHROMEAPP&&(null==this.mode||$force$$)){var $dlg$jscomp$35_rowLimit$$=4!==$serviceCount$$?3:2;$force$$=3>$dlg$jscomp$35_rowLimit$$?
260:300;var $saveDheight$$=3<$serviceCount$$?420:300,$saveDonclose$$=mxUtils.bind(this,function(){this.hideDialog();$showSecondDialog$$()}),$dlg$jscomp$35_rowLimit$$=new StorageDialog(this,$saveDonclose$$,$dlg$jscomp$35_rowLimit$$);this.showDialog($dlg$jscomp$35_rowLimit$$.container,$force$$,$saveDheight$$,!0,!1);$dlg$jscomp$35_rowLimit$$.init()}}};
App.prototype.addLanguageMenu=function $App$$addLanguageMenu$($elt$$,$addLabel$$){var $img$$=null;if((!this.isOfflineApp()||mxClient.IS_CHROMEAPP)&&null!=this.menus.get("language")){$img$$=document.createElement("div");$img$$.setAttribute("title",mxResources.get("language"));$img$$.className="geIcon geSprite geSprite-globe";$img$$.style.position="absolute";$img$$.style.cursor="pointer";$img$$.style.bottom="20px";$img$$.style.right="20px";if($addLabel$$){$img$$.style.direction="rtl";$img$$.style.textAlign=
"right";$img$$.style.right="24px";var $label$$=document.createElement("span");$label$$.style.display="inline-block";$label$$.style.fontSize="12px";$label$$.style.margin="5px 24px 0 0";$label$$.style.color="gray";mxUtils.write($label$$,mxResources.get("language"));$img$$.appendChild($label$$)}mxEvent.addListener($img$$,"click",mxUtils.bind(this,function($evt$$){this.editor.graph.popupMenuHandler.hideMenu();var $menu$$=new mxPopupMenu(this.menus.get("language").funct);$menu$$.div.className+=" geMenubarMenu";
$menu$$.smartSeparators=!0;$menu$$.showDisabled=!0;$menu$$.autoExpand=!0;$menu$$.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply($menu$$,arguments);$menu$$.destroy()});var $offset$$=mxUtils.getOffset($img$$);$menu$$.popup($offset$$.x,$offset$$.y+$img$$.offsetHeight,null,$evt$$);this.setCurrentMenu($menu$$)}));$elt$$.appendChild($img$$)}return $img$$};
App.prototype.pickFile=function $App$$pickFile$($mode$$){try{if($mode$$=null!=$mode$$?$mode$$:this.mode,$mode$$==App.MODE_GOOGLE)null!=this.drive&&"undefined"!=typeof google&&"undefined"!=typeof google.picker?this.drive.pickFile():this.openLink("https://drive.google.com");else{var $peer$$=this.getPeerForMode($mode$$);if(null!=$peer$$)$peer$$.pickFile();else if($mode$$==App.MODE_DEVICE&&Graph.fileSupport&&(!mxClient.IS_IE&&!mxClient.IS_IE11||0>navigator.appVersion.indexOf("Windows NT 6.1"))){if(null==
this.openFileInputElt){var $input$$=document.createElement("input");$input$$.setAttribute("type","file");mxEvent.addListener($input$$,"change",mxUtils.bind(this,function(){null!=$input$$.files&&this.openFiles($input$$.files);$input$$.value=""}));$input$$.style.display="none";document.body.appendChild($input$$);this.openFileInputElt=$input$$}this.openFileInputElt.click()}else{this.hideDialog();window.openNew=null!=this.getCurrentFile()&&!this.isDiagramEmpty();window.baseUrl=this.getUrl();window.openKey=
"open";var $prevValue$$=Editor.useLocalStorage;Editor.useLocalStorage=$mode$$===App.MODE_BROWSER;this.openFile();window.openFile.setConsumer(mxUtils.bind(this,function($xml$$,$filename$$){this.useCanvasForExport||".png"!=$filename$$.substring($filename$$.length-4)||($filename$$=$filename$$.substring(0,$filename$$.length-4)+".drawio");this.fileLoaded($mode$$===App.MODE_BROWSER?new StorageFile(this,$xml$$,$filename$$):new LocalFile(this,$xml$$,$filename$$))}));var $dlg$$=this.dialog,$dlgClose$$=$dlg$$.close;
this.dialog.close=mxUtils.bind(this,function($cancel$$){Editor.useLocalStorage=$prevValue$$;$dlgClose$$.apply($dlg$$,arguments);null==this.getCurrentFile()&&this.showSplash()})}}}catch($e$$){this.handleError($e$$)}};
App.prototype.pickLibrary=function $App$$pickLibrary$($mode$$){$mode$$=null!=$mode$$?$mode$$:this.mode;if($mode$$==App.MODE_GOOGLE||$mode$$==App.MODE_DROPBOX||$mode$$==App.MODE_ONEDRIVE||$mode$$==App.MODE_GITHUB||$mode$$==App.MODE_TRELLO){var $peer$$=$mode$$==App.MODE_GOOGLE?this.drive:$mode$$==App.MODE_ONEDRIVE?this.oneDrive:$mode$$==App.MODE_GITHUB?this.gitHub:$mode$$==App.MODE_TRELLO?this.trello:this.dropbox;null!=$peer$$&&$peer$$.pickLibrary(mxUtils.bind(this,function($id$$,$optionalFile$$){if(null!=
$optionalFile$$)try{this.loadLibrary($optionalFile$$)}catch($e$$){this.handleError($e$$,mxResources.get("errorLoadingFile"))}else this.spinner.spin(document.body,mxResources.get("loading"))&&$peer$$.getLibrary($id$$,mxUtils.bind(this,function($file$$){this.spinner.stop();try{this.loadLibrary($file$$)}catch($e$56$$){this.handleError($e$56$$,mxResources.get("errorLoadingFile"))}}),mxUtils.bind(this,function($resp$$){this.handleError($resp$$,null!=$resp$$?mxResources.get("errorLoadingFile"):null)}))}))}else if($mode$$!=
App.MODE_DEVICE||!Graph.fileSupport||mxClient.IS_IE||mxClient.IS_IE11){window.openNew=!1;window.openKey="open";var $prevValue$$=Editor.useLocalStorage;Editor.useLocalStorage=$mode$$===App.MODE_BROWSER;window.openFile=new OpenFile(mxUtils.bind(this,function($cancel$$){this.hideDialog($cancel$$)}));window.openFile.setConsumer(mxUtils.bind(this,function($xml$$,$filename$$){try{this.loadLibrary($mode$$===App.MODE_BROWSER?new StorageLibrary(this,$xml$$,$filename$$):new LocalLibrary(this,$xml$$,$filename$$))}catch($e$$){this.handleError($e$$,
mxResources.get("errorLoadingFile"))}}));var $openDwidth$$=Editor.useLocalStorage?640:360,$openDheight$$=Editor.useLocalStorage?480:220;this.showDialog((new OpenDialog(this)).container,$openDwidth$$,$openDheight$$,!0,!0,function(){Editor.useLocalStorage=$prevValue$$;window.openFile=null})}else{if(null==this.libFileInputElt){var $input$$=document.createElement("input");$input$$.setAttribute("type","file");mxEvent.addListener($input$$,"change",mxUtils.bind(this,function(){if(null!=$input$$.files)for(var $i$$=
0;$i$$<$input$$.files.length;$i$$++)mxUtils.bind(this,function($file$$){var $reader$$=new FileReader;$reader$$.onload=mxUtils.bind(this,function($e$$){try{this.loadLibrary(new LocalLibrary(this,$e$$.target.result,$file$$.name))}catch($e$57$$){this.handleError($e$57$$,mxResources.get("errorLoadingFile"))}});$reader$$.readAsText($file$$)})($input$$.files[$i$$]);$input$$.value=""}));$input$$.style.display="none";document.body.appendChild($input$$);this.libFileInputElt=$input$$}this.libFileInputElt.click()}};
App.prototype.saveLibrary=function $App$$saveLibrary$($name$$,$images$$,$file$jscomp$0$$,$mode$$,$noSpin$$,$noReload$$,$fn$$){try{$mode$$=$mode$$||this.mode;$noSpin$$=$noSpin$$||!1;$noReload$$=$noReload$$||!1;var $xml$$=this.createLibraryDataFromImages($images$$),$error$58$$=mxUtils.bind(this,function($err$$){this.spinner.stop();$fn$$&&$fn$$();this.handleError($err$$,$err$$&&mxResources.get("errorSavingFile"))});$file$jscomp$0$$||$mode$$!==App.MODE_DEVICE||($file$jscomp$0$$=new LocalLibrary(this,
$xml$$,$name$$));if($file$jscomp$0$$){var $complete$$=mxUtils.bind(this,function($newFile$$){this.spinner.stop();this.hideDialog(!0);this.libraryLoaded($newFile$$,$images$$)});this.pickFolder($mode$$,mxUtils.bind(this,function($fn$59_folderId$$){switch($mode$$){case App.MODE_GOOGLE:this.drive&&this.spinner.spin(document.body,mxResources.get("inserting"))&&this.drive.insertFile($name$$,$xml$$,$fn$59_folderId$$,$complete$$,$error$58$$,this.drive.libraryMimeType);break;case App.MODE_GITHUB:this.gitHub&&
this.spinner.spin(document.body,mxResources.get("inserting"))&&this.gitHub.insertLibrary($name$$,$xml$$,$complete$$,$error$58$$,$fn$59_folderId$$);break;case App.MODE_TRELLO:this.trello&&this.spinner.spin(document.body,mxResources.get("inserting"))&&this.trello.insertLibrary($name$$,$xml$$,$complete$$,$error$58$$,$fn$59_folderId$$);break;case App.MODE_DROPBOX:this.dropbox&&this.spinner.spin(document.body,mxResources.get("inserting"))&&this.dropbox.insertLibrary($name$$,$xml$$,$complete$$,$error$58$$,
$fn$59_folderId$$);break;case App.MODE_ONEDRIVE:this.oneDrive&&this.spinner.spin(document.body,mxResources.get("inserting"))&&this.oneDrive.insertLibrary($name$$,$xml$$,$complete$$,$error$58$$,$fn$59_folderId$$);break;case App.MODE_BROWSER:$fn$59_folderId$$=mxUtils.bind(this,function(){var $file$$=new StorageLibrary(this,$xml$$,$name$$);$file$$.saveFile($name$$,!1,mxUtils.bind(this,function(){this.hideDialog(!0);this.libraryLoaded($file$$,$images$$)}),$error$58$$)});localStorage.getItem($name$$)?
this.confirm(mxResources.get("replaceIt",[$name$$]),$fn$59_folderId$$):$fn$59_folderId$$();break;default:this.handleError({message:mxResources.get("serviceUnavailableOrBlocked")})}}))}else if($noSpin$$||this.spinner.spin(document.body,mxResources.get("saving"))){$file$jscomp$0$$.setData($xml$$);var $doSave$$=mxUtils.bind(this,function(){$file$jscomp$0$$.save(!0,mxUtils.bind(this,function(){this.spinner.stop();this.hideDialog(!0);$noReload$$||this.libraryLoaded($file$jscomp$0$$,$images$$);$fn$$&&$fn$$()}),
$error$58$$)});if($name$$!==$file$jscomp$0$$.getTitle()){var $oldHash$$=$file$jscomp$0$$.getHash();$file$jscomp$0$$.rename($name$$,mxUtils.bind(this,function(){$file$jscomp$0$$.constructor!==LocalLibrary&&$oldHash$$!==$file$jscomp$0$$.getHash()&&(mxSettings.removeCustomLibrary($oldHash$$),mxSettings.addCustomLibrary($file$jscomp$0$$.getHash()));this.removeLibrarySidebar($oldHash$$);$doSave$$()}),$error$58$$)}else $doSave$$()}}catch($e$$){this.handleError($e$$)}};
App.prototype.saveFile=function $App$$saveFile$($forceDialog$$,$success$$){var $file$$=this.getCurrentFile();if($file$$){var $done$$=mxUtils.bind(this,function(){this.removeDraft();this.getCurrentFile()===$file$$||$file$$.isModified()||($file$$.getMode()!==App.MODE_DEVICE?this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("allChangesSaved"))):this.editor.setStatus(""));$success$$&&$success$$()}),$height$jscomp$20_serviceCount$jscomp$4_title$$=$file$$.getTitle();if(!$forceDialog$$&&$height$jscomp$20_serviceCount$jscomp$4_title$$&&
this.mode)this.save($file$$.getTitle(),$done$$);else{var $dlg$jscomp$38_filename$$=$height$jscomp$20_serviceCount$jscomp$4_title$$||this.defaultFilename,$allowTab$$=!mxClient.IS_IOS||!navigator.standalone,$prev$$=this.mode,$height$jscomp$20_serviceCount$jscomp$4_title$$=this.getServiceCount(!0);isLocalStorage&&$height$jscomp$20_serviceCount$jscomp$4_title$$++;var $rowLimit$$=5>$height$jscomp$20_serviceCount$jscomp$4_title$$?2:6<$height$jscomp$20_serviceCount$jscomp$4_title$$?4:3,$dlg$jscomp$38_filename$$=
new CreateDialog(this,$dlg$jscomp$38_filename$$,mxUtils.bind(this,function($name$$,$mode$$){$name$$&&($prev$$||$mode$$!==App.MODE_DEVICE?"download"===$mode$$?(new LocalFile(this,null,$name$$)).save():"_blank"===$mode$$?(window.openFile=new OpenFile(function(){window.openFile=null}),window.openFile.setData(this.getFileData(!0)),this.openLink(this.getUrl(window.location.pathname),null,!0)):$prev$$!==$mode$$?this.pickFolder($mode$$,mxUtils.bind(this,function($folderId$$){this.createFile($name$$,this.getFileData(/(\.xml)$/i.test($name$$)||
0>$name$$.indexOf(".")||/(\.drawio)$/i.test($name$$),/(\.svg)$/i.test($name$$),/(\.html)$/i.test($name$$)),null,$mode$$,$done$$,null==this.mode,$folderId$$)})):$mode$$&&this.save($name$$,$done$$):(this.setMode(App.MODE_DEVICE),this.save($name$$,$done$$)))}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),null,null,$allowTab$$,this.isOffline()?null:"https://desk.draw.io/support/solutions/articles/16000042485",!0,$rowLimit$$,null,null,null,this.editor.fileExtensions),
$height$jscomp$20_serviceCount$jscomp$4_title$$=$height$jscomp$20_serviceCount$jscomp$4_title$$>$rowLimit$$?390:270;App.CSET&&($height$jscomp$20_serviceCount$jscomp$4_title$$=150);this.showDialog($dlg$jscomp$38_filename$$.container,460,$height$jscomp$20_serviceCount$jscomp$4_title$$,!0,!0);$dlg$jscomp$38_filename$$.init()}}else $success$$&&$success$$()};
App.prototype.loadTemplate=function $App$$loadTemplate$($url$$,$onload$$,$onerror$$,$templateFilename$$){var $base64$$=!1,$nocache_realUrl$$=$url$$;this.editor.isCorsEnabledForUrl($nocache_realUrl$$)||($nocache_realUrl$$="t="+(new Date).getTime(),$nocache_realUrl$$=PROXY_URL+"?url="+encodeURIComponent($url$$)+"&base64=1&"+$nocache_realUrl$$,$base64$$=!0);var $filterFn$$=null!=$templateFilename$$?$templateFilename$$:$url$$;this.loadUrl($nocache_realUrl$$,mxUtils.bind(this,function($responseData$$){try{var $data$$=
$base64$$?!window.atob||mxClient.IS_IE||mxClient.IS_IE11?Base64.decode($responseData$$):atob($responseData$$):$responseData$$;if(/(\.v(dx|sdx?))($|\?)/i.test($filterFn$$)||this.isVisioData($data$$))this.importVisio(this.base64ToBlob($responseData$$.substring($responseData$$.indexOf(",")+1)),function($xml$$){$onload$$($xml$$)},$onerror$$,$filterFn$$);else if(!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat($data$$,$filterFn$$))this.parseFile(new Blob([$data$$],{type:"application/octet-stream"}),
mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&200<=$xhr$$.status&&299>=$xhr$$.status&&"<mxGraphModel"==$xhr$$.responseText.substring(0,13)&&$onload$$($xhr$$.responseText)}),$url$$);else if(this.isLucidChartData($data$$))this.convertLucidChart($data$$,mxUtils.bind(this,function($xml$$){$onload$$($xml$$)}),mxUtils.bind(this,function($e$$){$onerror$$($e$$)}));else{if(/(\.png)($|\?)/i.test($filterFn$$)||this.isPngData($data$$))$data$$=this.extractGraphModelFromPng($responseData$$);$onload$$($data$$)}}catch($e$$){$onerror$$($e$$)}}),
$onerror$$,/(\.png)($|\?)/i.test($filterFn$$)||/(\.v(dx|sdx?))($|\?)/i.test($filterFn$$),null,null,$base64$$)};App.prototype.getPeerForMode=function $App$$getPeerForMode$($mode$$){switch($mode$$){case App.MODE_GOOGLE:return this.drive;case App.MODE_GITHUB:return this.gitHub;case App.MODE_DROPBOX:return this.dropbox;case App.MODE_ONEDRIVE:return this.oneDrive;case App.MODE_TRELLO:return this.trello;default:return null}};
App.prototype.createFile=function $App$$createFile$($title$$,$data$$,$libs$$,$mode$$,$done$$,$replace$$,$folderId$$,$complete$jscomp$1_tempFile$$){$mode$$!==App.MODE_CSET&&($mode$$=$complete$jscomp$1_tempFile$$&&$complete$jscomp$1_tempFile$$?void 0:$mode$$||this.mode);if($title$$&&this.spinner.spin(document.body,mxResources.get("inserting"))){$data$$=$data$$||this.emptyDiagramXml;$complete$jscomp$1_tempFile$$=mxUtils.bind(this,function($file$$){this.spinner.stop();this.fileCreated($file$$,$libs$$,
$replace$$,$done$$)});var $error$60$$=mxUtils.bind(this,function($err$$){this.spinner.stop();$err$$||this.getCurrentFile()||this.dialog?$err$$&&this.handleError($err$$):this.showSplash()});try{switch($mode$$){case App.MODE_GOOGLE:this.drive&&($folderId$$=$folderId$$||this.stateArg&&this.stateArg.folderId,this.drive.insertFile($title$$,$data$$,$folderId$$,$complete$jscomp$1_tempFile$$,$error$60$$));break;case App.MODE_GITHUB:this.gitHub&&this.gitHub.insertFile($title$$,$data$$,$complete$jscomp$1_tempFile$$,
$error$60$$,!1,$folderId$$);break;case App.MODE_TRELLO:this.trello&&this.trello.insertFile($title$$,$data$$,$complete$jscomp$1_tempFile$$,$error$60$$,!1,$folderId$$);break;case App.MODE_DROPBOX:this.dropbox&&this.dropbox.insertFile($title$$,$data$$,$complete$jscomp$1_tempFile$$,$error$60$$);break;case App.MODE_ONEDRIVE:this.oneDrive&&this.oneDrive.insertFile($title$$,$data$$,$complete$jscomp$1_tempFile$$,$error$60$$,!1,$folderId$$);break;case App.MODE_BROWSER:this.spinner.stop();var $fn$61$$=mxUtils.bind(this,
function(){var $file$$=new StorageFile(this,$data$$,$title$$);$file$$.saveFile($title$$,!1,mxUtils.bind(this,function(){this.fileCreated($file$$,$libs$$,$replace$$,$done$$)}),$error$60$$)});localStorage.getItem($title$$)?this.confirm(mxResources.get("replaceIt",[$title$$]),$fn$61$$,mxUtils.bind(this,function(){this.getCurrentFile()||this.dialog||this.showSplash()})):$fn$61$$();break;case App.MODE_CSET:this.spinner.stop();var $csetfile$$=new CSETFile(this,$data$$,$title$$,!$mode$$);this.fileCreated($csetfile$$,
$libs$$,$replace$$,$done$$);break;default:this.spinner.stop();var $locfile$$=new LocalFile(this,$data$$,$title$$,!$mode$$);this.fileCreated($locfile$$,$libs$$,$replace$$,$done$$)}}catch($e$$){this.spinner.stop(),this.handleError($e$$)}}};
App.prototype.fileCreated=function $App$$fileCreated$($file$$,$libs$$,$replace$$,$done$$){var $url$$=window.location.pathname;$libs$$&&($url$$+="?libs="+$libs$$);var $url$$=this.getUrl($url$$),$filemode$$=$file$$.getMode();$filemode$$!==App.MODE_DEVICE&&($url$$+="#"+$file$$.getHash());if(this.spinner.spin(document.body,mxResources.get("inserting"))){var $title$$=$file$$.getTitle(),$data$jscomp$202_dataNode$$=$file$$.getData(),$data$jscomp$202_dataNode$$=$data$jscomp$202_dataNode$$.length?this.editor.extractGraphModel(mxUtils.parseXml($data$jscomp$202_dataNode$$).documentElement,
!0):void 0,$redirect$$=window.location.protocol+"//"+window.location.hostname+$url$$,$fn$jscomp$89_graph$$,$node$$=$data$jscomp$202_dataNode$$;$data$jscomp$202_dataNode$$&&/\.svg$/i.test($title$$)&&($fn$jscomp$89_graph$$=this.createTemporaryGraph(this.editor.graph.getStylesheet()))&&$fn$jscomp$89_graph$$.container&&(document.body.appendChild($fn$jscomp$89_graph$$.container),$node$$=this.decodeNodeIntoGraph($node$$,$fn$jscomp$89_graph$$));$file$$.setData(this.createFileData($node$$,$fn$jscomp$89_graph$$,
$file$$,$redirect$$));$fn$jscomp$89_graph$$&&$fn$jscomp$89_graph$$.container.parentNode&&$fn$jscomp$89_graph$$.container.parentNode.removeChild($fn$jscomp$89_graph$$.container);var $complete$$=mxUtils.bind(this,function($e$$){$e$$.err?this.handleError($e$$.err):$e$$.done&&$e$$.done();this.spinner.stop()});$fn$jscomp$89_graph$$=mxUtils.bind(this,function(){var $currentFile$$=this.getCurrentFile();!$replace$$&&$currentFile$$&&($replace$$=!$currentFile$$.isModified()&&!$currentFile$$.getMode());var $fn3$$=
mxUtils.bind(this,function(){window.openFile=null;this.fileLoaded($file$$);$replace$$&&$file$$.addAllSavedStatus();$libs$$&&this.sidebar.showEntries($libs$$)}),$fn2$$=mxUtils.bind(this,function(){!$replace$$&&$currentFile$$&&$currentFile$$.isModified()?this.confirm(mxResources.get("allChangesLost"),null,$fn3$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$fn3$$();$complete$$({done:$done$$})});null==$replace$$||$replace$$?$fn2$$():($file$$.constructor===LocalFile&&(window.openFile=
new OpenFile(function(){window.openFile=null}),window.openFile.setData($file$$.getData(),$title$$,!$filemode$$)),window.openWindow($url$$,null,$fn2$$),$complete$$({done:$done$$}))});$complete$$({done:$done$$});switch($file$$.constructor){case LocalFile:case CSETFile:$file$$.setModified(!0);$fn$jscomp$89_graph$$();break;default:$file$$.saveFile($title$$,!1,$fn$jscomp$89_graph$$,function($err$$){$complete$$({err:$err$$})})}}};
App.prototype.loadFile=function $App$$loadFile$($id$$,$sameWindow$$,$file$$,$success$$,$force$$){this.hideDialog();var $fn2$$=mxUtils.bind(this,function(){if(null==$id$$||0==$id$$.length)this.editor.setStatus(""),this.fileLoaded(null);else if(this.spinner.spin(document.body,mxResources.get("loading")))if("L"==$id$$.charAt(0))if(this.spinner.stop(),isLocalStorage)try{$id$$=decodeURIComponent($id$$.substring(1));var $data$jscomp$203_peer$jscomp$4_tempFile$$=localStorage.getItem($id$$);if(null!=$data$jscomp$203_peer$jscomp$4_tempFile$$)this.fileLoaded(new StorageFile(this,
$data$jscomp$203_peer$jscomp$4_tempFile$$,$id$$)),null!=$success$$&&$success$$();else throw{message:mxResources.get("fileNotFound")};}catch($e$$){this.handleError($e$$,mxResources.get("errorLoadingFile"),mxUtils.bind(this,function(){var $tempFile$$=this.getCurrentFile();window.location.hash=null!=$tempFile$$?$tempFile$$.getHash():""}))}else this.handleError({message:mxResources.get("serviceUnavailableOrBlocked")},mxResources.get("errorLoadingFile"),mxUtils.bind(this,function(){var $tempFile$$=this.getCurrentFile();
window.location.hash=null!=$tempFile$$?$tempFile$$.getHash():""}));else if(null!=$file$$)this.spinner.stop(),this.fileLoaded($file$$),null!=$success$$&&$success$$();else if("S"==$id$$.charAt(0)){this.spinner.stop();try{this.loadDescriptor(JSON.parse(Graph.decompress($id$$.substring(1))),$success$$,mxUtils.bind(this,function($e$$){this.handleError($e$$,mxResources.get("errorLoadingFile"))}))}catch($e$62$$){this.handleError($e$62$$,mxResources.get("errorLoadingFile"))}}else if("R"==$id$$.charAt(0))this.spinner.stop(),
$data$jscomp$203_peer$jscomp$4_tempFile$$=decodeURIComponent($id$$.substring(1)),"<"!=$data$jscomp$203_peer$jscomp$4_tempFile$$.charAt(0)&&($data$jscomp$203_peer$jscomp$4_tempFile$$=Graph.decompress($data$jscomp$203_peer$jscomp$4_tempFile$$)),$data$jscomp$203_peer$jscomp$4_tempFile$$=new LocalFile(this,$data$jscomp$203_peer$jscomp$4_tempFile$$,null!=urlParams.title?decodeURIComponent(urlParams.title):this.defaultFilename,!0),$data$jscomp$203_peer$jscomp$4_tempFile$$.getHash=function $$data$jscomp$203_peer$jscomp$4_tempFile$$$getHash$(){return $id$$},
this.fileLoaded($data$jscomp$203_peer$jscomp$4_tempFile$$),null!=$success$$&&$success$$();else if("U"==$id$$.charAt(0)){var $url$$=decodeURIComponent($id$$.substring(1)),$doFallback$$=mxUtils.bind(this,function(){if("https://drive.google.com/uc?id="!=$url$$.substring(0,31)||null==this.drive&&"function"!==typeof window.DriveClient)return!1;this.hideDialog();var $fallback$$=mxUtils.bind(this,function(){this.spinner.stop();if(null!=this.drive){var $tempId$$=$url$$.substring(31,$url$$.lastIndexOf("&ex"));
this.loadFile("G"+$tempId$$,$sameWindow$$,null,mxUtils.bind(this,function(){var $currentFile$$=this.getCurrentFile();null!=$currentFile$$&&this.editor.chromeless&&!this.editor.editable&&($currentFile$$.getHash=function $$currentFile$$$getHash$(){return"G"+$tempId$$},window.location.hash="#"+$currentFile$$.getHash());null!=$success$$&&$success$$()}));return!0}return!1});!$fallback$$()&&this.spinner.spin(document.body,mxResources.get("loading"))&&this.addListener("clientLoaded",$fallback$$);return!0});
this.loadTemplate($url$$,mxUtils.bind(this,function($tempFile$jscomp$6_text$$){this.spinner.stop();if(null!=$tempFile$jscomp$6_text$$&&0<$tempFile$jscomp$6_text$$.length){var $filename$$=this.defaultFilename;if(null==urlParams.title&&"1"!=urlParams.notitle){var $tmp$$=$url$$,$dot$jscomp$8_ext$$=$url$$.lastIndexOf("."),$slash$$=$tmp$$.lastIndexOf("/");$dot$jscomp$8_ext$$>$slash$$&&0<$slash$$&&($tmp$$=$tmp$$.substring($slash$$+1,$dot$jscomp$8_ext$$),$dot$jscomp$8_ext$$=$url$$.substring($dot$jscomp$8_ext$$),
this.useCanvasForExport||".png"!=$dot$jscomp$8_ext$$||($dot$jscomp$8_ext$$=".drawio"),".svg"===$dot$jscomp$8_ext$$||".xml"===$dot$jscomp$8_ext$$||".html"===$dot$jscomp$8_ext$$||".png"===$dot$jscomp$8_ext$$||".drawio"===$dot$jscomp$8_ext$$)&&($filename$$=$tmp$$+$dot$jscomp$8_ext$$)}$tempFile$jscomp$6_text$$=new LocalFile(this,$tempFile$jscomp$6_text$$,null!=urlParams.title?decodeURIComponent(urlParams.title):$filename$$,!0);$tempFile$jscomp$6_text$$.getHash=function $$tempFile$jscomp$6_text$$$getHash$(){return $id$$};
this.fileLoaded($tempFile$jscomp$6_text$$,!0)||$doFallback$$()||this.handleError({message:mxResources.get("fileNotFound")},mxResources.get("errorLoadingFile"))}else $doFallback$$()||this.handleError({message:mxResources.get("fileNotFound")},mxResources.get("errorLoadingFile"))}),mxUtils.bind(this,function(){$doFallback$$()||(this.spinner.stop(),this.handleError({message:mxResources.get("fileNotFound")},mxResources.get("errorLoadingFile")))}),null!=urlParams["template-filename"]?decodeURIComponent(urlParams["template-filename"]):
null)}else if($data$jscomp$203_peer$jscomp$4_tempFile$$=null,"G"==$id$$.charAt(0)?$data$jscomp$203_peer$jscomp$4_tempFile$$=this.drive:"D"==$id$$.charAt(0)?$data$jscomp$203_peer$jscomp$4_tempFile$$=this.dropbox:"W"==$id$$.charAt(0)?$data$jscomp$203_peer$jscomp$4_tempFile$$=this.oneDrive:"H"==$id$$.charAt(0)?$data$jscomp$203_peer$jscomp$4_tempFile$$=this.gitHub:"T"==$id$$.charAt(0)&&($data$jscomp$203_peer$jscomp$4_tempFile$$=this.trello),null==$data$jscomp$203_peer$jscomp$4_tempFile$$)this.handleError({message:mxResources.get("serviceUnavailableOrBlocked")},
mxResources.get("errorLoadingFile"),mxUtils.bind(this,function(){var $currentFile$$=this.getCurrentFile();window.location.hash=null!=$currentFile$$?$currentFile$$.getHash():""}));else{var $peerChar$$=$id$$.charAt(0);$id$$=decodeURIComponent($id$$.substring(1));$data$jscomp$203_peer$jscomp$4_tempFile$$.getFile($id$$,mxUtils.bind(this,function($currentFile$jscomp$6_file$$){this.spinner.stop();this.fileLoaded($currentFile$jscomp$6_file$$);$currentFile$jscomp$6_file$$=this.getCurrentFile();null==$currentFile$jscomp$6_file$$?
(window.location.hash="",this.showSplash()):this.editor.chromeless&&!this.editor.editable?($currentFile$jscomp$6_file$$.getHash=function $$currentFile$jscomp$6_file$$$getHash$(){return $peerChar$$+$id$$},window.location.hash="#"+$currentFile$jscomp$6_file$$.getHash()):window.location.hash=$currentFile$jscomp$6_file$$.getHash();null!=$success$$&&$success$$()}),mxUtils.bind(this,function($resp$$){null!=window.console&&null!=$resp$$&&console.log("error in loadFile:",$id$$,$resp$$);this.handleError($resp$$,
null!=$resp$$?mxResources.get("errorLoadingFile"):null,mxUtils.bind(this,function(){var $currentFile$$=this.getCurrentFile();null==$currentFile$$?(window.location.hash="",this.showSplash()):window.location.hash="#"+$currentFile$$.getHash()}))}))}}),$currentFile$jscomp$0$$=this.getCurrentFile(),$fn$$=mxUtils.bind(this,function(){$force$$||null==$currentFile$jscomp$0$$||!$currentFile$jscomp$0$$.isModified()?$fn2$$():this.confirm(mxResources.get("allChangesLost"),mxUtils.bind(this,function(){null!=$currentFile$jscomp$0$$&&
(window.location.hash=$currentFile$jscomp$0$$.getHash())}),$fn2$$,mxResources.get("cancel"),mxResources.get("discardChanges"))});null==$id$$||0==$id$$.length?$fn$$():null!=$currentFile$jscomp$0$$&&$currentFile$jscomp$0$$.isModified()&&!$sameWindow$$?window.openWindow(this.getUrl()+"#"+$id$$,null,$fn$$):$fn$$()};
App.prototype.getLibraryStorageHint=function $App$$getLibraryStorageHint$($file$$){var $tip$$=$file$$.getTitle();$file$$.constructor!=LocalLibrary&&($tip$$+="\n"+$file$$.getHash());$file$$.constructor==DriveLibrary?$tip$$+=" ("+mxResources.get("googleDrive")+")":$file$$.constructor==GitHubLibrary?$tip$$+=" ("+mxResources.get("github")+")":$file$$.constructor==TrelloLibrary?$tip$$+=" ("+mxResources.get("trello")+")":$file$$.constructor==DropboxLibrary?$tip$$+=" ("+mxResources.get("dropbox")+")":$file$$.constructor==
OneDriveLibrary?$tip$$+=" ("+mxResources.get("oneDrive")+")":$file$$.constructor==StorageLibrary?$tip$$+=" ("+mxResources.get("browser")+")":$file$$.constructor==LocalLibrary&&($tip$$+=" ("+mxResources.get("device")+")");return $tip$$};
App.prototype.restoreLibraries=function $App$$restoreLibraries$(){if(null!=this.sidebar){null==this.pendingLibraries&&(this.pendingLibraries={});var $ignore$$=mxUtils.bind(this,function($id$$,$keep$$){$keep$$||mxSettings.removeCustomLibrary($id$$);delete this.pendingLibraries[$id$$]}),$load$$=mxUtils.bind(this,function($libs$$,$done$$){var $waiting$$=0,$files$$=[],$checkDone$$=mxUtils.bind(this,function(){if(0==$waiting$$){if(null!=$libs$$)for(var $i$$=$libs$$.length-1;0<=$i$$;$i$$--)null!=$files$$[$i$$]&&
this.loadLibrary($files$$[$i$$]);null!=$done$$&&$done$$()}});if(null!=$libs$$)for(var $i$jscomp$0$$=0;$i$jscomp$0$$<$libs$$.length;$i$jscomp$0$$++){var $name$jscomp$0$$=encodeURIComponent(decodeURIComponent($libs$$[$i$jscomp$0$$]));mxUtils.bind(this,function($id$$,$index$$){if(null!=$id$$&&0<$id$$.length&&null==this.pendingLibraries[$id$$]&&null==this.sidebar.palettes[$id$$]){$waiting$$++;var $onload$$=mxUtils.bind(this,function($file$$){delete this.pendingLibraries[$id$$];$files$$[$index$$]=$file$$;
$waiting$$--;$checkDone$$()}),$onerror$$=mxUtils.bind(this,function($keep$$){$ignore$$($id$$,$keep$$);$waiting$$--;$checkDone$$()});this.pendingLibraries[$id$$]=!0;var $libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$=$id$$.substring(0,1);if("L"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$)(isLocalStorage||mxClient.IS_CHROMEAPP)&&window.setTimeout(mxUtils.bind(this,function(){try{var $name$$=decodeURIComponent($id$$.substring(1));this.getLocalData($name$$,mxUtils.bind(this,
function($xml$$){".scratchpad"==$name$$&&null==$xml$$&&($xml$$=this.emptyLibraryXml);null!=$xml$$?$onload$$(new StorageLibrary(this,$xml$$,$name$$)):$onerror$$()}))}catch($e$$){$onerror$$()}}),0);else if("U"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$){var $url$$=decodeURIComponent($id$$.substring(1));if(!this.isOffline()){$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$=$url$$;this.editor.isCorsEnabledForUrl($libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$)||
($libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$="t="+(new Date).getTime(),$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$=PROXY_URL+"?url="+encodeURIComponent($url$$)+"&"+$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$);try{mxUtils.get($libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$,mxUtils.bind(this,function($req$$){if(200<=$req$$.getStatus()&&299>=$req$$.getStatus())try{$onload$$(new UrlLibrary(this,$req$$.getText(),$url$$))}catch($e$$){$onerror$$()}else $onerror$$()}),
function(){$onerror$$()})}catch($e$$){$onerror$$()}}}else if("R"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$){if($libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$=decodeURIComponent($id$$.substring(1)),!this.isOffline())try{var $libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$=JSON.parse($libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$),$libObj$$={id:$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$[0],title:$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$[1],
downloadUrl:$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$[2]};this.remoteInvoke("getFileContent",[$libObj$$.downloadUrl],null,mxUtils.bind(this,function($libContent$$){try{$onload$$(new RemoteLibrary(this,$libContent$$,$libObj$$))}catch($e$63$$){$onerror$$()}}),function(){$onerror$$()})}catch($e$64$$){$onerror$$()}}else{var $peer$$=null;"G"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$?null!=this.drive&&null!=this.drive.user&&($peer$$=this.drive):"H"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$?
null!=this.gitHub&&null!=this.gitHub.getUser()&&($peer$$=this.gitHub):"T"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$?null!=this.trello&&this.trello.isAuthorized()&&($peer$$=this.trello):"D"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$?null!=this.dropbox&&null!=this.dropbox.getUser()&&($peer$$=this.dropbox):"W"==$libDesc$jscomp$1_nocache$jscomp$1_realUrl$jscomp$5_service$$&&null!=this.oneDrive&&null!=this.oneDrive.getUser()&&($peer$$=this.oneDrive);null!=$peer$$?
$peer$$.getLibrary(decodeURIComponent($id$$.substring(1)),mxUtils.bind(this,function($file$$){try{$onload$$($file$$)}catch($e$65$$){$onerror$$()}}),function($resp$$){$onerror$$()}):$onerror$$(!0)}}})($name$jscomp$0$$,$i$jscomp$0$$)}$checkDone$$()});$load$$(mxSettings.getCustomLibraries(),function(){$load$$((urlParams.clibs||"").split(";"))})}};
App.prototype.updateButtonContainer=function $App$$updateButtonContainer$(){if(null!=this.buttonContainer){var $file$jscomp$117_icon$$=this.getCurrentFile();this.commentsSupported()?null==this.commentButton&&(this.commentButton=document.createElement("a"),this.commentButton.setAttribute("title",mxResources.get("comments")),this.commentButton.className="geToolbarButton",this.commentButton.style.cssText="display:inline-block;position:relative;box-sizing:border-box;margin-right:4px;float:left;cursor:pointer;width:24px;height:24px;background-size:24px 24px;background-position:center center;background-repeat:no-repeat;background-image:url("+
Editor.commentImage+");","atlas"==uiTheme&&(this.commentButton.style.marginRight="10px",this.commentButton.style.marginTop="-3px"),mxEvent.addListener(this.commentButton,"click",mxUtils.bind(this,function(){this.actions.get("comments").funct()})),this.buttonContainer.appendChild(this.commentButton),"dark"==uiTheme||"atlas"==uiTheme)&&(this.commentButton.style.filter="invert(100%)"):null!=this.commentButton&&(this.commentButton.parentNode.removeChild(this.commentButton),this.commentButton=null);null!=
$file$jscomp$117_icon$$&&$file$jscomp$117_icon$$.constructor==DriveFile?null==this.shareButton&&(this.shareButton=document.createElement("div"),this.shareButton.className="geBtn gePrimaryBtn",this.shareButton.style.display="inline-block",this.shareButton.style.padding="0 10px 0 10px",this.shareButton.style.marginTop="-4px",this.shareButton.style.height="28px",this.shareButton.style.lineHeight="28px",this.shareButton.style.minWidth="0px",this.shareButton.style.cssFloat="right",this.shareButton.setAttribute("title",
mxResources.get("share")),$file$jscomp$117_icon$$=document.createElement("img"),$file$jscomp$117_icon$$.setAttribute("src",this.shareImage),$file$jscomp$117_icon$$.setAttribute("align","absmiddle"),$file$jscomp$117_icon$$.style.marginRight="4px",$file$jscomp$117_icon$$.style.marginTop="-3px",this.shareButton.appendChild($file$jscomp$117_icon$$),mxUtils.write(this.shareButton,mxResources.get("share")),mxEvent.addListener(this.shareButton,"click",mxUtils.bind(this,function(){this.actions.get("share").funct()})),
this.buttonContainer.appendChild(this.shareButton)):null!=this.shareButton&&(this.shareButton.parentNode.removeChild(this.shareButton),this.shareButton=null)}};
App.prototype.save=function $App$$save$($name$$,$done$$){var $file$$=this.getCurrentFile(),$msg$jscomp$20_success$$=mxResources.get("saving");if(null!=$file$$&&this.spinner.spin(document.body,$msg$jscomp$20_success$$)){this.editor.setStatus("");this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var $msg$jscomp$20_success$$=mxUtils.bind(this,function(){$file$$.handleFileSuccess(!0);null!=$done$$&&$done$$()}),$error$$=mxUtils.bind(this,function($err$$){$file$$.handleFileError($err$$,!0)});
try{$name$$==$file$$.getTitle()?$file$$.save(!0,$msg$jscomp$20_success$$,$error$$):$file$$.saveAs($name$$,$msg$jscomp$20_success$$,$error$$)}catch($err$$){$file$$.handleFileError($err$$,!0)}}};
App.prototype.pickFolder=function $App$$pickFolder$($mode$$,$fn$$,$enabled$$,$direct$$,$force$$){$enabled$$=null!=$enabled$$?$enabled$$:!0;var $resume$$=this.spinner.pause();$enabled$$&&$mode$$==App.MODE_GOOGLE&&null!=this.drive?this.drive.pickFolder(mxUtils.bind(this,function($evt$$){$resume$$();if($evt$$.action==google.picker.Action.PICKED){var $folderId$$=null;null!=$evt$$.docs&&0<$evt$$.docs.length&&"folder"==$evt$$.docs[0].type&&($folderId$$=$evt$$.docs[0].id);$fn$$($folderId$$)}}),$force$$):
$enabled$$&&$mode$$==App.MODE_ONEDRIVE&&null!=this.oneDrive?this.oneDrive.pickFolder(mxUtils.bind(this,function($files$jscomp$11_folderId$$){$resume$$();null!=$files$jscomp$11_folderId$$&&null!=$files$jscomp$11_folderId$$.value&&0<$files$jscomp$11_folderId$$.value.length&&($files$jscomp$11_folderId$$=OneDriveFile.prototype.getIdOf($files$jscomp$11_folderId$$.value[0]),$fn$$($files$jscomp$11_folderId$$))}),$direct$$):$enabled$$&&$mode$$==App.MODE_GITHUB&&null!=this.gitHub?this.gitHub.pickFolder(mxUtils.bind(this,
function($folderPath$$){$resume$$();$fn$$($folderPath$$)})):$enabled$$&&$mode$$==App.MODE_TRELLO&&null!=this.trello?this.trello.pickFolder(mxUtils.bind(this,function($cardId$$){$resume$$();$fn$$($cardId$$)})):EditorUi.prototype.pickFolder.apply(this,arguments)};
App.prototype.exportFile=function $App$$exportFile$($data$$,$filename$$,$fn$66_mimeType$$,$base64Encoded$$,$mode$$,$folderId$$){switch($mode$$){case App.MODE_DROPBOX:this.dropbox&&this.spinner.spin(document.body,mxResources.get("saving"))&&this.dropbox.insertFile($filename$$,$base64Encoded$$?this.base64ToBlob($data$$,$fn$66_mimeType$$):$data$$,mxUtils.bind(this,function(){this.spinner.stop()}),mxUtils.bind(this,function($err$$){this.spinner.stop();this.handleError($err$$)}));break;case App.MODE_GOOGLE:this.drive&&
this.spinner.spin(document.body,mxResources.get("saving"))&&this.drive.insertFile($filename$$,$data$$,$folderId$$,mxUtils.bind(this,function(){this.spinner.stop()}),mxUtils.bind(this,function($err$$){this.spinner.stop();this.handleError($err$$)}),$fn$66_mimeType$$,$base64Encoded$$);break;case App.MODE_ONEDRIVE:this.oneDrive&&this.spinner.spin(document.body,mxResources.get("saving"))&&this.oneDrive.insertFile($filename$$,$base64Encoded$$?this.base64ToBlob($data$$,$fn$66_mimeType$$):$data$$,mxUtils.bind(this,
function(){this.spinner.stop()}),mxUtils.bind(this,function($err$$){this.spinner.stop();this.handleError($err$$)}),!1,$folderId$$);break;case App.MODE_GITHUB:null!=this.gitHub&&this.spinner.spin(document.body,mxResources.get("saving"))&&this.gitHub.insertFile($filename$$,$data$$,mxUtils.bind(this,function(){this.spinner.stop()}),mxUtils.bind(this,function($err$$){this.spinner.stop();this.handleError($err$$)}),!0,$folderId$$,$base64Encoded$$);break;case App.MODE_TRELLO:null!=this.trello&&this.spinner.spin(document.body,
mxResources.get("saving"))&&this.trello.insertFile($filename$$,$base64Encoded$$?this.base64ToBlob($data$$,$fn$66_mimeType$$):$data$$,mxUtils.bind(this,function(){this.spinner.stop()}),mxUtils.bind(this,function($err$$){this.spinner.stop();this.handleError($err$$)}),!1,$folderId$$);break;case App.MODE_BROWSER:$fn$66_mimeType$$=mxUtils.bind(this,function(){localStorage.setItem($filename$$,$data$$)}),localStorage.getItem($filename$$)?this.confirm(mxResources.get("replaceIt",[$filename$$]),$fn$66_mimeType$$):
$fn$66_mimeType$$()}};
App.prototype.descriptorChanged=function $App$$descriptorChanged$(){var $graph$$=this.editor.graph,$file$$=this.getCurrentFile();if($file$$){if(!App.CSET&&this.fname){this.fnameWrapper.style.display="block";this.fname.innerHTML="";var $editable$jscomp$3_filename$$=$file$$.getTitle()||this.defaultFilename;mxUtils.write(this.fname,$editable$jscomp$3_filename$$);this.fname.setAttribute("title",$editable$jscomp$3_filename$$+" - "+mxResources.get("rename"))}else this.fname.innerHTML=sessionStorage.getItem("assessment.name");
$editable$jscomp$3_filename$$=$file$$.isEditable()&&!$file$$.invalidChecksum;$graph$$.isEnabled()&&!$editable$jscomp$3_filename$$&&$graph$$.reset();$graph$$.setEnabled($editable$jscomp$3_filename$$);urlParams.rev||(this.updateDocumentTitle(),($graph$$=$file$$.getHash())?window.location.hash=$graph$$:window.location.hash.length&&(window.location.hash=""))}this.updateUi();this.format&&this.editor.graph.isSelectionEmpty()&&this.format.refresh()};
App.prototype.showAuthDialog=function $App$$showAuthDialog$($peer$$,$showRememberOption$$,$fn$$,$closeFn$$){var $resume$$=this.spinner.pause();this.showDialog((new AuthDialog(this,$peer$$,$showRememberOption$$,mxUtils.bind(this,function($remember$$){try{null!=$fn$$&&$fn$$($remember$$,mxUtils.bind(this,function(){this.hideDialog();$resume$$()}))}catch($e$$){this.editor.setStatus(mxUtils.htmlEntities($e$$.message))}}))).container,300,$showRememberOption$$?180:140,!0,!0,mxUtils.bind(this,function($cancel$$){null!=
$closeFn$$&&$closeFn$$();$cancel$$&&null==this.getCurrentFile()&&null==this.dialog&&this.showSplash()}))};
App.prototype.convertFile=function $App$$convertFile$($url$$,$filename$$,$binary$jscomp$15_mimeType$$,$extension$$,$success$$,$error$$){var $name$$=$filename$$;/\.svg$/i.test($name$$)||($name$$=$name$$.substring(0,$filename$$.lastIndexOf("."))+$extension$$);var $gitHubUrl$$=!1;null!=this.gitHub&&$url$$.substring(0,this.gitHub.baseUrl.length)==this.gitHub.baseUrl&&($gitHubUrl$$=!0);if(/\.v(dx|sdx?)$/i.test($filename$$)&&Graph.fileSupport&&(new XMLHttpRequest).upload&&"string"===typeof(new XMLHttpRequest).responseType){var $req$$=
new XMLHttpRequest;$req$$.open("GET",$url$$,!0);$gitHubUrl$$||($req$$.responseType="blob");$req$$.onload=mxUtils.bind(this,function(){if(200<=$req$$.status&&299>=$req$$.status){var $blob$jscomp$8_file$$=null;$gitHubUrl$$?($blob$jscomp$8_file$$=JSON.parse($req$$.responseText),$blob$jscomp$8_file$$=this.base64ToBlob($blob$jscomp$8_file$$.content,"application/octet-stream")):$blob$jscomp$8_file$$=new Blob([$req$$.response],{type:"application/octet-stream"});this.importVisio($blob$jscomp$8_file$$,mxUtils.bind(this,
function($xml$$){$success$$(new LocalFile(this,$xml$$,$name$$,!0))}),$error$$,$filename$$)}else null!=$error$$&&$error$$({message:mxResources.get("errorLoadingFile")})});$req$$.onerror=$error$$;$req$$.send()}else{var $handleData$$=mxUtils.bind(this,function($data$$){try{/\.png$/i.test($filename$$)?(temp=this.extractGraphModelFromPng($data$$),null!=temp?$success$$(new LocalFile(this,temp,$name$$,!0)):$success$$(new LocalFile(this,$data$$,$filename$$,!0))):Graph.fileSupport&&(new XMLHttpRequest).upload&&
this.isRemoteFileFormat($data$$,$url$$)?this.parseFile(new Blob([$data$$],{type:"application/octet-stream"}),mxUtils.bind(this,function($xhr$$){4==$xhr$$.readyState&&(200<=$xhr$$.status&&299>=$xhr$$.status?$success$$(new LocalFile(this,$xhr$$.responseText,$name$$,!0)):null!=$error$$&&$error$$({message:mxResources.get("errorLoadingFile")}))}),$filename$$):$success$$(new LocalFile(this,$data$$,$name$$,!0))}catch($e$$){null!=$error$$&&$error$$($e$$)}});$binary$jscomp$15_mimeType$$=/\.png$/i.test($filename$$)||
/\.jpe?g$/i.test($filename$$)||null!=$binary$jscomp$15_mimeType$$&&"image/"==$binary$jscomp$15_mimeType$$.substring(0,6);$gitHubUrl$$?mxUtils.get($url$$,mxUtils.bind(this,function($file$jscomp$121_req$$){if(200<=$file$jscomp$121_req$$.getStatus()&&299>=$file$jscomp$121_req$$.getStatus()){if(null!=$success$$){$file$jscomp$121_req$$=JSON.parse($file$jscomp$121_req$$.getText());var $data$$=$file$jscomp$121_req$$.content;"base64"===$file$jscomp$121_req$$.encoding&&($data$$=/\.png$/i.test($filename$$)?
"data:image/png;base64,"+$data$$:!window.atob||mxClient.IS_IE||mxClient.IS_IE11?Base64.decode($data$$):atob($data$$));$handleData$$($data$$)}}else null!=$error$$&&$error$$({code:App.ERROR_UNKNOWN})}),function(){null!=$error$$&&$error$$({code:App.ERROR_UNKNOWN})},!1,this.timeout,function(){null!=$error$$&&$error$$({code:App.ERROR_TIMEOUT,retry:fn})}):this.loadUrl($url$$,$handleData$$,$error$$,$binary$jscomp$15_mimeType$$)}};
App.prototype.updateHeader=function $App$$updateHeader$(){if(null!=this.menubar){this.appIcon=document.createElement("a");this.appIcon.style.display="block";this.appIcon.style.position="absolute";this.appIcon.style.width="40px";this.appIcon.style.height=this.menubarHeight-16+"px";this.appIcon.style.margin="8px 0px 8px 8px";this.appIcon.style.borderRadius="4px";mxEvent.disableContextMenu(this.appIcon);mxEvent.addListener(this.appIcon,"click",mxUtils.bind(this,function($evt$$){this.appIconClicked($evt$$)}));
var $logo$$=mxClient.IS_SVG?'url(data:images/svg+xml;utf8,<svg xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" height="28" style="enable-background:new 0 0 500 500;" version="1.1" viewBox="0 0 500 500" width="28" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px">\t\t\t<path class="fill-primary" d="M384.4,166.7c0-14.3-0.1-30.7-0.6-38.9C379.4,58.8,317,6.2,246.3,6.4v0c-0.1,0-0.2,0-0.3,0 c-0.1,0-0.1,0-0.3,0h0C175,7.5,113.6,61.2,110.4,130.2c-0.4,9.7-0.3,25.2-0.1,36.4h-0.2v27.2h62.4v-14.1c0,0-0.5-33.8,1-50.1 c3.3-34.8,36.7-60.2,73-60.9c36.3,0,70.2,24.9,74.1,59.6c1.8,16.3,0.5,65.5,0.5,65.5h0.9h62.3V166.7L384.4,166.7z"></path><path class="fill-white" d="M331.7,183.5c0.3-15.6,0.6-44.2-0.8-56.3c-4.3-38.5-41.3-68.8-84.4-68.8  c-43.2,0.8-79.7,31.7-83.3,70.3c-1.5,16.7-1.1,49.8-1.1,51.2v3.6h-41.7v-14.9c0.2-0.7,0.2-1.4,0.2-2.2c-0.2-11.2-0.4-26.4,0.1-35.8 c2.9-61.8,59-113,125.1-114c0.1,0,0.6,0,0.7,0c66,0,122.9,50.1,126.9,111.8c0.4,6.3,0.6,18.8,0.6,38.2v16.9H331.7z"></path><path class="fill-primary" d="M404.6,207.6H90c-19.4,0-35.1,15.7-35.1,35.1v215.8c0,19.4,15.7,35.1,35.1,35.1h314.6 c19.4,0,35.1-15.7,35.1-35.1V242.7C439.7,223.3,424,207.6,404.6,207.6z"></path>\t\t\t<path class="fill-white" d="M90,483.2c-13.6,0-24.7-11.1-24.7-24.7V242.7c0-13.6,11.1-24.7,24.7-24.7h314.6 c13.6,0,24.7,11.1,24.7,24.7v215.8c0,13.6-11.1,24.7-24.7,24.7H90z"></path><path class="fill-primary" d="M393,302.9H146.2c-4.3,0-4.6,1-4.6,6v91.2c0,3.2,0.5,4.8,3.4,5.3c0.4,0.2-0.2,0,0.2,0h243.2 v37.2H132.8c-12,0-20-5.3-25.4-15.4 c-2.5-4.6-3.1-10.1-3.1-15.9V295.8c0-12.3,4.3-21.3,14.4-26.3c4.3-2.3,8.6-3.7,14.1-3.7H393 V302.9z"></path></svg>)':
"url('"+IMAGE_PATH+"/logo-white.png')",$logo$$="url('"+IMAGE_PATH+"/drawlogo48.png')";this.appIcon.style.backgroundImage=$logo$$;this.appIcon.style.backgroundPosition="center center";this.appIcon.style.backgroundRepeat="no-repeat";mxUtils.setPrefixedStyle(this.appIcon.style,"transition","all 125ms linear");mxEvent.addListener(this.appIcon,"mouseover",mxUtils.bind(this,function(){var $file$jscomp$122_mode$$=this.getCurrentFile();null!=$file$jscomp$122_mode$$&&($file$jscomp$122_mode$$=$file$jscomp$122_mode$$.getMode(),
$file$jscomp$122_mode$$==App.MODE_GOOGLE?this.appIcon.style.backgroundImage="url("+IMAGE_PATH+"/google-drive-logo-white.svg)":$file$jscomp$122_mode$$==App.MODE_DROPBOX?this.appIcon.style.backgroundImage="url("+IMAGE_PATH+"/dropbox-logo-white.svg)":$file$jscomp$122_mode$$==App.MODE_ONEDRIVE?this.appIcon.style.backgroundImage="url("+IMAGE_PATH+"/onedrive-logo-white.svg)":$file$jscomp$122_mode$$==App.MODE_GITHUB?this.appIcon.style.backgroundImage="url("+IMAGE_PATH+"/github-logo-white.svg)":$file$jscomp$122_mode$$==
App.MODE_TRELLO&&(this.appIcon.style.backgroundImage="url("+IMAGE_PATH+"/trello-logo-white-orange.svg)"))}));mxEvent.addListener(this.appIcon,"mouseout",mxUtils.bind(this,function(){this.appIcon.style.backgroundImage=$logo$$}));"1"!=urlParams.embed&&this.menubarContainer.appendChild(this.appIcon);this.fnameWrapper=document.createElement("div");this.fnameWrapper.style.position="absolute";this.fnameWrapper.style.right="120px";this.fnameWrapper.style.left="50px";this.fnameWrapper.style.top="6px";this.fnameWrapper.style.height=
"26px";this.fnameWrapper.style.display="none";this.fnameWrapper.style.overflow="hidden";this.fnameWrapper.style.textOverflow="ellipsis";App.CSET?(this.fnameWrapper.style.display="inline",this.fname=document.createElement("div"),this.fname.style.padding="2px 8px 2px 8px",this.fname.style.display="inline",this.fname.style.fontSize="18px",this.fname.style.whiteSpace="nowrap",this.fname.innerHTML=sessionStorage.getItem("assessment.name")):(this.fname=document.createElement("a"),this.fname.setAttribute("title",
mxResources.get("rename")),this.fname.className="geItem",this.fname.style.padding="2px 8px 2px 8px",this.fname.style.display="inline",this.fname.style.fontSize="18px",this.fname.style.whiteSpace="nowrap",mxEvent.addListener(this.fname,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()})),mxEvent.addListener(this.fname,"click",mxUtils.bind(this,function($evt$$){var $file$$=this.getCurrentFile();null!=$file$$&&$file$$.isRenamable()&&(this.editor.graph.isEditing()&&
this.editor.graph.stopEditing(),this.actions.get("rename").funct());mxEvent.consume($evt$$)})));this.fnameWrapper.appendChild(this.fname);"1"!=urlParams.embed&&(this.menubarContainer.appendChild(this.fnameWrapper),this.menubar.container.style.position="absolute",this.menubar.container.style.paddingLeft="52px",this.menubar.container.style.boxSizing="border-box",this.menubar.container.style.top="29px");this.toggleFormatElement=document.createElement("a");this.toggleFormatElement.setAttribute("title",
mxResources.get("formatPanel")+" ("+Editor.ctrlKey+"+Shift+P)");this.toggleFormatElement.style.position="absolute";this.toggleFormatElement.style.display="inline-block";this.toggleFormatElement.style.top="8px";this.toggleFormatElement.style.right="atlas"!=uiTheme&&"1"!=urlParams.embed?"30px":"10px";this.toggleFormatElement.style.padding="2px";this.toggleFormatElement.style.fontSize="14px";this.toggleFormatElement.className="atlas"!=uiTheme?"geButton":"";this.toggleFormatElement.style.width="16px";
this.toggleFormatElement.style.height="16px";this.toggleFormatElement.style.backgroundPosition="50% 50%";this.toggleFormatElement.style.backgroundRepeat="no-repeat";this.toolbarContainer.appendChild(this.toggleFormatElement);"dark"==uiTheme&&(this.toggleFormatElement.style.filter="invert(100%)");mxEvent.addListener(this.toggleFormatElement,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()}));mxEvent.addListener(this.toggleFormatElement,"click",
mxUtils.bind(this,function($evt$$){this.actions.get("formatPanel").funct();mxEvent.consume($evt$$)}));var $toggleFormatPanel$$=mxUtils.bind(this,function(){this.toggleFormatElement.style.backgroundImage=0<this.formatWidth?"url('"+this.formatShowImage+"')":"url('"+this.formatHideImage+"')"});this.addListener("formatWidthChanged",$toggleFormatPanel$$);$toggleFormatPanel$$();this.fullscreenElement=document.createElement("a");this.fullscreenElement.setAttribute("title",mxResources.get("fullscreen"));
this.fullscreenElement.style.position="absolute";this.fullscreenElement.style.display="inline-block";this.fullscreenElement.style.top="8px";this.fullscreenElement.style.right="atlas"!=uiTheme&&"1"!=urlParams.embed?"50px":"30px";this.fullscreenElement.style.padding="2px";this.fullscreenElement.style.fontSize="14px";this.fullscreenElement.className="atlas"!=uiTheme?"geButton":"";this.fullscreenElement.style.width="16px";this.fullscreenElement.style.height="16px";this.fullscreenElement.style.backgroundPosition=
"50% 50%";this.fullscreenElement.style.backgroundRepeat="no-repeat";this.fullscreenElement.style.backgroundImage="url('"+this.fullscreenImage+"')";this.toolbarContainer.appendChild(this.fullscreenElement);mxEvent.addListener(this.fullscreenElement,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()}));"atlas"==uiTheme&&(mxUtils.setOpacity(this.toggleFormatElement,70),mxUtils.setOpacity(this.fullscreenElement,70));var $initialPosition$$=this.hsplitPosition,
$collapsed$$=!1;"dark"==uiTheme&&(this.fullscreenElement.style.filter="invert(100%)");mxEvent.addListener(this.fullscreenElement,"click",mxUtils.bind(this,function($evt$$){"atlas"!=uiTheme&&"1"!=urlParams.embed&&this.toggleCompactMode(!$collapsed$$);this.toggleFormatPanel(!$collapsed$$);this.hsplitPosition=$collapsed$$?$initialPosition$$:0;this.hideFooter();$collapsed$$=!$collapsed$$;mxEvent.consume($evt$$)}));"1"!=urlParams.embed&&(this.toggleElement=document.createElement("a"),this.toggleElement.setAttribute("title",
mxResources.get("collapseExpand")),this.toggleElement.className="geButton",this.toggleElement.style.position="absolute",this.toggleElement.style.display="inline-block",this.toggleElement.style.width="16px",this.toggleElement.style.height="16px",this.toggleElement.style.color="#666",this.toggleElement.style.top="8px",this.toggleElement.style.right="10px",this.toggleElement.style.padding="2px",this.toggleElement.style.fontSize="14px",this.toggleElement.style.textDecoration="none",this.toggleElement.style.backgroundImage=
"url('"+this.chevronUpImage+"')",this.toggleElement.style.backgroundPosition="50% 50%",this.toggleElement.style.backgroundRepeat="no-repeat","dark"==uiTheme&&(this.toggleElement.style.filter="invert(100%)"),mxEvent.addListener(this.toggleElement,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()})),mxEvent.addListener(this.toggleElement,"click",mxUtils.bind(this,function($evt$$){this.toggleCompactMode();mxEvent.consume($evt$$)})),"atlas"!=uiTheme&&
this.toolbarContainer.appendChild(this.toggleElement),!mxClient.IS_FF&&740>=screen.height&&"undefined"!==typeof this.toggleElement.click&&window.setTimeout(mxUtils.bind(this,function(){this.toggleElement.click()}),0))}};
App.prototype.toggleCompactMode=function $App$$toggleCompactMode$($forceHide$$){$forceHide$$||"none"!=this.appIcon.style.display?(this.menubar.container.style.position="relative",this.menubar.container.style.paddingLeft="4px",this.menubar.container.style.paddingTop="0px",this.menubar.container.style.paddingBottom="0px",this.menubar.container.style.top="0px",this.buttonContainer.style.visibility="hidden",this.appIcon.style.display="none",this.fnameWrapper.style.display="none",this.fnameWrapper.style.visibility=
"hidden",this.menubarHeight=EditorUi.prototype.menubarHeight,this.refresh(),this.toggleElement.style.backgroundImage="url('"+this.chevronDownImage+"')"):(this.menubar.container.style.position="absolute",this.menubar.container.style.paddingLeft="52px",this.menubar.container.style.paddingTop="",this.menubar.container.style.paddingBottom="",this.menubar.container.style.top="29px",this.buttonContainer.style.visibility="visible",this.appIcon.style.display="block",this.fnameWrapper.style.display="block",
this.fnameWrapper.style.visibility="visible",this.menubarHeight=App.prototype.menubarHeight,this.refresh(),this.toggleElement.style.backgroundImage="url('"+this.chevronUpImage+"')")};
App.prototype.updateUserElement=function $App$$updateUserElement$(){if(null!=this.drive&&null!=this.drive.getUser()||null!=this.oneDrive&&null!=this.oneDrive.getUser()||null!=this.dropbox&&null!=this.dropbox.getUser()||null!=this.gitHub&&null!=this.gitHub.getUser()||null!=this.trello&&this.trello.isAuthorized()){null==this.userElement&&(this.userElement=document.createElement("a"),this.userElement.className="geItem",this.userElement.style.position="absolute",this.userElement.style.fontSize="8pt",
this.userElement.style.top="atlas"==uiTheme?"8px":"2px",this.userElement.style.right="30px",this.userElement.style.margin="4px",this.userElement.style.padding="2px",this.userElement.style.paddingRight="16px",this.userElement.style.verticalAlign="middle",this.userElement.style.backgroundImage="url("+IMAGE_PATH+"/expanded.gif)",this.userElement.style.backgroundPosition="100% 60%",this.userElement.style.backgroundRepeat="no-repeat",this.menubarContainer.appendChild(this.userElement),mxEvent.addListener(this.userElement,
mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()})),mxEvent.addListener(this.userElement,"click",mxUtils.bind(this,function($evt$$){if(null==this.userPanel){var $addUser_div$jscomp$60_driveUser$jscomp$2_img$$=document.createElement("div");$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.className="geDialog";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.position="absolute";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.top=this.userElement.clientTop+
this.userElement.clientHeight+6+"px";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.right="36px";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.padding="0px";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.cursor="default";this.userPanel=$addUser_div$jscomp$60_driveUser$jscomp$2_img$$}if(null!=this.userPanel.parentNode)this.userPanel.parentNode.removeChild(this.userPanel);else{var $connected$$=!1;this.userPanel.innerHTML="";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$=document.createElement("img");
$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.setAttribute("src",Dialog.prototype.closeImage);$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.setAttribute("title",mxResources.get("close"));$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.className="geDialogClose";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.top="8px";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.right="8px";mxEvent.addListener($addUser_div$jscomp$60_driveUser$jscomp$2_img$$,"click",mxUtils.bind(this,function(){null!=
this.userPanel.parentNode&&this.userPanel.parentNode.removeChild(this.userPanel)}));this.userPanel.appendChild($addUser_div$jscomp$60_driveUser$jscomp$2_img$$);null!=this.drive&&($addUser_div$jscomp$60_driveUser$jscomp$2_img$$=this.drive.getUser(),null!=$addUser_div$jscomp$60_driveUser$jscomp$2_img$$&&($connected$$=!0,this.userPanel.innerHTML+='<table title="User ID: '+$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.id+'" style="font-size:10pt;padding:20px 20px 10px 10px;"><tr><td valign="top">'+
(null!=$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.pictureUrl?'<img width="80" height="80" style="margin-right:10px;border-radius:50%;" src="'+$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.pictureUrl+'"/>':'<img width="80" height="80" style="margin-right:4px;margin-top:2px;" src="'+this.defaultUserPicture+'"/>')+'</td><td valign="top" style="white-space:nowrap;'+(null!=$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.pictureUrl?"padding-top:14px;":"")+'"><b>'+mxUtils.htmlEntities($addUser_div$jscomp$60_driveUser$jscomp$2_img$$.displayName)+
"</b><br><small>"+mxUtils.htmlEntities($addUser_div$jscomp$60_driveUser$jscomp$2_img$$.email)+"</small><br><br><small>"+mxResources.get("googleDrive")+"</small></tr></table>",$addUser_div$jscomp$60_driveUser$jscomp$2_img$$=document.createElement("div"),$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.textAlign="center",$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.paddingBottom="12px",$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.whiteSpace="nowrap",$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.appendChild(mxUtils.button(mxResources.get("signOut"),
mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();null!=$file$$&&$file$$.constructor==DriveFile?this.confirm(mxResources.get("areYouSure"),mxUtils.bind(this,function(){this.spinner.spin(document.body,mxResources.get("signOut"));this.diagramContainer.style.display="none";this.formatContainer.style.display="none";this.hsplit.style.display="none";this.sidebarContainer.style.display="none";this.sidebarFooterContainer.style.display="none";null!=this.tabContainer&&(this.tabContainer.style.display=
"none");$file$$.close();window.setTimeout(mxUtils.bind(this,function(){this.showDialog=function $this$showDialog$(){};window.location.hash="";this.drive.clearUserId();gapi.auth.signOut();window.location.reload()}),null!=$file$$&&$file$$.constructor==DriveFile?2E3:0)})):(this.drive.clearUserId(),this.drive.setUser(null),gapi.auth.signOut())}))),this.userPanel.appendChild($addUser_div$jscomp$60_driveUser$jscomp$2_img$$)));$addUser_div$jscomp$60_driveUser$jscomp$2_img$$=mxUtils.bind(this,function($div$jscomp$61_user$$,
$logo$$,$logout$$,$label$$){null!=$div$jscomp$61_user$$&&($connected$$&&this.userPanel.appendChild(document.createElement("hr")),$connected$$=!0,this.userPanel.innerHTML+='<table style="font-size:10pt;padding:20px 20px 10px 10px;"><tr><td valign="top">'+(null!=$logo$$?'<img style="margin-right:10px;" src="'+$logo$$+'" width="40" height="40"/></td>':"")+'<td valign="middle" style="white-space:nowrap;"><b>'+mxUtils.htmlEntities($div$jscomp$61_user$$.displayName)+"</b>"+(null!=$div$jscomp$61_user$$.email?
'<br><font color="gray">'+mxUtils.htmlEntities($div$jscomp$61_user$$.email)+"</font>":"")+(null!=$label$$?"<br><br><small>"+mxUtils.htmlEntities($label$$)+"</small>":"")+"</td></tr></table>",$div$jscomp$61_user$$=document.createElement("div"),$div$jscomp$61_user$$.style.textAlign="center",$div$jscomp$61_user$$.style.paddingBottom="12px",$div$jscomp$61_user$$.style.whiteSpace="nowrap",null!=$logout$$&&$div$jscomp$61_user$$.appendChild(mxUtils.button(mxResources.get("signOut"),$logout$$)),this.userPanel.appendChild($div$jscomp$61_user$$))});
null!=this.dropbox&&$addUser_div$jscomp$60_driveUser$jscomp$2_img$$(this.dropbox.getUser(),IMAGE_PATH+"/dropbox-logo.svg",mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();if(null!=$file$$&&$file$$.constructor==DropboxFile){var $doLogout$$=mxUtils.bind(this,function(){this.dropbox.logout();window.location.hash=""});$file$$.isModified()?this.confirm(mxResources.get("allChangesLost"),null,$doLogout$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$doLogout$$()}else this.dropbox.logout()}),
mxResources.get("dropbox"));null!=this.oneDrive&&$addUser_div$jscomp$60_driveUser$jscomp$2_img$$(this.oneDrive.getUser(),IMAGE_PATH+"/onedrive-logo.svg",mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();if(null!=$file$$&&$file$$.constructor==OneDriveFile){var $doLogout$$=mxUtils.bind(this,function(){this.oneDrive.logout();window.location.hash=""});$file$$.isModified()?this.confirm(mxResources.get("allChangesLost"),null,$doLogout$$,mxResources.get("cancel"),mxResources.get("discardChanges")):
$doLogout$$()}else this.oneDrive.logout()}),mxResources.get("oneDrive"));null!=this.gitHub&&$addUser_div$jscomp$60_driveUser$jscomp$2_img$$(this.gitHub.getUser(),IMAGE_PATH+"/github-logo.svg",mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();if(null!=$file$$&&$file$$.constructor==GitHubFile){var $doLogout$$=mxUtils.bind(this,function(){this.gitHub.logout();window.location.hash=""});$file$$.isModified()?this.confirm(mxResources.get("allChangesLost"),null,$doLogout$$,mxResources.get("cancel"),
mxResources.get("discardChanges")):$doLogout$$()}else this.gitHub.logout()}),mxResources.get("github"));null!=this.trello&&$addUser_div$jscomp$60_driveUser$jscomp$2_img$$(this.trello.getUser(),IMAGE_PATH+"/trello-logo.svg",mxUtils.bind(this,function(){var $file$$=this.getCurrentFile();if(null!=$file$$&&$file$$.constructor==TrelloFile){var $doLogout$$=mxUtils.bind(this,function(){this.trello.logout();window.location.hash=""});$file$$.isModified()?this.confirm(mxResources.get("allChangesLost"),null,
$doLogout$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$doLogout$$()}else this.trello.logout()}),mxResources.get("trello"));$connected$$||($addUser_div$jscomp$60_driveUser$jscomp$2_img$$=document.createElement("div"),$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.textAlign="center",$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.padding="20px 20px 10px 10px",$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.innerHTML=mxResources.get("notConnected"),this.userPanel.appendChild($addUser_div$jscomp$60_driveUser$jscomp$2_img$$));
$addUser_div$jscomp$60_driveUser$jscomp$2_img$$=document.createElement("div");$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.textAlign="center";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.padding="12px";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.background="whiteSmoke";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.borderTop="1px solid #e0e0e0";$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.style.whiteSpace="nowrap";var $btn$$=mxUtils.button(mxResources.get("close"),
mxUtils.bind(this,function(){mxEvent.isConsumed($evt$$)||null==this.userPanel||null==this.userPanel.parentNode||this.userPanel.parentNode.removeChild(this.userPanel)}));$addUser_div$jscomp$60_driveUser$jscomp$2_img$$.appendChild($btn$$);this.userPanel.appendChild($addUser_div$jscomp$60_driveUser$jscomp$2_img$$);document.body.appendChild(this.userPanel)}mxEvent.consume($evt$$)})),mxEvent.addListener(document.body,"click",mxUtils.bind(this,function($evt$$){mxEvent.isConsumed($evt$$)||null==this.userPanel||
null==this.userPanel.parentNode||this.userPanel.parentNode.removeChild(this.userPanel)})));var $user$$=null;null!=this.drive&&null!=this.drive.getUser()?$user$$=this.drive.getUser():null!=this.oneDrive&&null!=this.oneDrive.getUser()?$user$$=this.oneDrive.getUser():null!=this.dropbox&&null!=this.dropbox.getUser()?$user$$=this.dropbox.getUser():null!=this.gitHub&&null!=this.gitHub.getUser()&&($user$$=this.gitHub.getUser());null!=$user$$?(this.userElement.innerHTML="",560<screen.width&&(mxUtils.write(this.userElement,
$user$$.displayName),this.userElement.style.display="block")):this.userElement.style.display="none"}else null!=this.userElement&&(this.userElement.parentNode.removeChild(this.userElement),this.userElement=null)};
App.prototype.getCurrentUser=function $App$$getCurrentUser$(){var $user$$=null;null!=this.drive&&null!=this.drive.getUser()?$user$$=this.drive.getUser():null!=this.oneDrive&&null!=this.oneDrive.getUser()?$user$$=this.oneDrive.getUser():null!=this.dropbox&&null!=this.dropbox.getUser()?$user$$=this.dropbox.getUser():null!=this.gitHub&&null!=this.gitHub.getUser()&&($user$$=this.gitHub.getUser());return $user$$};var editorResetGraph=Editor.prototype.resetGraph;
Editor.prototype.resetGraph=function $Editor$$resetGraph$(){editorResetGraph.apply(this,arguments);this.graph.pageFormat=mxSettings.getPageFormat()};(function(){var $mxPopupMenuShowMenu$$=mxPopupMenu.prototype.showMenu;mxPopupMenu.prototype.showMenu=function $mxPopupMenu$$showMenu$(){$mxPopupMenuShowMenu$$.apply(this,arguments);this.div.style.overflowY="auto";this.div.style.overflowX="hidden";this.div.style.maxHeight=Math.max(document.body.clientHeight,document.documentElement.clientHeight)-10+"px"};Menus.prototype.createHelpLink=function $Menus$$createHelpLink$($href$$){var $link$$=document.createElement("span");$link$$.setAttribute("title",
mxResources.get("help"));$link$$.style.cssText="color:blue;text-decoration:underline;margin-left:8px;cursor:help;";var $icon$$=document.createElement("img");mxUtils.setOpacity($icon$$,50);$icon$$.style.height="16px";$icon$$.style.width="16px";$icon$$.setAttribute("border","0");$icon$$.setAttribute("valign","bottom");$icon$$.setAttribute("src",Editor.helpImage);$link$$.appendChild($icon$$);mxEvent.addGestureListeners($link$$,mxUtils.bind(this,function($evt$$){null!=this.editorUi.menubar&&this.editorUi.menubar.hideMenu();
this.editorUi.openLink($href$$);mxEvent.consume($evt$$)}));return $link$$};Menus.prototype.addLinkToItem=function $Menus$$addLinkToItem$($item$$,$href$$){null!=$item$$&&$item$$.firstChild.nextSibling.appendChild(this.createHelpLink($href$$))};var $menusInit$$=Menus.prototype.init;Menus.prototype.init=function $Menus$$init$(){$menusInit$$.apply(this,arguments);var $editorUi$$=this.editorUi,$graph$$=$editorUi$$.editor.graph,$isGraphEnabled$$=mxUtils.bind($graph$$,$graph$$.isEnabled),$googleEnabled$$=
("1"!==urlParams.embed&&"0"!==urlParams.gapi||"1"===urlParams.embed&&"1"===urlParams.gapi)&&mxClient.IS_SVG&&isLocalStorage&&(!document.documentMode||9<document.documentMode),$dropboxEnabled$$=("1"!==urlParams.embed&&"0"!==urlParams.db||"1"===urlParams.embed&&"1"===urlParams.db)&&mxClient.IS_SVG&&(!document.documentMode||9<document.documentMode),$oneDriveEnabled$$=("www.draw.io"===window.location.hostname||"test.draw.io"===window.location.hostname||"drive.draw.io"===window.location.hostname||"legacy.draw.io"===
window.location.hostname)&&("1"!==urlParams.embed&&"0"!==urlParams.od||"1"===urlParams.embed&&"1"===urlParams.od)&&!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&(0>navigator.userAgent.indexOf("MSIE")||9<document.documentMode),$trelloEnabled$$=("1"!==urlParams.embed&&"0"!==urlParams.tr||"1"===urlParams.embed&&"1"===urlParams.tr)&&mxClient.IS_SVG&&(null==document.documentMode||9<document.documentMode);mxClient.IS_SVG||$editorUi$$.isOffline()||((new Image).src=IMAGE_PATH+"/help.png");$editorUi$$.actions.addAction("new...",
function(){var $compact$$=$editorUi$$.isOffline(),$dlg$$=new NewDialog($editorUi$$,{compact:$compact$$,showName:!App.CSET,hideFromTemplateUrl:App.CSET});$editorUi$$.showDialog($dlg$$.container,$compact$$?350:620,$compact$$?70:440,!0,!0,function($cancel$jscomp$12_file$$){App.CSET?($editorUi$$.hideDialog(),$cancel$jscomp$12_file$$||($cancel$jscomp$12_file$$=$editorUi$$.getCurrentFile())&&$cancel$jscomp$12_file$$.save()):$cancel$jscomp$12_file$$&&!$editorUi$$.getCurrentFile()&&$editorUi$$.showSplash()});
$dlg$$.init()});App.CSET&&($editorUi$$.actions.get("new").label=mxResources.get("fromTemplate"));$editorUi$$.actions.put("exportSvg",new Action(mxResources.get("formatSvg")+"...",function(){$editorUi$$.showExportDialog(mxResources.get("formatSvg"),!0,mxResources.get("export"),"https://support.draw.io/display/DO/Exporting+Files",mxUtils.bind(this,function($scale$jscomp$14_val$$,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,$cropImage$$,$currentPage$$,
$linkTarget$$){$scale$jscomp$14_val$$=parseInt($scale$jscomp$14_val$$);!isNaN($scale$jscomp$14_val$$)&&0<$scale$jscomp$14_val$$&&$editorUi$$.exportSvg($scale$jscomp$14_val$$/100,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,!$cropImage$$,$currentPage$$,$linkTarget$$)}),!0,null,"svg")}));$editorUi$$.actions.put("insertTemplate",new Action(mxResources.get("template")+"...",function(){var $dlg$$=new NewDialog($editorUi$$,{showName:!1,hideFromTemplateUrl:App.CSET,
callback:function($xml$$){$editorUi$$.hideDialog();if($xml$$){var $insertPoint$$=$editorUi$$.editor.graph.getFreeInsertPoint();$graph$$.setSelectionCells($editorUi$$.importXml($xml$$,Math.max($insertPoint$$.x,20),Math.max($insertPoint$$.y,20),!0));$graph$$.scrollCellToVisible($graph$$.getSelectionCell())}},showImport:!1,createButtonLabel:mxResources.get("insert")});$editorUi$$.showDialog($dlg$$.container,620,440,!0,!0,function($cancel$jscomp$13_file$$){App.CSET&&($editorUi$$.hideDialog(),$cancel$jscomp$13_file$$||
($cancel$jscomp$13_file$$=$editorUi$$.getCurrentFile())&&$cancel$jscomp$13_file$$.save())})})).isEnabled=$isGraphEnabled$$;$editorUi$$.actions.put("exportXml",new Action(mxResources.get("formatXml")+"...",function(){var $div$jscomp$62_dlg$$=document.createElement("div");$div$jscomp$62_dlg$$.style.whiteSpace="nowrap";var $noPages$$=null==$editorUi$$.pages||1>=$editorUi$$.pages.length,$hd$$=document.createElement("h3");mxUtils.write($hd$$,mxResources.get("formatXml"));$hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px";
$div$jscomp$62_dlg$$.appendChild($hd$$);var $selection$$=$editorUi$$.addCheckbox($div$jscomp$62_dlg$$,mxResources.get("selectionOnly"),!1,$graph$$.isSelectionEmpty()),$pages$$=$editorUi$$.addCheckbox($div$jscomp$62_dlg$$,mxResources.get($noPages$$?"compressed":"allPages"),!0);$pages$$.style.marginBottom="16px";mxEvent.addListener($selection$$,"change",function(){$selection$$.checked?$pages$$.setAttribute("disabled","disabled"):$pages$$.removeAttribute("disabled")});$div$jscomp$62_dlg$$=new CustomDialog($editorUi$$,
$div$jscomp$62_dlg$$,mxUtils.bind(this,function(){$editorUi$$.downloadFile("xml",$noPages$$?!$pages$$.checked:null,null,!$selection$$.checked,$noPages$$?null:!$pages$$.checked)}),null,mxResources.get("export"));$editorUi$$.showDialog($div$jscomp$62_dlg$$.container,300,146,!0,!0)}));$editorUi$$.actions.put("exportUrl",new Action(mxResources.get("url")+"...",function(){$editorUi$$.showPublishLinkDialog(mxResources.get("url"),!0,null,null,function($dlg$jscomp$42_linkTarget$$,$linkColor$$,$allPages$$,
$lightbox$$,$editLink$$,$layers$$){$dlg$jscomp$42_linkTarget$$=new EmbedDialog($editorUi$$,$editorUi$$.createLink($dlg$jscomp$42_linkTarget$$,$linkColor$$,$allPages$$,$lightbox$$,$editLink$$,$layers$$,null,!0));$editorUi$$.showDialog($dlg$jscomp$42_linkTarget$$.container,440,240,!0,!0);$dlg$jscomp$42_linkTarget$$.init()})}));$editorUi$$.actions.put("exportHtml",new Action(mxResources.get("formatHtmlEmbedded")+"...",function(){$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.getPublicUrl($editorUi$$.getCurrentFile(),
function($url$$){$editorUi$$.spinner.stop();$editorUi$$.showHtmlDialog(mxResources.get("export"),null,$url$$,function($publicUrl$$,$zoomEnabled$$,$initialZoom$$,$linkTarget$$,$linkColor$$,$fit$$,$allPages$$,$layers$$,$lightbox$$,$editLink$$){$editorUi$$.createHtml($publicUrl$$,$zoomEnabled$$,$initialZoom$$,$linkTarget$$,$linkColor$$,$fit$$,$allPages$$,$layers$$,$lightbox$$,$editLink$$,mxUtils.bind(this,function($html$$,$scriptTag$$){var $basename$$=$editorUi$$.getBaseFilename($allPages$$),$result$$=
'\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]--\x3e\n<!DOCTYPE html>\n<html>\n<head>\n<title>'+mxUtils.htmlEntities($basename$$)+'</title>\n<meta charset="utf-8"/>\n</head>\n<body>'+$html$$+"\n"+$scriptTag$$+"\n</body>\n</html>";$editorUi$$.saveData($basename$$+".html","html",$result$$,"text/html")}))})})}));$editorUi$$.actions.put("exportPdf",new Action(mxResources.get("formatPdf")+"...",function(){if($editorUi$$.isOffline()||$editorUi$$.printPdfExport)$editorUi$$.showDialog((new PrintDialog($editorUi$$,
mxResources.get("formatPdf"))).container,360,null!=$editorUi$$.pages&&1<$editorUi$$.pages.length?420:360,!0,!0);else{var $noPages$$=null==$editorUi$$.pages||1>=$editorUi$$.pages.length,$div$jscomp$63_dlg$$=document.createElement("div");$div$jscomp$63_dlg$$.style.whiteSpace="nowrap";var $cropEnableFn_hd$$=document.createElement("h3");mxUtils.write($cropEnableFn_hd$$,mxResources.get("formatPdf"));$cropEnableFn_hd$$.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px";$div$jscomp$63_dlg$$.appendChild($cropEnableFn_hd$$);
var $cropEnableFn_hd$$=function $$cropEnableFn_hd$$$(){$allPages$$!=this&&this.checked?$crop$$.removeAttribute("disabled"):($crop$$.setAttribute("disabled","disabled"),$crop$$.checked=!1)},$currentPage$$=146;if($editorUi$$.pdfPageExport&&!$noPages$$){var $allPages$$=$editorUi$$.addRadiobox($div$jscomp$63_dlg$$,"pages",mxResources.get("allPages"),!0),$currentPage$$=$editorUi$$.addRadiobox($div$jscomp$63_dlg$$,"pages",mxResources.get("currentPage",null,"Current Page"),!1),$selection$$=$editorUi$$.addRadiobox($div$jscomp$63_dlg$$,
"pages",mxResources.get("selectionOnly"),!1,$graph$$.isSelectionEmpty()),$crop$$=$editorUi$$.addCheckbox($div$jscomp$63_dlg$$,mxResources.get("crop"),!1,!0);mxEvent.addListener($allPages$$,"change",$cropEnableFn_hd$$);mxEvent.addListener($currentPage$$,"change",$cropEnableFn_hd$$);mxEvent.addListener($selection$$,"change",$cropEnableFn_hd$$);$currentPage$$=205}else $selection$$=$editorUi$$.addCheckbox($div$jscomp$63_dlg$$,mxResources.get("selectionOnly"),!1,$graph$$.isSelectionEmpty()),$crop$$=$editorUi$$.addCheckbox($div$jscomp$63_dlg$$,
mxResources.get("crop"),!$graph$$.pageVisible||!$editorUi$$.pdfPageExport,!$editorUi$$.pdfPageExport),$editorUi$$.pdfPageExport||mxEvent.addListener($selection$$,"change",$cropEnableFn_hd$$);$div$jscomp$63_dlg$$=new CustomDialog($editorUi$$,$div$jscomp$63_dlg$$,mxUtils.bind(this,function(){$editorUi$$.downloadFile("pdf",null,null,!$selection$$.checked,$noPages$$?!0:!$allPages$$.checked,!$crop$$.checked)}),null,mxResources.get("export"));$editorUi$$.showDialog($div$jscomp$63_dlg$$.container,300,$currentPage$$,
!0,!0)}}));$editorUi$$.actions.addAction("open...",function(){$editorUi$$.pickFile()});$editorUi$$.actions.addAction("close",function(){function $fn$$(){$editorUi$$.fileLoaded(null)}var $currentFile$$=$editorUi$$.getCurrentFile();null!=$currentFile$$&&$currentFile$$.isModified()?$editorUi$$.confirm(mxResources.get("allChangesLost"),null,$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):$fn$$()});$editorUi$$.actions.addAction("editShape...",mxUtils.bind(this,function(){$graph$$.getSelectionCells();
if(1==$graph$$.getSelectionCount()){var $cell$jscomp$28_dlg$$=$graph$$.getSelectionCell(),$state$$=$graph$$.view.getState($cell$jscomp$28_dlg$$);null!=$state$$&&null!=$state$$.shape&&null!=$state$$.shape.stencil&&($cell$jscomp$28_dlg$$=new EditShapeDialog($editorUi$$,$cell$jscomp$28_dlg$$,mxResources.get("editShape")+":",630,400),$editorUi$$.showDialog($cell$jscomp$28_dlg$$.container,640,480,!0,!1),$cell$jscomp$28_dlg$$.init())}}));$editorUi$$.actions.addAction("revisionHistory...",function(){$editorUi$$.isRevisionHistorySupported()?
$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.getRevisions(mxUtils.bind(this,function($revs$$,$restoreFn$$){$editorUi$$.spinner.stop();var $dlg$$=new RevisionDialog($editorUi$$,$revs$$,$restoreFn$$);$editorUi$$.showDialog($dlg$$.container,640,480,!0,!0);$dlg$$.init()}),mxUtils.bind(this,function($err$$){$editorUi$$.handleError($err$$)})):$editorUi$$.showError(mxResources.get("error"),mxResources.get("notAvailable"),mxResources.get("ok"))});$editorUi$$.actions.addAction("createRevision",
function(){$editorUi$$.actions.get("save").funct()},null,null,Editor.ctrlKey+"+S");if(!App.CSET){var $action$$=$editorUi$$.actions.addAction("synchronize",function(){$editorUi$$.synchronizeCurrentFile("none"===DrawioFile.SYNC)},null,null,"Alt+Shift+S");"none"===DrawioFile.SYNC&&($action$$.label=mxResources.get("refresh"))}$editorUi$$.actions.addAction("upload...",function(){var $file$jscomp$131_filename$$=$editorUi$$.getCurrentFile();null!=$file$jscomp$131_filename$$&&(window.drawdata=$editorUi$$.getFileData(),
$file$jscomp$131_filename$$=null!=$file$jscomp$131_filename$$.getTitle()?$file$jscomp$131_filename$$.getTitle():$editorUi$$.defaultFilename,$editorUi$$.openLink(window.location.protocol+"//"+window.location.host+"/?create=drawdata&"+($editorUi$$.mode==App.MODE_DROPBOX?"mode=dropbox&":"")+"title="+encodeURIComponent($file$jscomp$131_filename$$),null,!0))});"undefined"!==typeof MathJax&&($action$$=$editorUi$$.actions.addAction("mathematicalTypesetting",function(){var $change$$=new ChangePageSetup($editorUi$$);
$change$$.ignoreColor=!0;$change$$.ignoreImage=!0;$change$$.mathEnabled=!$editorUi$$.isMathEnabled();$graph$$.model.execute($change$$)}),$action$$.setToggleAction(!0),$action$$.setSelectedCallback(function(){return $editorUi$$.isMathEnabled()}),$action$$.isEnabled=$isGraphEnabled$$);if(isLocalStorage||mxClient.IS_CHROMEAPP)$action$$=$editorUi$$.actions.addAction("showStartScreen",function(){mxSettings.setShowStartScreen(!mxSettings.getShowStartScreen());mxSettings.save()}),$action$$.setToggleAction(!0),
$action$$.setSelectedCallback(function(){return mxSettings.getShowStartScreen()});var $autosaveAction$$=$editorUi$$.actions.addAction("autosave",function(){$editorUi$$.editor.setAutosave(!$editorUi$$.editor.autosave)});$autosaveAction$$.setToggleAction(!0);$autosaveAction$$.setSelectedCallback(function(){return $autosaveAction$$.isEnabled()&&$editorUi$$.editor.autosave});$editorUi$$.actions.addAction("editGeometry...",function(){for(var $cells$jscomp$32_dlg$$=$graph$$.getSelectionCells(),$vertices$$=
[],$i$$=0;$i$$<$cells$jscomp$32_dlg$$.length;$i$$++)$graph$$.getModel().isVertex($cells$jscomp$32_dlg$$[$i$$])&&$vertices$$.push($cells$jscomp$32_dlg$$[$i$$]);0<$vertices$$.length&&($cells$jscomp$32_dlg$$=new EditGeometryDialog($editorUi$$,$vertices$$),$editorUi$$.showDialog($cells$jscomp$32_dlg$$.container,200,250,!0,!0),$cells$jscomp$32_dlg$$.init())},null,null,Editor.ctrlKey+"+Shift+M");var $copiedStyles$$="rounded shadow dashed dashPattern fontFamily fontSize fontColor fontStyle align verticalAlign strokeColor strokeWidth fillColor gradientColor swimlaneFillColor textOpacity gradientDirection glass labelBackgroundColor labelBorderColor opacity spacing spacingTop spacingLeft spacingBottom spacingRight endFill endArrow endSize targetPerimeterSpacing startFill startArrow startSize sourcePerimeterSpacing arcSize".split(" ");
$editorUi$$.actions.addAction("copyStyle",function(){var $cellStyle_state$jscomp$16_tokens$$=$graph$$.view.getState($graph$$.getSelectionCell());if($graph$$.isEnabled()&&null!=$cellStyle_state$jscomp$16_tokens$$){$editorUi$$.copiedStyle=mxUtils.clone($cellStyle_state$jscomp$16_tokens$$.style);for(var $cellStyle_state$jscomp$16_tokens$$=$graph$$.getModel().getStyle($cellStyle_state$jscomp$16_tokens$$.cell),$cellStyle_state$jscomp$16_tokens$$=null!=$cellStyle_state$jscomp$16_tokens$$?$cellStyle_state$jscomp$16_tokens$$.split(";"):
[],$j$$=0;$j$$<$cellStyle_state$jscomp$16_tokens$$.length;$j$$++){var $tmp$jscomp$32_value$$=$cellStyle_state$jscomp$16_tokens$$[$j$$],$pos$$=$tmp$jscomp$32_value$$.indexOf("=");if(0<=$pos$$){var $key$$=$tmp$jscomp$32_value$$.substring(0,$pos$$),$tmp$jscomp$32_value$$=$tmp$jscomp$32_value$$.substring($pos$$+1);null==$editorUi$$.copiedStyle[$key$$]&&"none"==$tmp$jscomp$32_value$$&&($editorUi$$.copiedStyle[$key$$]="none")}}}},null,null,Editor.ctrlKey+"+Shift+C");$editorUi$$.actions.addAction("pasteStyle",
function(){if($graph$$.isEnabled()&&!$graph$$.isSelectionEmpty()&&null!=$editorUi$$.copiedStyle){$graph$$.getModel().beginUpdate();try{for(var $cells$$=$graph$$.getSelectionCells(),$i$$=0;$i$$<$cells$$.length;$i$$++)for(var $state$$=$graph$$.view.getState($cells$$[$i$$]),$j$$=0;$j$$<$copiedStyles$$.length;$j$$++){var $key$$=$copiedStyles$$[$j$$],$value$$=$editorUi$$.copiedStyle[$key$$];$state$$.style[$key$$]!=$value$$&&$graph$$.setCellStyles($key$$,$value$$,[$cells$$[$i$$]])}}finally{$graph$$.getModel().endUpdate()}}},
null,null,Editor.ctrlKey+"+Shift+V");$editorUi$$.actions.put("pageBackgroundImage",new Action(mxResources.get("backgroundImage")+"...",function(){if(!$editorUi$$.isOffline()){var $dlg$$=new BackgroundImageDialog($editorUi$$,function($image$$){$editorUi$$.setBackgroundImage($image$$)});$editorUi$$.showDialog($dlg$$.container,320,170,!0,!0);$dlg$$.init()}}));$editorUi$$.actions.put("exportPng",new Action(mxResources.get("formatPng")+"...",function(){$editorUi$$.isExportToCanvas()?$editorUi$$.showExportDialog(mxResources.get("image"),
!1,mxResources.get("export"),"https://support.draw.io/display/DO/Exporting+Files",mxUtils.bind(this,function($scale$jscomp$15_val$$,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,$cropImage$$,$currentPage$$){$scale$jscomp$15_val$$=parseInt($scale$jscomp$15_val$$);!isNaN($scale$jscomp$15_val$$)&&0<$scale$jscomp$15_val$$&&$editorUi$$.exportImage($scale$jscomp$15_val$$/100,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$border$$,!$cropImage$$,
$currentPage$$)}),!0,!0,"png"):$editorUi$$.isOffline()||mxClient.IS_IOS&&navigator.standalone||$editorUi$$.showRemoteExportDialog(mxResources.get("export"),null,mxUtils.bind(this,function($ignoreSelection$$,$editable$$,$transparent$$){$editorUi$$.downloadFile($editable$$?"xmlpng":"png",null,null,$ignoreSelection$$,null,null,$transparent$$)}))}));$editorUi$$.actions.put("exportJpg",new Action(mxResources.get("formatJpg")+"...",function(){$editorUi$$.isExportToCanvas()?$editorUi$$.showExportDialog(mxResources.get("image"),
!1,mxResources.get("export"),"https://support.draw.io/display/DO/Exporting+Files",mxUtils.bind(this,function($scale$jscomp$16_val$$,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,$cropImage$$,$currentPage$$){$scale$jscomp$16_val$$=parseInt($scale$jscomp$16_val$$);!isNaN($scale$jscomp$16_val$$)&&0<$scale$jscomp$16_val$$&&$editorUi$$.exportImage($scale$jscomp$16_val$$/100,!1,$ignoreSelection$$,$addShadow$$,!1,$border$$,!$cropImage$$,!1,"jpeg")}),!0,!1,
"jpeg"):$editorUi$$.isOffline()||mxClient.IS_IOS&&navigator.standalone||$editorUi$$.showRemoteExportDialog(mxResources.get("export"),null,mxUtils.bind(this,function($ignoreSelection$$,$editable$$){$editorUi$$.downloadFile("jpeg",null,null,$ignoreSelection$$)}),!0)}));$action$$=$editorUi$$.actions.put("shadowVisible",new Action(mxResources.get("shadow"),function(){$graph$$.setShadowVisible(!$graph$$.shadowVisible)}));$action$$.setToggleAction(!0);$action$$.setSelectedCallback(function(){return $graph$$.shadowVisible});
$editorUi$$.actions.addAction("userManual...",function(){$editorUi$$.openLink("../../../../Documents/htmlhelp/diagram_screen.htm?ms=AAAA&st=MA%3D%3D&sct=MTQwMA%3D%3D&mw=NTEx")});$editorUi$$.actions.addAction("exportOptionsDisabled...",function(){$editorUi$$.handleError({message:mxResources.get("exportOptionsDisabledDetails")},mxResources.get("exportOptionsDisabled"))});$editorUi$$.actions.addAction("keyboardShortcuts...",function(){mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?$editorUi$$.openLink("https://www.draw.io/shortcuts.svg"):
mxClient.IS_SVG?$editorUi$$.openLink("shortcuts.svg"):$editorUi$$.openLink("https://www.draw.io/?lightbox=1#Uhttps%3A%2F%2Fwww.draw.io%2Fshortcuts.svg")});App.CSET||($action$$=$editorUi$$.actions.addAction("tags...",mxUtils.bind(this,function(){this.tagsWindow?this.tagsWindow.window.setVisible(!this.tagsWindow.window.isVisible()):(this.tagsWindow=new TagsWindow($editorUi$$,document.body.offsetWidth-380,230,300,120),this.tagsWindow.window.addListener("show",function(){$editorUi$$.fireEvent(new mxEventObject("tags"))}),
this.tagsWindow.window.addListener("hide",function(){$editorUi$$.fireEvent(new mxEventObject("tags"))}),this.tagsWindow.window.setVisible(!0),$editorUi$$.fireEvent(new mxEventObject("tags")))})),$action$$.setToggleAction(!0),$action$$.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.tagsWindow&&this.tagsWindow.window.isVisible()})));$action$$=$editorUi$$.actions.addAction("find...",mxUtils.bind(this,function(){null==this.findWindow?(this.findWindow=new FindWindow($editorUi$$,document.body.offsetWidth-
300,110,240,140),this.findWindow.window.addListener("show",function(){$editorUi$$.fireEvent(new mxEventObject("find"))}),this.findWindow.window.addListener("hide",function(){$editorUi$$.fireEvent(new mxEventObject("find"))}),this.findWindow.window.setVisible(!0),$editorUi$$.fireEvent(new mxEventObject("find"))):this.findWindow.window.setVisible(!this.findWindow.window.isVisible())}));$action$$.setToggleAction(!0);$action$$.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.findWindow&&
this.findWindow.window.isVisible()}));$editorUi$$.actions.put("exportVsdx",new Action(mxResources.get("formatVsdx")+" (beta)...",function(){$editorUi$$.exportVisio()}));if(mxClient.IS_CHROMEAPP||isLocalStorage&&"1"!=urlParams.offline){this.put("language",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){var $addLangItem$$=mxUtils.bind(this,function($id$$){var $lang$$=""==$id$$?mxResources.get("automatic"):mxLanguageMap[$id$$],$item$$=null;""!=$lang$$&&($item$$=$menu$$.addItem($lang$$,null,mxUtils.bind(this,
function(){mxSettings.setLanguage($id$$);mxSettings.save();mxClient.language=$id$$;mxResources.loadDefaultBundle=!1;mxResources.add(RESOURCE_BASE);$editorUi$$.alert(mxResources.get("restartForChangeRequired"))}),$parent$$),($id$$==mxLanguage||""==$id$$&&null==mxLanguage)&&$menu$$.addCheckmark($item$$,Editor.checkmarkImage));return $item$$});$addLangItem$$("");$menu$$.addSeparator($parent$$);for(var $langId$$ in mxLanguageMap)$addLangItem$$($langId$$)})));var $menusCreateMenuBar$$=Menus.prototype.createMenubar;
Menus.prototype.createMenubar=function $Menus$$createMenubar$($container$$){var $menubar$$=$menusCreateMenuBar$$.apply(this,arguments);if(null!=$menubar$$){var $elt$jscomp$18_langMenu$$=this.get("language");if(null!=$elt$jscomp$18_langMenu$$){$elt$jscomp$18_langMenu$$=$menubar$$.addMenu("",$elt$jscomp$18_langMenu$$.funct);$elt$jscomp$18_langMenu$$.setAttribute("title",mxResources.get("language"));$elt$jscomp$18_langMenu$$.style.width="16px";$elt$jscomp$18_langMenu$$.style.paddingTop="2px";$elt$jscomp$18_langMenu$$.style.paddingLeft=
"4px";$elt$jscomp$18_langMenu$$.style.zIndex="1";$elt$jscomp$18_langMenu$$.style.position="absolute";$elt$jscomp$18_langMenu$$.style.display="block";$elt$jscomp$18_langMenu$$.style.cursor="pointer";$elt$jscomp$18_langMenu$$.style.right="17px";"atlas"==uiTheme?($elt$jscomp$18_langMenu$$.style.top="6px",$elt$jscomp$18_langMenu$$.style.right="15px"):$elt$jscomp$18_langMenu$$.style.top="min"==uiTheme?"2px":"0px";if(mxClient.IS_VML)$elt$jscomp$18_langMenu$$.innerHTML='<div class="geIcon geSprite geSprite-globe"/>';
else{var $icon$$=document.createElement("div");$icon$$.style.backgroundImage="url("+Editor.globeImage+")";$icon$$.style.backgroundPosition="center center";$icon$$.style.backgroundRepeat="no-repeat";$icon$$.style.backgroundSize="19px 19px";$icon$$.style.position="absolute";$icon$$.style.height="19px";$icon$$.style.width="19px";$icon$$.style.marginTop="2px";$icon$$.style.zIndex="1";$elt$jscomp$18_langMenu$$.appendChild($icon$$);mxUtils.setOpacity($elt$jscomp$18_langMenu$$,40);if("atlas"==uiTheme||"dark"==
uiTheme)$elt$jscomp$18_langMenu$$.style.opacity="0.85",$elt$jscomp$18_langMenu$$.style.filter="invert(100%)"}document.body.appendChild($elt$jscomp$18_langMenu$$)}}return $menubar$$}}$editorUi$$.customLayoutConfig=[{layout:"mxHierarchicalLayout",config:{orientation:"west",intraCellSpacing:30,interRankCellSpacing:100,interHierarchySpacing:60,parallelEdgeSpacing:10}}];$editorUi$$.actions.addAction("runLayout",function(){var $dlg$$=new TextareaDialog($editorUi$$,"Run Layouts:",JSON.stringify($editorUi$$.customLayoutConfig,
null,2),function($newValue$$){if(0<$newValue$$.length)try{var $layoutList$$=JSON.parse($newValue$$);$editorUi$$.executeLayoutList($layoutList$$);$editorUi$$.customLayoutConfig=$layoutList$$}catch($e$$){$editorUi$$.handleError($e$$),console.error($e$$)}});$dlg$$.textarea.style.width="600px";$dlg$$.textarea.style.height="380px";$editorUi$$.showDialog($dlg$$.container,620,460,!0,!0);$dlg$$.init()});var $layoutMenu$$=this.get("layout"),$layoutMenuFunct$$=$layoutMenu$$.funct;$layoutMenu$$.funct=function $$layoutMenu$$$funct$($menu$$,
$parent$$){$layoutMenuFunct$$.apply(this,arguments);$menu$$.addSeparator($parent$$);$editorUi$$.menus.addMenuItem($menu$$,"runLayout",$parent$$,null,null,mxResources.get("apply")+"...")};this.put("help",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){if(mxClient.IS_CHROMEAPP||!$editorUi$$.isOffline())this.addMenuItems($menu$$,["-","quickStart","userManual","keyboardShortcuts","-"],$parent$$),mxClient.IS_CHROMEAPP||this.addMenuItems($menu$$,["feedback"],$parent$$),this.addMenuItems($menu$$,
["support","-"],$parent$$),this.addMenuItems($menu$$,["-"],$parent$$);"1"==urlParams.test&&($menu$$.addSeparator($parent$$),this.addSubmenu("testDevelop",$menu$$,$parent$$));"1"==urlParams.ruler&&(mxResources.parse("rulerInch=Ruler unit: Inches"),$editorUi$$.actions.addAction("rulerInch",mxUtils.bind(this,function(){$editorUi$$.vRuler.setUnit(mxRuler.prototype.INCHES);$editorUi$$.hRuler.setUnit(mxRuler.prototype.INCHES);$editorUi$$.vRuler.drawRuler(!0);$editorUi$$.hRuler.drawRuler(!0)})),mxResources.parse("rulerCM=Ruler unit: CMs"),
$editorUi$$.actions.addAction("rulerCM",mxUtils.bind(this,function(){$editorUi$$.vRuler.setUnit(mxRuler.prototype.CENTIMETER);$editorUi$$.hRuler.setUnit(mxRuler.prototype.CENTIMETER);$editorUi$$.vRuler.drawRuler(!0);$editorUi$$.hRuler.drawRuler(!0)})),mxResources.parse("rulerPixel=Ruler unit: Pixels"),$editorUi$$.actions.addAction("rulerPixel",mxUtils.bind(this,function(){$editorUi$$.vRuler.setUnit(mxRuler.prototype.PIXELS);$editorUi$$.hRuler.setUnit(mxRuler.prototype.PIXELS);$editorUi$$.vRuler.drawRuler(!0);
$editorUi$$.hRuler.drawRuler(!0)})),this.addMenuItems($menu$$,["-","rulerInch","rulerCM","rulerPixel"],$parent$$))})));"1"==urlParams.test&&(mxResources.parse("testDevelop=Develop"),mxResources.parse("showBoundingBox=Show bounding box"),mxResources.parse("createSidebarEntry=Create Sidebar Entry"),mxResources.parse("testCheckFile=Check File"),mxResources.parse("testDiff=Diff"),mxResources.parse("testInspect=Inspect"),mxResources.parse("testShowConsole=Show Console"),mxResources.parse("testXmlImageExport=XML Image Export"),
mxResources.parse("testDownloadRtModel=Export RT model"),mxResources.parse("testImportRtModel=Import RT model"),$editorUi$$.actions.addAction("createSidebarEntry",mxUtils.bind(this,function(){$graph$$.isSelectionEmpty()||$editorUi$$.showTextDialog("Create Sidebar Entry","sb.createVertexTemplateFromData('"+Graph.compress(mxUtils.getXml($graph$$.encodeCells($graph$$.getSelectionCells())))+"', width, height, 'Title');")})),$editorUi$$.actions.addAction("showBoundingBox",mxUtils.bind(this,function(){var $b$$=
$graph$$.getGraphBounds(),$tr$$=$graph$$.view.translate,$s$$=$graph$$.view.scale;$graph$$.insertVertex($graph$$.getDefaultParent(),null,"",$b$$.x/$s$$-$tr$$.x,$b$$.y/$s$$-$tr$$.y,$b$$.width/$s$$,$b$$.height/$s$$,"fillColor=none;strokeColor=red;")})),$editorUi$$.actions.addAction("testCheckFile",mxUtils.bind(this,function(){var $dlg$jscomp$49_xml$$=null!=$editorUi$$.pages&&null!=$editorUi$$.getCurrentFile()?$editorUi$$.getCurrentFile().getAnonymizedXmlForPages($editorUi$$.pages):"",$dlg$jscomp$49_xml$$=
new TextareaDialog($editorUi$$,"Paste Data:",$dlg$jscomp$49_xml$$,function($i$jscomp$153_newValue$$){if(0<$i$jscomp$153_newValue$$.length)try{var $checkModel$$=function $$checkModel$$$($allIds_node$$){function $visit$$($id$$){if(null==$visited$$[$id$$]){if($visited$$[$id$$]=!0,null!=$childs$$[$id$$]){for(;0<$childs$$[$id$$].length;){var $temp$$=$childs$$[$id$$].pop();$visit$$($temp$$)}delete $childs$$[$id$$]}}else mxLog.debug($pageId$$+": Visited: "+$id$$)}var $pageId$$=$allIds_node$$.parentNode.id,
$all_log$$=$allIds_node$$.childNodes;$allIds_node$$={};for(var $childs$$={},$root$$=null,$dups$$={},$i$$=0;$i$$<$all_log$$.length;$i$$++){var $el$$=$all_log$$[$i$$];if(null!=$el$$.id&&0<$el$$.id.length)if(null==$allIds_node$$[$el$$.id]){$allIds_node$$[$el$$.id]=$el$$.id;var $pid$$=$el$$.getAttribute("parent");null==$pid$$?null!=$root$$?mxLog.debug($pageId$$+": Multiple roots: "+$el$$.id):$root$$=$el$$.id:(null==$childs$$[$pid$$]&&($childs$$[$pid$$]=[]),$childs$$[$pid$$].push($el$$.id))}else $dups$$[$el$$.id]=
$el$$.id}0<Object.keys($dups$$).length?($all_log$$=$pageId$$+": "+Object.keys($dups$$).length+" Duplicates: "+Object.keys($dups$$).join(", "),mxLog.debug($all_log$$+" (see console)")):mxLog.debug($pageId$$+": Checked");var $visited$$={};null==$root$$?mxLog.debug($pageId$$+": No root"):($visit$$($root$$),Object.keys($visited$$).length!=Object.keys($allIds_node$$).length&&(mxLog.debug($pageId$$+": Invalid tree: (see console)"),console.log($pageId$$+": Invalid tree",$childs$$)))};"<"!=$i$jscomp$153_newValue$$.charAt(0)&&
($i$jscomp$153_newValue$$=Graph.decompress($i$jscomp$153_newValue$$),mxLog.debug("See console for uncompressed XML"),console.log("xml",$i$jscomp$153_newValue$$));var $doc$$=mxUtils.parseXml($i$jscomp$153_newValue$$),$pages$$=$editorUi$$.getPagesForNode($doc$$.documentElement,"mxGraphModel");if(null!=$pages$$&&0<$pages$$.length)try{var $checksum$$=$editorUi$$.getHashValueForPages($pages$$);mxLog.debug("Checksum: ",$checksum$$)}catch($e$$){mxLog.debug("Error: ",$e$$.message)}else mxLog.debug("No pages found for checksum");
var $roots$$=$doc$$.getElementsByTagName("root");for($i$jscomp$153_newValue$$=0;$i$jscomp$153_newValue$$<$roots$$.length;$i$jscomp$153_newValue$$++)$checkModel$$($roots$$[$i$jscomp$153_newValue$$]);mxLog.show()}catch($e$67$$){$editorUi$$.handleError($e$67$$),console.error($e$67$$)}});$dlg$jscomp$49_xml$$.textarea.style.width="600px";$dlg$jscomp$49_xml$$.textarea.style.height="380px";$editorUi$$.showDialog($dlg$jscomp$49_xml$$.container,620,460,!0,!0);$dlg$jscomp$49_xml$$.init()})),$editorUi$$.actions.addAction("testDiff",
mxUtils.bind(this,function(){if(null!=$editorUi$$.pages){var $dlg$$=new TextareaDialog($editorUi$$,"Paste Data:","",function($newValue$$){if(0<$newValue$$.length)try{console.log(JSON.stringify($editorUi$$.diffPages($editorUi$$.pages,$editorUi$$.getPagesForNode(mxUtils.parseXml($newValue$$).documentElement)),null,2))}catch($e$$){$editorUi$$.handleError($e$$),console.error($e$$)}});$dlg$$.textarea.style.width="600px";$dlg$$.textarea.style.height="380px";$editorUi$$.showDialog($dlg$$.container,620,460,
!0,!0);$dlg$$.init()}else $editorUi$$.alert("No pages")})),$editorUi$$.actions.addAction("testInspect",mxUtils.bind(this,function(){console.log($editorUi$$,$graph$$.getModel())})),$editorUi$$.actions.addAction("testXmlImageExport",mxUtils.bind(this,function(){var $imgExport$$=new mxImageExport,$bounds$$=$graph$$.getGraphBounds(),$vs$$=$graph$$.view.scale,$xmlCanvas_xmlDoc$$=mxUtils.createXmlDocument(),$root$$=$xmlCanvas_xmlDoc$$.createElement("output");$xmlCanvas_xmlDoc$$.appendChild($root$$);$xmlCanvas_xmlDoc$$=
new mxXmlCanvas2D($root$$);$xmlCanvas_xmlDoc$$.translate(Math.floor((1-$bounds$$.x)/$vs$$),Math.floor((1-$bounds$$.y)/$vs$$));$xmlCanvas_xmlDoc$$.scale(1/$vs$$);var $stateCounter$$=0,$canvasSave$$=$xmlCanvas_xmlDoc$$.save;$xmlCanvas_xmlDoc$$.save=function $$xmlCanvas_xmlDoc$$$save$(){$stateCounter$$++;$canvasSave$$.apply(this,arguments)};var $canvasRestore$$=$xmlCanvas_xmlDoc$$.restore;$xmlCanvas_xmlDoc$$.restore=function $$xmlCanvas_xmlDoc$$$restore$(){$stateCounter$$--;$canvasRestore$$.apply(this,
arguments)};var $exportDrawShape$$=$imgExport$$.drawShape;$imgExport$$.drawShape=function $$imgExport$$$drawShape$($state$$){mxLog.debug("entering shape",$state$$,$stateCounter$$);$exportDrawShape$$.apply(this,arguments);mxLog.debug("leaving shape",$state$$,$stateCounter$$)};$imgExport$$.drawState($graph$$.getView().getState($graph$$.model.root),$xmlCanvas_xmlDoc$$);mxLog.show();mxLog.debug(mxUtils.getXml($root$$));mxLog.debug("stateCounter",$stateCounter$$)})),$editorUi$$.actions.addAction("testDownloadRtModel...",
mxUtils.bind(this,function(){null==$editorUi$$.drive?$editorUi$$.handleError({message:mxResources.get("serviceUnavailableOrBlocked")}):$editorUi$$.drive.execute(mxUtils.bind(this,function(){var $fileId$$=prompt("File ID","");if(null!=$fileId$$&&0<$fileId$$.length&&$editorUi$$.spinner.spin(document.body,mxResources.get("export"))){var $req$jscomp$0$$=new mxXmlRequest("https://www.googleapis.com/drive/v2/files/"+$fileId$$+"/realtime?supportsTeamDrives=true",null,"GET");$req$jscomp$0$$.setRequestHeaders=
function $$req$jscomp$0$$$setRequestHeaders$($request$$){mxXmlRequest.prototype.setRequestHeaders.apply(this,arguments);var $token$$=gapi.auth.getToken().access_token;$request$$.setRequestHeader("authorization","Bearer "+$token$$)};$req$jscomp$0$$.send(function($req$$){$editorUi$$.spinner.stop();200<=$req$$.getStatus()&&299>=$req$$.getStatus()?$editorUi$$.saveLocalFile($req$$.getText(),"json-"+$fileId$$+".txt","text/plain"):$editorUi$$.handleError({message:mxResources.get("fileNotFound")},mxResources.get("errorLoadingFile"))})}}))})),
$editorUi$$.actions.addAction("testShowConsole",function(){mxLog.isVisible()?mxLog.window.fit():mxLog.show();mxLog.window.div.style.zIndex=mxPopupMenu.prototype.zIndex-1}),this.put("testDevelop",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){this.addMenuItems($menu$$,"createSidebarEntry showBoundingBox - testCheckFile testDiff - testInspect - testXmlImageExport - testDownloadRtModel".split(" "),$parent$$);$menu$$.addItem(mxResources.get("testImportRtModel")+"...",null,function(){var $input$$=
document.createElement("input");$input$$.setAttribute("type","file");mxEvent.addListener($input$$,"change",mxUtils.bind(this,function(){if(null!=$input$$.files){var $reader$$=new FileReader;$reader$$.onload=mxUtils.bind(this,function($e$$){try{$editorUi$$.openLocalFile(mxUtils.getXml($editorUi$$.drive.convertJsonToXml(JSON.parse($e$$.target.result).data)),$input$$.files[0].name,!0)}catch($err$$){$editorUi$$.handleError($err$$,mxResources.get("errorLoadingFile"))}});$reader$$.readAsText($input$$.files[0])}}));
$input$$.click()},$parent$$);this.addMenuItems($menu$$,["-","testShowConsole"],$parent$$)}))));$editorUi$$.actions.addAction("shapes...",function(){mxClient.IS_CHROMEAPP||!$editorUi$$.isOffline()?$editorUi$$.showDialog((new MoreShapesDialog($editorUi$$,!0)).container,640,isLocalStorage?mxClient.IS_IOS?480:460:440,!0,!0):$editorUi$$.showDialog((new MoreShapesDialog($editorUi$$,!1)).container,360,isLocalStorage?mxClient.IS_IOS?300:280:260,!0,!0)});$editorUi$$.actions.addAction("createShape...",function(){$editorUi$$.getCurrentFile();
if($graph$$.isEnabled()){var $cell$jscomp$29_dlg$$=new mxCell("",new mxGeometry(0,0,120,120),$editorUi$$.defaultCustomShapeStyle);$cell$jscomp$29_dlg$$.vertex=!0;$cell$jscomp$29_dlg$$=new EditShapeDialog($editorUi$$,$cell$jscomp$29_dlg$$,mxResources.get("editShape")+":",630,400);$editorUi$$.showDialog($cell$jscomp$29_dlg$$.container,640,480,!0,!1);$cell$jscomp$29_dlg$$.init()}});$editorUi$$.actions.put("embedHtml",new Action(mxResources.get("html")+"...",function(){$editorUi$$.spinner.spin(document.body,
mxResources.get("loading"))&&$editorUi$$.getPublicUrl($editorUi$$.getCurrentFile(),function($url$$){$editorUi$$.spinner.stop();$editorUi$$.showHtmlDialog(mxResources.get("create"),"https://desk.draw.io/support/solutions/articles/16000042542",$url$$,function($publicUrl$$,$zoomEnabled$$,$initialZoom$$,$linkTarget$$,$linkColor$$,$fit$$,$allPages$$,$layers$$,$lightbox$$,$editLink$$){$editorUi$$.createHtml($publicUrl$$,$zoomEnabled$$,$initialZoom$$,$linkTarget$$,$linkColor$$,$fit$$,$allPages$$,$layers$$,
$lightbox$$,$editLink$$,mxUtils.bind(this,function($html$$,$scriptTag$$){var $dlg$$=new EmbedDialog($editorUi$$,$html$$+"\n"+$scriptTag$$,null,null,function(){var $wnd$$=window.open(),$doc$$=$wnd$$.document;if(null!=$doc$$){"CSS1Compat"===document.compatMode&&$doc$$.writeln("<!DOCTYPE html>");$doc$$.writeln("<html>");$doc$$.writeln("<head><title>"+encodeURIComponent(mxResources.get("preview"))+'</title><meta charset="utf-8"></head>');$doc$$.writeln("<body>");$doc$$.writeln($html$$);var $direct$jscomp$3_img$$=
mxClient.IS_IE||mxClient.IS_EDGE||null!=document.documentMode;$direct$jscomp$3_img$$&&$doc$$.writeln($scriptTag$$);$doc$$.writeln("</body>");$doc$$.writeln("</html>");$doc$$.close();if(!$direct$jscomp$3_img$$){var $info$$=$wnd$$.document.createElement("div");$info$$.marginLeft="26px";$info$$.marginTop="26px";mxUtils.write($info$$,mxResources.get("updatingDocument"));$direct$jscomp$3_img$$=$wnd$$.document.createElement("img");$direct$jscomp$3_img$$.setAttribute("src",window.location.protocol+"//"+
window.location.hostname+"/"+IMAGE_PATH+"/spin.gif");$direct$jscomp$3_img$$.style.marginLeft="6px";$info$$.appendChild($direct$jscomp$3_img$$);$wnd$$.document.body.insertBefore($info$$,$wnd$$.document.body.firstChild);window.setTimeout(function(){var $script$$=document.createElement("script");$script$$.type="text/javascript";$script$$.src=/<script.*?src="(.*?)"/.exec($scriptTag$$)[1];$doc$$.body.appendChild($script$$);$info$$.parentNode.removeChild($info$$)},20)}}else $editorUi$$.handleError({message:mxResources.get("errorUpdatingPreview")})});
$editorUi$$.showDialog($dlg$$.container,440,240,!0,!0);$dlg$$.init()}))})})}));$editorUi$$.actions.put("liveImage",new Action("Live image...",function(){var $current$$=$editorUi$$.getCurrentFile();null!=$current$$&&$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.getPublicUrl($editorUi$$.getCurrentFile(),function($dlg$jscomp$53_url$$){$editorUi$$.spinner.stop();null!=$dlg$jscomp$53_url$$?($dlg$jscomp$53_url$$=new EmbedDialog($editorUi$$,'<img src="'+($current$$.constructor!=
DriveFile?$dlg$jscomp$53_url$$:"https://drive.google.com/uc?id="+$current$$.getId())+'"/>'),$editorUi$$.showDialog($dlg$jscomp$53_url$$.container,440,240,!0,!0),$dlg$jscomp$53_url$$.init()):$editorUi$$.handleError({message:mxResources.get("invalidPublicUrl")})})}));$editorUi$$.actions.put("embedImage",new Action(mxResources.get("image")+"...",function(){$editorUi$$.showEmbedImageDialog(function($fit$$,$shadow$$,$retina$$,$lightbox$$,$editLink$$,$layers$$){$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&
$editorUi$$.createEmbedImage($fit$$,$shadow$$,$retina$$,$lightbox$$,$editLink$$,$layers$$,function($dlg$jscomp$54_result$$){$editorUi$$.spinner.stop();$dlg$jscomp$54_result$$=new EmbedDialog($editorUi$$,$dlg$jscomp$54_result$$);$editorUi$$.showDialog($dlg$jscomp$54_result$$.container,440,240,!0,!0);$dlg$jscomp$54_result$$.init()},function($err$$){$editorUi$$.spinner.stop();$editorUi$$.handleError($err$$)})},mxResources.get("image"),mxResources.get("retina"),$editorUi$$.isExportToCanvas())}));$editorUi$$.actions.put("embedSvg",
new Action(mxResources.get("formatSvg")+"...",function(){$editorUi$$.showEmbedImageDialog(function($fit$$,$shadow$$,$image$$,$lightbox$$,$editLink$$,$layers$$){$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.createEmbedSvg($fit$$,$shadow$$,$image$$,$lightbox$$,$editLink$$,$layers$$,function($dlg$jscomp$55_result$$){$editorUi$$.spinner.stop();$dlg$jscomp$55_result$$=new EmbedDialog($editorUi$$,$dlg$jscomp$55_result$$);$editorUi$$.showDialog($dlg$jscomp$55_result$$.container,
440,240,!0,!0);$dlg$jscomp$55_result$$.init()},function($err$$){$editorUi$$.spinner.stop();$editorUi$$.handleError($err$$)})},mxResources.get("formatSvg"),mxResources.get("image"),!0,"https://desk.draw.io/support/solutions/articles/16000042548")}));$editorUi$$.actions.put("embedIframe",new Action(mxResources.get("iframe")+"...",function(){var $bounds$$=$graph$$.getGraphBounds();$editorUi$$.showPublishLinkDialog(mxResources.get("iframe"),null,"100%",Math.ceil(($bounds$$.y+$bounds$$.height-$graph$$.view.translate.y)/
$graph$$.view.scale)+2,function($linkTarget$$,$linkColor$$,$allPages$$,$lightbox$$,$editLink$$,$layers$$,$width$$,$height$$){$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.getPublicUrl($editorUi$$.getCurrentFile(),function($dlg$jscomp$56_url$$){$editorUi$$.spinner.stop();$dlg$jscomp$56_url$$=new EmbedDialog($editorUi$$,'<iframe frameborder="0" style="width:'+$width$$+";height:"+$height$$+';" src="'+$editorUi$$.createLink($linkTarget$$,$linkColor$$,$allPages$$,$lightbox$$,
$editLink$$,$layers$$,$dlg$jscomp$56_url$$)+'"></iframe>');$editorUi$$.showDialog($dlg$jscomp$56_url$$.container,440,240,!0,!0);$dlg$jscomp$56_url$$.init()})},!0)}));$editorUi$$.actions.put("publishLink",new Action(mxResources.get("link")+"...",function(){$editorUi$$.showPublishLinkDialog(null,null,null,null,function($linkTarget$$,$linkColor$$,$allPages$$,$lightbox$$,$editLink$$,$layers$$){$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.getPublicUrl($editorUi$$.getCurrentFile(),
function($dlg$jscomp$57_url$$){$editorUi$$.spinner.stop();$dlg$jscomp$57_url$$=new EmbedDialog($editorUi$$,$editorUi$$.createLink($linkTarget$$,$linkColor$$,$allPages$$,$lightbox$$,$editLink$$,$layers$$,$dlg$jscomp$57_url$$));$editorUi$$.showDialog($dlg$jscomp$57_url$$.container,440,240,!0,!0);$dlg$jscomp$57_url$$.init()})})}));$editorUi$$.actions.addAction("googleDocs...",function(){$editorUi$$.openLink("http://docsaddon.draw.io")});$editorUi$$.actions.addAction("googleSlides...",function(){$editorUi$$.openLink("https://slidesaddon.draw.io")});
$editorUi$$.actions.addAction("googleSites...",function(){$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))&&$editorUi$$.getPublicUrl($editorUi$$.getCurrentFile(),function($dlg$jscomp$58_url$$){$editorUi$$.spinner.stop();$dlg$jscomp$58_url$$=new GoogleSitesDialog($editorUi$$,$dlg$jscomp$58_url$$);$editorUi$$.showDialog($dlg$jscomp$58_url$$.container,420,256,!0,!0);$dlg$jscomp$58_url$$.init()})});if(isLocalStorage||mxClient.IS_CHROMEAPP)$action$$=$editorUi$$.actions.addAction("scratchpad",
function(){$editorUi$$.toggleScratchpad()}),$action$$.setToggleAction(!0),$action$$.setSelectedCallback(function(){return null!=$editorUi$$.scratchpad}),$editorUi$$.actions.addAction("plugins...",function(){$editorUi$$.showDialog((new PluginsDialog($editorUi$$)).container,360,170,!0,!1)});$action$$.setToggleAction(!0);"1"==urlParams.embed&&($editorUi$$.actions.get("save").funct=function $$editorUi$$$actions$get$funct$($exit$$){$graph$$.isEditing()&&$graph$$.stopEditing();var $data$$="0"!=urlParams.pages||
null!=$editorUi$$.pages&&1<$editorUi$$.pages.length?$editorUi$$.getFileData(!0):mxUtils.getXml($editorUi$$.editor.getGraphXml());if("json"==urlParams.proto){var $msg$$=$editorUi$$.createLoadMessage("save");$msg$$.xml=$data$$;$exit$$&&($msg$$.exit=!0);$data$$=JSON.stringify($msg$$)}(window.opener||window.parent).postMessage($data$$,"*");"0"!=urlParams.modified&&"1"!=urlParams.keepmodified&&($editorUi$$.editor.modified=!1,$editorUi$$.editor.setStatus(""));null!=$editorUi$$.getCurrentFile()&&$editorUi$$.saveFile()},
$editorUi$$.actions.addAction("saveAndExit",function(){$editorUi$$.actions.get("save").funct(!0)}),$editorUi$$.actions.addAction("exit",function(){var $fn$$=function $$fn$$$(){$editorUi$$.editor.modified=!1;var $msg$$="json"==urlParams.proto?JSON.stringify({event:"exit",modified:$editorUi$$.editor.modified}):"";(window.opener||window.parent).postMessage($msg$$,"*")};$editorUi$$.editor.modified?$editorUi$$.confirm(mxResources.get("allChangesLost"),null,$fn$$,mxResources.get("cancel"),mxResources.get("discardChanges")):
$fn$$()}));App.CSET&&(this.put("exportAs",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){$editorUi$$.isExportToCanvas()?(this.addMenuItems($menu$$,["exportPng"],$parent$$),$editorUi$$.jpgSupported&&this.addMenuItems($menu$$,["exportJpg"],$parent$$)):$editorUi$$.isOffline()||mxClient.IS_IOS&&navigator.standalone||this.addMenuItems($menu$$,["exportPng","exportJpg"],$parent$$);this.addMenuItems($menu$$,["exportSvg","-"],$parent$$);$editorUi$$.isOffline()||$editorUi$$.printPdfExport||$editorUi$$.isOffline();
mxClient.IS_IE||"undefined"===typeof VsdxExport&&$editorUi$$.isOffline()||this.addMenuItems($menu$$,["exportVsdx"],$parent$$);$editorUi$$.isOffline()||($menu$$.addSeparator($parent$$),this.addMenuItem($menu$$,"export",$parent$$).firstChild.nextSibling.innerHTML=mxResources.get("advanced")+"...")}))),this.put("importFrom",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){mxUtils.bind(this,function($data$$,$mime$$,$filename$$){var $view$$=$graph$$.view,$bds$$=$graph$$.getGraphBounds(),$x$$=$graph$$.snap(Math.ceil(Math.max(0,
$bds$$.x/$view$$.scale-$view$$.translate.x)+4*$graph$$.gridSize)),$y$$=$graph$$.snap(Math.ceil(Math.max(0,($bds$$.y+$bds$$.height)/$view$$.scale-$view$$.translate.y)+4*$graph$$.gridSize));"data:image/"==$data$$.substring(0,11)?$editorUi$$.loadImage($data$$,mxUtils.bind(this,function($img$$){var $resizeImages$$=!0,$doInsert$$=mxUtils.bind(this,function(){$editorUi$$.resizeImage($img$$,$data$$,mxUtils.bind(this,function($data2$jscomp$2_s$$,$w2$$,$h2$$){$data2$jscomp$2_s$$=$resizeImages$$?Math.min(1,
Math.min($editorUi$$.maxImageSize/$w2$$,$editorUi$$.maxImageSize/$h2$$)):1;$editorUi$$.importFile($data$$,$mime$$,$x$$,$y$$,Math.round($w2$$*$data2$jscomp$2_s$$),Math.round($h2$$*$data2$jscomp$2_s$$),$filename$$,function($cells$$){$editorUi$$.spinner.stop();$graph$$.setSelectionCells($cells$$);$graph$$.scrollCellToVisible($graph$$.getSelectionCell())})}),$resizeImages$$)});$data$$.length>$editorUi$$.resampleThreshold?$editorUi$$.confirmImageResize(function($doResize$$){$resizeImages$$=$doResize$$;
$doInsert$$()}):$doInsert$$()}),mxUtils.bind(this,function(){$editorUi$$.handleError({message:mxResources.get("cannotOpenFile")})})):$editorUi$$.importFile($data$$,$mime$$,$x$$,$y$$,0,0,$filename$$,function($cells$$){$editorUi$$.spinner.stop();$graph$$.setSelectionCells($cells$$);$graph$$.scrollCellToVisible($graph$$.getSelectionCell())})});mxUtils.bind(this,function($filename$$){var $mime$$="text/xml";/\.png$/i.test($filename$$)?$mime$$="image/png":/\.jpe?g$/i.test($filename$$)?$mime$$="image/jpg":
/\.gif$/i.test($filename$$)&&($mime$$="image/gif");return $mime$$});$menu$$.addItem("CSETD file...",null,function(){$editorUi$$.importLocalFile(!0)},$parent$$)}))).isEnabled=$isGraphEnabled$$);$action$$=this.editorUi.actions.addAction("rename...",mxUtils.bind(this,function(){var $file$$=this.editorUi.getCurrentFile();if(null!=$file$$){var $dlg$jscomp$59_filename$$=null!=$file$$.getTitle()?$file$$.getTitle():this.editorUi.defaultFilename,$dlg$jscomp$59_filename$$=new FilenameDialog(this.editorUi,$dlg$jscomp$59_filename$$,
mxResources.get("rename"),mxUtils.bind(this,function($title$$){null!=$title$$&&0<$title$$.length&&null!=$file$$&&$title$$!=$file$$.getTitle()&&this.editorUi.spinner.spin(document.body,mxResources.get("renaming"))&&$file$$.rename($title$$,mxUtils.bind(this,function($resp$$){this.editorUi.spinner.stop()}),mxUtils.bind(this,function($resp$$){this.editorUi.handleError($resp$$,null!=$resp$$?mxResources.get("errorRenamingFile"):null)}))}),$file$$.constructor==DriveFile||$file$$.constructor==StorageFile?
mxResources.get("diagramName"):null,function($name$$){if(null!=$name$$&&0<$name$$.length)return!0;$editorUi$$.showError(mxResources.get("error"),mxResources.get("invalidName"),mxResources.get("ok"));return!1},null,null,null,null,$editorUi$$.editor.fileExtensions);this.editorUi.showDialog($dlg$jscomp$59_filename$$.container,340,90,!0,!0);$dlg$jscomp$59_filename$$.init()}}));$action$$.isEnabled=function $$action$$$isEnabled$(){return this.enabled&&$isGraphEnabled$$.apply(this,arguments)};$action$$.visible=
"1"!=urlParams.embed;$editorUi$$.actions.addAction("makeCopy...",mxUtils.bind(this,function(){var $file$$=$editorUi$$.getCurrentFile();if(null!=$file$$){var $dlg$jscomp$60_title$$=$editorUi$$.getCopyFilename($file$$);$file$$.constructor==DriveFile?($dlg$jscomp$60_title$$=new CreateDialog($editorUi$$,$dlg$jscomp$60_title$$,mxUtils.bind(this,function($newTitle$$,$mode$$){"download"==$mode$$&&($mode$$=App.MODE_GOOGLE);null!=$newTitle$$&&0<$newTitle$$.length&&($mode$$==App.MODE_GOOGLE?$editorUi$$.spinner.spin(document.body,
mxResources.get("saving"))&&$file$$.saveAs($newTitle$$,mxUtils.bind(this,function($resp$jscomp$0$$){$file$$.desc=$resp$jscomp$0$$;$file$$.save(!1,mxUtils.bind(this,function(){$editorUi$$.spinner.stop();$file$$.setModified(!1);$file$$.addAllSavedStatus()}),mxUtils.bind(this,function($resp$$){$editorUi$$.handleError($resp$$)}))}),mxUtils.bind(this,function($resp$$){$editorUi$$.handleError($resp$$)})):$editorUi$$.createFile($newTitle$$,$editorUi$$.getFileData(!0),null,$mode$$))}),mxUtils.bind(this,function(){$editorUi$$.hideDialog()}),
mxResources.get("makeCopy"),mxResources.get("create"),null,null,null,null,!0,null,null,null,null,$editorUi$$.editor.fileExtensions),$editorUi$$.showDialog($dlg$jscomp$60_title$$.container,420,380,!0,!0),$dlg$jscomp$60_title$$.init()):$editorUi$$.editor.editAsNew(this.editorUi.getFileData(!0),$dlg$jscomp$60_title$$)}}));$editorUi$$.actions.addAction("moveToFolder...",mxUtils.bind(this,function(){var $file$$=$editorUi$$.getCurrentFile();if($file$$.getMode()==App.MODE_GOOGLE||$file$$.getMode()==App.MODE_ONEDRIVE){var $isInRoot$$=
!1;if($file$$.getMode()==App.MODE_GOOGLE&&null!=$file$$.desc.parents)for(var $i$$=0;$i$$<$file$$.desc.parents.length;$i$$++)if($file$$.desc.parents[$i$$].isRoot){$isInRoot$$=!0;break}$editorUi$$.pickFolder($file$$.getMode(),mxUtils.bind(this,function($folderId$$){$editorUi$$.spinner.spin(document.body,mxResources.get("moving"))&&$file$$.move($folderId$$,mxUtils.bind(this,function($resp$$){$editorUi$$.spinner.stop()}),mxUtils.bind(this,function($resp$$){$editorUi$$.handleError($resp$$)}))}),null,!0,
$isInRoot$$)}}));this.put("publish",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){this.addMenuItems($menu$$,["publishLink"],$parent$$)})));this.editorUi.actions.addAction("share...",mxUtils.bind(this,function(){try{var $file$$=$editorUi$$.getCurrentFile();null!=$file$$&&$editorUi$$.drive.showPermissions($file$$.getId())}catch($e$$){$editorUi$$.handleError($e$$)}}));this.put("embed",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){var $file$$=$editorUi$$.getCurrentFile();null==$file$$||
$file$$.getMode()!=App.MODE_GOOGLE&&$file$$.getMode()!=App.MODE_GITHUB||!/(\.png)$/i.test($file$$.getTitle())||this.addMenuItems($menu$$,["liveImage","-"],$parent$$);this.addMenuItems($menu$$,["embedImage","embedSvg","-","embedHtml"],$parent$$);navigator.standalone||$editorUi$$.isOffline()||this.addMenuItems($menu$$,["embedIframe"],$parent$$);"1"==urlParams.embed||$editorUi$$.isOffline()||this.addMenuItems($menu$$,["-","googleDocs","googleSlides"],$parent$$)})));var $addInsertItem$$=function $$addInsertItem$$$($menu$$,
$parent$$,$title$$,$method$$){("plantUml"!=$method$$||EditorUi.enablePlantUml&&!$editorUi$$.isOffline())&&$menu$$.addItem($title$$,null,mxUtils.bind(this,function(){if("fromText"==$method$$||"formatSql"==$method$$||"plantUml"==$method$$){var $dlg$$=new ParseDialog($editorUi$$,$title$$,$method$$);$editorUi$$.showDialog($dlg$$.container,620,420,!0,!1);$editorUi$$.dialog.container.style.overflow="auto"}else $dlg$$=new CreateGraphDialog($editorUi$$,$title$$,$method$$),$editorUi$$.showDialog($dlg$$.container,
620,420,!0,!1);$dlg$$.init()}),$parent$$,null,$isGraphEnabled$$())},$insertVertex$$=function $$insertVertex$$$($cell$jscomp$30_value$$,$w$$,$h$$,$style$$){var $pt$$=$graph$$.isMouseInsertPoint()?$graph$$.getInsertPoint():$graph$$.getFreeInsertPoint();$cell$jscomp$30_value$$=new mxCell($cell$jscomp$30_value$$,new mxGeometry($pt$$.x,$pt$$.y,$w$$,$h$$),$style$$);$cell$jscomp$30_value$$.vertex=!0;$graph$$.getModel().beginUpdate();try{$cell$jscomp$30_value$$=$graph$$.addCell($cell$jscomp$30_value$$),$graph$$.fireEvent(new mxEventObject("cellsInserted",
"cells",[$cell$jscomp$30_value$$]))}finally{$graph$$.getModel().endUpdate()}$graph$$.scrollCellToVisible($cell$jscomp$30_value$$);$graph$$.setSelectionCell($cell$jscomp$30_value$$);$graph$$.container.focus();$graph$$.editAfterInsert&&$graph$$.startEditing($cell$jscomp$30_value$$);return $cell$jscomp$30_value$$};$editorUi$$.actions.put("exportSvg",new Action(mxResources.get("formatSvg")+"...",function(){$editorUi$$.showExportDialog(mxResources.get("formatSvg"),!0,mxResources.get("export"),"https://support.draw.io/display/DO/Exporting+Files",
mxUtils.bind(this,function($scale$jscomp$18_val$$,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,$cropImage$$,$currentPage$$,$linkTarget$$){$scale$jscomp$18_val$$=parseInt($scale$jscomp$18_val$$);!isNaN($scale$jscomp$18_val$$)&&0<$scale$jscomp$18_val$$&&$editorUi$$.exportSvg($scale$jscomp$18_val$$/100,$transparentBackground$$,$ignoreSelection$$,$addShadow$$,$editable$$,$embedImages$$,$border$$,!$cropImage$$,$currentPage$$,$linkTarget$$)}),!0,null,"svg")}));
$editorUi$$.actions.put("insertText",new Action(mxResources.get("text"),function(){$graph$$.isEnabled()&&!$graph$$.isCellLocked($graph$$.getDefaultParent())&&$graph$$.startEditingAtCell($insertVertex$$("Text",40,20,"text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;"))}),null,null,Editor.ctrlKey+"+Shift+X").isEnabled=$isGraphEnabled$$;$editorUi$$.actions.put("insertRectangle",new Action(mxResources.get("rectangle"),function(){$graph$$.isEnabled()&&
!$graph$$.isCellLocked($graph$$.getDefaultParent())&&$insertVertex$$("",120,60,"whiteSpace=wrap;html=1;")}),null,null,Editor.ctrlKey+"+K").isEnabled=$isGraphEnabled$$;$editorUi$$.actions.put("insertEllipse",new Action(mxResources.get("ellipse"),function(){$graph$$.isEnabled()&&!$graph$$.isCellLocked($graph$$.getDefaultParent())&&$insertVertex$$("",80,80,"ellipse;whiteSpace=wrap;html=1;")}),null,null,Editor.ctrlKey+"+Shift+K").isEnabled=$isGraphEnabled$$;$editorUi$$.actions.put("insertRhombus",new Action(mxResources.get("rhombus"),
function(){$graph$$.isEnabled()&&!$graph$$.isCellLocked($graph$$.getDefaultParent())&&$insertVertex$$("",80,80,"rhombus;whiteSpace=wrap;html=1;")})).isEnabled=$isGraphEnabled$$;var $addInsertMenuItems$$=mxUtils.bind(this,function($menu$$,$parent$$,$methods$$){for(var $i$$=0;$i$$<$methods$$.length;$i$$++)"-"==$methods$$[$i$$]?$menu$$.addSeparator($parent$$):$addInsertItem$$($menu$$,$parent$$,mxResources.get($methods$$[$i$$])+"...",$methods$$[$i$$])});this.put("insertLayout",new Menu(mxUtils.bind(this,
function($menu$$,$parent$$){$addInsertMenuItems$$($menu$$,$parent$$,"horizontalFlow verticalFlow - horizontalTree verticalTree radialTree - organic circle".split(" "))})));App.CSET&&(this.put("openRecent",new Menu(function($menu$$,$parent$$){var $recent$$=$editorUi$$.getRecent();if(null!=$recent$$){for(var $i$$=0;$i$$<$recent$$.length;$i$$++)(function($entry$$){var $modeKey$$=$entry$$.mode;$modeKey$$==App.MODE_GOOGLE?$modeKey$$="googleDrive":$modeKey$$==App.MODE_ONEDRIVE&&($modeKey$$="oneDrive");
$menu$$.addItem($entry$$.title+" ("+mxResources.get($modeKey$$)+")",null,function(){$editorUi$$.loadFile($entry$$.id)},$parent$$)})($recent$$[$i$$]);$menu$$.addSeparator($parent$$)}$menu$$.addItem(mxResources.get("reset"),null,function(){$editorUi$$.resetRecent()},$parent$$)})),this.put("openFrom",new Menu(function($menu$$,$parent$$){mxClient.IS_IOS||$menu$$.addItem(mxResources.get("device")+"...",null,function(){$editorUi$$.pickFile(App.MODE_DEVICE)},$parent$$);$editorUi$$.isOffline()})),Editor.enableCustomLibraries&&
(this.put("newLibrary",new Menu(function($menu$$,$parent$$){"undefined"!=typeof google&&"undefined"!=typeof google.picker&&(null!=$editorUi$$.drive?$menu$$.addItem(mxResources.get("googleDrive")+"...",null,function(){$editorUi$$.showLibraryDialog(null,null,null,null,App.MODE_GOOGLE)},$parent$$):$googleEnabled$$&&"function"===typeof window.DriveClient&&$menu$$.addItem(mxResources.get("googleDrive")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1));null!=$editorUi$$.oneDrive?
$menu$$.addItem(mxResources.get("oneDrive")+"...",null,function(){$editorUi$$.showLibraryDialog(null,null,null,null,App.MODE_ONEDRIVE)},$parent$$):$oneDriveEnabled$$&&"function"===typeof window.OneDriveClient&&$menu$$.addItem(mxResources.get("oneDrive")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1);null!=$editorUi$$.dropbox?$menu$$.addItem(mxResources.get("dropbox")+"...",null,function(){$editorUi$$.showLibraryDialog(null,null,null,null,App.MODE_DROPBOX)},$parent$$):
$dropboxEnabled$$&&"function"===typeof window.DropboxClient&&$menu$$.addItem(mxResources.get("dropbox")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1);null!=$editorUi$$.gitHub&&$menu$$.addItem(mxResources.get("github")+"...",null,function(){$editorUi$$.showLibraryDialog(null,null,null,null,App.MODE_GITHUB)},$parent$$);null!=$editorUi$$.trello?$menu$$.addItem(mxResources.get("trello")+"...",null,function(){$editorUi$$.showLibraryDialog(null,null,null,null,App.MODE_TRELLO)},
$parent$$):$trelloEnabled$$&&"function"===typeof window.TrelloClient&&$menu$$.addItem(mxResources.get("trello")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1);$menu$$.addSeparator($parent$$);isLocalStorage&&"0"!=urlParams.browser&&$menu$$.addItem(mxResources.get("browser")+"...",null,function(){$editorUi$$.showLibraryDialog(null,null,null,null,App.MODE_BROWSER)},$parent$$);$menu$$.addItem(mxResources.get("device")+"...",null,function(){$editorUi$$.showLibraryDialog(null,
null,null,null,App.MODE_DEVICE)},$parent$$)})),this.put("openLibraryFrom",new Menu(function($menu$$,$parent$$){"undefined"!=typeof google&&"undefined"!=typeof google.picker&&(null!=$editorUi$$.drive?$menu$$.addItem(mxResources.get("googleDrive")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_GOOGLE)},$parent$$):$googleEnabled$$&&"function"===typeof window.DriveClient&&$menu$$.addItem(mxResources.get("googleDrive")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1));
null!=$editorUi$$.oneDrive?$menu$$.addItem(mxResources.get("oneDrive")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_ONEDRIVE)},$parent$$):$oneDriveEnabled$$&&"function"===typeof window.OneDriveClient&&$menu$$.addItem(mxResources.get("oneDrive")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1);null!=$editorUi$$.dropbox?$menu$$.addItem(mxResources.get("dropbox")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_DROPBOX)},$parent$$):$dropboxEnabled$$&&"function"===
typeof window.DropboxClient&&$menu$$.addItem(mxResources.get("dropbox")+" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1);null!=$editorUi$$.gitHub&&$menu$$.addItem(mxResources.get("github")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_GITHUB)},$parent$$);null!=$editorUi$$.trello?$menu$$.addItem(mxResources.get("trello")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_TRELLO)},$parent$$):$trelloEnabled$$&&"function"===typeof window.TrelloClient&&$menu$$.addItem(mxResources.get("trello")+
" ("+mxResources.get("loading")+"...)",null,function(){},$parent$$,null,!1);$menu$$.addSeparator($parent$$);isLocalStorage&&"0"!=urlParams.browser&&$menu$$.addItem(mxResources.get("browser")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_BROWSER)},$parent$$);$menu$$.addItem(mxResources.get("device")+"...",null,function(){$editorUi$$.pickLibrary(App.MODE_DEVICE)},$parent$$);$editorUi$$.isOffline()||($menu$$.addSeparator($parent$$),$menu$$.addItem(mxResources.get("url")+"...",null,function(){var $dlg$$=
new FilenameDialog($editorUi$$,"",mxResources.get("open"),function($fileUrl$$){if(null!=$fileUrl$$&&0<$fileUrl$$.length&&$editorUi$$.spinner.spin(document.body,mxResources.get("loading"))){var $realUrl$$=$fileUrl$$;$editorUi$$.editor.isCorsEnabledForUrl($fileUrl$$)||($realUrl$$=PROXY_URL+"?url="+encodeURIComponent($fileUrl$$));mxUtils.get($realUrl$$,function($req$$){if(200<=$req$$.getStatus()&&299>=$req$$.getStatus()){$editorUi$$.spinner.stop();try{$editorUi$$.loadLibrary(new UrlLibrary(this,$req$$.getText(),
$fileUrl$$))}catch($e$$){$editorUi$$.handleError($e$$,mxResources.get("errorLoadingFile"))}}else $editorUi$$.spinner.stop(),$editorUi$$.handleError(null,mxResources.get("errorLoadingFile"))},function(){$editorUi$$.spinner.stop();$editorUi$$.handleError(null,mxResources.get("errorLoadingFile"))})}},mxResources.get("url"));$editorUi$$.showDialog($dlg$$.container,300,80,!0,!0);$dlg$$.init()},$parent$$));"1"==urlParams.confLib&&($menu$$.addSeparator($parent$$),$menu$$.addItem(mxResources.get("confluenceCloud")+
"...",null,function(){$editorUi$$.showRemotelyStoredLibrary(mxResources.get("libraries"))},$parent$$))}))));this.put("edit",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){this.addMenuItems($menu$$,"undo redo - cut copy paste delete - duplicate - find - editData editTooltip - editStyle editGeometry - edit - editLink openLink - selectVertices selectEdges selectAll selectNone - lockUnlock".split(" "))})));$action$$=$editorUi$$.actions.addAction("comments",mxUtils.bind(this,function(){null==this.commentsWindow?
(this.commentsWindow=new CommentsWindow($editorUi$$,document.body.offsetWidth-380,120,300,350),this.commentsWindow.window.addListener("show",function(){$editorUi$$.fireEvent(new mxEventObject("comments"))}),this.commentsWindow.window.addListener("hide",function(){$editorUi$$.fireEvent(new mxEventObject("comments"))}),this.commentsWindow.window.setVisible(!0),$editorUi$$.fireEvent(new mxEventObject("comments"))):(this.commentsWindow.window.setVisible(!this.commentsWindow.window.isVisible()),this.commentsWindow.refreshCommentsTime())}));
$action$$.setToggleAction(!0);$action$$.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.commentsWindow&&this.commentsWindow.window.isVisible()}));$editorUi$$.editor.addListener("fileLoaded",mxUtils.bind(this,function(){null!=this.commentsWindow&&(this.commentsWindow.destroy(),this.commentsWindow=null)}));var $action$$=this.get("viewPanels"),$viewPanelsFunct$$=$action$$.funct;$action$$.funct=function $$action$$$funct$($menu$$,$parent$$){$viewPanelsFunct$$.apply(this,arguments);$editorUi$$.commentsSupported()&&
$editorUi$$.menus.addMenuItems($menu$$,["comments"],$parent$$)};this.put("view",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){this.addMenuItems($menu$$,(null!=this.editorUi.format?["formatPanel"]:[]).concat(["outline","layers"]).concat($editorUi$$.commentsSupported()?["comments","-"]:["-"]));this.addMenuItems($menu$$,["-","search"],$parent$$);if(isLocalStorage||mxClient.IS_CHROMEAPP){var $item$$=this.addMenuItem($menu$$,"scratchpad",$parent$$);(!$editorUi$$.isOffline()||mxClient.IS_CHROMEAPP||
EditorUi.isElectronApp)&&this.addLinkToItem($item$$,"../../../../Documents/htmlhelp/home__view_menu.htm?ms=AAAA&st=MA%3D%3D&sct=MTUwMA%3D%3D&mw=MjQy#ScratchPad")}this.addMenuItems($menu$$,"shapes - pageView pageScale - scrollbars tooltips - grid guides".split(" "),$parent$$);mxClient.IS_SVG&&(null==document.documentMode||9<document.documentMode)&&this.addMenuItem($menu$$,"shadowVisible",$parent$$);this.addMenuItems($menu$$,"- connectionArrows connectionPoints - resetView zoomIn zoomOut".split(" "),
$parent$$)})));this.put("extras",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){"1"!=urlParams.embed&&(this.addSubmenu("theme",$menu$$,$parent$$),$menu$$.addSeparator($parent$$));this.addMenuItems($menu$$,["-","createShape","editDiagram"],$parent$$);$menu$$.addSeparator($parent$$);$menu$$.addSeparator($parent$$);this.addMenuItem($menu$$,"tags",$parent$$);$menu$$.addSeparator($parent$$);"1"==urlParams.newTempDlg&&($editorUi$$.actions.addAction("templates",function(){var $tempDlg$$=new TemplatesDialog;
$editorUi$$.showDialog($tempDlg$$.container,$tempDlg$$.width,$tempDlg$$.height,!0,!1,null,!1,!0);$tempDlg$$.init($editorUi$$,function($xml$$){console.log($xml$$)},null,null,null,"user",function($callback$$,$username$$){setTimeout(function(){$username$$?$callback$$([{url:"123",title:"Test 1Test 1Test 1Test 1Test 1Test 1Test 11Test 1Test 11Test 1Test 1dgdsgdfg fdg dfgdfg dfg dfg"},{url:"123",title:"Test 2",imgUrl:"https://www.google.com.eg/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png"},
{url:"123",title:"Test 3",changedBy:"Ashraf Teleb",lastModifiedOn:"Yesterday"},{url:"123",title:"Test 4"},{url:"123",title:"Test 5"},{url:"123",title:"Test 6"}]):$callback$$([{url:"123",title:"Test 4",imgUrl:"https://images.pexels.com/photos/459225/pexels-photo-459225.jpeg"},{url:"123",title:"Test 5"},{url:"123",title:"Test 6"},{url:"123",title:"Test 1Test 1Test 1Test 1Test 1Test 1Test 11Test 1Test 11Test 1Test 1dgdsgdfg fdg dfgdfg dfg dfg"},{url:"123",title:"Test 2",imgUrl:"https://www.google.com.eg/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png"},
{url:"123",title:"Test 3",changedBy:"Ashraf Teleb",lastModifiedOn:"Yesterday"}]);console.log($username$$)},1E3)},function($str$$,$callback$$,$username$$){setTimeout(function(){$callback$$($username$$?[{url:"123",title:$str$$+"Test 1Test 1Test 1Test 1Test 1Test 1Test 1"},{url:"123",title:$str$$+"Test 2"},{url:"123",title:$str$$+"Test 3"},{url:"123",title:$str$$+"Test 4"},{url:"123",title:$str$$+"Test 5"},{url:"123",title:$str$$+"Test 6"}]:[{url:"123",title:$str$$+"Test 5"},{url:"123",title:$str$$+
"Test 6"},{url:"123",title:$str$$+"Test 1Test 1Test 1Test 1Test 1Test 1Test 1"},{url:"123",title:$str$$+"Test 2"},{url:"123",title:$str$$+"Test 3"},{url:"123",title:$str$$+"Test 4"}])},2E3)},null)}),this.addMenuItem($menu$$,"templates",$parent$$))})));this.put("file",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){if("1"==urlParams.embed)this.addSubmenu("importFrom",$menu$$,$parent$$),this.addSubmenu("exportAs",$menu$$,$parent$$),this.addSubmenu("embed",$menu$$,$parent$$),"1"==urlParams.libraries&&
(this.addMenuItems($menu$$,["-"],$parent$$),this.addSubmenu("newLibrary",$menu$$,$parent$$),this.addSubmenu("openLibraryFrom",$menu$$,$parent$$)),$editorUi$$.isRevisionHistorySupported()&&this.addMenuItems($menu$$,["-","revisionHistory"],$parent$$),this.addMenuItems($menu$$,"- pageSetup print - rename save".split(" "),$parent$$),"1"==urlParams.saveAndExit&&this.addMenuItems($menu$$,["saveAndExit"],$parent$$),this.addMenuItems($menu$$,["exit"],$parent$$);else{var $file$$=this.editorUi.getCurrentFile();
if($file$$&&$file$$.constructor===DriveFile){if($file$$.isRestricted()&&this.addMenuItems($menu$$,["exportOptionsDisabled"],$parent$$),this.addMenuItems($menu$$,["save","-","share"],$parent$$),!App.CSET){var $item$$=this.addMenuItem($menu$$,"synchronize",$parent$$);(!$editorUi$$.isOffline()||mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)&&this.addLinkToItem($item$$,"https://desk.draw.io/support/solutions/articles/16000087947");$menu$$.addSeparator($parent$$)}}else this.addMenuItems($menu$$,["new"],
$parent$$);$file$$&&$file$$.constructor===DriveFile?this.addMenuItems($menu$$,["new","-","rename","makeCopy","moveToFolder"],$parent$$):(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||!$file$$||$file$$.constructor===LocalFile||App.CSET||($menu$$.addSeparator($parent$$),$item$$=this.addMenuItem($menu$$,"synchronize",$parent$$),(!$editorUi$$.isOffline()||mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)&&this.addLinkToItem($item$$,"https://desk.draw.io/support/solutions/articles/16000087947")),this.addMenuItems($menu$$,
["-","save","saveAs"],$parent$$),this.addMenuItems($menu$$,["-","rename"],$parent$$),$editorUi$$.isOfflineApp()?navigator.onLine&&"1"!=urlParams.stealth&&this.addMenuItems($menu$$,["upload"],$parent$$):(this.addMenuItems($menu$$,["makeCopy"],$parent$$),null!=$file$$&&$file$$.constructor==OneDriveFile&&this.addMenuItems($menu$$,["moveToFolder"],$parent$$)));$menu$$.addSeparator($parent$$);this.addSubmenu("importFrom",$menu$$,$parent$$);this.addSubmenu("exportAs",$menu$$,$parent$$);$editorUi$$.isRevisionHistorySupported()&&
this.addMenuItems($menu$$,["-","revisionHistory"],$parent$$);this.addMenuItems($menu$$,["-","pageSetup"],$parent$$);mxClient.IS_IOS&&navigator.standalone||this.addMenuItems($menu$$,["print"],$parent$$);this.addMenuItems($menu$$,["-","close"])}})))}})();function DiagramPage($node$$){this.node=$node$$;null==this.getId()&&this.node.setAttribute("id",Editor.guid())}DiagramPage.prototype.node=null;DiagramPage.prototype.root=null;DiagramPage.prototype.viewState=null;DiagramPage.prototype.getId=function $DiagramPage$$getId$(){return this.node.getAttribute("id")};DiagramPage.prototype.getName=function $DiagramPage$$getName$(){return this.node.getAttribute("name")};
DiagramPage.prototype.setName=function $DiagramPage$$setName$($value$$){null==$value$$?this.node.removeAttribute("name"):this.node.setAttribute("name",$value$$)};function RenamePage($ui$$,$page$$,$name$$){this.ui=$ui$$;this.page=$page$$;this.previous=this.name=$name$$}RenamePage.prototype.execute=function $RenamePage$$execute$(){var $tmp$$=this.page.getName();this.page.setName(this.previous);this.name=this.previous;this.previous=$tmp$$;this.ui.editor.graph.updatePlaceholders();this.ui.editor.fireEvent(new mxEventObject("pageRenamed"))};
function MovePage($ui$$,$oldIndex$$,$newIndex$$){this.ui=$ui$$;this.oldIndex=$oldIndex$$;this.newIndex=$newIndex$$}MovePage.prototype.execute=function $MovePage$$execute$(){this.ui.pages.splice(this.newIndex,0,this.ui.pages.splice(this.oldIndex,1)[0]);var $tmp$$=this.oldIndex;this.oldIndex=this.newIndex;this.newIndex=$tmp$$;this.ui.editor.graph.updatePlaceholders();this.ui.editor.fireEvent(new mxEventObject("pageMoved"))};
function SelectPage($ui$$,$page$$,$viewState$$){this.ui=$ui$$;this.previousPage=this.page=$page$$;this.neverShown=!0;null!=$page$$&&(this.neverShown=null==$page$$.viewState,this.ui.updatePageRoot($page$$),null!=$viewState$$&&($page$$.viewState=$viewState$$,this.neverShown=!1))}
SelectPage.prototype.execute=function $SelectPage$$execute$(){var $page$$=mxUtils.indexOf(this.ui.pages,this.previousPage);if(null!=this.page&&0<=$page$$){var $page$$=this.ui.currentPage,$editor$$=this.ui.editor,$graph$$=$editor$$.graph,$data$$=Graph.compressNode($editor$$.getGraphXml(!0));mxUtils.setTextContent($page$$.node,$data$$);$page$$.viewState=$graph$$.getViewState();$page$$.root=$graph$$.model.root;null!=$page$$.model&&$page$$.model.rootChanged($page$$.root);$graph$$.view.clear($page$$.root,
!0);$graph$$.clearSelection();this.ui.currentPage=this.previousPage;this.previousPage=$page$$;$page$$=this.ui.currentPage;$graph$$.model.prefix=Editor.guid()+"-";$graph$$.model.rootChanged($page$$.root);$graph$$.setViewState($page$$.viewState);$graph$$.gridEnabled=$graph$$.gridEnabled&&(!this.ui.editor.isChromelessView()||"1"==urlParams.grid);$editor$$.updateGraphComponents();$graph$$.view.validate();$graph$$.blockMathRender=!0;$graph$$.sizeDidChange();$graph$$.blockMathRender=!1;this.neverShown&&
(this.neverShown=!1,$graph$$.selectUnlockedLayer());$editor$$.graph.fireEvent(new mxEventObject(mxEvent.ROOT));$editor$$.fireEvent(new mxEventObject("pageSelected","change",this))}};function ChangePage($ui$$,$page$$,$select$$,$index$$,$noSelect$$){SelectPage.call(this,$ui$$,$select$$);this.relatedPage=$page$$;this.index=$index$$;this.previousIndex=null;this.noSelect=$noSelect$$}mxUtils.extend(ChangePage,SelectPage);
ChangePage.prototype.execute=function $ChangePage$$execute$(){this.ui.editor.fireEvent(new mxEventObject("beforePageChange","change",this));this.previousIndex=this.index;if(null==this.index){var $tmp$$=mxUtils.indexOf(this.ui.pages,this.relatedPage);this.ui.pages.splice($tmp$$,1);this.index=$tmp$$}else this.ui.pages.splice(this.index,0,this.relatedPage),this.index=null;this.noSelect||SelectPage.prototype.execute.apply(this,arguments)};EditorUi.prototype.tabContainerHeight=38;
EditorUi.prototype.getSelectedPageIndex=function $EditorUi$$getSelectedPageIndex$(){var $result$$=null;if(null!=this.pages&&null!=this.currentPage)for(var $i$$=0;$i$$<this.pages.length;$i$$++)if(this.pages[$i$$]==this.currentPage){$result$$=$i$$;break}return $result$$};EditorUi.prototype.getPageById=function $EditorUi$$getPageById$($id$$){if(null!=this.pages)for(var $i$$=0;$i$$<this.pages.length;$i$$++)if(this.pages[$i$$].getId()==$id$$)return this.pages[$i$$];return null};
EditorUi.prototype.initPages=function $EditorUi$$initPages$(){this.actions.addAction("previousPage",mxUtils.bind(this,function(){this.selectNextPage(!1)}));this.actions.addAction("nextPage",mxUtils.bind(this,function(){this.selectNextPage(!0)}));this.keyHandler.bindAction(33,!0,"previousPage",!0);this.keyHandler.bindAction(34,!0,"nextPage",!0);var $graph$$=this.editor.graph,$graphViewValidateBackground$$=$graph$$.view.validateBackground;$graph$$.view.validateBackground=mxUtils.bind(this,function(){if(null!=
this.tabContainer){var $prevHeight$$=this.tabContainer.style.height;this.tabContainer.style.height=null==this.fileNode||null==this.pages||1==this.pages.length&&"0"==urlParams.pages?"0px":this.tabContainerHeight+"px";$prevHeight$$!=this.tabContainer.style.height&&this.refresh(!1)}$graphViewValidateBackground$$.apply($graph$$.view,arguments)});var $lastPage$$=null,$updateTabs$$=mxUtils.bind(this,function(){this.updateTabContainer();var $p$$=this.currentPage;null!=$p$$&&$p$$!=$lastPage$$&&(null==$p$$.viewState||
null==$p$$.viewState.scrollLeft?(this.resetScrollbars(),$graph$$.isLightboxView()&&this.lightboxFit(),null!=this.chromelessResize&&($graph$$.container.scrollLeft=0,$graph$$.container.scrollTop=0,this.chromelessResize())):($graph$$.container.scrollLeft=$graph$$.view.translate.x*$graph$$.view.scale+$p$$.viewState.scrollLeft,$graph$$.container.scrollTop=$graph$$.view.translate.y*$graph$$.view.scale+$p$$.viewState.scrollTop),$lastPage$$=$p$$);null!=this.actions.layersWindow&&this.actions.layersWindow.refreshLayers();
"undefined"!==typeof MathJax&&"undefined"!==typeof MathJax.Hub?1!=MathJax.Hub.queue.pending||null==this.editor||this.editor.graph.mathEnabled||MathJax.Hub.Queue(mxUtils.bind(this,function(){null!=this.editor&&this.editor.graph.refresh()})):"undefined"===typeof Editor.MathJaxClear||null!=this.editor&&this.editor.graph.mathEnabled||Editor.MathJaxClear()});this.editor.graph.model.addListener(mxEvent.CHANGE,mxUtils.bind(this,function($sender$$,$evt$$){for(var $$jscomp$iter$4_edit$$=$evt$$&&$evt$$.getProperty("edit"),
$$jscomp$iter$4_edit$$=$jscomp.makeIterator($$jscomp$iter$4_edit$$&&$$jscomp$iter$4_edit$$.changes||[]),$$jscomp$key$change_change$$=$$jscomp$iter$4_edit$$.next();!$$jscomp$key$change_change$$.done;$$jscomp$key$change_change$$=$$jscomp$iter$4_edit$$.next())if($$jscomp$key$change_change$$=$$jscomp$key$change_change$$.value,$$jscomp$key$change_change$$ instanceof SelectPage||$$jscomp$key$change_change$$ instanceof RenamePage||$$jscomp$key$change_change$$ instanceof MovePage||$$jscomp$key$change_change$$ instanceof
mxRootChange){$updateTabs$$();break}}));null!=this.toolbar&&this.editor.addListener("pageSelected",this.toolbar.updateZoom)};
EditorUi.prototype.restoreViewState=function $EditorUi$$restoreViewState$($newPage$jscomp$4_page$$,$viewState$$,$selection$$){$newPage$jscomp$4_page$$=null!=$newPage$jscomp$4_page$$?this.getPageById($newPage$jscomp$4_page$$.getId()):null;var $graph$$=this.editor.graph;null!=$newPage$jscomp$4_page$$&&null!=this.currentPage&&null!=this.pages&&($newPage$jscomp$4_page$$!=this.currentPage?this.selectPage($newPage$jscomp$4_page$$,!0,$viewState$$):($graph$$.setViewState($viewState$$),this.editor.updateGraphComponents(),
$graph$$.view.revalidate(),$graph$$.sizeDidChange()),$graph$$.container.scrollLeft=$graph$$.view.translate.x*$graph$$.view.scale+$viewState$$.scrollLeft,$graph$$.container.scrollTop=$graph$$.view.translate.y*$graph$$.view.scale+$viewState$$.scrollTop,$graph$$.restoreSelection($selection$$))};
Graph.prototype.createViewState=function $Graph$$createViewState$($node$$){var $pv$$=$node$$.getAttribute("page"),$ps$$=parseFloat($node$$.getAttribute("pageScale")),$pw$$=parseFloat($node$$.getAttribute("pageWidth")),$ph$$=parseFloat($node$$.getAttribute("pageHeight")),$bg$$=$node$$.getAttribute("background"),$bgImg$jscomp$1_temp$$=$node$$.getAttribute("backgroundImage"),$bgImg$jscomp$1_temp$$=null!=$bgImg$jscomp$1_temp$$&&0<$bgImg$jscomp$1_temp$$.length?JSON.parse($bgImg$jscomp$1_temp$$):null;return{gridEnabled:"0"!=
$node$$.getAttribute("grid"),gridSize:parseFloat($node$$.getAttribute("gridSize"))||mxGraph.prototype.gridSize,guidesEnabled:"0"!=$node$$.getAttribute("guides"),foldingEnabled:"0"!=$node$$.getAttribute("fold"),shadowVisible:"1"==$node$$.getAttribute("shadow"),pageVisible:this.isLightboxView()?!1:null!=$pv$$?"0"!=$pv$$:this.defaultPageVisible,background:null!=$bg$$&&0<$bg$$.length?$bg$$:null,backgroundImage:null!=$bgImg$jscomp$1_temp$$?new mxImage($bgImg$jscomp$1_temp$$.src,$bgImg$jscomp$1_temp$$.width,
$bgImg$jscomp$1_temp$$.height):null,pageScale:isNaN($ps$$)?mxGraph.prototype.pageScale:$ps$$,pageFormat:isNaN($pw$$)||isNaN($ph$$)?mxSettings.getPageFormat():new mxRectangle(0,0,$pw$$,$ph$$),tooltips:"0"!=$node$$.getAttribute("tooltips"),connect:"0"!=$node$$.getAttribute("connect"),arrows:"0"!=$node$$.getAttribute("arrows"),mathEnabled:"1"==$node$$.getAttribute("math"),selectionCells:null,defaultParent:null,scrollbars:this.defaultScrollbars,scale:1}};
Graph.prototype.saveViewState=function $Graph$$saveViewState$($vs$$,$node$$,$ignoreTransient_pf$$){$ignoreTransient_pf$$||($node$$.setAttribute("grid",null==$vs$$||$vs$$.gridEnabled?"1":"0"),$node$$.setAttribute("gridSize",null!=$vs$$?$vs$$.gridSize:mxGraph.prototype.gridSize),$node$$.setAttribute("guides",null==$vs$$||$vs$$.guidesEnabled?"1":"0"),$node$$.setAttribute("tooltips",null==$vs$$||$vs$$.tooltips?"1":"0"),$node$$.setAttribute("connect",null==$vs$$||$vs$$.connect?"1":"0"),$node$$.setAttribute("arrows",
null==$vs$$||$vs$$.arrows?"1":"0"),$node$$.setAttribute("page",null==$vs$$&&this.defaultPageVisible||null!=$vs$$&&$vs$$.pageVisible?"1":"0"),$node$$.setAttribute("fold",null==$vs$$||$vs$$.foldingEnabled?"1":"0"));$node$$.setAttribute("pageScale",null!=$vs$$&&null!=$vs$$.pageScale?$vs$$.pageScale:mxGraph.prototype.pageScale);$ignoreTransient_pf$$=null!=$vs$$?$vs$$.pageFormat:mxSettings.getPageFormat();null!=$ignoreTransient_pf$$&&($node$$.setAttribute("pageWidth",$ignoreTransient_pf$$.width),$node$$.setAttribute("pageHeight",
$ignoreTransient_pf$$.height));null!=$vs$$&&null!=$vs$$.background&&$node$$.setAttribute("background",$vs$$.background);null!=$vs$$&&null!=$vs$$.backgroundImage&&$node$$.setAttribute("backgroundImage",JSON.stringify($vs$$.backgroundImage));$node$$.setAttribute("math",null!=$vs$$&&$vs$$.mathEnabled?"1":"0");$node$$.setAttribute("shadow",null!=$vs$$&&$vs$$.shadowVisible?"1":"0")};
Graph.prototype.getViewState=function $Graph$$getViewState$(){return{defaultParent:this.defaultParent,currentRoot:this.view.currentRoot,gridEnabled:this.gridEnabled,gridSize:this.gridSize,guidesEnabled:this.graphHandler.guidesEnabled,foldingEnabled:this.foldingEnabled,shadowVisible:this.shadowVisible,scrollbars:this.scrollbars,pageVisible:this.pageVisible,background:this.background,backgroundImage:this.backgroundImage,pageScale:this.pageScale,pageFormat:this.pageFormat,tooltips:this.tooltipHandler.isEnabled(),
connect:this.connectionHandler.isEnabled(),arrows:this.connectionArrowsEnabled,scale:this.view.scale,scrollLeft:this.container.scrollLeft-this.view.translate.x*this.view.scale,scrollTop:this.container.scrollTop-this.view.translate.y*this.view.scale,translate:this.view.translate.clone(),lastPasteXml:this.lastPasteXml,pasteCounter:this.pasteCounter,mathEnabled:this.mathEnabled}};
Graph.prototype.setViewState=function $Graph$$setViewState$($state$$){null!=$state$$?(this.lastPasteXml=$state$$.lastPasteXml,this.pasteCounter=$state$$.pasteCounter||0,this.mathEnabled=$state$$.mathEnabled,this.gridEnabled=$state$$.gridEnabled,this.gridSize=$state$$.gridSize,this.graphHandler.guidesEnabled=$state$$.guidesEnabled,this.foldingEnabled=$state$$.foldingEnabled,this.setShadowVisible($state$$.shadowVisible,!1),this.scrollbars=$state$$.scrollbars,this.pageVisible=$state$$.pageVisible,this.background=
$state$$.background,this.backgroundImage=$state$$.backgroundImage,this.pageScale=$state$$.pageScale,this.pageFormat=$state$$.pageFormat,this.view.currentRoot=$state$$.currentRoot,this.defaultParent=$state$$.defaultParent,this.connectionArrowsEnabled=$state$$.arrows,this.setTooltips($state$$.tooltips),this.setConnectable($state$$.connect),this.view.scale=null!=$state$$.scale?$state$$.scale:1,null==this.view.currentRoot||this.model.contains(this.view.currentRoot)||(this.view.currentRoot=null),null==
this.defaultParent||this.model.contains(this.defaultParent)||(this.setDefaultParent(null),this.selectUnlockedLayer()),null!=$state$$.translate&&(this.view.translate=$state$$.translate)):(this.view.currentRoot=null,this.view.scale=1,this.gridEnabled=!0,this.gridSize=mxGraph.prototype.gridSize,this.pageScale=mxGraph.prototype.pageScale,this.pageFormat=mxSettings.getPageFormat(),this.pageVisible=this.defaultPageVisible,this.backgroundImage=this.background=null,this.scrollbars=this.defaultScrollbars,
this.foldingEnabled=this.graphHandler.guidesEnabled=!0,this.setShadowVisible(!1,!1),this.defaultParent=null,this.setTooltips(!0),this.setConnectable(!0),this.lastPasteXml=null,this.pasteCounter=0,this.mathEnabled=!1,this.connectionArrowsEnabled=!0);this.preferPageSize=this.pageBreaksVisible=this.pageVisible;this.fireEvent(new mxEventObject("viewStateChanged","state",$state$$))};
EditorUi.prototype.updatePageRoot=function $EditorUi$$updatePageRoot$($page$$){if(null==$page$$.root){var $node$$=this.editor.extractGraphModel($page$$.node);if(null!=$node$$){$page$$.graphModelNode=$node$$;$page$$.viewState=this.editor.graph.createViewState($node$$);var $codec$$=new mxCodec($node$$.ownerDocument);$page$$.root=$codec$$.decode($node$$).root}else $page$$.root=this.editor.graph.model.createRoot()}else null==$page$$.viewState&&(null==$page$$.graphModelNode&&($node$$=this.editor.extractGraphModel($page$$.node),
null!=$node$$&&($page$$.graphModelNode=$node$$)),null!=$page$$.graphModelNode&&($page$$.viewState=this.editor.graph.createViewState($page$$.graphModelNode)));return $page$$};
EditorUi.prototype.selectPage=function $EditorUi$$selectPage$($page$$,$quiet$$,$viewState$$){try{this.editor.graph.isEditing()&&this.editor.graph.stopEditing(!1);$quiet$$=null!=$quiet$$?$quiet$$:!1;this.editor.graph.isMouseDown=!1;this.editor.graph.reset();var $edit$$=this.editor.graph.model.createUndoableEdit();$edit$$.ignoreEdit=!0;var $change$$=new SelectPage(this,$page$$,$viewState$$);$change$$.execute();$edit$$.add($change$$);$edit$$.notify();this.editor.graph.tooltipHandler.hide();$quiet$$||
this.editor.graph.model.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",$edit$$))}catch($e$$){this.handleError($e$$)}};
EditorUi.prototype.selectNextPage=function $EditorUi$$selectNextPage$($forward$$){var $next$jscomp$1_tmp$$=this.currentPage;null!=$next$jscomp$1_tmp$$&&null!=this.pages&&($next$jscomp$1_tmp$$=mxUtils.indexOf(this.pages,$next$jscomp$1_tmp$$),$forward$$?this.selectPage(this.pages[mxUtils.mod($next$jscomp$1_tmp$$+1,this.pages.length)]):$forward$$||this.selectPage(this.pages[mxUtils.mod($next$jscomp$1_tmp$$-1,this.pages.length)]))};
EditorUi.prototype.insertPage=function $EditorUi$$insertPage$($page$$,$index$$){if(this.editor.graph.isEnabled()){this.editor.graph.isEditing()&&this.editor.graph.stopEditing(!1);$page$$=null!=$page$$?$page$$:this.createPage();$index$$=null!=$index$$?$index$$:this.pages.length;var $change$$=new ChangePage(this,$page$$,$page$$,$index$$);this.editor.graph.model.execute($change$$)}return $page$$};
EditorUi.prototype.createPage=function $EditorUi$$createPage$($name$$){var $page$$=new DiagramPage(this.fileNode.ownerDocument.createElement("diagram"));$page$$.setName(null!=$name$$?$name$$:this.createPageName());return $page$$};
EditorUi.prototype.createPageName=function $EditorUi$$createPageName$(){for(var $existing$$={},$i$$=0;$i$$<this.pages.length;$i$$++){var $name$jscomp$100_tmp$$=this.pages[$i$$].getName();null!=$name$jscomp$100_tmp$$&&0<$name$jscomp$100_tmp$$.length&&($existing$$[$name$jscomp$100_tmp$$]=$name$jscomp$100_tmp$$)}$i$$=this.pages.length;do $name$jscomp$100_tmp$$=mxResources.get("pageWithNumber",[++$i$$]);while(null!=$existing$$[$name$jscomp$100_tmp$$]);return $name$jscomp$100_tmp$$};
EditorUi.prototype.removePage=function $EditorUi$$removePage$($page$$){try{var $graph$$=this.editor.graph,$tmp$$=mxUtils.indexOf(this.pages,$page$$);if($graph$$.isEnabled()&&0<=$tmp$$){this.editor.graph.isEditing()&&this.editor.graph.stopEditing(!1);$graph$$.model.beginUpdate();try{var $next$$=this.currentPage;$next$$==$page$$&&1<this.pages.length?($tmp$$==this.pages.length-1?$tmp$$--:$tmp$$++,$next$$=this.pages[$tmp$$]):1>=this.pages.length&&($next$$=this.insertPage(),$graph$$.model.execute(new RenamePage(this,
$next$$,mxResources.get("pageWithNumber",[1]))));$graph$$.model.execute(new ChangePage(this,$page$$,$next$$))}finally{$graph$$.model.endUpdate()}}}catch($e$$){this.handleError($e$$)}return $page$$};
EditorUi.prototype.duplicatePage=function $EditorUi$$duplicatePage$($page$$,$name$$){var $newPage$$=null;try{var $graph$$=this.editor.graph;if($graph$$.isEnabled()){$graph$$.isEditing()&&$graph$$.stopEditing();var $node$$=$page$$.node.cloneNode(!1);$node$$.removeAttribute("id");$newPage$$=new DiagramPage($node$$);$newPage$$.root=$graph$$.cloneCell($graph$$.model.root);$newPage$$.viewState=$graph$$.getViewState();$newPage$$.viewState.scale=1;$newPage$$.viewState.scrollLeft=null;$newPage$$.viewState.scrollTop=
null;$newPage$$.viewState.currentRoot=null;$newPage$$.viewState.defaultParent=null;$newPage$$.setName($name$$);$newPage$$=this.insertPage($newPage$$,mxUtils.indexOf(this.pages,$page$$)+1)}}catch($e$$){this.handleError($e$$)}return $newPage$$};
EditorUi.prototype.renamePage=function $EditorUi$$renamePage$($page$$){if(this.editor.graph.isEnabled()){var $dlg$$=new FilenameDialog(this,$page$$.getName(),mxResources.get("rename"),mxUtils.bind(this,function($name$$){null!=$name$$&&0<$name$$.length&&this.editor.graph.model.execute(new RenamePage(this,$page$$,$name$$))}),mxResources.get("rename"));this.showDialog($dlg$$.container,300,80,!0,!0);$dlg$$.init()}return $page$$};
EditorUi.prototype.movePage=function $EditorUi$$movePage$($oldIndex$$,$newIndex$$){this.editor.graph.model.execute(new MovePage(this,$oldIndex$$,$newIndex$$))};EditorUi.prototype.createTabContainer=function $EditorUi$$createTabContainer$(){var $div$$=document.createElement("div");$div$$.className="geTabContainer";$div$$.style.position="absolute";$div$$.style.whiteSpace="nowrap";$div$$.style.overflow="hidden";$div$$.style.height="0px";$div$$.style.display="none";return $div$$};
EditorUi.prototype.updateTabContainer=function $EditorUi$$updateTabContainer$(){if(null!=this.tabContainer&&null!=this.pages){var $graph$$=this.editor.graph,$wrapper$$=document.createElement("div");$wrapper$$.style.position="relative";$wrapper$$.style.display=mxClient.IS_QUIRKS?"inline":"inline-block";$wrapper$$.style.verticalAlign="top";$wrapper$$.style.height=this.tabContainer.style.height;$wrapper$$.style.whiteSpace="nowrap";$wrapper$$.style.overflow="hidden";$wrapper$$.style.fontSize="13px";$wrapper$$.style.marginLeft=
"30px";for(var $btnWidth$$=this.editor.isChromelessView()?29:59,$insertTab_menutab_tabWidth$$=Math.min(140,Math.max(20,(this.tabContainer.clientWidth-$btnWidth$$)/this.pages.length)+1),$startIndex$$=null,$i$$=0;$i$$<this.pages.length;$i$$++)mxUtils.bind(this,function($index$$,$tab$$){this.pages[$index$$]==this.currentPage?($tab$$.className="geActivePage",$tab$$.style.backgroundColor="dark"==uiTheme?"#2a2a2a":"#fff"):$tab$$.className="geInactivePage";$tab$$.setAttribute("draggable","true");mxEvent.addListener($tab$$,
"dragstart",mxUtils.bind(this,function($evt$$){$graph$$.isEnabled()?(mxClient.IS_FF&&$evt$$.dataTransfer.setData("Text","<diagram/>"),$startIndex$$=$index$$):mxEvent.consume($evt$$)}));mxEvent.addListener($tab$$,"dragend",mxUtils.bind(this,function($evt$$){$startIndex$$=null;$evt$$.stopPropagation();$evt$$.preventDefault()}));mxEvent.addListener($tab$$,"dragover",mxUtils.bind(this,function($evt$$){null!=$startIndex$$&&($evt$$.dataTransfer.dropEffect="move");$evt$$.stopPropagation();$evt$$.preventDefault()}));
mxEvent.addListener($tab$$,"drop",mxUtils.bind(this,function($evt$$){null!=$startIndex$$&&$index$$!=$startIndex$$&&this.movePage($startIndex$$,$index$$);$evt$$.stopPropagation();$evt$$.preventDefault()}));$wrapper$$.appendChild($tab$$)})($i$$,this.createTabForPage(this.pages[$i$$],$insertTab_menutab_tabWidth$$,this.pages[$i$$]!=this.currentPage,$i$$+1));this.tabContainer.innerHTML="";this.tabContainer.appendChild($wrapper$$);$insertTab_menutab_tabWidth$$=this.createPageMenuTab();this.tabContainer.appendChild($insertTab_menutab_tabWidth$$);
$insertTab_menutab_tabWidth$$=null;this.isPageInsertTabVisible()&&($insertTab_menutab_tabWidth$$=this.createPageInsertTab(),this.tabContainer.appendChild($insertTab_menutab_tabWidth$$));if($wrapper$$.clientWidth>this.tabContainer.clientWidth-$btnWidth$$){null!=$insertTab_menutab_tabWidth$$&&($insertTab_menutab_tabWidth$$.style.position="absolute",$insertTab_menutab_tabWidth$$.style.right="0px",$wrapper$$.style.marginRight="30px");var $temp$$=this.createControlTab(4,"&nbsp;&#10094;&nbsp;");$temp$$.style.position=
"absolute";$temp$$.style.right=this.editor.chromeless?"29px":"55px";$temp$$.style.fontSize="13pt";this.tabContainer.appendChild($temp$$);var $temp2$$=this.createControlTab(4,"&nbsp;&#10095;");$temp2$$.style.position="absolute";$temp2$$.style.right=this.editor.chromeless?"0px":"29px";$temp2$$.style.fontSize="13pt";this.tabContainer.appendChild($temp2$$);var $dx$$=Math.max(0,this.tabContainer.clientWidth-(this.editor.chromeless?86:116));$wrapper$$.style.width=$dx$$+"px";mxEvent.addListener($temp$$,
"click",mxUtils.bind(this,function($evt$$){$wrapper$$.scrollLeft-=Math.max(20,$dx$$-20);mxUtils.setOpacity($temp$$,0<$wrapper$$.scrollLeft?100:50);mxUtils.setOpacity($temp2$$,$wrapper$$.scrollLeft<$wrapper$$.scrollWidth-$wrapper$$.clientWidth?100:50);mxEvent.consume($evt$$)}));mxUtils.setOpacity($temp$$,0<$wrapper$$.scrollLeft?100:50);mxUtils.setOpacity($temp2$$,$wrapper$$.scrollLeft<$wrapper$$.scrollWidth-$wrapper$$.clientWidth?100:50);mxEvent.addListener($temp2$$,"click",mxUtils.bind(this,function($evt$$){$wrapper$$.scrollLeft+=
Math.max(20,$dx$$-20);mxUtils.setOpacity($temp$$,0<$wrapper$$.scrollLeft?100:50);mxUtils.setOpacity($temp2$$,$wrapper$$.scrollLeft<$wrapper$$.scrollWidth-$wrapper$$.clientWidth?100:50);mxEvent.consume($evt$$)}))}}};EditorUi.prototype.isPageInsertTabVisible=function $EditorUi$$isPageInsertTabVisible$(){return 1==urlParams.embed||null!=this.getCurrentFile()&&this.getCurrentFile().isEditable()};
EditorUi.prototype.createTab=function $EditorUi$$createTab$($hoverEnabled$$){var $tab$$=document.createElement("div");$tab$$.style.display=mxClient.IS_QUIRKS?"inline":"inline-block";$tab$$.style.whiteSpace="nowrap";$tab$$.style.boxSizing="border-box";$tab$$.style.position="relative";$tab$$.style.overflow="hidden";$tab$$.style.textAlign="center";$tab$$.style.marginLeft="-1px";$tab$$.style.height=this.tabContainer.clientHeight+"px";$tab$$.style.padding="12px 4px 8px 4px";$tab$$.style.border="dark"==
uiTheme?"1px solid #505759":"1px solid #e8eaed";$tab$$.style.borderTopStyle="none";$tab$$.style.borderBottomStyle="none";$tab$$.style.backgroundColor=this.tabContainer.style.backgroundColor;$tab$$.style.cursor="move";$tab$$.style.color="gray";$hoverEnabled$$&&(mxEvent.addListener($tab$$,"mouseenter",mxUtils.bind(this,function($evt$$){this.editor.graph.isMouseDown||($tab$$.style.backgroundColor="dark"==uiTheme?"black":"#e8eaed",mxEvent.consume($evt$$))})),mxEvent.addListener($tab$$,"mouseleave",mxUtils.bind(this,
function($evt$$){$tab$$.style.backgroundColor=this.tabContainer.style.backgroundColor;mxEvent.consume($evt$$)})));return $tab$$};
EditorUi.prototype.createControlTab=function $EditorUi$$createControlTab$($paddingTop$$,$html$$){var $tab$$=this.createTab(!0);$tab$$.style.lineHeight=this.tabContainerHeight+"px";$tab$$.style.paddingTop=$paddingTop$$+"px";$tab$$.style.cursor="pointer";$tab$$.style.width="30px";$tab$$.innerHTML=$html$$;null!=$tab$$.firstChild&&null!=$tab$$.firstChild.style&&mxUtils.setOpacity($tab$$.firstChild,40);return $tab$$};
EditorUi.prototype.createPageMenuTab=function $EditorUi$$createPageMenuTab$(){var $tab$$=this.createControlTab(3,'<div class="geSprite geSprite-dots" style="display:inline-block;margin-top:5px;width:21px;height:21px;"></div>');$tab$$.setAttribute("title",mxResources.get("pages"));$tab$$.style.position="absolute";$tab$$.style.marginLeft="0px";$tab$$.style.top="0px";$tab$$.style.left="1px";mxEvent.addListener($tab$$,"click",mxUtils.bind(this,function($evt$$){this.editor.graph.popupMenuHandler.hideMenu();
var $menu$jscomp$0$$=new mxPopupMenu(mxUtils.bind(this,function($menu$$,$parent$$){for(var $i$$=0;$i$$<this.pages.length;$i$$++)mxUtils.bind(this,function($index$$){var $item$$=$menu$$.addItem(this.pages[$index$$].getName(),null,mxUtils.bind(this,function(){this.selectPage(this.pages[$index$$])}),$parent$$);this.pages[$index$$]==this.currentPage&&$menu$$.addCheckmark($item$$,Editor.checkmarkImage)})($i$$);if(this.editor.graph.isEnabled()){$menu$$.addSeparator($parent$$);$menu$$.addItem(mxResources.get("insertPage"),
null,mxUtils.bind(this,function(){this.insertPage()}),$parent$$);var $page$$=this.currentPage;null!=$page$$&&($menu$$.addSeparator($parent$$),$menu$$.addItem(mxResources.get("delete"),null,mxUtils.bind(this,function(){this.removePage($page$$)}),$parent$$),$menu$$.addItem(mxResources.get("rename"),null,mxUtils.bind(this,function(){this.renamePage($page$$,$page$$.getName())}),$parent$$),$menu$$.addSeparator($parent$$),$menu$$.addItem(mxResources.get("duplicate"),null,mxUtils.bind(this,function(){this.duplicatePage($page$$,
mxResources.get("copyOf",[$page$$.getName()]))}),$parent$$))}}));$menu$jscomp$0$$.div.className+=" geMenubarMenu";$menu$jscomp$0$$.smartSeparators=!0;$menu$jscomp$0$$.showDisabled=!0;$menu$jscomp$0$$.autoExpand=!0;$menu$jscomp$0$$.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply($menu$jscomp$0$$,arguments);$menu$jscomp$0$$.destroy()});var $x$$=mxEvent.getClientX($evt$$),$y$$=mxEvent.getClientY($evt$$);$menu$jscomp$0$$.popup($x$$,$y$$,null,$evt$$);this.setCurrentMenu($menu$jscomp$0$$);
mxEvent.consume($evt$$)}));return $tab$$};EditorUi.prototype.createPageInsertTab=function $EditorUi$$createPageInsertTab$(){var $tab$$=this.createControlTab(4,'<div class="geSprite geSprite-plus" style="display:inline-block;width:21px;height:21px;"></div>');$tab$$.setAttribute("title",mxResources.get("insertPage"));mxEvent.addListener($tab$$,"click",mxUtils.bind(this,function($evt$$){this.insertPage();mxEvent.consume($evt$$)}));return $tab$$};
EditorUi.prototype.createTabForPage=function $EditorUi$$createTabForPage$($page$$,$tabWidth$$,$hoverEnabled$jscomp$1_tab$$,$pageNumber$$){$hoverEnabled$jscomp$1_tab$$=this.createTab($hoverEnabled$jscomp$1_tab$$);var $name$$=$page$$.getName()||mxResources.get("untitled"),$id$$=$page$$.getId();$hoverEnabled$jscomp$1_tab$$.setAttribute("title",$name$$+(null!=$id$$?" ("+$id$$+")":"")+" ["+$pageNumber$$+"]");mxUtils.write($hoverEnabled$jscomp$1_tab$$,$name$$);$hoverEnabled$jscomp$1_tab$$.style.maxWidth=
$tabWidth$$+"px";$hoverEnabled$jscomp$1_tab$$.style.width=$tabWidth$$+"px";this.addTabListeners($page$$,$hoverEnabled$jscomp$1_tab$$);42<$tabWidth$$&&($hoverEnabled$jscomp$1_tab$$.style.textOverflow="ellipsis");return $hoverEnabled$jscomp$1_tab$$};
EditorUi.prototype.addTabListeners=function $EditorUi$$addTabListeners$($page$$,$tab$$){mxEvent.disableContextMenu($tab$$);var $graph$$=this.editor.graph;mxEvent.addListener($tab$$,"dblclick",mxUtils.bind(this,function($evt$$){this.renamePage($page$$);mxEvent.consume($evt$$)}));var $menuWasVisible$$=!1,$pageWasActive$$=!1;mxEvent.addGestureListeners($tab$$,mxUtils.bind(this,function($evt$$){$menuWasVisible$$=null!=this.currentMenu;$pageWasActive$$=$page$$==this.currentPage;$graph$$.isMouseDown||$pageWasActive$$||
this.selectPage($page$$)}),null,mxUtils.bind(this,function($evt$$){if($graph$$.isEnabled()&&!$graph$$.isMouseDown&&(mxEvent.isTouchEvent($evt$$)&&$pageWasActive$$||mxEvent.isPopupTrigger($evt$$))){$graph$$.popupMenuHandler.hideMenu();this.hideCurrentMenu();if(!mxEvent.isTouchEvent($evt$$)||!$menuWasVisible$$){var $menu$$=new mxPopupMenu(this.createPageMenu($page$$));$menu$$.div.className+=" geMenubarMenu";$menu$$.smartSeparators=!0;$menu$$.showDisabled=!0;$menu$$.autoExpand=!0;$menu$$.hideMenu=mxUtils.bind(this,
function(){mxPopupMenu.prototype.hideMenu.apply($menu$$,arguments);this.resetCurrentMenu();$menu$$.destroy()});var $x$$=mxEvent.getClientX($evt$$),$y$$=mxEvent.getClientY($evt$$);$menu$$.popup($x$$,$y$$,null,$evt$$);this.setCurrentMenu($menu$$,$tab$$)}mxEvent.consume($evt$$)}}))};
EditorUi.prototype.createPageMenu=function $EditorUi$$createPageMenu$($page$$,$label$$){return mxUtils.bind(this,function($menu$$,$parent$$){$menu$$.addItem(mxResources.get("insert"),null,mxUtils.bind(this,function(){this.insertPage(null,mxUtils.indexOf(this.pages,$page$$)+1)}),$parent$$);$menu$$.addItem(mxResources.get("delete"),null,mxUtils.bind(this,function(){this.removePage($page$$)}),$parent$$);$menu$$.addItem(mxResources.get("rename"),null,mxUtils.bind(this,function(){this.renamePage($page$$,
$label$$)}),$parent$$);$menu$$.addSeparator($parent$$);$menu$$.addItem(mxResources.get("duplicate"),null,mxUtils.bind(this,function(){this.duplicatePage($page$$,mxResources.get("copyOf",[$page$$.getName()]))}),$parent$$)})};(function(){var $editorUiRefresh$$=EditorUi.prototype.refresh;EditorUi.prototype.refresh=function $EditorUi$$refresh$($sizeDidChange$$){$editorUiRefresh$$.apply(this,arguments);this.updateTabContainer()}})();(function(){mxCodecRegistry.getCodec(ChangePageSetup).exclude.push("page")})();
(function(){var $codec$$=new mxObjectCodec(new MovePage,["ui"]);$codec$$.beforeDecode=function $$codec$$$beforeDecode$($dec$$,$node$$,$obj$$){$obj$$.ui=$dec$$.ui;return $node$$};$codec$$.afterDecode=function $$codec$$$afterDecode$($dec$jscomp$7_tmp$$,$node$$,$obj$$){$dec$jscomp$7_tmp$$=$obj$$.oldIndex;$obj$$.oldIndex=$obj$$.newIndex;$obj$$.newIndex=$dec$jscomp$7_tmp$$;return $obj$$};mxCodecRegistry.register($codec$$)})();
(function(){var $codec$$=new mxObjectCodec(new RenamePage,["ui","page"]);$codec$$.beforeDecode=function $$codec$$$beforeDecode$($dec$$,$node$$,$obj$$){$obj$$.ui=$dec$$.ui;return $node$$};$codec$$.afterDecode=function $$codec$$$afterDecode$($dec$jscomp$9_tmp$$,$node$$,$obj$$){$dec$jscomp$9_tmp$$=$obj$$.previous;$obj$$.previous=$obj$$.name;$obj$$.name=$dec$jscomp$9_tmp$$;return $obj$$};mxCodecRegistry.register($codec$$)})();
(function(){var $codec$$=new mxObjectCodec(new ChangePage,"ui relatedPage index neverShown page previousPage".split(" ")),$viewStateIgnored$$="defaultParent currentRoot scrollLeft scrollTop scale translate lastPasteXml pasteCounter".split(" ");$codec$$.afterEncode=function $$codec$$$afterEncode$($enc$$,$obj$$,$node$$){$node$$.setAttribute("relatedPage",$obj$$.relatedPage.getId());null==$obj$$.index&&($node$$.setAttribute("name",$obj$$.relatedPage.getName()),null!=$obj$$.relatedPage.viewState&&$node$$.setAttribute("viewState",
JSON.stringify($obj$$.relatedPage.viewState,function($key$$,$value$$){return 0>mxUtils.indexOf($viewStateIgnored$$,$key$$)?$value$$:void 0})),null!=$obj$$.relatedPage.root&&$enc$$.encodeCell($obj$$.relatedPage.root,$node$$));return $node$$};$codec$$.beforeDecode=function $$codec$$$beforeDecode$($dec$$,$node$$,$obj$jscomp$36_tmp2$$){$obj$jscomp$36_tmp2$$.ui=$dec$$.ui;$obj$jscomp$36_tmp2$$.relatedPage=$obj$jscomp$36_tmp2$$.ui.getPageById($node$$.getAttribute("relatedPage"));if(null==$obj$jscomp$36_tmp2$$.relatedPage){var $temp$jscomp$34_tmp$jscomp$41_vs$$=
$node$$.ownerDocument.createElement("diagram");$temp$jscomp$34_tmp$jscomp$41_vs$$.setAttribute("id",$node$$.getAttribute("relatedPage"));$temp$jscomp$34_tmp$jscomp$41_vs$$.setAttribute("name",$node$$.getAttribute("name"));$obj$jscomp$36_tmp2$$.relatedPage=new DiagramPage($temp$jscomp$34_tmp$jscomp$41_vs$$);$temp$jscomp$34_tmp$jscomp$41_vs$$=$node$$.getAttribute("viewState");null!=$temp$jscomp$34_tmp$jscomp$41_vs$$&&($obj$jscomp$36_tmp2$$.relatedPage.viewState=JSON.parse($temp$jscomp$34_tmp$jscomp$41_vs$$),
$node$$.removeAttribute("viewState"));$node$$=$node$$.cloneNode(!0);$temp$jscomp$34_tmp$jscomp$41_vs$$=$node$$.firstChild;if(null!=$temp$jscomp$34_tmp$jscomp$41_vs$$)for($obj$jscomp$36_tmp2$$.relatedPage.root=$dec$$.decodeCell($temp$jscomp$34_tmp$jscomp$41_vs$$,!1),$obj$jscomp$36_tmp2$$=$temp$jscomp$34_tmp$jscomp$41_vs$$.nextSibling,$temp$jscomp$34_tmp$jscomp$41_vs$$.parentNode.removeChild($temp$jscomp$34_tmp$jscomp$41_vs$$),$temp$jscomp$34_tmp$jscomp$41_vs$$=$obj$jscomp$36_tmp2$$;null!=$temp$jscomp$34_tmp$jscomp$41_vs$$;){$obj$jscomp$36_tmp2$$=
$temp$jscomp$34_tmp$jscomp$41_vs$$.nextSibling;if($temp$jscomp$34_tmp$jscomp$41_vs$$.nodeType==mxConstants.NODETYPE_ELEMENT){var $id$$=$temp$jscomp$34_tmp$jscomp$41_vs$$.getAttribute("id");null==$dec$$.lookup($id$$)&&$dec$$.decodeCell($temp$jscomp$34_tmp$jscomp$41_vs$$)}$temp$jscomp$34_tmp$jscomp$41_vs$$.parentNode.removeChild($temp$jscomp$34_tmp$jscomp$41_vs$$);$temp$jscomp$34_tmp$jscomp$41_vs$$=$obj$jscomp$36_tmp2$$}}return $node$$};$codec$$.afterDecode=function $$codec$$$afterDecode$($dec$$,$node$$,
$obj$$){$obj$$.index=$obj$$.previousIndex;return $obj$$};mxCodecRegistry.register($codec$$)})();(function(){var $moveImage$$=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAASFBMVEUAAAAAAAB/f3/9/f319fUfHx/7+/s+Pj69vb0AAAAAAAAAAAAAAAAAAAAAAAAAAAB2dnZ1dXUAAAAAAAAVFRX///8ZGRkGBgbOcI1hAAAAE3RSTlMA+vr9/f38+fb1893Bo00u+/tFvPJUBQAAAIRJREFUGNM0jEcSxCAQAxlydGqD///TNWxZBx1aXVIrWysplbapL3sFxgDq/idXBnHgBPK1nIxwc55vCXl6dRFtrV6svs/A/UjsPcpzA5tqyByD92HqQlMFh45BG6ND1DiKSoPDdm96N77bg5F+wyaEqRGb8ZiOwHQqdg9hehszcLAEIQB2lQ4p/sEpnAAAAABJRU5ErkJggg==":IMAGE_PATH+"/move.png";
EditorUi.prototype.altShiftActions[68]="selectDescendants";var $graphFoldCells$$=Graph.prototype.foldCells;Graph.prototype.foldCells=function $Graph$$foldCells$($collapse$$,$recurse$$,$cells$$,$checkFoldable$$,$evt$$){$recurse$$=null!=$recurse$$?$recurse$$:!1;null==$cells$$&&($cells$$=this.getFoldableCells(this.getSelectionCells(),$collapse$$));this.stopEditing();this.model.beginUpdate();try{for(var $newCells$$=$cells$$.slice(),$tmp$$=[],$i$$=0;$i$$<$cells$$.length;$i$$++){var $state$$=this.view.getState($cells$$[$i$$]),
$style$$=null!=$state$$?$state$$.style:this.getCellStyle($cells$$[$i$$]);"1"==mxUtils.getValue($style$$,"treeFolding","0")&&(this.traverse($cells$$[$i$$],!0,mxUtils.bind(this,function($vertex$$,$edge$$){null!=$edge$$&&$tmp$$.push($edge$$);$vertex$$!=$cells$$[$i$$]&&$tmp$$.push($vertex$$);return $vertex$$==$cells$$[$i$$]||!this.model.isCollapsed($vertex$$)})),this.model.setCollapsed($cells$$[$i$$],$collapse$$))}for($i$$=0;$i$$<$tmp$$.length;$i$$++)this.model.setVisible($tmp$$[$i$$],!$collapse$$);$cells$$=
$newCells$$;$cells$$=$graphFoldCells$$.apply(this,arguments)}finally{this.model.endUpdate()}return $cells$$};var $editorUiInit$$=EditorUi.prototype.init;EditorUi.prototype.init=function $EditorUi$$init$(){$editorUiInit$$.apply(this,arguments);this.editor.isChromelessView()&&!this.editor.editable||this.addTrees()};EditorUi.prototype.addTrees=function $EditorUi$$addTrees$(){function $isTreeVertex$$($cell$$){return $model$jscomp$0$$.isVertex($cell$$)&&$hasTreeParent$$($cell$$)}function $hasTreeParent$$($cell$jscomp$32_parent$$){var $pstate_result$$=
!1;null!=$cell$jscomp$32_parent$$&&($cell$jscomp$32_parent$$=$model$jscomp$0$$.getParent($cell$jscomp$32_parent$$),$pstate_result$$=$graph$$.view.getState($cell$jscomp$32_parent$$),$graph$$.view.getState($cell$jscomp$32_parent$$),$pstate_result$$="tree"==(null!=$pstate_result$$?$pstate_result$$.style:$graph$$.getCellStyle($cell$jscomp$32_parent$$)).containerType);return $pstate_result$$}function $hasLayoutParent$$($cell$jscomp$33_parent$$){var $pstate$jscomp$1_result$$=!1;null!=$cell$jscomp$33_parent$$&&
($cell$jscomp$33_parent$$=$model$jscomp$0$$.getParent($cell$jscomp$33_parent$$),$pstate$jscomp$1_result$$=$graph$$.view.getState($cell$jscomp$33_parent$$),$graph$$.view.getState($cell$jscomp$33_parent$$),$pstate$jscomp$1_result$$=null!=(null!=$pstate$jscomp$1_result$$?$pstate$jscomp$1_result$$.style:$graph$$.getCellStyle($cell$jscomp$33_parent$$)).childLayout);return $pstate$jscomp$1_result$$}function $getTreeDirection$$($cell$jscomp$34_state$$){$cell$jscomp$34_state$$=$graph$$.view.getState($cell$jscomp$34_state$$);
if(null!=$cell$jscomp$34_state$$){var $abs_edgeState_edges$jscomp$2_pt$$=$graph$$.getIncomingEdges($cell$jscomp$34_state$$.cell);if(0<$abs_edgeState_edges$jscomp$2_pt$$.length&&($abs_edgeState_edges$jscomp$2_pt$$=$graph$$.view.getState($abs_edgeState_edges$jscomp$2_pt$$[0]),null!=$abs_edgeState_edges$jscomp$2_pt$$&&($abs_edgeState_edges$jscomp$2_pt$$=$abs_edgeState_edges$jscomp$2_pt$$.absolutePoints,null!=$abs_edgeState_edges$jscomp$2_pt$$&&0<$abs_edgeState_edges$jscomp$2_pt$$.length&&($abs_edgeState_edges$jscomp$2_pt$$=
$abs_edgeState_edges$jscomp$2_pt$$[$abs_edgeState_edges$jscomp$2_pt$$.length-1],null!=$abs_edgeState_edges$jscomp$2_pt$$)))){if($abs_edgeState_edges$jscomp$2_pt$$.y==$cell$jscomp$34_state$$.y&&Math.abs($abs_edgeState_edges$jscomp$2_pt$$.x-$cell$jscomp$34_state$$.getCenterX())<$cell$jscomp$34_state$$.width/2)return mxConstants.DIRECTION_SOUTH;if($abs_edgeState_edges$jscomp$2_pt$$.y==$cell$jscomp$34_state$$.y+$cell$jscomp$34_state$$.height&&Math.abs($abs_edgeState_edges$jscomp$2_pt$$.x-$cell$jscomp$34_state$$.getCenterX())<
$cell$jscomp$34_state$$.width/2)return mxConstants.DIRECTION_NORTH;if($abs_edgeState_edges$jscomp$2_pt$$.x>$cell$jscomp$34_state$$.getCenterX())return mxConstants.DIRECTION_WEST}}return mxConstants.DIRECTION_EAST}function $addSibling$$($cell$$,$after$$){$after$$=null!=$after$$?$after$$:!0;$graph$$.model.beginUpdate();try{var $parent$$=$graph$$.model.getParent($cell$$),$dx$jscomp$16_edges$$=$graph$$.getIncomingEdges($cell$$),$clones$$=$graph$$.cloneCells([$dx$jscomp$16_edges$$[0],$cell$$]);$graph$$.model.setTerminal($clones$$[0],
$graph$$.model.getTerminal($dx$jscomp$16_edges$$[0],!0),!0);var $dir$$=$getTreeDirection$$($cell$$),$dy$$=$parent$$.geometry;$dir$$==mxConstants.DIRECTION_SOUTH||$dir$$==mxConstants.DIRECTION_NORTH?$clones$$[1].geometry.x+=$after$$?$cell$$.geometry.width+10:-$clones$$[1].geometry.width-10:$clones$$[1].geometry.y+=$after$$?$cell$$.geometry.height+10:-$clones$$[1].geometry.height-10;$graph$$.view.currentRoot!=$parent$$&&($clones$$[1].geometry.x-=$dy$$.x,$clones$$[1].geometry.y-=$dy$$.y);var $state$$=
$graph$$.view.getState($cell$$),$s$$=$graph$$.view.scale;if(null!=$state$$){var $bbox$$=mxRectangle.fromRectangle($state$$);$dir$$==mxConstants.DIRECTION_SOUTH||$dir$$==mxConstants.DIRECTION_NORTH?$bbox$$.x+=($after$$?$cell$$.geometry.width+10:-$clones$$[1].geometry.width-10)*$s$$:$bbox$$.y+=($after$$?$cell$$.geometry.height+10:-$clones$$[1].geometry.height-10)*$s$$;var $sib$$=$graph$$.getOutgoingEdges($graph$$.model.getTerminal($dx$jscomp$16_edges$$[0],!0));if(null!=$sib$$){for(var $hor$$=$dir$$==
mxConstants.DIRECTION_SOUTH||$dir$$==mxConstants.DIRECTION_NORTH,$i$$=$dy$$=$dx$jscomp$16_edges$$=0;$i$$<$sib$$.length;$i$$++){var $temp$$=$graph$$.model.getTerminal($sib$$[$i$$],!1);if($dir$$==$getTreeDirection$$($temp$$)){var $sibling$$=$graph$$.view.getState($temp$$);$temp$$!=$cell$$&&null!=$sibling$$&&($hor$$&&$after$$!=$sibling$$.getCenterX()<$state$$.getCenterX()||!$hor$$&&$after$$!=$sibling$$.getCenterY()<$state$$.getCenterY())&&mxUtils.intersects($bbox$$,$sibling$$)&&($dx$jscomp$16_edges$$=
10+Math.max($dx$jscomp$16_edges$$,(Math.min($bbox$$.x+$bbox$$.width,$sibling$$.x+$sibling$$.width)-Math.max($bbox$$.x,$sibling$$.x))/$s$$),$dy$$=10+Math.max($dy$$,(Math.min($bbox$$.y+$bbox$$.height,$sibling$$.y+$sibling$$.height)-Math.max($bbox$$.y,$sibling$$.y))/$s$$))}}$hor$$?$dy$$=0:$dx$jscomp$16_edges$$=0;for($i$$=0;$i$$<$sib$$.length;$i$$++)if($temp$$=$graph$$.model.getTerminal($sib$$[$i$$],!1),$dir$$==$getTreeDirection$$($temp$$)&&($sibling$$=$graph$$.view.getState($temp$$),$temp$$!=$cell$$&&
null!=$sibling$$&&($hor$$&&$after$$!=$sibling$$.getCenterX()<$state$$.getCenterX()||!$hor$$&&$after$$!=$sibling$$.getCenterY()<$state$$.getCenterY()))){var $subtree$$=[];$graph$$.traverse($sibling$$.cell,!0,function($vertex$$,$edge$$){null!=$edge$$&&$subtree$$.push($edge$$);$subtree$$.push($vertex$$);return!0});$graph$$.moveCells($subtree$$,($after$$?1:-1)*$dx$jscomp$16_edges$$,($after$$?1:-1)*$dy$$)}}}return $graph$$.addCells($clones$$,$parent$$)}finally{$graph$$.model.endUpdate()}}function $addParent$$($cell$$){$graph$$.model.beginUpdate();
try{var $dir$$=$getTreeDirection$$($cell$$),$edges$$=$graph$$.getIncomingEdges($cell$$),$clones$$=$graph$$.cloneCells([$edges$$[0],$cell$$]);$graph$$.model.setTerminal($edges$$[0],$clones$$[1],!1);$graph$$.model.setTerminal($clones$$[0],$clones$$[1],!0);$graph$$.model.setTerminal($clones$$[0],$cell$$,!1);var $parent$$=$graph$$.model.getParent($cell$$),$pgeo$$=$parent$$.geometry,$subtree$$=[];$graph$$.view.currentRoot!=$parent$$&&($clones$$[1].geometry.x-=$pgeo$$.x,$clones$$[1].geometry.y-=$pgeo$$.y);
$graph$$.traverse($cell$$,!0,function($vertex$$,$edge$$){null!=$edge$$&&$subtree$$.push($edge$$);$subtree$$.push($vertex$$);return!0});var $dx$$=$cell$$.geometry.width+40,$dy$$=$cell$$.geometry.height+40;$dir$$==mxConstants.DIRECTION_SOUTH?$dx$$=0:$dir$$==mxConstants.DIRECTION_NORTH?($dx$$=0,$dy$$=-$dy$$):$dir$$==mxConstants.DIRECTION_WEST?($dx$$=-$dx$$,$dy$$=0):$dir$$==mxConstants.DIRECTION_EAST&&($dy$$=0);$graph$$.moveCells($subtree$$,$dx$$,$dy$$);return $graph$$.addCells($clones$$,$parent$$)}finally{$graph$$.model.endUpdate()}}
function $addChild$$($cell$$){$graph$$.model.beginUpdate();try{var $parent$$=$graph$$.model.getParent($cell$$),$edges$$=$graph$$.getIncomingEdges($cell$$),$clones$$=$graph$$.cloneCells([$edges$$[0],$cell$$]);$graph$$.model.setTerminal($clones$$[0],$cell$$,!0);var $edges$$=$graph$$.getOutgoingEdges($cell$$),$pgeo$$=$parent$$.geometry,$targets$$=[];$graph$$.view.currentRoot==$parent$$&&($pgeo$$=new mxRectangle);for(var $i$$=0;$i$$<$edges$$.length;$i$$++){var $target$$=$graph$$.model.getTerminal($edges$$[$i$$],
!1);null!=$target$$&&$targets$$.push($target$$)}var $bbox$$=$graph$$.view.getBounds($targets$$),$dir$$=$getTreeDirection$$($cell$$),$tr$$=$graph$$.view.translate,$s$$=$graph$$.view.scale;$dir$$==mxConstants.DIRECTION_SOUTH?($clones$$[1].geometry.x=null==$bbox$$?$cell$$.geometry.x+($cell$$.geometry.width-$clones$$[1].geometry.width)/2:($bbox$$.x+$bbox$$.width)/$s$$-$tr$$.x-$pgeo$$.x+10,$clones$$[1].geometry.y+=$clones$$[1].geometry.height-$pgeo$$.y+40):$dir$$==mxConstants.DIRECTION_NORTH?($clones$$[1].geometry.x=
null==$bbox$$?$cell$$.geometry.x+($cell$$.geometry.width-$clones$$[1].geometry.width)/2:($bbox$$.x+$bbox$$.width)/$s$$-$tr$$.x+-$pgeo$$.x+10,$clones$$[1].geometry.y-=$clones$$[1].geometry.height+$pgeo$$.y+40):($clones$$[1].geometry.x=$dir$$==mxConstants.DIRECTION_WEST?$clones$$[1].geometry.x-($clones$$[1].geometry.width+$pgeo$$.x+40):$clones$$[1].geometry.x+($clones$$[1].geometry.width-$pgeo$$.x+40),$clones$$[1].geometry.y=null==$bbox$$?$cell$$.geometry.y+($cell$$.geometry.height-$clones$$[1].geometry.height)/
2:($bbox$$.y+$bbox$$.height)/$s$$-$tr$$.y+-$pgeo$$.y+10);return $graph$$.addCells($clones$$,$parent$$)}finally{$graph$$.model.endUpdate()}}function $getOrderedTargets$$($cell$jscomp$38_sib$$,$horizontal$$,$ref$jscomp$10_state$$){$cell$jscomp$38_sib$$=$graph$$.getOutgoingEdges($cell$jscomp$38_sib$$);$ref$jscomp$10_state$$=$graph$$.view.getState($ref$jscomp$10_state$$);var $targets$$=[];if(null!=$ref$jscomp$10_state$$&&null!=$cell$jscomp$38_sib$$){for(var $i$$=0;$i$$<$cell$jscomp$38_sib$$.length;$i$$++){var $temp$$=
$graph$$.view.getState($graph$$.model.getTerminal($cell$jscomp$38_sib$$[$i$$],!1));null!=$temp$$&&(!$horizontal$$&&Math.min($temp$$.x+$temp$$.width,$ref$jscomp$10_state$$.x+$ref$jscomp$10_state$$.width)>=Math.max($temp$$.x,$ref$jscomp$10_state$$.x)||$horizontal$$&&Math.min($temp$$.y+$temp$$.height,$ref$jscomp$10_state$$.y+$ref$jscomp$10_state$$.height)>=Math.max($temp$$.y,$ref$jscomp$10_state$$.y))&&$targets$$.push($temp$$)}$targets$$.sort(function($a$$,$b$$){return $horizontal$$?$a$$.x+$a$$.width-
$b$$.x-$b$$.width:$a$$.y+$a$$.height-$b$$.y-$b$$.height})}return $targets$$}function $selectCell$$($cell$$,$direction$$){var $dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$=$getTreeDirection$$($cell$$),$h2$jscomp$4_sib$jscomp$2_targets$$=$direction$$==mxConstants.DIRECTION_EAST||$direction$$==mxConstants.DIRECTION_WEST;($dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$==mxConstants.DIRECTION_EAST||$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$==mxConstants.DIRECTION_WEST)==$h2$jscomp$4_sib$jscomp$2_targets$$&&
$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$!=$direction$$?$ui$$.actions.get("selectParent").funct():$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$==$direction$$?($h2$jscomp$4_sib$jscomp$2_targets$$=$graph$$.getOutgoingEdges($cell$$),null!=$h2$jscomp$4_sib$jscomp$2_targets$$&&0<$h2$jscomp$4_sib$jscomp$2_targets$$.length&&$graph$$.setSelectionCell($graph$$.model.getTerminal($h2$jscomp$4_sib$jscomp$2_targets$$[0],!1))):($dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$=$graph$$.getIncomingEdges($cell$$),
null!=$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$&&0<$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$.length&&($h2$jscomp$4_sib$jscomp$2_targets$$=$getOrderedTargets$$($graph$$.model.getTerminal($dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$[0],!0),$h2$jscomp$4_sib$jscomp$2_targets$$,$cell$$),$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$=$graph$$.view.getState($cell$$),null!=$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$&&($dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$=mxUtils.indexOf($h2$jscomp$4_sib$jscomp$2_targets$$,
$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$),0<=$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$&&($dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$+=$direction$$==mxConstants.DIRECTION_NORTH||$direction$$==mxConstants.DIRECTION_WEST?-1:1,0<=$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$&&$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$<=$h2$jscomp$4_sib$jscomp$2_targets$$.length-1&&$graph$$.setSelectionCell($h2$jscomp$4_sib$jscomp$2_targets$$[$dir$jscomp$3_edges$jscomp$6_idx$jscomp$11_state$$].cell)))))}
var $ui$$=this,$graph$$=$ui$$.editor.graph,$model$jscomp$0$$=$graph$$.getModel(),$uiCreatePopupMenu$$=$ui$$.menus.createPopupMenu;$ui$$.menus.createPopupMenu=function $$ui$$$menus$createPopupMenu$($menu$$,$cell$$,$evt$$){$uiCreatePopupMenu$$.apply(this,arguments);if(1==$graph$$.getSelectionCount()){$cell$$=$graph$$.getSelectionCell();var $sib$$=$graph$$.getOutgoingEdges($cell$$);$menu$$.addSeparator();null!=$sib$$&&0<$sib$$.length&&($isTreeVertex$$($graph$$.getSelectionCell())&&this.addMenuItems($menu$$,
["selectChildren"],null,$evt$$),this.addMenuItems($menu$$,["selectDescendants"],null,$evt$$));$isTreeVertex$$($graph$$.getSelectionCell())&&($menu$$.addSeparator(),0<$graph$$.getIncomingEdges($cell$$).length&&this.addMenuItems($menu$$,["selectSiblings","selectParent"],null,$evt$$))}};$ui$$.actions.addAction("selectChildren",function(){if($graph$$.isEnabled()&&1==$graph$$.getSelectionCount()){var $cell$jscomp$41_sib$$=$graph$$.getSelectionCell(),$cell$jscomp$41_sib$$=$graph$$.getOutgoingEdges($cell$jscomp$41_sib$$);
if(null!=$cell$jscomp$41_sib$$){for(var $tmp$$=[],$i$$=0;$i$$<$cell$jscomp$41_sib$$.length;$i$$++)$tmp$$.push($graph$$.model.getTerminal($cell$jscomp$41_sib$$[$i$$],!1));$graph$$.setSelectionCells($tmp$$)}}},null,null,"Alt+Shift+X");$ui$$.actions.addAction("selectSiblings",function(){if($graph$$.isEnabled()&&1==$graph$$.getSelectionCount()){var $cell$jscomp$42_edges$jscomp$7_sib$$=$graph$$.getSelectionCell(),$cell$jscomp$42_edges$jscomp$7_sib$$=$graph$$.getIncomingEdges($cell$jscomp$42_edges$jscomp$7_sib$$);
if(null!=$cell$jscomp$42_edges$jscomp$7_sib$$&&0<$cell$jscomp$42_edges$jscomp$7_sib$$.length&&($cell$jscomp$42_edges$jscomp$7_sib$$=$graph$$.getOutgoingEdges($graph$$.model.getTerminal($cell$jscomp$42_edges$jscomp$7_sib$$[0],!0)),null!=$cell$jscomp$42_edges$jscomp$7_sib$$)){for(var $tmp$$=[],$i$$=0;$i$$<$cell$jscomp$42_edges$jscomp$7_sib$$.length;$i$$++)$tmp$$.push($graph$$.model.getTerminal($cell$jscomp$42_edges$jscomp$7_sib$$[$i$$],!1));$graph$$.setSelectionCells($tmp$$)}}},null,null,"Alt+Shift+S");
$ui$$.actions.addAction("selectParent",function(){if($graph$$.isEnabled()&&1==$graph$$.getSelectionCount()){var $cell$jscomp$43_edges$$=$graph$$.getSelectionCell(),$cell$jscomp$43_edges$$=$graph$$.getIncomingEdges($cell$jscomp$43_edges$$);null!=$cell$jscomp$43_edges$$&&0<$cell$jscomp$43_edges$$.length&&$graph$$.setSelectionCell($graph$$.model.getTerminal($cell$jscomp$43_edges$$[0],!0))}},null,null,"Alt+Shift+P");$ui$$.actions.addAction("selectDescendants",function(){if($graph$$.isEnabled()&&1==$graph$$.getSelectionCount()){var $cell$$=
$graph$$.getSelectionCell(),$subtree$$=[];$graph$$.traverse($cell$$,!0,function($vertex$$,$edge$$){null!=$edge$$&&$subtree$$.push($edge$$);$subtree$$.push($vertex$$);return!0});$graph$$.setSelectionCells($subtree$$)}},null,null,"Alt+Shift+D");var $graphRemoveCells$$=$graph$$.removeCells;$graph$$.removeCells=function $$graph$$$removeCells$($cells$$,$includeEdges$$){$includeEdges$$=null!=$includeEdges$$?$includeEdges$$:!0;null==$cells$$&&($cells$$=this.getDeletableCells(this.getSelectionCells()));$includeEdges$$&&
($cells$$=this.getDeletableCells(this.addAllEdges($cells$$)));for(var $tmp$$=[],$i$$=0;$i$$<$cells$$.length;$i$$++){var $edges$jscomp$9_target$$=$cells$$[$i$$];$model$jscomp$0$$.isEdge($edges$jscomp$9_target$$)&&$hasTreeParent$$($edges$jscomp$9_target$$)&&($tmp$$.push($edges$jscomp$9_target$$),$edges$jscomp$9_target$$=$model$jscomp$0$$.getTerminal($edges$jscomp$9_target$$,!1));$isTreeVertex$$($edges$jscomp$9_target$$)?($graph$$.traverse($edges$jscomp$9_target$$,!0,function($vertex$$,$edge$$){null!=
$edge$$&&$tmp$$.push($edge$$);$tmp$$.push($vertex$$);return!0}),$edges$jscomp$9_target$$=$graph$$.getIncomingEdges($cells$$[$i$$]),$cells$$=$cells$$.concat($edges$jscomp$9_target$$)):$tmp$$.push($cells$$[$i$$])}$cells$$=$tmp$$;return $graphRemoveCells$$.apply(this,arguments)};$ui$$.hoverIcons.getStateAt=function $$ui$$$hoverIcons$getStateAt$($state$$,$x$$,$y$$){return $isTreeVertex$$($state$$.cell)?null:this.graph.view.getState(this.graph.getCellAt($x$$,$y$$))};var $graphDuplicateCells$$=$graph$$.duplicateCells;
$graph$$.duplicateCells=function $$graph$$$duplicateCells$($cells$$,$append$$){$cells$$=null!=$cells$$?$cells$$:this.getSelectionCells();for(var $temp$$=$cells$$.slice(0),$i$$=0;$i$$<$temp$$.length;$i$$++){var $j$jscomp$19_state$$=$graph$$.view.getState($temp$$[$i$$]);if(null!=$j$jscomp$19_state$$&&$isTreeVertex$$($j$jscomp$19_state$$.cell))for(var $edges$$=$graph$$.getIncomingEdges($j$jscomp$19_state$$.cell),$j$jscomp$19_state$$=0;$j$jscomp$19_state$$<$edges$$.length;$j$jscomp$19_state$$++)mxUtils.remove($edges$$[$j$jscomp$19_state$$],
$cells$$)}this.model.beginUpdate();try{var $result$$=$graphDuplicateCells$$.call(this,$cells$$,$append$$);if($result$$.length==$cells$$.length)for($i$$=0;$i$$<$cells$$.length;$i$$++)if($isTreeVertex$$($cells$$[$i$$])){var $newEdges$$=$graph$$.getIncomingEdges($result$$[$i$$]),$edges$$=$graph$$.getIncomingEdges($cells$$[$i$$]);if(0==$newEdges$$.length&&0<$edges$$.length){var $clone$$=this.cloneCell($edges$$[0]);this.addEdge($clone$$,$graph$$.getDefaultParent(),this.model.getTerminal($edges$$[0],!0),
$result$$[$i$$])}}}finally{this.model.endUpdate()}return $result$$};var $graphMoveCells$$=$graph$$.moveCells;$graph$$.moveCells=function $$graph$$$moveCells$($cells$$,$dx$$,$dy$$,$clone$$,$target$$,$evt$$,$mapping$$){var $result$$=null;this.model.beginUpdate();try{var $newSource$$=$target$$,$state$jscomp$29_temp$$=this.view.getState($target$$),$style$$=null!=$state$jscomp$29_temp$$?$state$jscomp$29_temp$$.style:this.getCellStyle($target$$);if(null!=$cells$$&&$isTreeVertex$$($target$$)&&"1"==mxUtils.getValue($style$$,
"treeFolding","0")){for(var $i$$=0;$i$$<$cells$$.length;$i$$++)if($isTreeVertex$$($cells$$[$i$$])||$graph$$.model.isEdge($cells$$[$i$$])&&null==$graph$$.model.getTerminal($cells$$[$i$$],!0)){$target$$=$graph$$.model.getParent($cells$$[$i$$]);break}if(null!=$newSource$$&&$target$$!=$newSource$$&&null!=this.view.getState($cells$$[0])){var $edges$$=$graph$$.getIncomingEdges($cells$$[0]);if(0<$edges$$.length){var $state1$$=$graph$$.view.getState($graph$$.model.getTerminal($edges$$[0],!0));if(null!=$state1$$){var $state2$$=
$graph$$.view.getState($newSource$$);null!=$state2$$&&($dx$$=($state2$$.getCenterX()-$state1$$.getCenterX())/$graph$$.view.scale,$dy$$=($state2$$.getCenterY()-$state1$$.getCenterY())/$graph$$.view.scale)}}}}$result$$=$graphMoveCells$$.apply(this,arguments);if(null!=$result$$&&null!=$cells$$&&$result$$.length==$cells$$.length)for($i$$=0;$i$$<$result$$.length;$i$$++)if(this.model.isEdge($result$$[$i$$]))$isTreeVertex$$($newSource$$)&&0>mxUtils.indexOf($result$$,this.model.getTerminal($result$$[$i$$],
!0))&&this.model.setTerminal($result$$[$i$$],$newSource$$,!0);else if($isTreeVertex$$($cells$$[$i$$])&&($edges$$=$graph$$.getIncomingEdges($cells$$[$i$$]),0<$edges$$.length))if(!$clone$$)$isTreeVertex$$($newSource$$)&&0>mxUtils.indexOf($cells$$,this.model.getTerminal($edges$$[0],!0))&&this.model.setTerminal($edges$$[0],$newSource$$,!0);else if(0==$graph$$.getIncomingEdges($result$$[$i$$]).length){$state$jscomp$29_temp$$=$newSource$$;if(null==$state$jscomp$29_temp$$||$state$jscomp$29_temp$$==$graph$$.model.getParent($cells$$[$i$$]))$state$jscomp$29_temp$$=
$graph$$.model.getTerminal($edges$$[0],!0);$clone$$=this.cloneCell($edges$$[0]);this.addEdge($clone$$,$graph$$.getDefaultParent(),$state$jscomp$29_temp$$,$result$$[$i$$])}}finally{this.model.endUpdate()}return $result$$};if(null!=$ui$$.sidebar){var $sidebarDropAndConnect$$=$ui$$.sidebar.dropAndConnect;$ui$$.sidebar.dropAndConnect=function $$ui$$$sidebar$dropAndConnect$($source$$,$targets$$,$direction$$,$dropCellIndex$$){var $model$$=$graph$$.model,$result$$=null;$model$$.beginUpdate();try{if($result$$=
$sidebarDropAndConnect$$.apply(this,arguments),$isTreeVertex$$($source$$))for(var $i$$=0;$i$$<$result$$.length;$i$$++)if($model$$.isEdge($result$$[$i$$])&&null==$model$$.getTerminal($result$$[$i$$],!0)){$model$$.setTerminal($result$$[$i$$],$source$$,!0);var $geo$$=$graph$$.getCellGeometry($result$$[$i$$]);$geo$$.points=null;null!=$geo$$.getTerminalPoint(!0)&&$geo$$.setTerminalPoint(null,!0)}}finally{$model$$.endUpdate()}return $result$$}}var $altShiftActions$$={88:$ui$$.actions.get("selectChildren"),
84:$ui$$.actions.get("selectSubtree"),80:$ui$$.actions.get("selectParent"),83:$ui$$.actions.get("selectSiblings")},$editorUiOnKeyDown$$=$ui$$.onKeyDown;$ui$$.onKeyDown=function $$ui$$$onKeyDown$($evt$$){try{if($graph$$.isEnabled()&&!$graph$$.isEditing()&&$isTreeVertex$$($graph$$.getSelectionCell())&&1==$graph$$.getSelectionCount()){var $cells$$=null;0<$graph$$.getIncomingEdges($graph$$.getSelectionCell()).length&&(9==$evt$$.which?$cells$$=mxEvent.isShiftDown($evt$$)?$addParent$$($graph$$.getSelectionCell()):
$addChild$$($graph$$.getSelectionCell()):13==$evt$$.which&&($cells$$=$addSibling$$($graph$$.getSelectionCell(),!mxEvent.isShiftDown($evt$$))));if(null!=$cells$$&&0<$cells$$.length)1==$cells$$.length&&$graph$$.model.isEdge($cells$$[0])?$graph$$.setSelectionCell($graph$$.model.getTerminal($cells$$[0],!1)):$graph$$.setSelectionCell($cells$$[$cells$$.length-1]),null!=$ui$$.hoverIcons&&$ui$$.hoverIcons.update($graph$$.view.getState($graph$$.getSelectionCell())),$graph$$.startEditingAtCell($graph$$.getSelectionCell()),
mxEvent.consume($evt$$);else if(mxEvent.isAltDown($evt$$)&&mxEvent.isShiftDown($evt$$)){var $action$$=$altShiftActions$$[$evt$$.keyCode];null!=$action$$&&($action$$.funct($evt$$),mxEvent.consume($evt$$))}else 37==$evt$$.keyCode?($selectCell$$($graph$$.getSelectionCell(),mxConstants.DIRECTION_WEST),mxEvent.consume($evt$$)):38==$evt$$.keyCode?($selectCell$$($graph$$.getSelectionCell(),mxConstants.DIRECTION_NORTH),mxEvent.consume($evt$$)):39==$evt$$.keyCode?($selectCell$$($graph$$.getSelectionCell(),
mxConstants.DIRECTION_EAST),mxEvent.consume($evt$$)):40==$evt$$.keyCode&&($selectCell$$($graph$$.getSelectionCell(),mxConstants.DIRECTION_SOUTH),mxEvent.consume($evt$$))}}catch($e$$){console.log("error",$e$$)}mxEvent.isConsumed($evt$$)||$editorUiOnKeyDown$$.apply(this,arguments)};var $graphConnectVertex$$=$graph$$.connectVertex;$graph$$.connectVertex=function $$graph$$$connectVertex$($source$$,$direction$$,$dir$jscomp$4_length$$,$evt$jscomp$190_h1$$,$forceClone_h2$$,$ignoreCellAt$$){var $edges$$=
$graph$$.getIncomingEdges($source$$);return $isTreeVertex$$($source$$)&&0<$edges$$.length?($dir$jscomp$4_length$$=$getTreeDirection$$($source$$),$evt$jscomp$190_h1$$=$dir$jscomp$4_length$$==mxConstants.DIRECTION_EAST||$dir$jscomp$4_length$$==mxConstants.DIRECTION_WEST,$forceClone_h2$$=$direction$$==mxConstants.DIRECTION_EAST||$direction$$==mxConstants.DIRECTION_WEST,$dir$jscomp$4_length$$==$direction$$?$addChild$$($source$$):$evt$jscomp$190_h1$$==$forceClone_h2$$?$addParent$$($source$$):$addSibling$$($source$$,
$direction$$!=mxConstants.DIRECTION_NORTH&&$direction$$!=mxConstants.DIRECTION_WEST)):$graphConnectVertex$$.call(this,$source$$,$direction$$,$dir$jscomp$4_length$$,$evt$jscomp$190_h1$$,$forceClone_h2$$,$ignoreCellAt$$)};$graph$$.getSubtree=function $$graph$$$getSubtree$($initialCell$$){var $cells$$=[$initialCell$$];$isTreeVertex$$($initialCell$$)&&!$hasLayoutParent$$($initialCell$$)&&$graph$$.traverse($initialCell$$,!0,function($vertex$$,$edge$$){null!=$edge$$&&0>mxUtils.indexOf($cells$$,$edge$$)&&
$cells$$.push($edge$$);0>mxUtils.indexOf($cells$$,$vertex$$)&&$cells$$.push($vertex$$);return!0});return $cells$$};var $vertexHandlerInit$$=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function $mxVertexHandler$$init$(){$vertexHandlerInit$$.apply(this,arguments);$isTreeVertex$$(this.state.cell)&&0<this.graph.getOutgoingEdges(this.state.cell).length&&(this.moveHandle=mxUtils.createImage($moveImage$$),this.moveHandle.setAttribute("title","Move Subtree"),this.moveHandle.style.position=
"absolute",this.moveHandle.style.cursor="pointer",this.moveHandle.style.width="18px",this.moveHandle.style.height="18px",this.graph.container.appendChild(this.moveHandle),mxEvent.addGestureListeners(this.moveHandle,mxUtils.bind(this,function($evt$$){this.graph.graphHandler.start(this.state.cell,mxEvent.getClientX($evt$$),mxEvent.getClientY($evt$$));this.graph.graphHandler.cells=this.graph.getSubtree(this.state.cell);this.graph.graphHandler.bounds=this.state.view.getBounds(this.graph.graphHandler.cells);
this.graph.graphHandler.pBounds=this.graph.graphHandler.getPreviewBounds(this.graph.graphHandler.cells);this.graph.graphHandler.cellWasClicked=!0;this.graph.isMouseTrigger=mxEvent.isMouseEvent($evt$$);this.graph.isMouseDown=!0;mxEvent.consume($evt$$)})))};var $vertexHandlerRedrawHandles$$=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function $mxVertexHandler$$redrawHandles$(){$vertexHandlerRedrawHandles$$.apply(this,arguments);null!=this.moveHandle&&(this.moveHandle.style.left=
this.state.x+this.state.width+(40>this.state.width?10:0)+2+"px",this.moveHandle.style.top=this.state.y+this.state.height+(40>this.state.height?10:0)+2+"px")};var $vertexHandlerDestroy$$=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function $mxVertexHandler$$destroy$($sender$$,$me$$){$vertexHandlerDestroy$$.apply(this,arguments);null!=this.moveHandle&&(this.moveHandle.parentNode.removeChild(this.moveHandle),this.moveHandle=null)}};if("undefined"!==typeof Sidebar){var $sidebarCreateAdvancedShapes$$=
Sidebar.prototype.createAdvancedShapes;Sidebar.prototype.createAdvancedShapes=function $Sidebar$$createAdvancedShapes$(){var $result$$=$sidebarCreateAdvancedShapes$$.apply(this,arguments),$graph$$=this.graph;return $result$$.concat([this.addEntry("tree container",function(){var $cell$$=new mxCell("Tree Container",new mxGeometry(0,0,220,160),"swimlane;html=1;startSize=20;horizontal=1;containerType=tree;");$cell$$.vertex=!0;return sb.createVertexTemplateFromCells([$cell$$],$cell$$.geometry.width,$cell$$.geometry.height,
$cell$$.value)}),this.addEntry("tree mindmap central idea branch topic",function(){var $mindmap$$=new mxCell("Mindmap",new mxGeometry(0,0,420,126),"swimlane;html=1;startSize=20;horizontal=1;containerType=tree;");$mindmap$$.vertex=!0;var $cell$$=new mxCell("Central Idea",new mxGeometry(160,60,100,40),"ellipse;whiteSpace=wrap;html=1;align=center;container=1;recursiveResize=0;treeFolding=1;");$cell$$.vertex=!0;var $cell2$$=new mxCell("Topic",new mxGeometry(320,40,80,20),"whiteSpace=wrap;html=1;rounded=1;arcSize=50;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;");
$cell2$$.vertex=!0;var $edge$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");$edge$$.geometry.relative=!0;$edge$$.edge=!0;$cell$$.insertEdge($edge$$,!0);$cell2$$.insertEdge($edge$$,!1);var $cell3$$=new mxCell("Branch",new mxGeometry(320,80,72,26),"whiteSpace=wrap;html=1;shape=partialRectangle;top=0;left=0;bottom=1;right=0;points=[[0,1],[1,1]];strokeColor=#000000;fillColor=none;align=center;verticalAlign=bottom;routingCenterY=0.5;snapToPoint=1;container=1;recursiveResize=0;autosize=1;treeFolding=1;");
$cell3$$.vertex=!0;var $edge2$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");$edge2$$.geometry.relative=!0;$edge2$$.edge=!0;$cell$$.insertEdge($edge2$$,!0);$cell3$$.insertEdge($edge2$$,!1);var $cell4$$=new mxCell("Topic",new mxGeometry(20,40,80,20),"whiteSpace=wrap;html=1;rounded=1;arcSize=50;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;");$cell4$$.vertex=
!0;var $edge3$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");$edge3$$.geometry.relative=!0;$edge3$$.edge=!0;$cell$$.insertEdge($edge3$$,!0);$cell4$$.insertEdge($edge3$$,!1);var $cell5$$=new mxCell("Branch",new mxGeometry(20,80,72,26),"whiteSpace=wrap;html=1;shape=partialRectangle;top=0;left=0;bottom=1;right=0;points=[[0,1],[1,1]];strokeColor=#000000;fillColor=none;align=center;verticalAlign=bottom;routingCenterY=0.5;snapToPoint=1;container=1;recursiveResize=0;autosize=1;treeFolding=1;");
$cell5$$.vertex=!0;var $edge4$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");$edge4$$.geometry.relative=!0;$edge4$$.edge=!0;$cell$$.insertEdge($edge4$$,!0);$cell5$$.insertEdge($edge4$$,!1);$mindmap$$.insert($edge$$);$mindmap$$.insert($edge2$$);$mindmap$$.insert($edge3$$);$mindmap$$.insert($edge4$$);$mindmap$$.insert($cell$$);$mindmap$$.insert($cell2$$);$mindmap$$.insert($cell3$$);$mindmap$$.insert($cell4$$);$mindmap$$.insert($cell5$$);
return sb.createVertexTemplateFromCells([$mindmap$$],$mindmap$$.geometry.width,$mindmap$$.geometry.height,$mindmap$$.value)}),this.addEntry("tree mindmap central idea",function(){var $cell$$=new mxCell("Central Idea",new mxGeometry(0,0,100,40),"ellipse;whiteSpace=wrap;html=1;align=center;container=1;recursiveResize=0;treeFolding=1;");$cell$$.vertex=!0;return sb.createVertexTemplateFromCells([$cell$$],$cell$$.geometry.width,$cell$$.geometry.height,$cell$$.value)}),this.addEntry("tree mindmap branch",
function(){var $cell$$=new mxCell("Branch",new mxGeometry(0,0,80,20),"whiteSpace=wrap;html=1;shape=partialRectangle;top=0;left=0;bottom=1;right=0;points=[[0,1],[1,1]];strokeColor=#000000;fillColor=none;align=center;verticalAlign=bottom;routingCenterY=0.5;snapToPoint=1;container=1;recursiveResize=0;autosize=1;treeFolding=1;");$cell$$.vertex=!0;var $edge$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");$edge$$.geometry.setTerminalPoint(new mxPoint(-40,
40),!0);$edge$$.geometry.relative=!0;$edge$$.edge=!0;$cell$$.insertEdge($edge$$,!1);return sb.createVertexTemplateFromCells([$cell$$,$edge$$],$cell$$.geometry.width,$cell$$.geometry.height,$cell$$.value)}),this.addEntry("tree mindmap sub topic",function(){var $cell$$=new mxCell("Sub Topic",new mxGeometry(0,0,72,26),"whiteSpace=wrap;html=1;rounded=1;arcSize=50;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;");$cell$$.vertex=!0;var $edge$$=
new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");$edge$$.geometry.setTerminalPoint(new mxPoint(-40,40),!0);$edge$$.geometry.relative=!0;$edge$$.edge=!0;$cell$$.insertEdge($edge$$,!1);return sb.createVertexTemplateFromCells([$cell$$,$edge$$],$cell$$.geometry.width,$cell$$.geometry.height,$cell$$.value)}),this.addEntry("tree orgchart organization division",function(){var $orgchart$$=new mxCell("Orgchart",new mxGeometry(0,0,
280,220),"swimlane;html=1;startSize=20;horizontal=1;containerType=tree;");$orgchart$$.vertex=!0;var $cell$$=new mxCell("Organization",new mxGeometry(80,40,120,60),"whiteSpace=wrap;html=1;align=center;treeFolding=1;container=1;recursiveResize=0;");$graph$$.setAttributeForCell($cell$$,"treeRoot","1");$cell$$.vertex=!0;var $cell2$$=new mxCell("Division",new mxGeometry(20,140,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");$cell2$$.vertex=
!0;var $edge$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=elbowEdgeStyle;elbow=vertical;startArrow=none;endArrow=none;rounded=0;");$edge$$.geometry.relative=!0;$edge$$.edge=!0;$cell$$.insertEdge($edge$$,!0);$cell2$$.insertEdge($edge$$,!1);var $cell3$$=new mxCell("Division",new mxGeometry(160,140,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");$cell3$$.vertex=!0;var $edge2$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=elbowEdgeStyle;elbow=vertical;startArrow=none;endArrow=none;rounded=0;");
$edge2$$.geometry.relative=!0;$edge2$$.edge=!0;$cell$$.insertEdge($edge2$$,!0);$cell3$$.insertEdge($edge2$$,!1);$orgchart$$.insert($edge$$);$orgchart$$.insert($edge2$$);$orgchart$$.insert($cell$$);$orgchart$$.insert($cell2$$);$orgchart$$.insert($cell3$$);return sb.createVertexTemplateFromCells([$orgchart$$],$orgchart$$.geometry.width,$orgchart$$.geometry.height,$orgchart$$.value)}),this.addEntry("tree root",function(){var $cell$$=new mxCell("Organization",new mxGeometry(0,0,120,60),"whiteSpace=wrap;html=1;align=center;treeFolding=1;container=1;recursiveResize=0;");
$graph$$.setAttributeForCell($cell$$,"treeRoot","1");$cell$$.vertex=!0;return sb.createVertexTemplateFromCells([$cell$$],$cell$$.geometry.width,$cell$$.geometry.height,$cell$$.value)}),this.addEntry("tree division",function(){var $cell$$=new mxCell("Division",new mxGeometry(20,40,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");$cell$$.vertex=!0;var $edge$$=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=elbowEdgeStyle;elbow=vertical;startArrow=none;endArrow=none;rounded=0;");
$edge$$.geometry.setTerminalPoint(new mxPoint(0,0),!0);$edge$$.geometry.relative=!0;$edge$$.edge=!0;$cell$$.insertEdge($edge$$,!1);return sb.createVertexTemplateFromCells([$cell$$,$edge$$],$cell$$.geometry.width,$cell$$.geometry.height,$cell$$.value)}),this.addEntry("tree sub sections",function(){var $cell$$=new mxCell("Sub Section",new mxGeometry(0,0,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");$cell$$.vertex=!0;var $edge$$=new mxCell("",
new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;startArrow=none;endArrow=none;rounded=0;targetPortConstraint=eastwest;sourcePortConstraint=northsouth;");$edge$$.geometry.setTerminalPoint(new mxPoint(110,-40),!0);$edge$$.geometry.relative=!0;$edge$$.edge=!0;$cell$$.insertEdge($edge$$,!1);var $cell2$$=new mxCell("Sub Section",new mxGeometry(120,0,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");$cell2$$.vertex=!0;var $edge2$$=new mxCell("",
new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;startArrow=none;endArrow=none;rounded=0;targetPortConstraint=eastwest;sourcePortConstraint=northsouth;");$edge2$$.geometry.setTerminalPoint(new mxPoint(110,-40),!0);$edge2$$.geometry.relative=!0;$edge2$$.edge=!0;$cell2$$.insertEdge($edge2$$,!1);return sb.createVertexTemplateFromCells([$edge$$,$edge2$$,$cell$$,$cell2$$],220,60,"Sub Sections")})])}}})();EditorUi.initMinimalTheme=function $EditorUi$initMinimalTheme$(){function $toggleFormat$$($ui$$){var $graph$$=$ui$$.editor.graph;$graph$$.popupMenuHandler.hideMenu();null==$ui$$.formatWindow?($ui$$.formatWindow=new $WrapperWindow$$($ui$$,mxResources.get("format"),Math.max(20,$ui$$.diagramContainer.clientWidth-240-12),56,240,Math.min(566,$graph$$.container.clientHeight-10),function($container$jscomp$11_format$$){$container$jscomp$11_format$$=$ui$$.createFormat($container$jscomp$11_format$$);$container$jscomp$11_format$$.init();
return $container$jscomp$11_format$$}),$ui$$.formatWindow.window.minimumSize=new mxRectangle(0,0,240,80),$ui$$.formatWindow.window.setVisible(!0)):$ui$$.formatWindow.window.setVisible(!$ui$$.formatWindow.window.isVisible());$ui$$.formatWindow.window.isVisible()&&$ui$$.formatWindow.window.fit()}function $toggleShapes$$($ui$$){var $graph$$=$ui$$.editor.graph;$graph$$.popupMenuHandler.hideMenu();new mxRectangle;if(null==$ui$$.sidebarWindow){var $w$$=Math.min($graph$$.container.clientWidth-10,266);$ui$$.sidebarWindow=
new $WrapperWindow$$($ui$$,mxResources.get("shapes"),10,56,$w$$-6,Math.min(650,$graph$$.container.clientHeight-30),function($container$$){function $addMenu$$($id$$,$label$$){var $menu$$=$ui$$.menus.get($id$$),$elt$$=$menuObj$$.addMenu($label$$,mxUtils.bind(this,function(){$menu$$.funct.apply(this,arguments)}));$elt$$.style.cssText="position:absolute;border-top:1px solid lightgray;width:50%;height:24px;bottom:0px;text-align:center;cursor:pointer;padding:6px 0 0 0;cusor:pointer;";$elt$$.className="geTitle";
$container$$.appendChild($elt$$);return $elt$$}var $div$jscomp$65_elt$$=document.createElement("div");$div$jscomp$65_elt$$.style.cssText="position:absolute;left:0;right:0;border-top:1px solid lightgray;height:24px;bottom:31px;text-align:center;cursor:pointer;padding:6px 0 0 0;";$div$jscomp$65_elt$$.className="geTitle";$div$jscomp$65_elt$$.innerHTML='<span style="font-size:18px;margin-right:5px;">+</span>';mxUtils.write($div$jscomp$65_elt$$,mxResources.get("moreShapes"));$container$$.appendChild($div$jscomp$65_elt$$);
mxEvent.addListener($div$jscomp$65_elt$$,"click",function(){$ui$$.actions.get("shapes").funct()});var $menuObj$$=new Menubar($ui$$,$container$$);if(!Editor.enableCustomLibraries||"1"==urlParams.embed&&"1"!=urlParams.libraries)$div$jscomp$65_elt$$.style.bottom="0";else if(null!=$ui$$.actions.get("newLibrary")){$div$jscomp$65_elt$$=document.createElement("div");$div$jscomp$65_elt$$.style.cssText="position:absolute;left:0px;width:50%;border-top:1px solid lightgray;height:30px;bottom:0px;text-align:center;cursor:pointer;padding:0px;";
$div$jscomp$65_elt$$.className="geTitle";var $span$$=document.createElement("span");$span$$.style.cssText="position:relative;top:6px;";mxUtils.write($span$$,mxResources.get("newLibrary"));$div$jscomp$65_elt$$.appendChild($span$$);$container$$.appendChild($div$jscomp$65_elt$$);mxEvent.addListener($div$jscomp$65_elt$$,"click",$ui$$.actions.get("newLibrary").funct);$div$jscomp$65_elt$$=document.createElement("div");$div$jscomp$65_elt$$.style.cssText="position:absolute;left:50%;width:50%;border-top:1px solid lightgray;height:30px;bottom:0px;text-align:center;cursor:pointer;padding:0px;border-left: 1px solid lightgray;";
$div$jscomp$65_elt$$.className="geTitle";$span$$=document.createElement("span");$span$$.style.cssText="position:relative;top:6px;";mxUtils.write($span$$,mxResources.get("openLibrary"));$div$jscomp$65_elt$$.appendChild($span$$);$container$$.appendChild($div$jscomp$65_elt$$);mxEvent.addListener($div$jscomp$65_elt$$,"click",$ui$$.actions.get("openLibrary").funct)}else $div$jscomp$65_elt$$=$addMenu$$("newLibrary",mxResources.get("newLibrary")),$div$jscomp$65_elt$$.style.left="0",$div$jscomp$65_elt$$=
$addMenu$$("openLibraryFrom",mxResources.get("openLibraryFrom")),$div$jscomp$65_elt$$.style.borderLeft="1px solid lightgray",$div$jscomp$65_elt$$.style.left="50%";$container$$.appendChild($ui$$.sidebar.container);$container$$.style.overflow="hidden";return $container$$});$ui$$.sidebarWindow.window.minimumSize=new mxRectangle(0,0,90,90);$ui$$.sidebarWindow.window.setVisible(!0);$ui$$.getLocalData("sidebar",function($value$$){$ui$$.sidebar.showEntries($value$$,null,!0)});$ui$$.restoreLibraries()}else $ui$$.sidebarWindow.window.setVisible(!$ui$$.sidebarWindow.window.isVisible());
$ui$$.sidebarWindow.window.isVisible()&&$ui$$.sidebarWindow.window.fit()}if("1"==urlParams.lightbox||"0"==urlParams.chrome||"undefined"===typeof window.Format||"undefined"===typeof window.Menus)window.uiTheme=null;else{var $iw$$=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;try{var $style$$=document.createElement("style");$style$$.type="text/css";$style$$.innerHTML="* { -webkit-font-smoothing: antialiased; }html body .mxWindow button.geBtn { font-size:12px !important; margin-left: 0; }html body table.mxWindow td.mxWindowPane div.mxWindowPane *:not(svg *) { font-size:9pt; }html body div.diagramContainer button, html body button.geBtn { font-size:14px; font-weight:700;border-radius: 5px; }html body button.geBtn:active { opacity: 0.6; }html body a.geMenuItem { opacity: 0.75; }html body a.geMenuItem[disabled] { opacity: 0.2; }html body a.geMenuItem[disabled]:active { opacity: 0.2; }html body div.geActivePage { opacity: 0.7; }html body a.geMenuItem:active { opacity: 0.2; }html body .geToolbarButton { opacity: 0.3; }html body .geToolbarButton:active { opacity: 0.15; }html body .geStatus:active { opacity: 0.5; }html table.mxPopupMenu tr.mxPopupMenuItemHover:active { opacity:0.7; }html body .geDialog input, html body .geToolbarContainer input, html body .mxWindow input {padding:2px;display:inline-block; }div.geDialog { border-radius: 5px; }html body div.geDialog button.geBigButton { color: #fff !important; }.mxWindow button, .geDialog select, .mxWindow select { display:inline-block; }html body .mxWindow .geColorBtn, html body .geDialog .geColorBtn { background: none; }html body div.diagramContainer button, html body .mxWindow button, html body .geDialog button { min-width: 0px; border-radius: 5px; color: #353535 !important; border-style: solid; border-width: 1px; border-color: rgb(216, 216, 216); }html body div.diagramContainer button:hover, html body .mxWindow button:hover, html body .geDialog button:hover { border-color: rgb(177, 177, 177); }html body div.diagramContainer button:active, html body .mxWindow button:active, html body .geDialog button:active { opacity: 0.6; }div.diagramContainer button.geBtn, .mxWindow button.geBtn, .geDialog button.geBtn { min-width:72px; font-weight: 600; background: none; }div.diagramContainer button.gePrimaryBtn, .mxWindow button.gePrimaryBtn, .geDialog button.gePrimaryBtn, html body .gePrimaryBtn { background: #29b6f2; color: #fff !important; border: none; box-shadow: none; }html body .gePrimaryBtn:hover { background: #29b6f2; border: none; box-shadow: inherit; }html body button.gePrimaryBtn:hover { background: #29b6f2; border: none; }.geBtn button { min-width:72px !important; }div.geToolbarContainer a.geButton { margin:2px; padding: 0 2px 4px 2px; } .geDialog, .mxWindow td.mxWindowPane *, div.geSprite, td.mxWindowTitle, .geDiagramContainer { box-sizing:content-box; }.mxWindow div button.geStyleButton { box-sizing: border-box; }table.mxWindow td.mxWindowPane button.geColorBtn { padding:0px; box-sizing: border-box; }td.mxWindowPane .geSidebarContainer button { padding:2px 0 2px 0; box-sizing: border-box; }html body .geMenuItem { font-size:14px; text-decoration: none; font-weight: normal; padding: 6px 10px 6px 10px; border: none; border-radius: 5px; color: #353535; box-shadow: inset 0 0 0 1px rgba(0,0,0,.11), inset 0 -1px 0 0 rgba(0,0,0,.08), 0 1px 2px 0 rgba(0,0,0,.04); }.geToolbarContainer { background:#fff !important; }div.mxWindow .geSidebarContainer .geTitle { background-color:#fdfdfd; }div.mxWindow .geSidebarContainer .geTitle:hover { background-color:#fafafa; }div.geSidebar { background-color: #fff !important;}div.mxWindow td.mxWindowPane button { background-image: none; float: none; }td.mxWindowTitle { height: 22px !important; background: none !important; font-size: 13px !important; text-align:center !important; border-bottom:1px solid lightgray; }div.mxWindow, div.mxWindowTitle { background-image: none !important; background-color:#fff !important; }div.mxWindow { border-radius:5px; box-shadow: 0px 0px 2px #C0C0C0 !important;}div.mxWindow * { font-family: inherit !important; }html div.geVerticalHandle { position:absolute;bottom:0px;left:50%;cursor:row-resize;width:11px;height:11px;background:white;margin-bottom:-6px; margin-left:-6px; border: none; border-radius: 6px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.11), inset 0 -1px 0 0 rgba(0,0,0,.08), 0 1px 2px 0 rgba(0,0,0,.04); }html div.geInactivePage { background: rgb(249, 249, 249) !important; color:lightgray !important; } html div.geActivePage { background: white !important;color: #353535 !important; } html div.mxRubberband { border:1px solid; border-color: #29b6f2 !important; background:rgba(41,182,242,0.5) !important; } html body div.mxPopupMenu { border-radius:5px; border:1px solid #c0c0c0; padding:5px 0 5px 0; box-shadow: 0px 4px 17px -4px rgba(96,96,96,1); } html table.mxPopupMenu td.mxPopupMenuItem { color: #353535; font-size: 14px; padding-top: 4px; padding-bottom: 4px; }html table.mxPopupMenu tr.mxPopupMenuItemHover { background-color: #29b6f2; }html tr.mxPopupMenuItemHover td.mxPopupMenuItem, html tr.mxPopupMenuItemHover td.mxPopupMenuItem span { color: #fff !important; }html tr.mxPopupMenuItem, html td.mxPopupMenuItem { transition-property: none !important; }html table.mxPopupMenu hr { height: 2px; background-color: rgba(0,0,0,.07); margin: 5px 0; }"+
(mxClient.IS_IOS?"html input[type=checkbox], html input[type=radio] { height:12px; }":"");document.getElementsByTagName("head")[0].appendChild($style$$)}catch($e$$){}var $WrapperWindow$$=function $$WrapperWindow$$$($editorUi$$,$title$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$,$fn$$){var $div$$=document.createElement("div");$div$$.className="geSidebarContainer";$div$$.style.position="absolute";$div$$.style.width="100%";$div$$.style.height="100%";$div$$.style.border="1px solid whiteSmoke";$div$$.style.overflowX=
"hidden";$div$$.style.overflowY="auto";$fn$$($div$$);this.window=new mxWindow($title$$,$div$$,$x$jscomp$0$$,$y$jscomp$0$$,$w$$,$h$$,!0,!0);this.window.destroyOnClose=!1;this.window.setMaximizable(!1);this.window.setResizable(!0);this.window.setClosable(!0);this.window.setVisible(!0);this.window.setLocation=function $this$window$setLocation$($x$$,$y$$){var $ih$$=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;$x$$=Math.max(0,Math.min($x$$,(window.innerWidth||document.documentElement.clientWidth||
document.body.clientWidth)-this.table.clientWidth));$y$$=Math.max(0,Math.min($y$$,$ih$$-this.table.clientHeight-48));this.getX()==$x$$&&this.getY()==$y$$||mxWindow.prototype.setLocation.apply(this,arguments)};mxClient.IS_SF&&(this.window.div.onselectstart=mxUtils.bind(this,function($evt$$){null==$evt$$&&($evt$$=window.event);return null!=$evt$$&&$editorUi$$.isSelectionAllowed($evt$$)}))};Editor.checkmarkImage=Graph.createSvgImage(22,18,'<path transform="translate(4 0)" d="M7.181,15.007a1,1,0,0,1-.793-0.391L3.222,10.5A1,1,0,1,1,4.808,9.274L7.132,12.3l6.044-8.86A1,1,0,1,1,14.83,4.569l-6.823,10a1,1,0,0,1-.8.437H7.181Z" fill="#29b6f2"/>').src;
mxWindow.prototype.closeImage=Graph.createSvgImage(18,10,'<path d="M 5 1 L 13 9 M 13 1 L 5 9" stroke="#C0C0C0" stroke-width="2"/>').src;mxWindow.prototype.minimizeImage=Graph.createSvgImage(14,10,'<path d="M 3 7 L 7 3 L 11 7" stroke="#C0C0C0" stroke-width="2" fill="#ffffff"/>').src;mxWindow.prototype.normalizeImage=Graph.createSvgImage(14,10,'<path d="M 3 3 L 7 7 L 11 3" stroke="#C0C0C0" stroke-width="2" fill="#ffffff"/>').src;mxConstraintHandler.prototype.pointImage=Graph.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="#29b6f2"/>');
mxOutline.prototype.sizerImage=null;mxConstants.VERTEX_SELECTION_COLOR="#C0C0C0";mxConstants.EDGE_SELECTION_COLOR="#C0C0C0";mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff";mxConstants.DEFAULT_VALID_COLOR="#29b6f2";mxConstants.GUIDE_COLOR="#C0C0C0";mxConstants.HIGHLIGHT_STROKEWIDTH=5;mxConstants.HIGHLIGHT_OPACITY=35;mxConstants.OUTLINE_COLOR="#29b6f2";mxConstants.OUTLINE_HANDLE_FILLCOLOR="#29b6f2";mxConstants.OUTLINE_HANDLE_STROKECOLOR="#fff";Graph.prototype.svgShadowColor="#3D4574";Graph.prototype.svgShadowOpacity=
"0.4";Graph.prototype.svgShadowSize="0.6";Graph.prototype.svgShadowBlur="1.2";Format.prototype.inactiveTabBackgroundColor="#f0f0f0";mxGraphHandler.prototype.previewColor="#C0C0C0";mxRubberband.prototype.defaultOpacity=50;HoverIcons.prototype.inactiveOpacity=25;Format.prototype.showCloseButton=!1;EditorUi.prototype.closableScratchpad=!1;EditorUi.prototype.toolbarHeight=46;EditorUi.prototype.footerHeight=0;Graph.prototype.editAfterInsert=!0;Editor.prototype.isChromelessView=function $Editor$$isChromelessView$(){return!1};
Graph.prototype.isLightboxView=function $Graph$$isLightboxView$(){return!1};var $editorUiUpdateTabContainer$$=EditorUi.prototype.updateTabContainer;EditorUi.prototype.updateTabContainer=function $EditorUi$$updateTabContainer$(){null!=this.tabContainer&&(this.tabContainer.style.right="70px",this.diagramContainer.style.bottom=this.tabContainerHeight+"px");$editorUiUpdateTabContainer$$.apply(this,arguments)};var $editorUiUpdateActionStates$$=EditorUi.prototype.updateActionStates;EditorUi.prototype.updateActionStates=
function $EditorUi$$updateActionStates$(){$editorUiUpdateActionStates$$.apply(this,arguments);this.menus.get("save").setEnabled(null!=this.getCurrentFile()||"1"==urlParams.embed)};var $menusAddShortcut$$=Menus.prototype.addShortcut;Menus.prototype.addShortcut=function $Menus$$addShortcut$($item$$,$action$$){null!=$action$$.shortcut&&900>$iw$$&&!mxClient.IS_IOS?$item$$.firstChild.nextSibling.setAttribute("title",$action$$.shortcut):$menusAddShortcut$$.apply(this,arguments)};var $appUpdateUserElement$$=
App.prototype.updateUserElement;App.prototype.updateUserElement=function $App$$updateUserElement$(){$appUpdateUserElement$$.apply(this,arguments);if(null!=this.userElement){var $elt$$=this.userElement;$elt$$.style.cssText="display:inline-block;position:relative;margin-right:4px;cursor:pointer;";$elt$$.className="geToolbarButton";$elt$$.innerHTML="";$elt$$.style.backgroundImage="url("+Editor.userImage+")";$elt$$.style.backgroundPosition="center center";$elt$$.style.backgroundRepeat="no-repeat";$elt$$.style.backgroundSize=
"24px 24px";$elt$$.style.height="24px";$elt$$.style.width="24px";$elt$$.style.cssFloat="right";$elt$$.setAttribute("title",mxResources.get("changeUser"))}};var $appUpdateButtonContainer$$=App.prototype.updateButtonContainer;App.prototype.updateButtonContainer=function $App$$updateButtonContainer$(){$appUpdateButtonContainer$$.apply(this,arguments);if(null!=this.shareButton){var $elt$$=this.shareButton;$elt$$.style.cssText="display:inline-block;position:relative;box-sizing:border-box;margin-right:4px;cursor:pointer;";
$elt$$.className="geToolbarButton";$elt$$.innerHTML="";$elt$$.style.backgroundImage="url("+Editor.shareImage+")";$elt$$.style.backgroundPosition="center center";$elt$$.style.backgroundRepeat="no-repeat";$elt$$.style.backgroundSize="24px 24px";$elt$$.style.height="24px";$elt$$.style.width="24px"}};EditorUi.prototype.addEmbedButtons=function $EditorUi$$addEmbedButtons$(){if(null!=this.buttonContainer){var $div$$=document.createElement("div");$div$$.style.display="inline-block";$div$$.style.position=
"relative";$div$$.style.marginTop="2px";var $button$$=document.createElement("button");mxUtils.write($button$$,mxResources.get("save"));$button$$.setAttribute("title",mxResources.get("save")+" ("+Editor.ctrlKey+"+S)");$button$$.className="1"==urlParams.saveAndExit?"geMenuItem":"geMenuItem gePrimaryBtn";$button$$.style.fontSize="14px";$button$$.style.padding="6px";$button$$.style.borderRadius="3px";$button$$.style.marginLeft="8px";$button$$.style.cursor="pointer";mxEvent.addListener($button$$,"click",
mxUtils.bind(this,function(){this.actions.get("save").funct()}));$div$$.appendChild($button$$);"1"==urlParams.saveAndExit&&($button$$=document.createElement("a"),mxUtils.write($button$$,mxResources.get("saveAndExit")),$button$$.setAttribute("title",mxResources.get("saveAndExit")),$button$$.className="geMenuItem gePrimaryBtn",$button$$.style.fontSize="14px",$button$$.style.marginLeft="6px",$button$$.style.padding="6px",$button$$.style.cursor="pointer",mxEvent.addListener($button$$,"click",mxUtils.bind(this,
function(){this.actions.get("saveAndExit").funct()})),$div$$.appendChild($button$$));$button$$=document.createElement("a");mxUtils.write($button$$,mxResources.get("exit"));$button$$.setAttribute("title",mxResources.get("exit"));$button$$.className="geMenuItem";$button$$.style.fontSize="14px";$button$$.style.marginLeft="6px";$button$$.style.padding="6px";$button$$.style.cursor="pointer";mxEvent.addListener($button$$,"click",mxUtils.bind(this,function(){this.actions.get("exit").funct()}));$div$$.appendChild($button$$);
this.buttonContainer.appendChild($div$$);this.buttonContainer.style.top="6px"}};Sidebar.prototype.getTooltipOffset=function $Sidebar$$getTooltipOffset$(){var $off$$=mxUtils.getOffset(this.editorUi.sidebarWindow.window.div);$off$$.y+=40;return $off$$};var $menuCreatePopupMenu$$=Menus.prototype.createPopupMenu;Menus.prototype.createPopupMenu=function $Menus$$createPopupMenu$($menu$$,$cell$$,$evt$$){var $graph$$=this.editorUi.editor.graph;$menu$$.smartSeparators=!0;$menuCreatePopupMenu$$.apply(this,
arguments);mxUtils.bind(this,function($defaultValue$$,$fn$$){var $dlg$$=new FilenameDialog(this.editorUi,$defaultValue$$,mxResources.get("apply"),function($newValue$$){$fn$$(parseFloat($newValue$$))},mxResources.get("spacing"));this.editorUi.showDialog($dlg$$.container,300,80,!0,!0);$dlg$$.init()});1==$graph$$.getSelectionCount()?(this.addMenuItems($menu$$,["editTooltip","-","editStyle","editGeometry","-"],null,$evt$$),$graph$$.isCellFoldable($graph$$.getSelectionCell())&&this.addMenuItems($menu$$,
$graph$$.isCellCollapsed($cell$$)?["expand"]:["collapse"],null,$evt$$),this.addMenuItems($menu$$,["collapsible","-","lockUnlock","enterGroup"],null,$evt$$),$menu$$.addSeparator(),this.addSubmenu("layout",$menu$$)):$graph$$.isSelectionEmpty()&&$graph$$.isEnabled()?($menu$$.addSeparator(),this.addMenuItems($menu$$,["editData"],null,$evt$$),$menu$$.addSeparator(),this.addSubmenu("layout",$menu$$),this.addSubmenu("view",$menu$$,null,mxResources.get("options")),this.addMenuItems($menu$$,["-","exitGroup"],
null,$evt$$)):$graph$$.isEnabled()&&this.addMenuItems($menu$$,["-","lockUnlock"],null,$evt$$)};EditorUi.prototype.toggleFormatPanel=function $EditorUi$$toggleFormatPanel$($forceHide$$){null!=this.formatWindow?this.formatWindow.window.setVisible($forceHide$$?!1:!this.formatWindow.window.isVisible()):$toggleFormat$$(this)};DiagramFormatPanel.prototype.isMathOptionVisible=function $DiagramFormatPanel$$isMathOptionVisible$(){return!0};var $editorUiDestroy$$=EditorUi.prototype.destroy;EditorUi.prototype.destroy=
function $EditorUi$$destroy$(){null!=this.sidebarWindow&&(this.sidebarWindow.window.setVisible(!1),this.sidebarWindow.window.destroy(),this.sidebarWindow=null);null!=this.formatWindow&&(this.formatWindow.window.setVisible(!1),this.formatWindow.window.destroy(),this.formatWindow=null);null!=this.actions.outlineWindow&&(this.actions.outlineWindow.window.setVisible(!1),this.actions.outlineWindow.window.destroy(),this.actions.outlineWindow=null);null!=this.actions.layersWindow&&(this.actions.layersWindow.window.setVisible(!1),
this.actions.layersWindow.window.destroy(),this.actions.layersWindow=null);null!=this.menus.tagsWindow&&(this.menus.tagsWindow.window.setVisible(!1),this.menus.tagsWindow.window.destroy(),this.menus.tagsWindow=null);null!=this.menus.findWindow&&(this.menus.findWindow.window.setVisible(!1),this.menus.findWindow.window.destroy(),this.menus.findWindow=null);$editorUiDestroy$$.apply(this,arguments)};var $editorUiSetGraphEnabled$$=EditorUi.prototype.setGraphEnabled;EditorUi.prototype.setGraphEnabled=function $EditorUi$$setGraphEnabled$($enabled$$){$editorUiSetGraphEnabled$$.apply(this,
arguments);$enabled$$||(null!=this.sidebarWindow&&this.sidebarWindow.window.setVisible(!1),null!=this.formatWindow&&this.formatWindow.window.setVisible(!1))};EditorUi.prototype.chromelessWindowResize=function $EditorUi$$chromelessWindowResize$(){};var $menusInit$$=Menus.prototype.init;Menus.prototype.init=function $Menus$$init$(){$menusInit$$.apply(this,arguments);var $ui$$=this.editorUi,$graph$$=$ui$$.editor.graph;$ui$$.actions.get("editDiagram").label=mxResources.get("formatXml")+"...";$ui$$.actions.get("createShape").label=
mxResources.get("shape")+"...";$ui$$.actions.get("outline").label=mxResources.get("outline")+"...";$ui$$.actions.get("layers").label=mxResources.get("layers")+"...";$ui$$.actions.put("importFile",new Action("File...",function(){$graph$$.popupMenuHandler.hideMenu();if(null==$ui$$.minImpFileInputElt){var $input$$=document.createElement("input");$input$$.setAttribute("type","file");mxEvent.addListener($input$$,"change",function(){null!=$input$$.files&&$ui$$.importFiles($input$$.files,null,null,$ui$$.maxImageSize);
$input$$.value=""});$input$$.style.display="none";document.body.appendChild($input$$);$ui$$.minImpFileInputElt=$input$$}$ui$$.minImpFileInputElt.click()}));$ui$$.actions.put("importCsv",new Action(mxResources.get("csv")+"...",function(){$graph$$.popupMenuHandler.hideMenu();$ui$$.showImportCsvDialog()}));$ui$$.actions.put("importText",new Action(mxResources.get("text")+"...",function(){var $dlg$$=new ParseDialog($ui$$,"Insert from Text");$ui$$.showDialog($dlg$$.container,620,420,!0,!1);$dlg$$.init()}));
$ui$$.actions.put("formatSql",new Action(mxResources.get("formatSql")+"...",function(){var $dlg$$=new ParseDialog($ui$$,"Insert from Text","formatSql");$ui$$.showDialog($dlg$$.container,620,420,!0,!1);$dlg$$.init()}));$ui$$.actions.put("toggleShapes",new Action(mxResources.get("shapes")+"...",function(){$toggleShapes$$($ui$$)}));$ui$$.actions.put("toggleFormat",new Action(mxResources.get("format")+"...",function(){$toggleFormat$$($ui$$)}));EditorUi.enablePlantUml&&!$ui$$.isOffline()&&$ui$$.actions.put("plantUml",
new Action(mxResources.get("plantUml")+"...",function(){var $dlg$$=new ParseDialog($ui$$,"Insert from Text","plantUml");$ui$$.showDialog($dlg$$.container,620,420,!0,!1);$dlg$$.init()}));this.put("diagram",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){var $file$$=$ui$$.getCurrentFile();$ui$$.menus.addSubmenu("extras",$menu$$,$parent$$,mxResources.get("preferences"));$menu$$.addSeparator($parent$$);mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?($ui$$.menus.addMenuItems($menu$$,["new","open",
"-"],$parent$$),EditorUi.isElectronApp&&$ui$$.menus.addMenuItems($menu$$,["synchronize","-"],$parent$$),$ui$$.menus.addMenuItems($menu$$,["save","saveAs","-"],$parent$$)):"1"==urlParams.embed?($ui$$.menus.addMenuItems($menu$$,["-","save"],$parent$$),"1"==urlParams.saveAndExit&&$ui$$.menus.addMenuItems($menu$$,["saveAndExit"],$parent$$),$menu$$.addSeparator($parent$$)):($ui$$.menus.addMenuItems($menu$$,["new"],$parent$$),$ui$$.menus.addSubmenu("openFrom",$menu$$,$parent$$),isLocalStorage&&this.addSubmenu("openRecent",
$menu$$,$parent$$),$menu$$.addSeparator($parent$$),null!=$file$$&&$file$$.constructor==DriveFile&&$ui$$.menus.addMenuItems($menu$$,["share"],$parent$$),mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||null==$file$$||$file$$.constructor==LocalFile||$ui$$.menus.addMenuItems($menu$$,["synchronize"],$parent$$),$menu$$.addSeparator($parent$$),$ui$$.menus.addSubmenu("save",$menu$$,$parent$$));$ui$$.menus.addSubmenu("exportAs",$menu$$,$parent$$);$ui$$.menus.addMenuItems($menu$$,["-","outline","layers"],$parent$$);
$ui$$.commentsSupported()&&$ui$$.menus.addMenuItems($menu$$,["comments"],$parent$$);$ui$$.menus.addMenuItems($menu$$,["-","find","tags"],$parent$$);mxClient.IS_IOS&&navigator.standalone||$ui$$.menus.addMenuItems($menu$$,["-","print","-"],$parent$$);$ui$$.menus.addSubmenu("help",$menu$$,$parent$$);"1"==urlParams.embed?$ui$$.menus.addMenuItems($menu$$,["-","exit"],$parent$$):$ui$$.menus.addMenuItems($menu$$,["-","close"])})));this.put("save",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){var $file$$=
$ui$$.getCurrentFile();null!=$file$$&&$file$$.constructor==DriveFile?$ui$$.menus.addMenuItems($menu$$,["save","makeCopy","-","rename","moveToFolder"],$parent$$):($ui$$.menus.addMenuItems($menu$$,["save","saveAs","-","rename"],$parent$$),$ui$$.isOfflineApp()?navigator.onLine&&"1"!=urlParams.stealth&&this.addMenuItems($menu$$,["upload"],$parent$$):$ui$$.menus.addMenuItems($menu$$,["makeCopy"],$parent$$));$ui$$.menus.addMenuItems($menu$$,["-","autosave"],$parent$$);null!=$file$$&&$file$$.isRevisionHistorySupported()&&
$ui$$.menus.addMenuItems($menu$$,["-","revisionHistory"],$parent$$)})));var $exportAsMenu$$=this.get("exportAs");this.put("exportAs",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){$exportAsMenu$$.funct($menu$$,$parent$$);mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||$ui$$.menus.addMenuItems($menu$$,["publishLink"],$parent$$);$menu$$.addSeparator($parent$$);$ui$$.menus.addSubmenu("embed",$menu$$,$parent$$)})));var $langMenu$$=this.get("language");this.put("extras",new Menu(mxUtils.bind(this,
function($menu$$,$parent$$){"1"!=urlParams.embed&&$ui$$.menus.addSubmenu("theme",$menu$$,$parent$$);null!=$langMenu$$&&$ui$$.menus.addSubmenu("language",$menu$$,$parent$$);$menu$$.addSeparator($parent$$);$ui$$.menus.addMenuItems($menu$$,["scrollbars","tooltips"],$parent$$);"1"!=urlParams.embed&&(isLocalStorage||mxClient.IS_CHROMEAPP)&&$ui$$.menus.addMenuItems($menu$$,["-","search","scratchpad","-","showStartScreen"],$parent$$);!$ui$$.isOfflineApp()&&isLocalStorage&&($menu$$.addSeparator($parent$$),
$ui$$.menus.addMenuItem($menu$$,"plugins",$parent$$));$menu$$.addSeparator($parent$$)})));this.put("insertAdvanced",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){$ui$$.menus.addMenuItems($menu$$,"importText plantUml - formatSql importCsv - createShape editDiagram".split(" "),$parent$$)})));mxResources.parse("insertLayout="+mxResources.get("layout"));mxResources.parse("insertAdvanced="+mxResources.get("advanced"));this.put("insert",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){$ui$$.menus.addMenuItems($menu$$,
"insertRectangle insertEllipse insertRhombus - insertText insertLink - insertImage".split(" "),$parent$$);$ui$$.insertTemplateEnabled&&!$ui$$.isOffline()&&$ui$$.menus.addMenuItems($menu$$,["insertTemplate"],$parent$$);$menu$$.addSeparator($parent$$);$ui$$.menus.addSubmenu("insertLayout",$menu$$,$parent$$);$ui$$.menus.addSubmenu("insertAdvanced",$menu$$,$parent$$);$menu$$.addSeparator($parent$$);mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?$ui$$.menus.addMenuItems($menu$$,["import"],$parent$$):$ui$$.menus.addSubmenu("importFrom",
$menu$$,$parent$$)})));var $methods$$="horizontalFlow verticalFlow - horizontalTree verticalTree radialTree - organic circle".split(" "),$addInsertItem$$=function $$addInsertItem$$$($menu$$,$parent$$,$title$$,$method$$){$menu$$.addItem($title$$,null,mxUtils.bind(this,function(){var $dlg$$=new CreateGraphDialog($ui$$,$title$$,$method$$);$ui$$.showDialog($dlg$$.container,620,420,!0,!1);$dlg$$.init()}),$parent$$)};this.put("insertLayout",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){for(var $i$$=
0;$i$$<$methods$$.length;$i$$++)"-"==$methods$$[$i$$]?$menu$$.addSeparator($parent$$):$addInsertItem$$($menu$$,$parent$$,mxResources.get($methods$$[$i$$])+"...",$methods$$[$i$$])})));this.put("view",new Menu(mxUtils.bind(this,function($menu$$,$parent$$){$ui$$.menus.addMenuItems($menu$$,"grid guides - connectionArrows connectionPoints -".split(" "),$parent$$);if("undefined"!==typeof MathJax){var $item$$=$ui$$.menus.addMenuItem($menu$$,"mathematicalTypesetting",$parent$$);$ui$$.menus.addLinkToItem($item$$,
"https://desk.draw.io/support/solutions/articles/16000032875")}$ui$$.menus.addMenuItems($menu$$,["copyConnect","collapseExpand","-","pageScale"],$parent$$)})))};var $editorUiInit$$=EditorUi.prototype.init;EditorUi.prototype.init=function $EditorUi$$init$(){function $addMenu$$($id$$,$small$$,$img$$){var $menu$$=$ui$$.menus.get($id$$),$elt$$=$menuObj$$.addMenu(mxResources.get($id$$),mxUtils.bind(this,function(){$menu$$.funct.apply(this,arguments)}),$before$$);$elt$$.className="geMenuItem";$elt$$.style.display=
"inline-block";$elt$$.style.boxSizing="border-box";$elt$$.style.top="6px";$elt$$.style.marginRight="6px";$elt$$.style.height="30px";$elt$$.style.paddingTop="6px";$elt$$.style.paddingBottom="6px";$elt$$.style.cursor="pointer";$elt$$.setAttribute("title",mxResources.get($id$$));$ui$$.menus.menuCreated($menu$$,$elt$$,"geMenuItem");null!=$img$$?($elt$$.style.backgroundImage="url("+$img$$+")",$elt$$.style.backgroundPosition="center center",$elt$$.style.backgroundRepeat="no-repeat",$elt$$.style.backgroundSize=
"24px 24px",$elt$$.style.width="34px",$elt$$.innerHTML=""):$small$$||($elt$$.style.backgroundImage="url("+mxWindow.prototype.normalizeImage+")",$elt$$.style.backgroundPosition="right 6px center",$elt$$.style.backgroundRepeat="no-repeat",$elt$$.style.paddingRight="22px");return $elt$$}function $addMenuItem$$($label$$,$fn$$,$small$$,$tooltip$$,$action$$,$img$$){var $btn$$=document.createElement("a");$btn$$.className="geMenuItem";$btn$$.style.display="inline-block";$btn$$.style.boxSizing="border-box";
$btn$$.style.height="30px";$btn$$.style.padding="6px";$btn$$.style.position="relative";$btn$$.style.verticalAlign="top";$btn$$.style.top="0px";null!=$ui$$.statusContainer?$menubar$$.insertBefore($btn$$,$ui$$.statusContainer):$menubar$$.appendChild($btn$$);null!=$img$$?($btn$$.style.backgroundImage="url("+$img$$+")",$btn$$.style.backgroundPosition="center center",$btn$$.style.backgroundRepeat="no-repeat",$btn$$.style.backgroundSize="24px 24px",$btn$$.style.width="34px"):mxUtils.write($btn$$,$label$$);
mxEvent.addListener($btn$$,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function($evt$$){$evt$$.preventDefault()}));mxEvent.addListener($btn$$,"click",function($evt$$){"disabled"!=$btn$$.getAttribute("disabled")&&$fn$$($evt$$);mxEvent.consume($evt$$)});null==$small$$&&($btn$$.style.marginRight="4px");null!=$tooltip$$&&$btn$$.setAttribute("title",$tooltip$$);null!=$action$$&&($label$$=function $$label$$$(){$action$$.isEnabled()?($btn$$.removeAttribute("disabled"),$btn$$.style.cursor=
"pointer"):($btn$$.setAttribute("disabled","disabled"),$btn$$.style.cursor="default")},$action$$.addListener("stateChanged",$label$$),$label$$());return $btn$$}function $createGroup$$($btns$$,$op$$){var $btnGroup$$=document.createElement("div");$btnGroup$$.className="geMenuItem";$btnGroup$$.style.display="inline-block";$btnGroup$$.style.verticalAlign="top";$btnGroup$$.style.marginRight="6px";$btnGroup$$.style.padding="0 4px 0 4px";$btnGroup$$.style.height="30px";$btnGroup$$.style.position="relative";
$btnGroup$$.style.top="0px";for(var $i$$=0;$i$$<$btns$$.length;$i$$++)null!=$btns$$[$i$$]&&($btns$$[$i$$].style.margin="0px",$btns$$[$i$$].style.boxShadow="none",$btnGroup$$.appendChild($btns$$[$i$$]));null!=$op$$&&mxUtils.setOpacity($btnGroup$$,$op$$);null!=$ui$$.statusContainer?$menubar$$.insertBefore($btnGroup$$,$ui$$.statusContainer):$menubar$$.appendChild($btnGroup$$);return $btnGroup$$}function $refreshMenu$$(){for(var $langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=$menubar$$.firstChild;null!=
$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$;){var $elt$jscomp$25_temp$$=$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.nextSibling;"geMenuItem"!=$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.className&&"geItem"!=$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.className||$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.parentNode.removeChild($langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$);$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=
$elt$jscomp$25_temp$$}$before$$=$menubar$$.firstChild;$iw$$=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;($langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=1E3>$iw$$)||$addMenu$$("diagram");$createGroup$$([$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?$addMenu$$("diagram",null,IMAGE_PATH+"/drawlogo.svg"):null,$addMenuItem$$(mxResources.get("shapes"),$ui$$.actions.get("toggleShapes").funct,null,mxResources.get("shapes"),$ui$$.actions.get("image"),
$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTN2OGg4di04aC04ek0zIDIxaDh2LThIM3Y4ek0zIDN2OGg4VjNIM3ptMTMuNjYtMS4zMUwxMSA3LjM0IDE2LjY2IDEzbDUuNjYtNS42Ni01LjY2LTUuNjV6Ii8+PC9zdmc+":null),$addMenuItem$$(mxResources.get("format"),$ui$$.actions.get("toggleFormat").funct,null,mxResources.get("format")+" ("+$ui$$.actions.get("formatPanel").shortcut+
")",$ui$$.actions.get("image"),$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgM2MtNC45NyAwLTkgNC4wMy05IDlzNC4wMyA5IDkgOWMuODMgMCAxLjUtLjY3IDEuNS0xLjUgMC0uMzktLjE1LS43NC0uMzktMS4wMS0uMjMtLjI2LS4zOC0uNjEtLjM4LS45OSAwLS44My42Ny0xLjUgMS41LTEuNUgxNmMyLjc2IDAgNS0yLjI0IDUtNSAwLTQuNDItNC4wMy04LTktOHptLTUuNSA5Yy0uODMgMC0xLjUtLjY3LTEuNS0xLjVTNS42NyA5IDYuNSA5IDggOS42NyA4IDEwLjUgNy4zMyAxMiA2LjUgMTJ6bTMtNEM4LjY3IDggOCA3LjMzIDggNi41UzguNjcgNSA5LjUgNXMxLjUuNjcgMS41IDEuNVMxMC4zMyA4IDkuNSA4em01IDBjLS44MyAwLTEuNS0uNjctMS41LTEuNVMxMy42NyA1IDE0LjUgNXMxLjUuNjcgMS41IDEuNVMxNS4zMyA4IDE0LjUgOHptMyA0Yy0uODMgMC0xLjUtLjY3LTEuNS0xLjVTMTYuNjcgOSAxNy41IDlzMS41LjY3IDEuNSAxLjUtLjY3IDEuNS0xLjUgMS41eiIvPjwvc3ZnPg==":
null)],$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?60:null);$elt$jscomp$25_temp$$=$addMenu$$("insert",!0,$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIvPjwvc3ZnPg==":null);$createGroup$$([$elt$jscomp$25_temp$$,$addMenuItem$$(mxResources.get("delete"),$ui$$.actions.get("delete").funct,
null,mxResources.get("delete"),$ui$$.actions.get("delete"),$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyek0xOSA0aC0zLjVsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIvPjwvc3ZnPg==":null)],$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$?60:null);if(411<=$iw$$&&($elt$jscomp$25_temp$$=
$ui$$.actions.get("undo"),$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=$ui$$.actions.get("redo"),$elt$jscomp$25_temp$$=$addMenuItem$$("",$elt$jscomp$25_temp$$.funct,null,mxResources.get("undo")+" ("+$elt$jscomp$25_temp$$.shortcut+")",$elt$jscomp$25_temp$$,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIuNSA4Yy0yLjY1IDAtNS4wNS45OS02LjkgMi42TDIgN3Y5aDlsLTMuNjItMy42MmMxLjM5LTEuMTYgMy4xNi0xLjg4IDUuMTItMS44OCAzLjU0IDAgNi41NSAyLjMxIDcuNiA1LjVsMi4zNy0uNzhDMjEuMDggMTEuMDMgMTcuMTUgOCAxMi41IDh6Ii8+PC9zdmc+"),
$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=$addMenuItem$$("",$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.funct,null,mxResources.get("redo")+" ("+$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.shortcut+")",$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTguNCAxMC42QzE2LjU1IDguOTkgMTQuMTUgOCAxMS41IDhjLTQuNjUgMC04LjU4IDMuMDMtOS45NiA3LjIyTDMuOSAxNmMxLjA1LTMuMTkgNC4wNS01LjUgNy42LTUuNSAxLjk1IDAgMy43My43MiA1LjEyIDEuODhMMTMgMTZoOVY3bC0zLjYgMy42eiIvPjwvc3ZnPg=="),
$createGroup$$([$elt$jscomp$25_temp$$,$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$],60),480<=$iw$$)){var $langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=$ui$$.actions.get("zoomIn"),$elt$jscomp$25_temp$$=$ui$$.actions.get("zoomOut"),$resetViewAction$$=$ui$$.actions.get("resetView");$createGroup$$([$addMenuItem$$("",function(){$graph$$.popupMenuHandler.hideMenu();var $scale$$=$graph$$.view.scale,$tx$$=$graph$$.view.translate.x,$ty$$=$graph$$.view.translate.y;$ui$$.actions.get("resetView").funct();
1E-5>Math.abs($scale$$-$graph$$.view.scale)&&$tx$$==$graph$$.view.translate.x&&$ty$$==$graph$$.view.translate.y&&$ui$$.actions.get($graph$$.pageVisible?"fitPage":"fitWindow").funct()},!0,mxResources.get("fit")+" ("+Editor.ctrlKey+"+H)",$resetViewAction$$,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyA1djRoMlY1aDRWM0g1Yy0xLjEgMC0yIC45LTIgMnptMiAxMEgzdjRjMCAxLjEuOSAyIDIgMmg0di0ySDV2LTR6bTE0IDRoLTR2Mmg0YzEuMSAwIDItLjkgMi0ydi00aC0ydjR6bTAtMTZoLTR2Mmg0djRoMlY1YzAtMS4xLS45LTItMi0yeiIvPjwvc3ZnPg=="),
640<=$iw$$?$addMenuItem$$("",$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.funct,!0,mxResources.get("zoomIn")+" ("+Editor.ctrlKey+" +)",$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHptMi41LTRoLTJ2Mkg5di0ySDdWOWgyVjdoMXYyaDJ2MXoiLz48L3N2Zz4="):
null,640<=$iw$$?$addMenuItem$$("",$elt$jscomp$25_temp$$.funct,!0,mxResources.get("zoomOut")+" ("+Editor.ctrlKey+" -)",$elt$jscomp$25_temp$$,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHpNNyA5aDV2MUg3eiIvPjwvc3ZnPg=="):
null],60)}$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$=$ui$$.menus.get("language");null!=$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$&&!mxClient.IS_CHROMEAPP&&!EditorUi.isElectronApp&&600<=$iw$$?(null==$langMenuElt$$&&($elt$jscomp$25_temp$$=$menuObj$$.addMenu("",$langMenu$jscomp$3_node$jscomp$49_redoAction_redoElt_small$$.funct),$elt$jscomp$25_temp$$.setAttribute("title",mxResources.get("language")),$elt$jscomp$25_temp$$.className="geToolbarButton",$elt$jscomp$25_temp$$.style.backgroundImage=
"url("+Editor.globeImage+")",$elt$jscomp$25_temp$$.style.backgroundPosition="center center",$elt$jscomp$25_temp$$.style.backgroundRepeat="no-repeat",$elt$jscomp$25_temp$$.style.backgroundSize="24px 24px",$elt$jscomp$25_temp$$.style.position="absolute",$elt$jscomp$25_temp$$.style.height="24px",$elt$jscomp$25_temp$$.style.width="24px",$elt$jscomp$25_temp$$.style.zIndex="1",$elt$jscomp$25_temp$$.style.right="8px",$elt$jscomp$25_temp$$.style.cursor="pointer",$elt$jscomp$25_temp$$.style.top="1"==urlParams.embed?
"13px":"11px",$menubar$$.appendChild($elt$jscomp$25_temp$$),$langMenuElt$$=$elt$jscomp$25_temp$$),$ui$$.buttonContainer.style.paddingRight="34px"):($ui$$.buttonContainer.style.paddingRight="4px",null!=$langMenuElt$$&&($langMenuElt$$.parentNode.removeChild($langMenuElt$$),$langMenuElt$$=null))}$editorUiInit$$.apply(this,arguments);var $div$$=document.createElement("div");$div$$.style.cssText="position:absolute;left:0px;right:0px;top:0px;overflow-y:auto;overflow-x:hidden;";$div$$.style.bottom="1"!=
urlParams.embed||"1"==urlParams.libraries?"63px":"32px";this.sidebar=this.createSidebar($div$$);null==urlParams.clibs&&null==urlParams.libs||$toggleShapes$$(this);var $ui$$=this,$graph$$=$ui$$.editor.graph;$ui$$.toolbar=this.createToolbar($ui$$.createDiv("geToolbar"));$ui$$.defaultLibraryName=mxResources.get("untitledLibrary");var $menubar$$=document.createElement("div");$menubar$$.style.cssText="position:absolute;left:0px;right:0px;top:0px;height:30px;padding:8px;border-bottom:1px solid lightgray;background-color:#ffffff;text-align:left;white-space:nowrap;";
var $before$$=null,$menuObj$$=new Menubar($ui$$,$menubar$$);$ui$$.statusContainer=$ui$$.createStatusContainer();$ui$$.statusContainer.style.position="relative";$ui$$.statusContainer.style.maxWidth="";$ui$$.statusContainer.style.marginTop="7px";$ui$$.statusContainer.style.marginLeft="6px";$ui$$.statusContainer.style.color="gray";$ui$$.statusContainer.style.cursor="default";$ui$$.editor.addListener("statusChanged",mxUtils.bind(this,function(){$ui$$.setStatusText($ui$$.editor.getStatus())}));var $uiDescriptorChanged$$=
$ui$$.descriptorChanged;$ui$$.descriptorChanged=function $$ui$$$descriptorChanged$(){$uiDescriptorChanged$$.apply(this,arguments);var $file$$=$ui$$.getCurrentFile();if(null!=$file$$&&null!=$file$$.getTitle()){var $mode$$=$file$$.getMode();"google"==$mode$$?$mode$$="googleDrive":"github"==$mode$$?$mode$$="gitHub":"onedrive"==$mode$$&&($mode$$="oneDrive");$mode$$=mxResources.get($mode$$);$menubar$$.setAttribute("title",$file$$.getTitle()+(null!=$mode$$?" ("+$mode$$+")":""))}else $menubar$$.removeAttribute("title")};
$ui$$.setStatusText($ui$$.editor.getStatus());$menubar$$.appendChild($ui$$.statusContainer);$ui$$.buttonContainer=document.createElement("div");$ui$$.buttonContainer.style.cssText="position:absolute;right:0px;padding-right:34px;top:10px;white-space:nowrap;padding-top:2px;background-color:inherit;";$menubar$$.appendChild($ui$$.buttonContainer);$ui$$.menubarContainer=$ui$$.buttonContainer;$ui$$.tabContainer=document.createElement("div");$ui$$.tabContainer.style.cssText="position:absolute;left:0px;right:0px;bottom:0px;height:30px;white-space:nowrap;border-bottom:1px solid lightgray;background-color:#ffffff;border-top:1px solid lightgray;margin-bottom:-2px;visibility:hidden;";
var $div$$=$ui$$.diagramContainer.parentNode,$wrapper$$=document.createElement("div");$wrapper$$.style.cssText="position:absolute;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;";$ui$$.diagramContainer.style.top="47px";var $updateZoom_viewZoomMenu$$=$ui$$.menus.get("viewZoom");if(null!=$updateZoom_viewZoomMenu$$){this.tabContainer.style.right="70px";var $elt$jscomp$0$$=$menuObj$$.addMenu("100%",$updateZoom_viewZoomMenu$$.funct);$elt$jscomp$0$$.setAttribute("title",mxResources.get("zoom")+" (Alt+Mousewheel)");
$elt$jscomp$0$$.style.whiteSpace="nowrap";$elt$jscomp$0$$.style.backgroundImage="url("+mxWindow.prototype.minimizeImage+")";$elt$jscomp$0$$.style.backgroundPosition="right 6px center";$elt$jscomp$0$$.style.backgroundRepeat="no-repeat";$elt$jscomp$0$$.style.backgroundColor="#ffffff";$elt$jscomp$0$$.style.paddingRight="10px";$elt$jscomp$0$$.style.display="block";$elt$jscomp$0$$.style.position="absolute";$elt$jscomp$0$$.style.textDecoration="none";$elt$jscomp$0$$.style.textDecoration="none";$elt$jscomp$0$$.style.right=
"0px";$elt$jscomp$0$$.style.bottom="0px";$elt$jscomp$0$$.style.overflow="hidden";$elt$jscomp$0$$.style.visibility="hidden";$elt$jscomp$0$$.style.textAlign="center";$elt$jscomp$0$$.style.color="#000";$elt$jscomp$0$$.style.fontSize="12px";$elt$jscomp$0$$.style.color="#707070";$elt$jscomp$0$$.style.width="59px";$elt$jscomp$0$$.style.cursor="pointer";$elt$jscomp$0$$.style.borderTop="1px solid lightgray";$elt$jscomp$0$$.style.borderLeft="1px solid lightgray";$elt$jscomp$0$$.style.height=parseInt($ui$$.tabContainerHeight)-
1+"px";$elt$jscomp$0$$.style.lineHeight=parseInt($ui$$.tabContainerHeight)+1+"px";$wrapper$$.appendChild($elt$jscomp$0$$);$updateZoom_viewZoomMenu$$=mxUtils.bind(this,function(){$elt$jscomp$0$$.innerHTML=Math.round(100*$ui$$.editor.graph.view.scale)+"%"});$ui$$.editor.graph.view.addListener(mxEvent.EVENT_SCALE,$updateZoom_viewZoomMenu$$);$ui$$.editor.addListener("resetGraphView",$updateZoom_viewZoomMenu$$);$ui$$.editor.addListener("pageSelected",$updateZoom_viewZoomMenu$$);var $uiSetGraphEnabled$$=
$ui$$.setGraphEnabled;$ui$$.setGraphEnabled=function $$ui$$$setGraphEnabled$(){$uiSetGraphEnabled$$.apply(this,arguments);null!=this.tabContainer&&($elt$jscomp$0$$.style.visibility=this.tabContainer.style.visibility,this.diagramContainer.style.bottom="hidden"!=this.tabContainer.style.visibility?this.tabContainerHeight+"px":"0px")}}$wrapper$$.appendChild($ui$$.tabContainer);$wrapper$$.appendChild($menubar$$);$wrapper$$.appendChild($ui$$.diagramContainer);$div$$.appendChild($wrapper$$);$ui$$.updateTabContainer();
var $langMenuElt$$=null;$refreshMenu$$();mxEvent.addListener(window,"resize",function(){$refreshMenu$$();null!=$ui$$.sidebarWindow&&$ui$$.sidebarWindow.window.fit();null!=$ui$$.formatWindow&&$ui$$.formatWindow.window.fit();null!=$ui$$.actions.outlineWindow&&$ui$$.actions.outlineWindow.window.fit();null!=$ui$$.actions.layersWindow&&$ui$$.actions.layersWindow.window.fit();null!=$ui$$.menus.tagsWindow&&$ui$$.menus.tagsWindow.window.fit();null!=$ui$$.menus.findWindow&&$ui$$.menus.findWindow.window.fit()})}}};
(function(){var $initialized$$=!1;"min"!=uiTheme||$initialized$$||mxClient.IS_CHROMEAPP||(EditorUi.initMinimalTheme(),$initialized$$=!0);var $uiInitTheme$$=EditorUi.initTheme;EditorUi.initTheme=function $EditorUi$initTheme$(){$uiInitTheme$$.apply(this,arguments);"min"!=uiTheme||$initialized$$||(this.initMinimalTheme(),$initialized$$=!0)}})();(function(){var $guideMove$$=mxGuide.prototype.move;mxGuide.prototype.move=function $mxGuide$$move$($bounds$$,$delta$$,$gridEnabled$$,$clone$$){var $newY_yShift$$=$delta$$.y,$newX_xShift$$=$delta$$.x,$hPoints_hasHorGuides$$=!1,$hasVerGuides_vPoints$$=!1;if(null!=this.states&&null!=$bounds$$&&null!=$delta$$){var $guide$$=this,$eqPoint_newState$$=new mxCellState,$lastMoving_s1_scale$$=this.graph.getView().scale,$createEqGuide_tolerance$$=Math.max(2,this.getGuideTolerance()/2);$eqPoint_newState$$.x=
$bounds$$.x+$newX_xShift$$;$eqPoint_newState$$.y=$bounds$$.y+$newY_yShift$$;$eqPoint_newState$$.width=$bounds$$.width;$eqPoint_newState$$.height=$bounds$$.height;for(var $newPoint_verticalCells$$=[],$guideEq_horizontalCells_p1$$=[],$firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<this.states.length;$firstI_firstMoving_i$$++){var $fixedDy_state$$=this.states[$firstI_firstMoving_i$$];$fixedDy_state$$ instanceof mxCellState&&($clone$$||!this.graph.isCellSelected($fixedDy_state$$.cell))&&(($eqPoint_newState$$.x>=
$fixedDy_state$$.x&&$eqPoint_newState$$.x<=$fixedDy_state$$.x+$fixedDy_state$$.width||$fixedDy_state$$.x>=$eqPoint_newState$$.x&&$fixedDy_state$$.x<=$eqPoint_newState$$.x+$eqPoint_newState$$.width)&&($eqPoint_newState$$.y>$fixedDy_state$$.y+$fixedDy_state$$.height+4||$eqPoint_newState$$.y+$eqPoint_newState$$.height+4<$fixedDy_state$$.y)?$newPoint_verticalCells$$.push($fixedDy_state$$):($eqPoint_newState$$.y>=$fixedDy_state$$.y&&$eqPoint_newState$$.y<=$fixedDy_state$$.y+$fixedDy_state$$.height||$fixedDy_state$$.y>=
$eqPoint_newState$$.y&&$fixedDy_state$$.y<=$eqPoint_newState$$.y+$eqPoint_newState$$.height)&&($eqPoint_newState$$.x>$fixedDy_state$$.x+$fixedDy_state$$.width+4||$eqPoint_newState$$.x+$eqPoint_newState$$.width+4<$fixedDy_state$$.x)&&$guideEq_horizontalCells_p1$$.push($fixedDy_state$$))}var $eqCy_firstX$$=0,$dy$jscomp$0$$=0,$midDy$$=$fixedDy_state$$=0,$eqCx_guidesArr$$=0,$dx$jscomp$0$$=0,$fixedDx_p2$$=0,$curArr_midDx$$=0,$shift$$=5*$lastMoving_s1_scale$$;if(1<$newPoint_verticalCells$$.length){$newPoint_verticalCells$$.push($eqPoint_newState$$);
$newPoint_verticalCells$$.sort(function($s1$$,$s2$$){return $s1$$.y-$s2$$.y});var $firstY_newStatePassed$$=!1,$firstI_firstMoving_i$$=$eqPoint_newState$$==$newPoint_verticalCells$$[0],$lastMoving_s1_scale$$=$eqPoint_newState$$==$newPoint_verticalCells$$[$newPoint_verticalCells$$.length-1];if(!$firstI_firstMoving_i$$&&!$lastMoving_s1_scale$$)for($firstI_firstMoving_i$$=1;$firstI_firstMoving_i$$<$newPoint_verticalCells$$.length-1;$firstI_firstMoving_i$$++)if($eqPoint_newState$$==$newPoint_verticalCells$$[$firstI_firstMoving_i$$]){$lastMoving_s1_scale$$=
$newPoint_verticalCells$$[$firstI_firstMoving_i$$-1];$firstI_firstMoving_i$$=$newPoint_verticalCells$$[$firstI_firstMoving_i$$+1];$fixedDy_state$$=$dy$jscomp$0$$=$midDy$$=($firstI_firstMoving_i$$.y-$lastMoving_s1_scale$$.y-$lastMoving_s1_scale$$.height-$eqPoint_newState$$.height)/2;break}for($firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<$newPoint_verticalCells$$.length-1;$firstI_firstMoving_i$$++){var $lastMoving_s1_scale$$=$newPoint_verticalCells$$[$firstI_firstMoving_i$$],$curDx_curDy_s2$$=
$newPoint_verticalCells$$[$firstI_firstMoving_i$$+1],$isMovingOne$$=$eqPoint_newState$$==$lastMoving_s1_scale$$||$eqPoint_newState$$==$curDx_curDy_s2$$,$curDx_curDy_s2$$=$curDx_curDy_s2$$.y-$lastMoving_s1_scale$$.y-$lastMoving_s1_scale$$.height,$firstY_newStatePassed$$=$firstY_newStatePassed$$|$eqPoint_newState$$==$lastMoving_s1_scale$$;if(0==$dy$jscomp$0$$&&0==$eqCy_firstX$$)$dy$jscomp$0$$=$curDx_curDy_s2$$,$eqCy_firstX$$=1;else if(Math.abs($dy$jscomp$0$$-$curDx_curDy_s2$$)<=($isMovingOne$$||1==
$firstI_firstMoving_i$$&&$firstY_newStatePassed$$?$createEqGuide_tolerance$$:0))$eqCy_firstX$$+=1;else if(1<$eqCy_firstX$$&&$firstY_newStatePassed$$){$newPoint_verticalCells$$=$newPoint_verticalCells$$.slice(0,$firstI_firstMoving_i$$+1);break}else if(3<=$newPoint_verticalCells$$.length-$firstI_firstMoving_i$$&&!$firstY_newStatePassed$$)$eqCy_firstX$$=0,$fixedDy_state$$=$dy$jscomp$0$$=0!=$midDy$$?$midDy$$:0,$newPoint_verticalCells$$.splice(0,0==$firstI_firstMoving_i$$?1:$firstI_firstMoving_i$$),$firstI_firstMoving_i$$=
-1;else break;0!=$fixedDy_state$$||$isMovingOne$$||($dy$jscomp$0$$=$fixedDy_state$$=$curDx_curDy_s2$$)}3==$newPoint_verticalCells$$.length&&$newPoint_verticalCells$$[1]==$eqPoint_newState$$&&($fixedDy_state$$=0)}if(1<$guideEq_horizontalCells_p1$$.length){$guideEq_horizontalCells_p1$$.push($eqPoint_newState$$);$guideEq_horizontalCells_p1$$.sort(function($s1$$,$s2$$){return $s1$$.x-$s2$$.x});$firstY_newStatePassed$$=!1;$firstI_firstMoving_i$$=$eqPoint_newState$$==$guideEq_horizontalCells_p1$$[0];$lastMoving_s1_scale$$=
$eqPoint_newState$$==$guideEq_horizontalCells_p1$$[$guideEq_horizontalCells_p1$$.length-1];if(!$firstI_firstMoving_i$$&&!$lastMoving_s1_scale$$)for($firstI_firstMoving_i$$=1;$firstI_firstMoving_i$$<$guideEq_horizontalCells_p1$$.length-1;$firstI_firstMoving_i$$++)if($eqPoint_newState$$==$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$]){$lastMoving_s1_scale$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$-1];$firstI_firstMoving_i$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$+
1];$fixedDx_p2$$=$dx$jscomp$0$$=$curArr_midDx$$=($firstI_firstMoving_i$$.x-$lastMoving_s1_scale$$.x-$lastMoving_s1_scale$$.width-$eqPoint_newState$$.width)/2;break}for($firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<$guideEq_horizontalCells_p1$$.length-1;$firstI_firstMoving_i$$++){$lastMoving_s1_scale$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$];$curDx_curDy_s2$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$+1];$isMovingOne$$=$eqPoint_newState$$==$lastMoving_s1_scale$$||$eqPoint_newState$$==
$curDx_curDy_s2$$;$curDx_curDy_s2$$=$curDx_curDy_s2$$.x-$lastMoving_s1_scale$$.x-$lastMoving_s1_scale$$.width;$firstY_newStatePassed$$|=$eqPoint_newState$$==$lastMoving_s1_scale$$;if(0==$dx$jscomp$0$$&&0==$eqCx_guidesArr$$)$dx$jscomp$0$$=$curDx_curDy_s2$$,$eqCx_guidesArr$$=1;else if(Math.abs($dx$jscomp$0$$-$curDx_curDy_s2$$)<=($isMovingOne$$||1==$firstI_firstMoving_i$$&&$firstY_newStatePassed$$?$createEqGuide_tolerance$$:0))$eqCx_guidesArr$$+=1;else if(1<$eqCx_guidesArr$$&&$firstY_newStatePassed$$){$guideEq_horizontalCells_p1$$=
$guideEq_horizontalCells_p1$$.slice(0,$firstI_firstMoving_i$$+1);break}else if(3<=$guideEq_horizontalCells_p1$$.length-$firstI_firstMoving_i$$&&!$firstY_newStatePassed$$)$eqCx_guidesArr$$=0,$fixedDx_p2$$=$dx$jscomp$0$$=0!=$curArr_midDx$$?$curArr_midDx$$:0,$guideEq_horizontalCells_p1$$.splice(0,0==$firstI_firstMoving_i$$?1:$firstI_firstMoving_i$$),$firstI_firstMoving_i$$=-1;else break;0!=$fixedDx_p2$$||$isMovingOne$$||($dx$jscomp$0$$=$fixedDx_p2$$=$curDx_curDy_s2$$)}3==$guideEq_horizontalCells_p1$$.length&&
$guideEq_horizontalCells_p1$$[1]==$eqPoint_newState$$&&($fixedDx_p2$$=0)}$createEqGuide_tolerance$$=function $$createEqGuide_tolerance$$$($guideEq$jscomp$1_p1$$,$p2$$,$curGuide$$,$dx$$){var $points$$=[],$dy$$;$dx$$?($dx$$=$shift$$,$dy$$=0):($dx$$=0,$dy$$=$shift$$);$points$$.push(new mxPoint($guideEq$jscomp$1_p1$$.x-$dx$$,$guideEq$jscomp$1_p1$$.y-$dy$$));$points$$.push(new mxPoint($guideEq$jscomp$1_p1$$.x+$dx$$,$guideEq$jscomp$1_p1$$.y+$dy$$));$points$$.push($guideEq$jscomp$1_p1$$);$points$$.push($p2$$);
$points$$.push(new mxPoint($p2$$.x-$dx$$,$p2$$.y-$dy$$));$points$$.push(new mxPoint($p2$$.x+$dx$$,$p2$$.y+$dy$$));if(null!=$curGuide$$)return $curGuide$$.points=$points$$,$curGuide$$;$guideEq$jscomp$1_p1$$=new mxPolyline($points$$,mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);$guideEq$jscomp$1_p1$$.dialect=mxConstants.DIALECT_SVG;$guideEq$jscomp$1_p1$$.pointerEvents=!1;$guideEq$jscomp$1_p1$$.init($guide$$.graph.getView().getOverlayPane());return $guideEq$jscomp$1_p1$$};$dx$jscomp$0$$=function $$dx$jscomp$0$$$($horizontal$$,
$vertical$$){if($horizontal$$&&null!=$guide$$.guidesArrHor)for(var $i$$=0;$i$$<$guide$$.guidesArrHor.length;$i$$++)$guide$$.guidesArrHor[$i$$].node.style.visibility="hidden";if($vertical$$&&null!=$guide$$.guidesArrVer)for($i$$=0;$i$$<$guide$$.guidesArrVer.length;$i$$++)$guide$$.guidesArrVer[$i$$].node.style.visibility="hidden"};if(1<$eqCx_guidesArr$$&&$eqCx_guidesArr$$==$guideEq_horizontalCells_p1$$.length-1){$eqCx_guidesArr$$=[];$curArr_midDx$$=$guide$$.guidesArrHor;$hPoints_hasHorGuides$$=[];$newX_xShift$$=
0;$firstI_firstMoving_i$$=$guideEq_horizontalCells_p1$$[0]==$eqPoint_newState$$?1:0;$firstY_newStatePassed$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$].y+$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$].height;if(0<$fixedDx_p2$$)for($firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<$guideEq_horizontalCells_p1$$.length-1;$firstI_firstMoving_i$$++)$lastMoving_s1_scale$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$],$curDx_curDy_s2$$=$guideEq_horizontalCells_p1$$[$firstI_firstMoving_i$$+
1],$eqPoint_newState$$==$lastMoving_s1_scale$$?($newX_xShift$$=$curDx_curDy_s2$$.x-$lastMoving_s1_scale$$.width-$fixedDx_p2$$,$hPoints_hasHorGuides$$.push(new mxPoint($newX_xShift$$+$lastMoving_s1_scale$$.width+$shift$$,$firstY_newStatePassed$$)),$hPoints_hasHorGuides$$.push(new mxPoint($curDx_curDy_s2$$.x-$shift$$,$firstY_newStatePassed$$))):$eqPoint_newState$$==$curDx_curDy_s2$$?($hPoints_hasHorGuides$$.push(new mxPoint($lastMoving_s1_scale$$.x+$lastMoving_s1_scale$$.width+$shift$$,$firstY_newStatePassed$$)),
$newX_xShift$$=$lastMoving_s1_scale$$.x+$lastMoving_s1_scale$$.width+$fixedDx_p2$$,$hPoints_hasHorGuides$$.push(new mxPoint($newX_xShift$$-$shift$$,$firstY_newStatePassed$$))):($hPoints_hasHorGuides$$.push(new mxPoint($lastMoving_s1_scale$$.x+$lastMoving_s1_scale$$.width+$shift$$,$firstY_newStatePassed$$)),$hPoints_hasHorGuides$$.push(new mxPoint($curDx_curDy_s2$$.x-$shift$$,$firstY_newStatePassed$$)));else $lastMoving_s1_scale$$=$guideEq_horizontalCells_p1$$[0],$firstI_firstMoving_i$$=$guideEq_horizontalCells_p1$$[2],
$newX_xShift$$=$lastMoving_s1_scale$$.x+$lastMoving_s1_scale$$.width+($firstI_firstMoving_i$$.x-$lastMoving_s1_scale$$.x-$lastMoving_s1_scale$$.width-$eqPoint_newState$$.width)/2,$hPoints_hasHorGuides$$.push(new mxPoint($lastMoving_s1_scale$$.x+$lastMoving_s1_scale$$.width+$shift$$,$firstY_newStatePassed$$)),$hPoints_hasHorGuides$$.push(new mxPoint($newX_xShift$$-$shift$$,$firstY_newStatePassed$$)),$hPoints_hasHorGuides$$.push(new mxPoint($newX_xShift$$+$eqPoint_newState$$.width+$shift$$,$firstY_newStatePassed$$)),
$hPoints_hasHorGuides$$.push(new mxPoint($firstI_firstMoving_i$$.x-$shift$$,$firstY_newStatePassed$$));for($firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<$hPoints_hasHorGuides$$.length;$firstI_firstMoving_i$$+=2)$guideEq_horizontalCells_p1$$=$hPoints_hasHorGuides$$[$firstI_firstMoving_i$$],$fixedDx_p2$$=$hPoints_hasHorGuides$$[$firstI_firstMoving_i$$+1],$guideEq_horizontalCells_p1$$=$createEqGuide_tolerance$$($guideEq_horizontalCells_p1$$,$fixedDx_p2$$,null!=$curArr_midDx$$?$curArr_midDx$$[$firstI_firstMoving_i$$/
2]:null),$guideEq_horizontalCells_p1$$.node.style.visibility="visible",$guideEq_horizontalCells_p1$$.redraw(),$eqCx_guidesArr$$.push($guideEq_horizontalCells_p1$$);for($firstI_firstMoving_i$$=$hPoints_hasHorGuides$$.length/2;null!=$curArr_midDx$$&&$firstI_firstMoving_i$$<$curArr_midDx$$.length;$firstI_firstMoving_i$$++)$curArr_midDx$$[$firstI_firstMoving_i$$].destroy();$guide$$.guidesArrHor=$eqCx_guidesArr$$;$newX_xShift$$-=$bounds$$.x;$hPoints_hasHorGuides$$=!0}else $dx$jscomp$0$$(!0);if(1<$eqCy_firstX$$&&
$eqCy_firstX$$==$newPoint_verticalCells$$.length-1){$eqCx_guidesArr$$=[];$curArr_midDx$$=$guide$$.guidesArrVer;$hasVerGuides_vPoints$$=[];$newY_yShift$$=0;$firstI_firstMoving_i$$=$newPoint_verticalCells$$[0]==$eqPoint_newState$$?1:0;$eqCy_firstX$$=$newPoint_verticalCells$$[$firstI_firstMoving_i$$].x+$newPoint_verticalCells$$[$firstI_firstMoving_i$$].width;if(0<$fixedDy_state$$)for($firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<$newPoint_verticalCells$$.length-1;$firstI_firstMoving_i$$++)$lastMoving_s1_scale$$=
$newPoint_verticalCells$$[$firstI_firstMoving_i$$],$curDx_curDy_s2$$=$newPoint_verticalCells$$[$firstI_firstMoving_i$$+1],$eqPoint_newState$$==$lastMoving_s1_scale$$?($newY_yShift$$=$curDx_curDy_s2$$.y-$lastMoving_s1_scale$$.height-$fixedDy_state$$,$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$newY_yShift$$+$lastMoving_s1_scale$$.height+$shift$$)),$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$curDx_curDy_s2$$.y-$shift$$))):$eqPoint_newState$$==$curDx_curDy_s2$$?($hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,
$lastMoving_s1_scale$$.y+$lastMoving_s1_scale$$.height+$shift$$)),$newY_yShift$$=$lastMoving_s1_scale$$.y+$lastMoving_s1_scale$$.height+$fixedDy_state$$,$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$newY_yShift$$-$shift$$))):($hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$lastMoving_s1_scale$$.y+$lastMoving_s1_scale$$.height+$shift$$)),$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$curDx_curDy_s2$$.y-$shift$$)));else $lastMoving_s1_scale$$=$newPoint_verticalCells$$[0],
$firstI_firstMoving_i$$=$newPoint_verticalCells$$[2],$newY_yShift$$=$lastMoving_s1_scale$$.y+$lastMoving_s1_scale$$.height+($firstI_firstMoving_i$$.y-$lastMoving_s1_scale$$.y-$lastMoving_s1_scale$$.height-$eqPoint_newState$$.height)/2,$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$lastMoving_s1_scale$$.y+$lastMoving_s1_scale$$.height+$shift$$)),$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$newY_yShift$$-$shift$$)),$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$newY_yShift$$+
$eqPoint_newState$$.height+$shift$$)),$hasVerGuides_vPoints$$.push(new mxPoint($eqCy_firstX$$,$firstI_firstMoving_i$$.y-$shift$$));for($firstI_firstMoving_i$$=0;$firstI_firstMoving_i$$<$hasVerGuides_vPoints$$.length;$firstI_firstMoving_i$$+=2)$guideEq_horizontalCells_p1$$=$hasVerGuides_vPoints$$[$firstI_firstMoving_i$$],$fixedDx_p2$$=$hasVerGuides_vPoints$$[$firstI_firstMoving_i$$+1],$guideEq_horizontalCells_p1$$=$createEqGuide_tolerance$$($guideEq_horizontalCells_p1$$,$fixedDx_p2$$,null!=$curArr_midDx$$?
$curArr_midDx$$[$firstI_firstMoving_i$$/2]:null,!0),$guideEq_horizontalCells_p1$$.node.style.visibility="visible",$guideEq_horizontalCells_p1$$.redraw(),$eqCx_guidesArr$$.push($guideEq_horizontalCells_p1$$);for($firstI_firstMoving_i$$=$hasVerGuides_vPoints$$.length/2;null!=$curArr_midDx$$&&$firstI_firstMoving_i$$<$curArr_midDx$$.length;$firstI_firstMoving_i$$++)$curArr_midDx$$[$firstI_firstMoving_i$$].destroy();$guide$$.guidesArrVer=$eqCx_guidesArr$$;$newY_yShift$$-=$bounds$$.y;$hasVerGuides_vPoints$$=
!0}else $dx$jscomp$0$$(!1,!0)}if($hPoints_hasHorGuides$$||$hasVerGuides_vPoints$$)return $eqPoint_newState$$=new mxPoint($newX_xShift$$,$newY_yShift$$),$newPoint_verticalCells$$=$guideMove$$.call(this,$bounds$$,$eqPoint_newState$$,$gridEnabled$$,$clone$$),$hPoints_hasHorGuides$$&&!$hasVerGuides_vPoints$$?$eqPoint_newState$$.y=$newPoint_verticalCells$$.y:$hasVerGuides_vPoints$$&&!$hPoints_hasHorGuides$$&&($eqPoint_newState$$.x=$newPoint_verticalCells$$.x),$newPoint_verticalCells$$.y!=$eqPoint_newState$$.y&&
null!=this.guideY&&null!=this.guideY.node&&(this.guideY.node.style.visibility="hidden"),$newPoint_verticalCells$$.x!=$eqPoint_newState$$.x&&null!=this.guideX&&null!=this.guideX.node&&(this.guideX.node.style.visibility="hidden"),$eqPoint_newState$$;$dx$jscomp$0$$(!0,!0);return $guideMove$$.apply(this,arguments)};var $guideSetVisible$$=mxGuide.prototype.setVisible;mxGuide.prototype.setVisible=function $mxGuide$$setVisible$($visible$$){$guideSetVisible$$.call(this,$visible$$);var $guidesArrVer$$=this.guidesArrVer,
$guidesArrHor$$=this.guidesArrHor;if(null!=$guidesArrVer$$)for(var $i$$=0;$i$$<$guidesArrVer$$.length;$i$$++)$guidesArrVer$$[$i$$].node.style.visibility=$visible$$?"visible":"hidden";if(null!=$guidesArrHor$$)for($i$$=0;$i$$<$guidesArrHor$$.length;$i$$++)$guidesArrHor$$[$i$$].node.style.visibility=$visible$$?"visible":"hidden"};var $guideDestroy$$=mxGuide.prototype.destroy;mxGuide.prototype.destroy=function $mxGuide$$destroy$(){$guideDestroy$$.call(this);var $guidesArrVer$$=this.guidesArrVer,$guidesArrHor$$=
this.guidesArrHor;if(null!=$guidesArrVer$$){for(var $i$$=0;$i$$<$guidesArrVer$$.length;$i$$++)$guidesArrVer$$[$i$$].destroy();this.guidesArrVer=null}if(null!=$guidesArrHor$$){for($i$$=0;$i$$<$guidesArrHor$$.length;$i$$++)$guidesArrHor$$[$i$$].destroy();this.guidesArrHor=null}}})();